const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BY1xr8ZY.js","./NavBar-C8YIurnp.js","./NavBar-DlA4sYqf.css","./index-D8LdHVpp.css","./index-t3Apu8R5.js","./index-sTUgm5Jg.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Om(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const Tt={},Za=[],Ts=()=>{},gD=()=>!1,Od=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rm=t=>t.startsWith("onUpdate:"),di=Object.assign,Mm=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},yD=Object.prototype.hasOwnProperty,gt=(t,e)=>yD.call(t,e),Ke=Array.isArray,Il=t=>Rd(t)==="[object Map]",vD=t=>Rd(t)==="[object Set]",Je=t=>typeof t=="function",Vt=t=>typeof t=="string",Ta=t=>typeof t=="symbol",Ht=t=>t!==null&&typeof t=="object",aT=t=>(Ht(t)||Je(t))&&Je(t.then)&&Je(t.catch),bD=Object.prototype.toString,Rd=t=>bD.call(t),_D=t=>Rd(t).slice(8,-1),TD=t=>Rd(t)==="[object Object]",Lm=t=>Vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pl=Om(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Md=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},xD=/-(\w)/g,vn=Md(t=>t.replace(xD,(e,i)=>i?i.toUpperCase():"")),SD=/\B([A-Z])/g,tr=Md(t=>t.replace(SD,"-$1").toLowerCase()),Ld=Md(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wh=Md(t=>t?`on${Ld(t)}`:""),kr=(t,e)=>!Object.is(t,e),Gh=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},oT=(t,e,i,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:i})},wD=t=>{const e=parseFloat(t);return isNaN(e)?t:e},CD=t=>{const e=Vt(t)?Number(t):NaN;return isNaN(e)?t:e};let iy;const Bd=()=>iy||(iy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _u(t){if(Ke(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=Vt(n)?AD(n):_u(n);if(s)for(const r in s)e[r]=s[r]}return e}else if(Vt(t)||Ht(t))return t}const ED=/;(?![^(]*\))/g,DD=/:([^]+)/,kD=/\/\*[^]*?\*\//g;function AD(t){const e={};return t.replace(kD,"").split(ED).forEach(i=>{if(i){const n=i.split(DD);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ID(t){if(!t)return"";if(Vt(t))return t;let e="";for(const i in t){const n=t[i];if(Vt(n)||typeof n=="number"){const s=i.startsWith("--")?i:tr(i);e+=`${s}:${n};`}}return e}function Nd(t){let e="";if(Vt(t))e=t;else if(Ke(t))for(let i=0;i<t.length;i++){const n=Nd(t[i]);n&&(e+=n+" ")}else if(Ht(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const PD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OD=Om(PD);function lT(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let en;class uT{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=en,!e&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=en;try{return en=this,e()}finally{en=i}}}on(){en=this}off(){en=this.parent}stop(e){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function RD(t){return new uT(t)}function MD(){return en}let xt;const Xh=new WeakSet;class cT{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,en&&en.active&&en.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xh.has(this)&&(Xh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ny(this),fT(this);const e=xt,i=Nn;xt=this,Nn=!0;try{return this.fn()}finally{pT(this),xt=e,Nn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fm(e);this.deps=this.depsTail=void 0,ny(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wp(this)&&this.run()}get dirty(){return wp(this)}}let dT=0,Ol,Rl;function hT(t,e=!1){if(t.flags|=8,e){t.next=Rl,Rl=t;return}t.next=Ol,Ol=t}function Bm(){dT++}function Nm(){if(--dT>0)return;if(Rl){let e=Rl;for(Rl=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Ol;){let e=Ol;for(Ol=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=i}}if(t)throw t}function fT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function pT(t){let e,i=t.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Fm(n),LD(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=i}function wp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function mT(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zl))return;t.globalVersion=Zl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!wp(t)){t.flags&=-3;return}const i=xt,n=Nn;xt=t,Nn=!0;try{fT(t);const s=t.fn(t._value);(e.version===0||kr(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{xt=i,Nn=n,pT(t),t.flags&=-3}}function Fm(t,e=!1){const{dep:i,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),i.subs===t&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Fm(r,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function LD(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Nn=!0;const gT=[];function Mr(){gT.push(Nn),Nn=!1}function Lr(){const t=gT.pop();Nn=t===void 0?!0:t}function ny(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=xt;xt=void 0;try{e()}finally{xt=i}}}let Zl=0;class BD{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $m{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xt||!Nn||xt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==xt)i=this.activeLink=new BD(xt,this),xt.deps?(i.prevDep=xt.depsTail,xt.depsTail.nextDep=i,xt.depsTail=i):xt.deps=xt.depsTail=i,yT(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=xt.depsTail,i.nextDep=void 0,xt.depsTail.nextDep=i,xt.depsTail=i,xt.deps===i&&(xt.deps=n)}return i}trigger(e){this.version++,Zl++,this.notify(e)}notify(e){Bm();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Nm()}}}function yT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)yT(n)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Cp=new WeakMap,oa=Symbol(""),Ep=Symbol(""),Jl=Symbol("");function xi(t,e,i){if(Nn&&xt){let n=Cp.get(t);n||Cp.set(t,n=new Map);let s=n.get(i);s||(n.set(i,s=new $m),s.map=n,s.key=i),s.track()}}function zs(t,e,i,n,s,r){const a=Cp.get(t);if(!a){Zl++;return}const o=l=>{l&&l.trigger()};if(Bm(),e==="clear")a.forEach(o);else{const l=Ke(t),u=l&&Lm(i);if(l&&i==="length"){const c=Number(n);a.forEach((d,f)=>{(f==="length"||f===Jl||!Ta(f)&&f>=c)&&o(d)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),u&&o(a.get(Jl)),e){case"add":l?u&&o(a.get("length")):(o(a.get(oa)),Il(t)&&o(a.get(Ep)));break;case"delete":l||(o(a.get(oa)),Il(t)&&o(a.get(Ep)));break;case"set":Il(t)&&o(a.get(oa));break}}Nm()}function ka(t){const e=ht(t);return e===t?e:(xi(e,"iterate",Jl),Fn(t)?e:e.map($i))}function Um(t){return xi(t=ht(t),"iterate",Jl),t}const ND={__proto__:null,[Symbol.iterator](){return Kh(this,Symbol.iterator,$i)},concat(...t){return ka(this).concat(...t.map(e=>Ke(e)?ka(e):e))},entries(){return Kh(this,"entries",t=>(t[1]=$i(t[1]),t))},every(t,e){return Os(this,"every",t,e,void 0,arguments)},filter(t,e){return Os(this,"filter",t,e,i=>i.map($i),arguments)},find(t,e){return Os(this,"find",t,e,$i,arguments)},findIndex(t,e){return Os(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Os(this,"findLast",t,e,$i,arguments)},findLastIndex(t,e){return Os(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Os(this,"forEach",t,e,void 0,arguments)},includes(...t){return Yh(this,"includes",t)},indexOf(...t){return Yh(this,"indexOf",t)},join(t){return ka(this).join(t)},lastIndexOf(...t){return Yh(this,"lastIndexOf",t)},map(t,e){return Os(this,"map",t,e,void 0,arguments)},pop(){return cl(this,"pop")},push(...t){return cl(this,"push",t)},reduce(t,...e){return sy(this,"reduce",t,e)},reduceRight(t,...e){return sy(this,"reduceRight",t,e)},shift(){return cl(this,"shift")},some(t,e){return Os(this,"some",t,e,void 0,arguments)},splice(...t){return cl(this,"splice",t)},toReversed(){return ka(this).toReversed()},toSorted(t){return ka(this).toSorted(t)},toSpliced(...t){return ka(this).toSpliced(...t)},unshift(...t){return cl(this,"unshift",t)},values(){return Kh(this,"values",$i)}};function Kh(t,e,i){const n=Um(t),s=n[e]();return n!==t&&!Fn(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const FD=Array.prototype;function Os(t,e,i,n,s,r){const a=Um(t),o=a!==t&&!Fn(t),l=a[e];if(l!==FD[e]){const d=l.apply(t,r);return o?$i(d):d}let u=i;a!==t&&(o?u=function(d,f){return i.call(this,$i(d),f,t)}:i.length>2&&(u=function(d,f){return i.call(this,d,f,t)}));const c=l.call(a,u,n);return o&&s?s(c):c}function sy(t,e,i,n){const s=Um(t);let r=i;return s!==t&&(Fn(t)?i.length>3&&(r=function(a,o,l){return i.call(this,a,o,l,t)}):r=function(a,o,l){return i.call(this,a,$i(o),l,t)}),s[e](r,...n)}function Yh(t,e,i){const n=ht(t);xi(n,"iterate",Jl);const s=n[e](...i);return(s===-1||s===!1)&&Hm(i[0])?(i[0]=ht(i[0]),n[e](...i)):s}function cl(t,e,i=[]){Mr(),Bm();const n=ht(t)[e].apply(t,i);return Nm(),Lr(),n}const $D=Om("__proto__,__v_isRef,__isVue"),vT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ta));function UD(t){Ta(t)||(t=String(t));const e=ht(this);return xi(e,"has",t),e.hasOwnProperty(t)}class bT{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){if(i==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?YD:ST:r?xT:TT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=Ke(e);if(!s){let l;if(a&&(l=ND[i]))return l;if(i==="hasOwnProperty")return UD}const o=Reflect.get(e,i,gi(e)?e:n);return(Ta(i)?vT.has(i):$D(i))||(s||xi(e,"get",i),r)?o:gi(o)?a&&Lm(i)?o:o.value:Ht(o)?s?CT(o):Mt(o):o}}class _T extends bT{constructor(e=!1){super(!1,e)}set(e,i,n,s){let r=e[i];if(!this._isShallow){const l=ma(r);if(!Fn(n)&&!ma(n)&&(r=ht(r),n=ht(n)),!Ke(e)&&gi(r)&&!gi(n))return l?!1:(r.value=n,!0)}const a=Ke(e)&&Lm(i)?Number(i)<e.length:gt(e,i),o=Reflect.set(e,i,n,gi(e)?e:s);return e===ht(s)&&(a?kr(n,r)&&zs(e,"set",i,n):zs(e,"add",i,n)),o}deleteProperty(e,i){const n=gt(e,i);e[i];const s=Reflect.deleteProperty(e,i);return s&&n&&zs(e,"delete",i,void 0),s}has(e,i){const n=Reflect.has(e,i);return(!Ta(i)||!vT.has(i))&&xi(e,"has",i),n}ownKeys(e){return xi(e,"iterate",Ke(e)?"length":oa),Reflect.ownKeys(e)}}class zD extends bT{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const VD=new _T,HD=new zD,qD=new _T(!0);const Dp=t=>t,sc=t=>Reflect.getPrototypeOf(t);function jD(t,e,i){return function(...n){const s=this.__v_raw,r=ht(s),a=Il(r),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=s[t](...n),c=i?Dp:e?kp:$i;return!e&&xi(r,"iterate",l?Ep:oa),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function rc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function WD(t,e){const i={get(s){const r=this.__v_raw,a=ht(r),o=ht(s);t||(kr(s,o)&&xi(a,"get",s),xi(a,"get",o));const{has:l}=sc(a),u=e?Dp:t?kp:$i;if(l.call(a,s))return u(r.get(s));if(l.call(a,o))return u(r.get(o));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!t&&xi(ht(s),"iterate",oa),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,a=ht(r),o=ht(s);return t||(kr(s,o)&&xi(a,"has",s),xi(a,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const a=this,o=a.__v_raw,l=ht(o),u=e?Dp:t?kp:$i;return!t&&xi(l,"iterate",oa),o.forEach((c,d)=>s.call(r,u(c),u(d),a))}};return di(i,t?{add:rc("add"),set:rc("set"),delete:rc("delete"),clear:rc("clear")}:{add(s){!e&&!Fn(s)&&!ma(s)&&(s=ht(s));const r=ht(this);return sc(r).has.call(r,s)||(r.add(s),zs(r,"add",s,s)),this},set(s,r){!e&&!Fn(r)&&!ma(r)&&(r=ht(r));const a=ht(this),{has:o,get:l}=sc(a);let u=o.call(a,s);u||(s=ht(s),u=o.call(a,s));const c=l.call(a,s);return a.set(s,r),u?kr(r,c)&&zs(a,"set",s,r):zs(a,"add",s,r),this},delete(s){const r=ht(this),{has:a,get:o}=sc(r);let l=a.call(r,s);l||(s=ht(s),l=a.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return l&&zs(r,"delete",s,void 0),u},clear(){const s=ht(this),r=s.size!==0,a=s.clear();return r&&zs(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=jD(s,t,e)}),i}function zm(t,e){const i=WD(t,e);return(n,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(gt(i,s)&&s in n?i:n,s,r)}const GD={get:zm(!1,!1)},XD={get:zm(!1,!0)},KD={get:zm(!0,!1)};const TT=new WeakMap,xT=new WeakMap,ST=new WeakMap,YD=new WeakMap;function QD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ZD(t){return t.__v_skip||!Object.isExtensible(t)?0:QD(_D(t))}function Mt(t){return ma(t)?t:Vm(t,!1,VD,GD,TT)}function wT(t){return Vm(t,!1,qD,XD,xT)}function CT(t){return Vm(t,!0,HD,KD,ST)}function Vm(t,e,i,n,s){if(!Ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const a=ZD(t);if(a===0)return t;const o=new Proxy(t,a===2?n:i);return s.set(t,o),o}function Ml(t){return ma(t)?Ml(t.__v_raw):!!(t&&t.__v_isReactive)}function ma(t){return!!(t&&t.__v_isReadonly)}function Fn(t){return!!(t&&t.__v_isShallow)}function Hm(t){return t?!!t.__v_raw:!1}function ht(t){const e=t&&t.__v_raw;return e?ht(e):t}function ET(t){return!gt(t,"__v_skip")&&Object.isExtensible(t)&&oT(t,"__v_skip",!0),t}const $i=t=>Ht(t)?Mt(t):t,kp=t=>Ht(t)?CT(t):t;function gi(t){return t?t.__v_isRef===!0:!1}function oe(t){return DT(t,!1)}function JD(t){return DT(t,!0)}function DT(t,e){return gi(t)?t:new ek(t,e)}class ek{constructor(e,i){this.dep=new $m,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:ht(e),this._value=i?e:$i(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,n=this.__v_isShallow||Fn(e)||ma(e);e=n?e:ht(e),kr(e,i)&&(this._rawValue=e,this._value=n?e:$i(e),this.dep.trigger())}}function mn(t){return gi(t)?t.value:t}const tk={get:(t,e,i)=>e==="__v_raw"?t:mn(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return gi(s)&&!gi(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function kT(t){return Ml(t)?t:new Proxy(t,tk)}class ik{constructor(e,i,n){this.fn=e,this.setter=i,this._value=void 0,this.dep=new $m(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return hT(this,!0),!0}get value(){const e=this.dep.track();return mT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nk(t,e,i=!1){let n,s;return Je(t)?n=t:(n=t.get,s=t.set),new ik(n,s,i)}const ac={},Gc=new WeakMap;let ea;function sk(t,e=!1,i=ea){if(i){let n=Gc.get(i);n||Gc.set(i,n=[]),n.push(t)}}function rk(t,e,i=Tt){const{immediate:n,deep:s,once:r,scheduler:a,augmentJob:o,call:l}=i,u=k=>s?k:Fn(k)||s===!1||s===0?Vs(k,1):Vs(k);let c,d,f,p,b=!1,g=!1;if(gi(t)?(d=()=>t.value,b=Fn(t)):Ml(t)?(d=()=>u(t),b=!0):Ke(t)?(g=!0,b=t.some(k=>Ml(k)||Fn(k)),d=()=>t.map(k=>{if(gi(k))return k.value;if(Ml(k))return u(k);if(Je(k))return l?l(k,2):k()})):Je(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Mr();try{f()}finally{Lr()}}const k=ea;ea=c;try{return l?l(t,3,[p]):t(p)}finally{ea=k}}:d=Ts,e&&s){const k=d,D=s===!0?1/0:s;d=()=>Vs(k(),D)}const _=MD(),w=()=>{c.stop(),_&&_.active&&Mm(_.effects,c)};if(r&&e){const k=e;e=(...D)=>{k(...D),w()}}let x=g?new Array(t.length).fill(ac):ac;const C=k=>{if(!(!(c.flags&1)||!c.dirty&&!k))if(e){const D=c.run();if(s||b||(g?D.some((R,M)=>kr(R,x[M])):kr(D,x))){f&&f();const R=ea;ea=c;try{const M=[D,x===ac?void 0:g&&x[0]===ac?[]:x,p];l?l(e,3,M):e(...M),x=D}finally{ea=R}}}else c.run()};return o&&o(C),c=new cT(d),c.scheduler=a?()=>a(C,!1):C,p=k=>sk(k,!1,c),f=c.onStop=()=>{const k=Gc.get(c);if(k){if(l)l(k,4);else for(const D of k)D();Gc.delete(c)}},e?n?C(!0):x=c.run():a?a(C.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function Vs(t,e=1/0,i){if(e<=0||!Ht(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,gi(t))Vs(t.value,e,i);else if(Ke(t))for(let n=0;n<t.length;n++)Vs(t[n],e,i);else if(vD(t)||Il(t))t.forEach(n=>{Vs(n,e,i)});else if(TD(t)){for(const n in t)Vs(t[n],e,i);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Vs(t[n],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tu(t,e,i,n){try{return n?t(...n):t()}catch(s){Fd(s,e,i)}}function jn(t,e,i,n){if(Je(t)){const s=Tu(t,e,i,n);return s&&aT(s)&&s.catch(r=>{Fd(r,e,i)}),s}if(Ke(t)){const s=[];for(let r=0;r<t.length;r++)s.push(jn(t[r],e,i,n));return s}}function Fd(t,e,i,n=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Tt;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}o=o.parent}if(r){Mr(),Tu(r,null,10,[t,l,u]),Lr();return}}ak(t,i,s,n,a)}function ak(t,e,i,n=!0,s=!1){if(s)throw t;console.error(t)}const Ui=[];let fs=-1;const Ja=[];let _r=null,Wa=0;const AT=Promise.resolve();let Xc=null;function et(t){const e=Xc||AT;return t?e.then(this?t.bind(this):t):e}function ok(t){let e=fs+1,i=Ui.length;for(;e<i;){const n=e+i>>>1,s=Ui[n],r=eu(s);r<t||r===t&&s.flags&2?e=n+1:i=n}return e}function qm(t){if(!(t.flags&1)){const e=eu(t),i=Ui[Ui.length-1];!i||!(t.flags&2)&&e>=eu(i)?Ui.push(t):Ui.splice(ok(e),0,t),t.flags|=1,IT()}}function IT(){Xc||(Xc=AT.then(OT))}function lk(t){Ke(t)?Ja.push(...t):_r&&t.id===-1?_r.splice(Wa+1,0,t):t.flags&1||(Ja.push(t),t.flags|=1),IT()}function ry(t,e,i=fs+1){for(;i<Ui.length;i++){const n=Ui[i];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Ui.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function PT(t){if(Ja.length){const e=[...new Set(Ja)].sort((i,n)=>eu(i)-eu(n));if(Ja.length=0,_r){_r.push(...e);return}for(_r=e,Wa=0;Wa<_r.length;Wa++){const i=_r[Wa];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}_r=null,Wa=0}}const eu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function OT(t){try{for(fs=0;fs<Ui.length;fs++){const e=Ui[fs];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Tu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;fs<Ui.length;fs++){const e=Ui[fs];e&&(e.flags&=-2)}fs=-1,Ui.length=0,PT(),Xc=null,(Ui.length||Ja.length)&&OT()}}let ai=null,RT=null;function Kc(t){const e=ai;return ai=t,RT=t&&t.type.__scopeId||null,e}function uk(t,e=ai,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&by(-1);const r=Kc(e);let a;try{a=t(...s)}finally{Kc(r),n._d&&by(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function ui(t,e){if(ai===null)return t;const i=Vd(ai),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,a,o,l=Tt]=e[s];r&&(Je(r)&&(r={mounted:r,updated:r}),r.deep&&Vs(a),n.push({dir:r,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Wr(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[n];l&&(Mr(),jn(l,i,8,[t.el,o,t,e]),Lr())}}const MT=Symbol("_vte"),LT=t=>t.__isTeleport,Ll=t=>t&&(t.disabled||t.disabled===""),ay=t=>t&&(t.defer||t.defer===""),oy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ly=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ap=(t,e)=>{const i=t&&t.to;return Vt(i)?e?e(i):null:i},BT={name:"Teleport",__isTeleport:!0,process(t,e,i,n,s,r,a,o,l,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:b,createText:g,createComment:_}}=u,w=Ll(e.props);let{shapeFlag:x,children:C,dynamicChildren:k}=e;if(t==null){const D=e.el=g(""),R=e.anchor=g("");p(D,i,n),p(R,i,n);const M=(E,I)=>{x&16&&(s&&s.isCE&&(s.ce._teleportTarget=E),c(C,E,I,s,r,a,o,l))},P=()=>{const E=e.target=Ap(e.props,b),I=NT(E,e,g,p);E&&(a!=="svg"&&oy(E)?a="svg":a!=="mathml"&&ly(E)&&(a="mathml"),w||(M(E,I),Bc(e,!1)))};w&&(M(i,R),Bc(e,!0)),ay(e.props)?Fi(()=>{P(),e.el.__isMounted=!0},r):P()}else{if(ay(e.props)&&!t.el.__isMounted){Fi(()=>{BT.process(t,e,i,n,s,r,a,o,l,u),delete t.el.__isMounted},r);return}e.el=t.el,e.targetStart=t.targetStart;const D=e.anchor=t.anchor,R=e.target=t.target,M=e.targetAnchor=t.targetAnchor,P=Ll(t.props),E=P?i:R,I=P?D:M;if(a==="svg"||oy(R)?a="svg":(a==="mathml"||ly(R))&&(a="mathml"),k?(f(t.dynamicChildren,k,E,s,r,a,o),Wm(t,e,!0)):l||d(t,e,E,I,s,r,a,o,!1),w)P?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):oc(e,i,D,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=Ap(e.props,b);O&&oc(e,O,null,u,0)}else P&&oc(e,R,M,u,1);Bc(e,w)}},remove(t,e,i,{um:n,o:{remove:s}},r){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=t;if(d&&(s(u),s(c)),r&&s(l),a&16){const p=r||!Ll(f);for(let b=0;b<o.length;b++){const g=o[b];n(g,e,i,p,!!g.dynamicChildren)}}},move:oc,hydrate:ck};function oc(t,e,i,{o:{insert:n},m:s},r=2){r===0&&n(t.targetAnchor,e,i);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=t,d=r===2;if(d&&n(a,e,i),(!d||Ll(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],e,i,2);d&&n(o,e,i)}function ck(t,e,i,n,s,r,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},d){const f=e.target=Ap(e.props,l);if(f){const p=Ll(e.props),b=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)e.anchor=d(a(t),e,o(t),i,n,s,r),e.targetStart=b,e.targetAnchor=b&&a(b);else{e.anchor=a(t);let g=b;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}g=a(g)}e.targetAnchor||NT(f,e,c,u),d(b&&a(b),e,f,i,n,s,r)}Bc(e,p)}return e.anchor&&a(e.anchor)}const xa=BT;function Bc(t,e){const i=t.ctx;if(i&&i.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",i.uid),n=n.nextSibling;i.ut()}}function NT(t,e,i,n){const s=e.targetStart=i(""),r=e.targetAnchor=i("");return s[MT]=r,t&&(n(s,t),n(r,t)),r}const Tr=Symbol("_leaveCb"),lc=Symbol("_enterCb");function dk(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{t.isMounted=!0}),Qn(()=>{t.isUnmounting=!0}),t}const cn=[Function,Array],FT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cn,onEnter:cn,onAfterEnter:cn,onEnterCancelled:cn,onBeforeLeave:cn,onLeave:cn,onAfterLeave:cn,onLeaveCancelled:cn,onBeforeAppear:cn,onAppear:cn,onAfterAppear:cn,onAppearCancelled:cn},$T=t=>{const e=t.subTree;return e.component?$T(e.component):e},hk={name:"BaseTransition",props:FT,setup(t,{slots:e}){const i=Zn(),n=dk();return()=>{const s=e.default&&VT(e.default(),!0);if(!s||!s.length)return;const r=UT(s),a=ht(t),{mode:o}=a;if(n.isLeaving)return Qh(r);const l=uy(r);if(!l)return Qh(r);let u=Ip(l,a,n,i,d=>u=d);l.type!==pi&&tu(l,u);let c=i.subTree&&uy(i.subTree);if(c&&c.type!==pi&&!ia(l,c)&&$T(i).type!==pi){let d=Ip(c,a,n,i);if(tu(c,d),o==="out-in"&&l.type!==pi)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,i.job.flags&8||i.update(),delete d.afterLeave,c=void 0},Qh(r);o==="in-out"&&l.type!==pi?d.delayLeave=(f,p,b)=>{const g=zT(n,c);g[String(c.key)]=c,f[Tr]=()=>{p(),f[Tr]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function UT(t){let e=t[0];if(t.length>1){for(const i of t)if(i.type!==pi){e=i;break}}return e}const fk=hk;function zT(t,e){const{leavingVNodes:i}=t;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function Ip(t,e,i,n,s){const{appear:r,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:b,onLeaveCancelled:g,onBeforeAppear:_,onAppear:w,onAfterAppear:x,onAppearCancelled:C}=e,k=String(t.key),D=zT(i,t),R=(E,I)=>{E&&jn(E,n,9,I)},M=(E,I)=>{const O=I[1];R(E,I),Ke(E)?E.every(L=>L.length<=1)&&O():E.length<=1&&O()},P={mode:a,persisted:o,beforeEnter(E){let I=l;if(!i.isMounted)if(r)I=_||l;else return;E[Tr]&&E[Tr](!0);const O=D[k];O&&ia(t,O)&&O.el[Tr]&&O.el[Tr](),R(I,[E])},enter(E){let I=u,O=c,L=d;if(!i.isMounted)if(r)I=w||u,O=x||c,L=C||d;else return;let F=!1;const X=E[lc]=ee=>{F||(F=!0,ee?R(L,[E]):R(O,[E]),P.delayedLeave&&P.delayedLeave(),E[lc]=void 0)};I?M(I,[E,X]):X()},leave(E,I){const O=String(t.key);if(E[lc]&&E[lc](!0),i.isUnmounting)return I();R(f,[E]);let L=!1;const F=E[Tr]=X=>{L||(L=!0,I(),X?R(g,[E]):R(b,[E]),E[Tr]=void 0,D[O]===t&&delete D[O])};D[O]=t,p?M(p,[E,F]):F()},clone(E){const I=Ip(E,e,i,n,s);return s&&s(I),I}};return P}function Qh(t){if($d(t))return t=Pr(t),t.children=null,t}function uy(t){if(!$d(t))return LT(t.type)&&t.children?UT(t.children):t;const{shapeFlag:e,children:i}=t;if(i){if(e&16)return i[0];if(e&32&&Je(i.default))return i.default()}}function tu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function VT(t,e=!1,i){let n=[],s=0;for(let r=0;r<t.length;r++){let a=t[r];const o=i==null?a.key:String(i)+String(a.key!=null?a.key:r);a.type===zt?(a.patchFlag&128&&s++,n=n.concat(VT(a.children,e,o))):(e||a.type!==pi)&&n.push(o!=null?Pr(a,{key:o}):a)}if(s>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Te(t,e){return Je(t)?di({name:t.name},e,{setup:t}):t}function HT(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Yc(t,e,i,n,s=!1){if(Ke(t)){t.forEach((b,g)=>Yc(b,e&&(Ke(e)?e[g]:e),i,n,s));return}if(eo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Yc(t,e,i,n.component.subTree);return}const r=n.shapeFlag&4?Vd(n.component):n.el,a=s?null:r,{i:o,r:l}=t,u=e&&e.r,c=o.refs===Tt?o.refs={}:o.refs,d=o.setupState,f=ht(d),p=d===Tt?()=>!1:b=>gt(f,b);if(u!=null&&u!==l&&(Vt(u)?(c[u]=null,p(u)&&(d[u]=null)):gi(u)&&(u.value=null)),Je(l))Tu(l,o,12,[a,c]);else{const b=Vt(l),g=gi(l);if(b||g){const _=()=>{if(t.f){const w=b?p(l)?d[l]:c[l]:l.value;s?Ke(w)&&Mm(w,r):Ke(w)?w.includes(r)||w.push(r):b?(c[l]=[r],p(l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else b?(c[l]=a,p(l)&&(d[l]=a)):g&&(l.value=a,t.k&&(c[t.k]=a))};a?(_.id=-1,Fi(_,i)):_()}}}Bd().requestIdleCallback;Bd().cancelIdleCallback;const eo=t=>!!t.type.__asyncLoader,$d=t=>t.type.__isKeepAlive;function Ds(t,e){qT(t,"a",e)}function ks(t,e){qT(t,"da",e)}function qT(t,e,i=mi){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ud(e,n,i),i){let s=i.parent;for(;s&&s.parent;)$d(s.parent.vnode)&&pk(n,e,i,s),s=s.parent}}function pk(t,e,i,n){const s=Ud(e,t,n,!0);Ro(()=>{Mm(n[e],s)},i)}function Ud(t,e,i=mi,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...a)=>{Mr();const o=Su(i),l=jn(e,i,t,a);return o(),Lr(),l});return n?s.unshift(r):s.push(r),r}}const ir=t=>(e,i=mi)=>{(!su||t==="sp")&&Ud(t,(...n)=>e(...n),i)},mk=ir("bm"),Lt=ir("m"),jT=ir("bu"),WT=ir("u"),Qn=ir("bum"),Ro=ir("um"),gk=ir("sp"),yk=ir("rtg"),vk=ir("rtc");function bk(t,e=mi){Ud("ec",t,e)}const GT="components",_k="directives";function Tk(t,e){return XT(GT,t,!0,e)||t}const xk=Symbol.for("v-ndc");function Sk(t){return XT(_k,t)}function XT(t,e,i=!0,n=!1){const s=ai||mi;if(s){const r=s.type;if(t===GT){const o=uA(r,!1);if(o&&(o===e||o===vn(e)||o===Ld(vn(e))))return r}const a=cy(s[t]||r[t],e)||cy(s.appContext[t],e);return!a&&n?r:a}}function cy(t,e){return t&&(t[e]||t[vn(e)]||t[Ld(vn(e))])}function dj(t,e){for(let i=0;i<e.length;i++){const n=e[i];if(Ke(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const r=n.fn(...s);return r&&(r.key=n.key),r}:n.fn)}return t}function hj(t,e,i={},n,s){if(ai.ce||ai.parent&&eo(ai.parent)&&ai.parent.ce)return e!=="default"&&(i.name=e),Ir(),nu(zt,null,[T("slot",i,n)],64);let r=t[e];r&&r._c&&(r._d=!1),Ir();const a=r&&KT(r(i)),o=i.key||a&&a.key,l=nu(zt,{key:(o&&!Ta(o)?o:`_${e}`)+""},a||[],a&&t._===1?64:-2);return r&&r._c&&(r._d=!0),l}function KT(t){return t.some(e=>mo(e)?!(e.type===pi||e.type===zt&&!KT(e.children)):!0)?t:null}const Pp=t=>t?px(t)?Vd(t):Pp(t.parent):null,Bl=di(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Pp(t.parent),$root:t=>Pp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>QT(t),$forceUpdate:t=>t.f||(t.f=()=>{qm(t.update)}),$nextTick:t=>t.n||(t.n=et.bind(t.proxy)),$watch:t=>qk.bind(t)}),Zh=(t,e)=>t!==Tt&&!t.__isScriptSetup&&gt(t,e),wk={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return r[e]}else{if(Zh(n,e))return a[e]=1,n[e];if(s!==Tt&&gt(s,e))return a[e]=2,s[e];if((u=t.propsOptions[0])&&gt(u,e))return a[e]=3,r[e];if(i!==Tt&&gt(i,e))return a[e]=4,i[e];Op&&(a[e]=0)}}const c=Bl[e];let d,f;if(c)return e==="$attrs"&&xi(t.attrs,"get",""),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(i!==Tt&&gt(i,e))return a[e]=4,i[e];if(f=l.config.globalProperties,gt(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;return Zh(s,e)?(s[e]=i,!0):n!==Tt&&gt(n,e)?(n[e]=i,!0):gt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r}},a){let o;return!!i[a]||t!==Tt&&gt(t,a)||Zh(e,a)||(o=r[0])&&gt(o,a)||gt(n,a)||gt(Bl,a)||gt(s.config.globalProperties,a)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:gt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function dy(t){return Ke(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Op=!0;function Ck(t){const e=QT(t),i=t.proxy,n=t.ctx;Op=!1,e.beforeCreate&&hy(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:b,activated:g,deactivated:_,beforeDestroy:w,beforeUnmount:x,destroyed:C,unmounted:k,render:D,renderTracked:R,renderTriggered:M,errorCaptured:P,serverPrefetch:E,expose:I,inheritAttrs:O,components:L,directives:F,filters:X}=e;if(u&&Ek(u,n,null),a)for(const Y in a){const Z=a[Y];Je(Z)&&(n[Y]=Z.bind(i))}if(s){const Y=s.call(i,i);Ht(Y)&&(t.data=Mt(Y))}if(Op=!0,r)for(const Y in r){const Z=r[Y],le=Je(Z)?Z.bind(i,i):Je(Z.get)?Z.get.bind(i,i):Ts,he=!Je(Z)&&Je(Z.set)?Z.set.bind(i):Ts,te=re({get:le,set:he});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>te.value,set:ie=>te.value=ie})}if(o)for(const Y in o)YT(o[Y],n,i,Y);if(l){const Y=Je(l)?l.call(i):l;Reflect.ownKeys(Y).forEach(Z=>{xs(Z,Y[Z])})}c&&hy(c,t,"c");function K(Y,Z){Ke(Z)?Z.forEach(le=>Y(le.bind(i))):Z&&Y(Z.bind(i))}if(K(mk,d),K(Lt,f),K(jT,p),K(WT,b),K(Ds,g),K(ks,_),K(bk,P),K(vk,R),K(yk,M),K(Qn,x),K(Ro,k),K(gk,E),Ke(I))if(I.length){const Y=t.exposed||(t.exposed={});I.forEach(Z=>{Object.defineProperty(Y,Z,{get:()=>i[Z],set:le=>i[Z]=le})})}else t.exposed||(t.exposed={});D&&t.render===Ts&&(t.render=D),O!=null&&(t.inheritAttrs=O),L&&(t.components=L),F&&(t.directives=F),E&&HT(t)}function Ek(t,e,i=Ts){Ke(t)&&(t=Rp(t));for(const n in t){const s=t[n];let r;Ht(s)?"default"in s?r=Si(s.from||n,s.default,!0):r=Si(s.from||n):r=Si(s),gi(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[n]=r}}function hy(t,e,i){jn(Ke(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function YT(t,e,i,n){let s=n.includes(".")?ux(i,n):()=>i[n];if(Vt(t)){const r=e[t];Je(r)&&Re(s,r)}else if(Je(t))Re(s,t.bind(i));else if(Ht(t))if(Ke(t))t.forEach(r=>YT(r,e,i,n));else{const r=Je(t.handler)?t.handler.bind(i):e[t.handler];Je(r)&&Re(s,r,t)}}function QT(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,o=r.get(e);let l;return o?l=o:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(u=>Qc(l,u,a,!0)),Qc(l,e,a)),Ht(e)&&r.set(e,l),l}function Qc(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&Qc(t,r,i,!0),s&&s.forEach(a=>Qc(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Dk[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Dk={data:fy,props:py,emits:py,methods:El,computed:El,beforeCreate:Ni,created:Ni,beforeMount:Ni,mounted:Ni,beforeUpdate:Ni,updated:Ni,beforeDestroy:Ni,beforeUnmount:Ni,destroyed:Ni,unmounted:Ni,activated:Ni,deactivated:Ni,errorCaptured:Ni,serverPrefetch:Ni,components:El,directives:El,watch:Ak,provide:fy,inject:kk};function fy(t,e){return e?t?function(){return di(Je(t)?t.call(this,this):t,Je(e)?e.call(this,this):e)}:e:t}function kk(t,e){return El(Rp(t),Rp(e))}function Rp(t){if(Ke(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ni(t,e){return t?[...new Set([].concat(t,e))]:e}function El(t,e){return t?di(Object.create(null),t,e):e}function py(t,e){return t?Ke(t)&&Ke(e)?[...new Set([...t,...e])]:di(Object.create(null),dy(t),dy(e??{})):e}function Ak(t,e){if(!t)return e;if(!e)return t;const i=di(Object.create(null),t);for(const n in e)i[n]=Ni(t[n],e[n]);return i}function ZT(){return{app:null,config:{isNativeTag:gD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ik=0;function Pk(t,e){return function(n,s=null){Je(n)||(n=di({},n)),s!=null&&!Ht(s)&&(s=null);const r=ZT(),a=new WeakSet,o=[];let l=!1;const u=r.app={_uid:Ik++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:dA,get config(){return r.config},set config(c){},use(c,...d){return a.has(c)||(c&&Je(c.install)?(a.add(c),c.install(u,...d)):Je(c)&&(a.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!l){const p=u._ceVNode||T(n,s);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),t(p,c,f),l=!0,u._container=c,c.__vue_app__=u,Vd(p.component)}},onUnmount(c){o.push(c)},unmount(){l&&(jn(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=to;to=u;try{return c()}finally{to=d}}};return u}}let to=null;function xs(t,e){if(mi){let i=mi.provides;const n=mi.parent&&mi.parent.provides;n===i&&(i=mi.provides=Object.create(n)),i[t]=e}}function Si(t,e,i=!1){const n=mi||ai;if(n||to){const s=to?to._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return i&&Je(e)?e.call(n&&n.proxy):e}}const JT={},ex=()=>Object.create(JT),tx=t=>Object.getPrototypeOf(t)===JT;function Ok(t,e,i,n=!1){const s={},r=ex();t.propsDefaults=Object.create(null),ix(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);i?t.props=n?s:wT(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function Rk(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,o=ht(s),[l]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(zd(t.emitsOptions,f))continue;const p=e[f];if(l)if(gt(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const b=vn(f);s[b]=Mp(l,o,b,p,t,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{ix(t,e,s,r)&&(u=!0);let c;for(const d in o)(!e||!gt(e,d)&&((c=tr(d))===d||!gt(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=Mp(l,o,d,void 0,t,!0)):delete s[d]);if(r!==o)for(const d in r)(!e||!gt(e,d))&&(delete r[d],u=!0)}u&&zs(t.attrs,"set","")}function ix(t,e,i,n){const[s,r]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Pl(l))continue;const u=e[l];let c;s&&gt(s,c=vn(l))?!r||!r.includes(c)?i[c]=u:(o||(o={}))[c]=u:zd(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(r){const l=ht(i),u=o||Tt;for(let c=0;c<r.length;c++){const d=r[c];i[d]=Mp(s,l,d,u[d],t,!gt(u,d))}}return a}function Mp(t,e,i,n,s,r){const a=t[i];if(a!=null){const o=gt(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Je(l)){const{propsDefaults:u}=s;if(i in u)n=u[i];else{const c=Su(s);n=u[i]=l.call(null,e),c()}}else n=l;s.ce&&s.ce._setProp(i,n)}a[0]&&(r&&!o?n=!1:a[1]&&(n===""||n===tr(i))&&(n=!0))}return n}const Mk=new WeakMap;function nx(t,e,i=!1){const n=i?Mk:e.propsCache,s=n.get(t);if(s)return s;const r=t.props,a={},o=[];let l=!1;if(!Je(t)){const c=d=>{l=!0;const[f,p]=nx(d,e,!0);di(a,f),p&&o.push(...p)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return Ht(t)&&n.set(t,Za),Za;if(Ke(r))for(let c=0;c<r.length;c++){const d=vn(r[c]);my(d)&&(a[d]=Tt)}else if(r)for(const c in r){const d=vn(c);if(my(d)){const f=r[c],p=a[d]=Ke(f)||Je(f)?{type:f}:di({},f),b=p.type;let g=!1,_=!0;if(Ke(b))for(let w=0;w<b.length;++w){const x=b[w],C=Je(x)&&x.name;if(C==="Boolean"){g=!0;break}else C==="String"&&(_=!1)}else g=Je(b)&&b.name==="Boolean";p[0]=g,p[1]=_,(g||gt(p,"default"))&&o.push(d)}}const u=[a,o];return Ht(t)&&n.set(t,u),u}function my(t){return t[0]!=="$"&&!Pl(t)}const sx=t=>t[0]==="_"||t==="$stable",jm=t=>Ke(t)?t.map(ms):[ms(t)],Lk=(t,e,i)=>{if(e._n)return e;const n=uk((...s)=>jm(e(...s)),i);return n._c=!1,n},rx=(t,e,i)=>{const n=t._ctx;for(const s in t){if(sx(s))continue;const r=t[s];if(Je(r))e[s]=Lk(s,r,n);else if(r!=null){const a=jm(r);e[s]=()=>a}}},ax=(t,e)=>{const i=jm(e);t.slots.default=()=>i},ox=(t,e,i)=>{for(const n in e)(i||n!=="_")&&(t[n]=e[n])},Bk=(t,e,i)=>{const n=t.slots=ex();if(t.vnode.shapeFlag&32){const s=e._;s?(ox(n,e,i),i&&oT(n,"_",s,!0)):rx(e,n)}else e&&ax(t,e)},Nk=(t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,a=Tt;if(n.shapeFlag&32){const o=e._;o?i&&o===1?r=!1:ox(s,e,i):(r=!e.$stable,rx(e,s)),a=e}else e&&(ax(t,e),a={default:1});if(r)for(const o in s)!sx(o)&&a[o]==null&&delete s[o]},Fi=Qk;function Fk(t){return $k(t)}function $k(t,e){const i=Bd();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=Ts,insertStaticContent:b}=t,g=(V,W,Q,pe=null,ge=null,_e=null,Oe=void 0,Pe=null,xe=!!W.dynamicChildren)=>{if(V===W)return;V&&!ia(V,W)&&(pe=z(V),ie(V,ge,_e,!0),V=null),W.patchFlag===-2&&(xe=!1,W.dynamicChildren=null);const{type:ye,ref:$e,shapeFlag:Be}=W;switch(ye){case xu:_(V,W,Q,pe);break;case pi:w(V,W,Q,pe);break;case ef:V==null&&x(W,Q,pe,Oe);break;case zt:L(V,W,Q,pe,ge,_e,Oe,Pe,xe);break;default:Be&1?D(V,W,Q,pe,ge,_e,Oe,Pe,xe):Be&6?F(V,W,Q,pe,ge,_e,Oe,Pe,xe):(Be&64||Be&128)&&ye.process(V,W,Q,pe,ge,_e,Oe,Pe,xe,Se)}$e!=null&&ge&&Yc($e,V&&V.ref,_e,W||V,!W)},_=(V,W,Q,pe)=>{if(V==null)n(W.el=o(W.children),Q,pe);else{const ge=W.el=V.el;W.children!==V.children&&u(ge,W.children)}},w=(V,W,Q,pe)=>{V==null?n(W.el=l(W.children||""),Q,pe):W.el=V.el},x=(V,W,Q,pe)=>{[V.el,V.anchor]=b(V.children,W,Q,pe,V.el,V.anchor)},C=({el:V,anchor:W},Q,pe)=>{let ge;for(;V&&V!==W;)ge=f(V),n(V,Q,pe),V=ge;n(W,Q,pe)},k=({el:V,anchor:W})=>{let Q;for(;V&&V!==W;)Q=f(V),s(V),V=Q;s(W)},D=(V,W,Q,pe,ge,_e,Oe,Pe,xe)=>{W.type==="svg"?Oe="svg":W.type==="math"&&(Oe="mathml"),V==null?R(W,Q,pe,ge,_e,Oe,Pe,xe):E(V,W,ge,_e,Oe,Pe,xe)},R=(V,W,Q,pe,ge,_e,Oe,Pe)=>{let xe,ye;const{props:$e,shapeFlag:Be,transition:ze,dirs:qe}=V;if(xe=V.el=a(V.type,_e,$e&&$e.is,$e),Be&8?c(xe,V.children):Be&16&&P(V.children,xe,null,pe,ge,Jh(V,_e),Oe,Pe),qe&&Wr(V,null,pe,"created"),M(xe,V,V.scopeId,Oe,pe),$e){for(const lt in $e)lt!=="value"&&!Pl(lt)&&r(xe,lt,null,$e[lt],_e,pe);"value"in $e&&r(xe,"value",null,$e.value,_e),(ye=$e.onVnodeBeforeMount)&&us(ye,pe,V)}qe&&Wr(V,null,pe,"beforeMount");const tt=Uk(ge,ze);tt&&ze.beforeEnter(xe),n(xe,W,Q),((ye=$e&&$e.onVnodeMounted)||tt||qe)&&Fi(()=>{ye&&us(ye,pe,V),tt&&ze.enter(xe),qe&&Wr(V,null,pe,"mounted")},ge)},M=(V,W,Q,pe,ge)=>{if(Q&&p(V,Q),pe)for(let _e=0;_e<pe.length;_e++)p(V,pe[_e]);if(ge){let _e=ge.subTree;if(W===_e||dx(_e.type)&&(_e.ssContent===W||_e.ssFallback===W)){const Oe=ge.vnode;M(V,Oe,Oe.scopeId,Oe.slotScopeIds,ge.parent)}}},P=(V,W,Q,pe,ge,_e,Oe,Pe,xe=0)=>{for(let ye=xe;ye<V.length;ye++){const $e=V[ye]=Pe?xr(V[ye]):ms(V[ye]);g(null,$e,W,Q,pe,ge,_e,Oe,Pe)}},E=(V,W,Q,pe,ge,_e,Oe)=>{const Pe=W.el=V.el;let{patchFlag:xe,dynamicChildren:ye,dirs:$e}=W;xe|=V.patchFlag&16;const Be=V.props||Tt,ze=W.props||Tt;let qe;if(Q&&Gr(Q,!1),(qe=ze.onVnodeBeforeUpdate)&&us(qe,Q,W,V),$e&&Wr(W,V,Q,"beforeUpdate"),Q&&Gr(Q,!0),(Be.innerHTML&&ze.innerHTML==null||Be.textContent&&ze.textContent==null)&&c(Pe,""),ye?I(V.dynamicChildren,ye,Pe,Q,pe,Jh(W,ge),_e):Oe||Z(V,W,Pe,null,Q,pe,Jh(W,ge),_e,!1),xe>0){if(xe&16)O(Pe,Be,ze,Q,ge);else if(xe&2&&Be.class!==ze.class&&r(Pe,"class",null,ze.class,ge),xe&4&&r(Pe,"style",Be.style,ze.style,ge),xe&8){const tt=W.dynamicProps;for(let lt=0;lt<tt.length;lt++){const ut=tt[lt],Qt=Be[ut],jt=ze[ut];(jt!==Qt||ut==="value")&&r(Pe,ut,Qt,jt,ge,Q)}}xe&1&&V.children!==W.children&&c(Pe,W.children)}else!Oe&&ye==null&&O(Pe,Be,ze,Q,ge);((qe=ze.onVnodeUpdated)||$e)&&Fi(()=>{qe&&us(qe,Q,W,V),$e&&Wr(W,V,Q,"updated")},pe)},I=(V,W,Q,pe,ge,_e,Oe)=>{for(let Pe=0;Pe<W.length;Pe++){const xe=V[Pe],ye=W[Pe],$e=xe.el&&(xe.type===zt||!ia(xe,ye)||xe.shapeFlag&70)?d(xe.el):Q;g(xe,ye,$e,null,pe,ge,_e,Oe,!0)}},O=(V,W,Q,pe,ge)=>{if(W!==Q){if(W!==Tt)for(const _e in W)!Pl(_e)&&!(_e in Q)&&r(V,_e,W[_e],null,ge,pe);for(const _e in Q){if(Pl(_e))continue;const Oe=Q[_e],Pe=W[_e];Oe!==Pe&&_e!=="value"&&r(V,_e,Pe,Oe,ge,pe)}"value"in Q&&r(V,"value",W.value,Q.value,ge)}},L=(V,W,Q,pe,ge,_e,Oe,Pe,xe)=>{const ye=W.el=V?V.el:o(""),$e=W.anchor=V?V.anchor:o("");let{patchFlag:Be,dynamicChildren:ze,slotScopeIds:qe}=W;qe&&(Pe=Pe?Pe.concat(qe):qe),V==null?(n(ye,Q,pe),n($e,Q,pe),P(W.children||[],Q,$e,ge,_e,Oe,Pe,xe)):Be>0&&Be&64&&ze&&V.dynamicChildren?(I(V.dynamicChildren,ze,Q,ge,_e,Oe,Pe),(W.key!=null||ge&&W===ge.subTree)&&Wm(V,W,!0)):Z(V,W,Q,$e,ge,_e,Oe,Pe,xe)},F=(V,W,Q,pe,ge,_e,Oe,Pe,xe)=>{W.slotScopeIds=Pe,V==null?W.shapeFlag&512?ge.ctx.activate(W,Q,pe,Oe,xe):X(W,Q,pe,ge,_e,Oe,xe):ee(V,W,xe)},X=(V,W,Q,pe,ge,_e,Oe)=>{const Pe=V.component=sA(V,pe,ge);if($d(V)&&(Pe.ctx.renderer=Se),rA(Pe,!1,Oe),Pe.asyncDep){if(ge&&ge.registerDep(Pe,K,Oe),!V.el){const xe=Pe.subTree=T(pi);w(null,xe,W,Q)}}else K(Pe,V,W,Q,ge,_e,Oe)},ee=(V,W,Q)=>{const pe=W.component=V.component;if(Kk(V,W,Q))if(pe.asyncDep&&!pe.asyncResolved){Y(pe,W,Q);return}else pe.next=W,pe.update();else W.el=V.el,pe.vnode=W},K=(V,W,Q,pe,ge,_e,Oe)=>{const Pe=()=>{if(V.isMounted){let{next:Be,bu:ze,u:qe,parent:tt,vnode:lt}=V;{const st=lx(V);if(st){Be&&(Be.el=lt.el,Y(V,Be,Oe)),st.asyncDep.then(()=>{V.isUnmounted||Pe()});return}}let ut=Be,Qt;Gr(V,!1),Be?(Be.el=lt.el,Y(V,Be,Oe)):Be=lt,ze&&Gh(ze),(Qt=Be.props&&Be.props.onVnodeBeforeUpdate)&&us(Qt,tt,Be,lt),Gr(V,!0);const jt=yy(V),ei=V.subTree;V.subTree=jt,g(ei,jt,d(ei.el),z(ei),V,ge,_e),Be.el=jt.el,ut===null&&Yk(V,jt.el),qe&&Fi(qe,ge),(Qt=Be.props&&Be.props.onVnodeUpdated)&&Fi(()=>us(Qt,tt,Be,lt),ge)}else{let Be;const{el:ze,props:qe}=W,{bm:tt,m:lt,parent:ut,root:Qt,type:jt}=V,ei=eo(W);Gr(V,!1),tt&&Gh(tt),!ei&&(Be=qe&&qe.onVnodeBeforeMount)&&us(Be,ut,W),Gr(V,!0);{Qt.ce&&Qt.ce._injectChildStyle(jt);const st=V.subTree=yy(V);g(null,st,Q,pe,V,ge,_e),W.el=st.el}if(lt&&Fi(lt,ge),!ei&&(Be=qe&&qe.onVnodeMounted)){const st=W;Fi(()=>us(Be,ut,st),ge)}(W.shapeFlag&256||ut&&eo(ut.vnode)&&ut.vnode.shapeFlag&256)&&V.a&&Fi(V.a,ge),V.isMounted=!0,W=Q=pe=null}};V.scope.on();const xe=V.effect=new cT(Pe);V.scope.off();const ye=V.update=xe.run.bind(xe),$e=V.job=xe.runIfDirty.bind(xe);$e.i=V,$e.id=V.uid,xe.scheduler=()=>qm($e),Gr(V,!0),ye()},Y=(V,W,Q)=>{W.component=V;const pe=V.vnode.props;V.vnode=W,V.next=null,Rk(V,W.props,pe,Q),Nk(V,W.children,Q),Mr(),ry(V),Lr()},Z=(V,W,Q,pe,ge,_e,Oe,Pe,xe=!1)=>{const ye=V&&V.children,$e=V?V.shapeFlag:0,Be=W.children,{patchFlag:ze,shapeFlag:qe}=W;if(ze>0){if(ze&128){he(ye,Be,Q,pe,ge,_e,Oe,Pe,xe);return}else if(ze&256){le(ye,Be,Q,pe,ge,_e,Oe,Pe,xe);return}}qe&8?($e&16&&Ie(ye,ge,_e),Be!==ye&&c(Q,Be)):$e&16?qe&16?he(ye,Be,Q,pe,ge,_e,Oe,Pe,xe):Ie(ye,ge,_e,!0):($e&8&&c(Q,""),qe&16&&P(Be,Q,pe,ge,_e,Oe,Pe,xe))},le=(V,W,Q,pe,ge,_e,Oe,Pe,xe)=>{V=V||Za,W=W||Za;const ye=V.length,$e=W.length,Be=Math.min(ye,$e);let ze;for(ze=0;ze<Be;ze++){const qe=W[ze]=xe?xr(W[ze]):ms(W[ze]);g(V[ze],qe,Q,null,ge,_e,Oe,Pe,xe)}ye>$e?Ie(V,ge,_e,!0,!1,Be):P(W,Q,pe,ge,_e,Oe,Pe,xe,Be)},he=(V,W,Q,pe,ge,_e,Oe,Pe,xe)=>{let ye=0;const $e=W.length;let Be=V.length-1,ze=$e-1;for(;ye<=Be&&ye<=ze;){const qe=V[ye],tt=W[ye]=xe?xr(W[ye]):ms(W[ye]);if(ia(qe,tt))g(qe,tt,Q,null,ge,_e,Oe,Pe,xe);else break;ye++}for(;ye<=Be&&ye<=ze;){const qe=V[Be],tt=W[ze]=xe?xr(W[ze]):ms(W[ze]);if(ia(qe,tt))g(qe,tt,Q,null,ge,_e,Oe,Pe,xe);else break;Be--,ze--}if(ye>Be){if(ye<=ze){const qe=ze+1,tt=qe<$e?W[qe].el:pe;for(;ye<=ze;)g(null,W[ye]=xe?xr(W[ye]):ms(W[ye]),Q,tt,ge,_e,Oe,Pe,xe),ye++}}else if(ye>ze)for(;ye<=Be;)ie(V[ye],ge,_e,!0),ye++;else{const qe=ye,tt=ye,lt=new Map;for(ye=tt;ye<=ze;ye++){const ti=W[ye]=xe?xr(W[ye]):ms(W[ye]);ti.key!=null&&lt.set(ti.key,ye)}let ut,Qt=0;const jt=ze-tt+1;let ei=!1,st=0;const ss=new Array(jt);for(ye=0;ye<jt;ye++)ss[ye]=0;for(ye=qe;ye<=Be;ye++){const ti=V[ye];if(Qt>=jt){ie(ti,ge,_e,!0);continue}let _i;if(ti.key!=null)_i=lt.get(ti.key);else for(ut=tt;ut<=ze;ut++)if(ss[ut-tt]===0&&ia(ti,W[ut])){_i=ut;break}_i===void 0?ie(ti,ge,_e,!0):(ss[_i-tt]=ye+1,_i>=st?st=_i:ei=!0,g(ti,W[_i],Q,null,ge,_e,Oe,Pe,xe),Qt++)}const rs=ei?zk(ss):Za;for(ut=rs.length-1,ye=jt-1;ye>=0;ye--){const ti=tt+ye,_i=W[ti],Cn=ti+1<$e?W[ti+1].el:pe;ss[ye]===0?g(null,_i,Q,Cn,ge,_e,Oe,Pe,xe):ei&&(ut<0||ye!==rs[ut]?te(_i,Q,Cn,2):ut--)}}},te=(V,W,Q,pe,ge=null)=>{const{el:_e,type:Oe,transition:Pe,children:xe,shapeFlag:ye}=V;if(ye&6){te(V.component.subTree,W,Q,pe);return}if(ye&128){V.suspense.move(W,Q,pe);return}if(ye&64){Oe.move(V,W,Q,Se);return}if(Oe===zt){n(_e,W,Q);for(let Be=0;Be<xe.length;Be++)te(xe[Be],W,Q,pe);n(V.anchor,W,Q);return}if(Oe===ef){C(V,W,Q);return}if(pe!==2&&ye&1&&Pe)if(pe===0)Pe.beforeEnter(_e),n(_e,W,Q),Fi(()=>Pe.enter(_e),ge);else{const{leave:Be,delayLeave:ze,afterLeave:qe}=Pe,tt=()=>n(_e,W,Q),lt=()=>{Be(_e,()=>{tt(),qe&&qe()})};ze?ze(_e,tt,lt):lt()}else n(_e,W,Q)},ie=(V,W,Q,pe=!1,ge=!1)=>{const{type:_e,props:Oe,ref:Pe,children:xe,dynamicChildren:ye,shapeFlag:$e,patchFlag:Be,dirs:ze,cacheIndex:qe}=V;if(Be===-2&&(ge=!1),Pe!=null&&Yc(Pe,null,Q,V,!0),qe!=null&&(W.renderCache[qe]=void 0),$e&256){W.ctx.deactivate(V);return}const tt=$e&1&&ze,lt=!eo(V);let ut;if(lt&&(ut=Oe&&Oe.onVnodeBeforeUnmount)&&us(ut,W,V),$e&6)ae(V.component,Q,pe);else{if($e&128){V.suspense.unmount(Q,pe);return}tt&&Wr(V,null,W,"beforeUnmount"),$e&64?V.type.remove(V,W,Q,Se,pe):ye&&!ye.hasOnce&&(_e!==zt||Be>0&&Be&64)?Ie(ye,W,Q,!1,!0):(_e===zt&&Be&384||!ge&&$e&16)&&Ie(xe,W,Q),pe&&fe(V)}(lt&&(ut=Oe&&Oe.onVnodeUnmounted)||tt)&&Fi(()=>{ut&&us(ut,W,V),tt&&Wr(V,null,W,"unmounted")},Q)},fe=V=>{const{type:W,el:Q,anchor:pe,transition:ge}=V;if(W===zt){ke(Q,pe);return}if(W===ef){k(V);return}const _e=()=>{s(Q),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if(V.shapeFlag&1&&ge&&!ge.persisted){const{leave:Oe,delayLeave:Pe}=ge,xe=()=>Oe(Q,_e);Pe?Pe(V.el,_e,xe):xe()}else _e()},ke=(V,W)=>{let Q;for(;V!==W;)Q=f(V),s(V),V=Q;s(W)},ae=(V,W,Q)=>{const{bum:pe,scope:ge,job:_e,subTree:Oe,um:Pe,m:xe,a:ye}=V;gy(xe),gy(ye),pe&&Gh(pe),ge.stop(),_e&&(_e.flags|=8,ie(Oe,V,W,Q)),Pe&&Fi(Pe,W),Fi(()=>{V.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},Ie=(V,W,Q,pe=!1,ge=!1,_e=0)=>{for(let Oe=_e;Oe<V.length;Oe++)ie(V[Oe],W,Q,pe,ge)},z=V=>{if(V.shapeFlag&6)return z(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const W=f(V.anchor||V.el),Q=W&&W[MT];return Q?f(Q):W};let ue=!1;const se=(V,W,Q)=>{V==null?W._vnode&&ie(W._vnode,null,null,!0):g(W._vnode||null,V,W,null,null,null,Q),W._vnode=V,ue||(ue=!0,ry(),PT(),ue=!1)},Se={p:g,um:ie,m:te,r:fe,mt:X,mc:P,pc:Z,pbc:I,n:z,o:t};return{render:se,hydrate:void 0,createApp:Pk(se)}}function Jh({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Gr({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Uk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Wm(t,e,i=!1){const n=t.children,s=e.children;if(Ke(n)&&Ke(s))for(let r=0;r<n.length;r++){const a=n[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=xr(s[r]),o.el=a.el),!i&&o.patchFlag!==-2&&Wm(a,o)),o.type===xu&&(o.el=a.el)}}function zk(t){const e=t.slice(),i=[0];let n,s,r,a,o;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(s=i[i.length-1],t[s]<u){e[n]=s,i.push(n);continue}for(r=0,a=i.length-1;r<a;)o=r+a>>1,t[i[o]]<u?r=o+1:a=o;u<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}for(r=i.length,a=i[r-1];r-- >0;)i[r]=a,a=e[a];return i}function lx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:lx(e)}function gy(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Vk=Symbol.for("v-scx"),Hk=()=>Si(Vk);function Mo(t,e){return Gm(t,null,e)}function Re(t,e,i){return Gm(t,e,i)}function Gm(t,e,i=Tt){const{immediate:n,deep:s,flush:r,once:a}=i,o=di({},i),l=e&&n||!e&&r!=="post";let u;if(su){if(r==="sync"){const p=Hk();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ts,p.resume=Ts,p.pause=Ts,p}}const c=mi;o.call=(p,b,g)=>jn(p,c,b,g);let d=!1;r==="post"?o.scheduler=p=>{Fi(p,c&&c.suspense)}:r!=="sync"&&(d=!0,o.scheduler=(p,b)=>{b?p():qm(p)}),o.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=rk(t,e,o);return su&&(u?u.push(f):l&&f()),f}function qk(t,e,i){const n=this.proxy,s=Vt(t)?t.includes(".")?ux(n,t):()=>n[t]:t.bind(n,n);let r;Je(e)?r=e:(r=e.handler,i=e);const a=Su(this),o=Gm(s,r.bind(n),i);return a(),o}function ux(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const jk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${vn(e)}Modifiers`]||t[`${tr(e)}Modifiers`];function Wk(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||Tt;let s=i;const r=e.startsWith("update:"),a=r&&jk(n,e.slice(7));a&&(a.trim&&(s=i.map(c=>Vt(c)?c.trim():c)),a.number&&(s=i.map(wD)));let o,l=n[o=Wh(e)]||n[o=Wh(vn(e))];!l&&r&&(l=n[o=Wh(tr(e))]),l&&jn(l,t,6,s);const u=n[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,jn(u,t,6,s)}}function cx(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const r=t.emits;let a={},o=!1;if(!Je(t)){const l=u=>{const c=cx(u,e,!0);c&&(o=!0,di(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!o?(Ht(t)&&n.set(t,null),null):(Ke(r)?r.forEach(l=>a[l]=null):di(a,r),Ht(t)&&n.set(t,a),a)}function zd(t,e){return!t||!Od(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(t,e[0].toLowerCase()+e.slice(1))||gt(t,tr(e))||gt(t,e))}function yy(t){const{type:e,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:b,inheritAttrs:g}=t,_=Kc(t);let w,x;try{if(i.shapeFlag&4){const k=s||n,D=k;w=ms(u.call(D,k,c,d,p,f,b)),x=o}else{const k=e;w=ms(k.length>1?k(d,{attrs:o,slots:a,emit:l}):k(d,null)),x=e.props?o:Gk(o)}}catch(k){Nl.length=0,Fd(k,t,1),w=T(pi)}let C=w;if(x&&g!==!1){const k=Object.keys(x),{shapeFlag:D}=C;k.length&&D&7&&(r&&k.some(Rm)&&(x=Xk(x,r)),C=Pr(C,x,!1,!0))}return i.dirs&&(C=Pr(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&tu(C,i.transition),w=C,Kc(_),w}const Gk=t=>{let e;for(const i in t)(i==="class"||i==="style"||Od(i))&&((e||(e={}))[i]=t[i]);return e},Xk=(t,e)=>{const i={};for(const n in t)(!Rm(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function Kk(t,e,i){const{props:n,children:s,component:r}=t,{props:a,children:o,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?vy(n,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==n[f]&&!zd(u,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?vy(n,a,u):!0:!!a;return!1}function vy(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!zd(i,r))return!0}return!1}function Yk({vnode:t,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=i,e=e.parent;else break}}const dx=t=>t.__isSuspense;function Qk(t,e){e&&e.pendingBranch?Ke(t)?e.effects.push(...t):e.effects.push(t):lk(t)}const zt=Symbol.for("v-fgt"),xu=Symbol.for("v-txt"),pi=Symbol.for("v-cmt"),ef=Symbol.for("v-stc"),Nl=[];let nn=null;function Ir(t=!1){Nl.push(nn=t?null:[])}function Zk(){Nl.pop(),nn=Nl[Nl.length-1]||null}let iu=1;function by(t,e=!1){iu+=t,t<0&&nn&&e&&(nn.hasOnce=!0)}function hx(t){return t.dynamicChildren=iu>0?nn||Za:null,Zk(),iu>0&&nn&&nn.push(t),t}function Xm(t,e,i,n,s,r){return hx(Zc(t,e,i,n,s,r,!0))}function nu(t,e,i,n,s){return hx(T(t,e,i,n,s,!0))}function mo(t){return t?t.__v_isVNode===!0:!1}function ia(t,e){return t.type===e.type&&t.key===e.key}const fx=({key:t})=>t??null,Nc=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Vt(t)||gi(t)||Je(t)?{i:ai,r:t,k:e,f:!!i}:t:null);function Zc(t,e=null,i=null,n=0,s=null,r=t===zt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fx(e),ref:e&&Nc(e),scopeId:RT,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ai};return o?(Ym(l,i),r&128&&t.normalize(l)):i&&(l.shapeFlag|=Vt(i)?8:16),iu>0&&!a&&nn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&nn.push(l),l}const T=Jk;function Jk(t,e=null,i=null,n=0,s=null,r=!1){if((!t||t===xk)&&(t=pi),mo(t)){const o=Pr(t,e,!0);return i&&Ym(o,i),iu>0&&!r&&nn&&(o.shapeFlag&6?nn[nn.indexOf(t)]=o:nn.push(o)),o.patchFlag=-2,o}if(cA(t)&&(t=t.__vccOpts),e){e=eA(e);let{class:o,style:l}=e;o&&!Vt(o)&&(e.class=Nd(o)),Ht(l)&&(Hm(l)&&!Ke(l)&&(l=di({},l)),e.style=_u(l))}const a=Vt(t)?1:dx(t)?128:LT(t)?64:Ht(t)?4:Je(t)?2:0;return Zc(t,e,i,n,s,a,r,!0)}function eA(t){return t?Hm(t)||tx(t)?di({},t):t:null}function Pr(t,e,i=!1,n=!1){const{props:s,ref:r,patchFlag:a,children:o,transition:l}=t,u=e?nt(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&fx(u),ref:e&&e.ref?i&&r?Ke(r)?r.concat(Nc(e)):[r,Nc(e)]:Nc(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==zt?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Pr(t.ssContent),ssFallback:t.ssFallback&&Pr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&tu(c,l.clone(c)),c}function Km(t=" ",e=0){return T(xu,null,t,e)}function tA(t="",e=!1){return e?(Ir(),nu(pi,null,t)):T(pi,null,t)}function ms(t){return t==null||typeof t=="boolean"?T(pi):Ke(t)?T(zt,null,t.slice()):mo(t)?xr(t):T(xu,null,String(t))}function xr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Pr(t)}function Ym(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Ke(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Ym(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!tx(e)?e._ctx=ai:s===3&&ai&&(ai.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Je(e)?(e={default:e,_ctx:ai},i=32):(e=String(e),n&64?(i=16,e=[Km(e)]):i=8);t.children=e,t.shapeFlag|=i}function nt(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Nd([e.class,n.class]));else if(s==="style")e.style=_u([e.style,n.style]);else if(Od(s)){const r=e[s],a=n[s];a&&r!==a&&!(Ke(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=n[s])}return e}function us(t,e,i,n=null){jn(t,e,7,[i,n])}const iA=ZT();let nA=0;function sA(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||iA,r={uid:nA++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nx(n,s),emitsOptions:cx(n,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:n.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Wk.bind(null,r),t.ce&&t.ce(r),r}let mi=null;const Zn=()=>mi||ai;let Jc,Lp;{const t=Bd(),e=(i,n)=>{let s;return(s=t[i])||(s=t[i]=[]),s.push(n),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};Jc=e("__VUE_INSTANCE_SETTERS__",i=>mi=i),Lp=e("__VUE_SSR_SETTERS__",i=>su=i)}const Su=t=>{const e=mi;return Jc(t),t.scope.on(),()=>{t.scope.off(),Jc(e)}},_y=()=>{mi&&mi.scope.off(),Jc(null)};function px(t){return t.vnode.shapeFlag&4}let su=!1;function rA(t,e=!1,i=!1){e&&Lp(e);const{props:n,children:s}=t.vnode,r=px(t);Ok(t,n,r,e),Bk(t,s,i);const a=r?aA(t,e):void 0;return e&&Lp(!1),a}function aA(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wk);const{setup:n}=i;if(n){Mr();const s=t.setupContext=n.length>1?lA(t):null,r=Su(t),a=Tu(n,t,0,[t.props,s]),o=aT(a);if(Lr(),r(),(o||t.sp)&&!eo(t)&&HT(t),o){if(a.then(_y,_y),e)return a.then(l=>{Ty(t,l)}).catch(l=>{Fd(l,t,0)});t.asyncDep=a}else Ty(t,a)}else mx(t)}function Ty(t,e,i){Je(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ht(e)&&(t.setupState=kT(e)),mx(t)}function mx(t,e,i){const n=t.type;t.render||(t.render=n.render||Ts);{const s=Su(t);Mr();try{Ck(t)}finally{Lr(),s()}}}const oA={get(t,e){return xi(t,"get",""),t[e]}};function lA(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,oA),slots:t.slots,emit:t.emit,expose:e}}function Vd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kT(ET(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Bl)return Bl[i](t)},has(e,i){return i in e||i in Bl}})):t.proxy}function uA(t,e=!0){return Je(t)?t.displayName||t.name:t.name||e&&t.__name}function cA(t){return Je(t)&&"__vccOpts"in t}const re=(t,e)=>nk(t,e,su);function Qm(t,e,i){const n=arguments.length;return n===2?Ht(e)&&!Ke(e)?mo(e)?T(t,null,[e]):T(t,e):T(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&mo(i)&&(i=[i]),T(t,e,i))}const dA="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bp;const xy=typeof window<"u"&&window.trustedTypes;if(xy)try{Bp=xy.createPolicy("vue",{createHTML:t=>t})}catch{}const gx=Bp?t=>Bp.createHTML(t):t=>t,hA="http://www.w3.org/2000/svg",fA="http://www.w3.org/1998/Math/MathML",Us=typeof document<"u"?document:null,Sy=Us&&Us.createElement("template"),pA={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e==="svg"?Us.createElementNS(hA,t):e==="mathml"?Us.createElementNS(fA,t):i?Us.createElement(t,{is:i}):Us.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Us.createTextNode(t),createComment:t=>Us.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Us.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,r){const a=i?i.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Sy.innerHTML=gx(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=Sy.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},ur="transition",dl="animation",ru=Symbol("_vtc"),yx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},mA=di({},FT,yx),gA=t=>(t.displayName="Transition",t.props=mA,t),Hd=gA((t,{slots:e})=>Qm(fk,yA(t),e)),Xr=(t,e=[])=>{Ke(t)?t.forEach(i=>i(...e)):t&&t(...e)},wy=t=>t?Ke(t)?t.some(e=>e.length>1):t.length>1:!1;function yA(t){const e={};for(const L in t)L in yx||(e[L]=t[L]);if(t.css===!1)return e;const{name:i="v",type:n,duration:s,enterFromClass:r=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:o=`${i}-enter-to`,appearFromClass:l=r,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:p=`${i}-leave-to`}=t,b=vA(s),g=b&&b[0],_=b&&b[1],{onBeforeEnter:w,onEnter:x,onEnterCancelled:C,onLeave:k,onLeaveCancelled:D,onBeforeAppear:R=w,onAppear:M=x,onAppearCancelled:P=C}=e,E=(L,F,X,ee)=>{L._enterCancelled=ee,Kr(L,F?c:o),Kr(L,F?u:a),X&&X()},I=(L,F)=>{L._isLeaving=!1,Kr(L,d),Kr(L,p),Kr(L,f),F&&F()},O=L=>(F,X)=>{const ee=L?M:x,K=()=>E(F,L,X);Xr(ee,[F,K]),Cy(()=>{Kr(F,L?l:r),Rs(F,L?c:o),wy(ee)||Ey(F,n,g,K)})};return di(e,{onBeforeEnter(L){Xr(w,[L]),Rs(L,r),Rs(L,a)},onBeforeAppear(L){Xr(R,[L]),Rs(L,l),Rs(L,u)},onEnter:O(!1),onAppear:O(!0),onLeave(L,F){L._isLeaving=!0;const X=()=>I(L,F);Rs(L,d),L._enterCancelled?(Rs(L,f),Ay()):(Ay(),Rs(L,f)),Cy(()=>{L._isLeaving&&(Kr(L,d),Rs(L,p),wy(k)||Ey(L,n,_,X))}),Xr(k,[L,X])},onEnterCancelled(L){E(L,!1,void 0,!0),Xr(C,[L])},onAppearCancelled(L){E(L,!0,void 0,!0),Xr(P,[L])},onLeaveCancelled(L){I(L),Xr(D,[L])}})}function vA(t){if(t==null)return null;if(Ht(t))return[tf(t.enter),tf(t.leave)];{const e=tf(t);return[e,e]}}function tf(t){return CD(t)}function Rs(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t[ru]||(t[ru]=new Set)).add(e)}function Kr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const i=t[ru];i&&(i.delete(e),i.size||(t[ru]=void 0))}function Cy(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let bA=0;function Ey(t,e,i,n){const s=t._endId=++bA,r=()=>{s===t._endId&&n()};if(i!=null)return setTimeout(r,i);const{type:a,timeout:o,propCount:l}=_A(t,e);if(!a)return n();const u=a+"end";let c=0;const d=()=>{t.removeEventListener(u,f),r()},f=p=>{p.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),t.addEventListener(u,f)}function _A(t,e){const i=window.getComputedStyle(t),n=b=>(i[b]||"").split(", "),s=n(`${ur}Delay`),r=n(`${ur}Duration`),a=Dy(s,r),o=n(`${dl}Delay`),l=n(`${dl}Duration`),u=Dy(o,l);let c=null,d=0,f=0;e===ur?a>0&&(c=ur,d=a,f=r.length):e===dl?u>0&&(c=dl,d=u,f=l.length):(d=Math.max(a,u),c=d>0?a>u?ur:dl:null,f=c?c===ur?r.length:l.length:0);const p=c===ur&&/\b(transform|all)(,|$)/.test(n(`${ur}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:p}}function Dy(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,n)=>ky(i)+ky(t[n])))}function ky(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ay(){return document.body.offsetHeight}function TA(t,e,i){const n=t[ru];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const ed=Symbol("_vod"),vx=Symbol("_vsh"),yi={beforeMount(t,{value:e},{transition:i}){t[ed]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):hl(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:n}){!e!=!i&&(n?e?(n.beforeEnter(t),hl(t,!0),n.enter(t)):n.leave(t,()=>{hl(t,!1)}):hl(t,e))},beforeUnmount(t,{value:e}){hl(t,e)}};function hl(t,e){t.style.display=e?t[ed]:"none",t[vx]=!e}const xA=Symbol(""),SA=/(^|;)\s*display\s*:/;function wA(t,e,i){const n=t.style,s=Vt(i);let r=!1;if(i&&!s){if(e)if(Vt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&Fc(n,o,"")}else for(const a in e)i[a]==null&&Fc(n,a,"");for(const a in i)a==="display"&&(r=!0),Fc(n,a,i[a])}else if(s){if(e!==i){const a=n[xA];a&&(i+=";"+a),n.cssText=i,r=SA.test(i)}}else e&&t.removeAttribute("style");ed in t&&(t[ed]=r?n.display:"",t[vx]&&(n.display="none"))}const Iy=/\s*!important$/;function Fc(t,e,i){if(Ke(i))i.forEach(n=>Fc(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=CA(t,e);Iy.test(i)?t.setProperty(tr(n),i.replace(Iy,""),"important"):t[n]=i}}const Py=["Webkit","Moz","ms"],nf={};function CA(t,e){const i=nf[e];if(i)return i;let n=vn(e);if(n!=="filter"&&n in t)return nf[e]=n;n=Ld(n);for(let s=0;s<Py.length;s++){const r=Py[s]+n;if(r in t)return nf[e]=r}return e}const Oy="http://www.w3.org/1999/xlink";function Ry(t,e,i,n,s,r=OD(e)){n&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(Oy,e.slice(6,e.length)):t.setAttributeNS(Oy,e,i):i==null||r&&!lT(i)?t.removeAttribute(e):t.setAttribute(e,r?"":Ta(i)?String(i):i)}function My(t,e,i,n,s){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?gx(i):i);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let a=!1;if(i===""||i==null){const o=typeof t[e];o==="boolean"?i=lT(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(s||e)}function EA(t,e,i,n){t.addEventListener(e,i,n)}function DA(t,e,i,n){t.removeEventListener(e,i,n)}const Ly=Symbol("_vei");function kA(t,e,i,n,s=null){const r=t[Ly]||(t[Ly]={}),a=r[e];if(n&&a)a.value=n;else{const[o,l]=AA(e);if(n){const u=r[e]=OA(n,s);EA(t,o,u,l)}else a&&(DA(t,o,a,l),r[e]=void 0)}}const By=/(?:Once|Passive|Capture)$/;function AA(t){let e;if(By.test(t)){e={};let n;for(;n=t.match(By);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):tr(t.slice(2)),e]}let sf=0;const IA=Promise.resolve(),PA=()=>sf||(IA.then(()=>sf=0),sf=Date.now());function OA(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;jn(RA(n,i.value),e,5,[n])};return i.value=t,i.attached=PA(),i}function RA(t,e){if(Ke(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Ny=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,MA=(t,e,i,n,s,r)=>{const a=s==="svg";e==="class"?TA(t,n,a):e==="style"?wA(t,i,n):Od(e)?Rm(e)||kA(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LA(t,e,n,a))?(My(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ry(t,e,n,a,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Vt(n))?My(t,vn(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Ry(t,e,n,a))};function LA(t,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ny(e)&&Je(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ny(e)&&Vt(i)?!1:e in t}const BA=["ctrl","shift","alt","meta"],NA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>BA.some(i=>t[`${i}Key`]&&!e.includes(i))},fj=(t,e)=>{const i=t._withMods||(t._withMods={}),n=e.join(".");return i[n]||(i[n]=(s,...r)=>{for(let a=0;a<e.length;a++){const o=NA[e[a]];if(o&&o(s,e))return}return t(s,...r)})},FA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$A=(t,e)=>{const i=t._withKeys||(t._withKeys={}),n=e.join(".");return i[n]||(i[n]=s=>{if(!("key"in s))return;const r=tr(s.key);if(e.some(a=>a===r||FA[a]===r))return t(s)})},UA=di({patchProp:MA},pA);let Fy;function zA(){return Fy||(Fy=Fk(UA))}const bx=(...t)=>{const e=zA().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=HA(n);if(!s)return;const r=e._component;!Je(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=i(s,!1,VA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function VA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function HA(t){return Vt(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const qA=Symbol();var $y;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($y||($y={}));function jA(){const t=RD(!0),e=t.run(()=>oe({}));let i=[],n=[];const s=ET({install(r){s._a=r,r.provide(qA,s),r.config.globalProperties.$pinia=s,n.forEach(a=>i.push(a)),n=[]},use(r){return this._a?i.push(r):n.push(r),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return s}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ga=typeof document<"u";function _x(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function WA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&_x(t.default)}const mt=Object.assign;function rf(t,e){const i={};for(const n in e){const s=e[n];i[n]=Wn(s)?s.map(t):t(s)}return i}const Fl=()=>{},Wn=Array.isArray,Tx=/#/g,GA=/&/g,XA=/\//g,KA=/=/g,YA=/\?/g,xx=/\+/g,QA=/%5B/g,ZA=/%5D/g,Sx=/%5E/g,JA=/%60/g,wx=/%7B/g,eI=/%7C/g,Cx=/%7D/g,tI=/%20/g;function Zm(t){return encodeURI(""+t).replace(eI,"|").replace(QA,"[").replace(ZA,"]")}function iI(t){return Zm(t).replace(wx,"{").replace(Cx,"}").replace(Sx,"^")}function Np(t){return Zm(t).replace(xx,"%2B").replace(tI,"+").replace(Tx,"%23").replace(GA,"%26").replace(JA,"`").replace(wx,"{").replace(Cx,"}").replace(Sx,"^")}function nI(t){return Np(t).replace(KA,"%3D")}function sI(t){return Zm(t).replace(Tx,"%23").replace(YA,"%3F")}function rI(t){return t==null?"":sI(t).replace(XA,"%2F")}function au(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const aI=/\/$/,oI=t=>t.replace(aI,"");function af(t,e,i="/"){let n,s={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),s=t(r)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=dI(n??e,i),{fullPath:n+(r&&"?")+r+a,path:n,query:s,hash:au(a)}}function lI(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function Uy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function uI(t,e,i){const n=e.matched.length-1,s=i.matched.length-1;return n>-1&&n===s&&go(e.matched[n],i.matched[s])&&Ex(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function go(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ex(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!cI(t[i],e[i]))return!1;return!0}function cI(t,e){return Wn(t)?zy(t,e):Wn(e)?zy(e,t):t===e}function zy(t,e){return Wn(e)?t.length===e.length&&t.every((i,n)=>i===e[n]):t.length===1&&t[0]===e}function dI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let r=i.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const cr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ou;(function(t){t.pop="pop",t.push="push"})(ou||(ou={}));var $l;(function(t){t.back="back",t.forward="forward",t.unknown=""})($l||($l={}));function hI(t){if(!t)if(Ga){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),oI(t)}const fI=/^[^#]+#/;function pI(t,e){return t.replace(fI,"#")+e}function mI(t,e){const i=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-i.left-(e.left||0),top:n.top-i.top-(e.top||0)}}const qd=()=>({left:window.scrollX,top:window.scrollY});function gI(t){let e;if("el"in t){const i=t.el,n=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?n?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;e=mI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Vy(t,e){return(history.state?history.state.position-e:-1)+t}const Fp=new Map;function yI(t,e){Fp.set(t,e)}function vI(t){const e=Fp.get(t);return Fp.delete(t),e}let bI=()=>location.protocol+"//"+location.host;function Dx(t,e){const{pathname:i,search:n,hash:s}=e,r=t.indexOf("#");if(r>-1){let o=s.includes(t.slice(r))?t.slice(r).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),Uy(l,"")}return Uy(i,t)+n+s}function _I(t,e,i,n){let s=[],r=[],a=null;const o=({state:f})=>{const p=Dx(t,location),b=i.value,g=e.value;let _=0;if(f){if(i.value=p,e.value=f,a&&a===b){a=null;return}_=g?f.position-g.position:0}else n(p);s.forEach(w=>{w(i.value,b,{delta:_,type:ou.pop,direction:_?_>0?$l.forward:$l.back:$l.unknown})})};function l(){a=i.value}function u(f){s.push(f);const p=()=>{const b=s.indexOf(f);b>-1&&s.splice(b,1)};return r.push(p),p}function c(){const{history:f}=window;f.state&&f.replaceState(mt({},f.state,{scroll:qd()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Hy(t,e,i,n=!1,s=!1){return{back:t,current:e,forward:i,replaced:n,position:window.history.length,scroll:s?qd():null}}function TI(t){const{history:e,location:i}=window,n={value:Dx(t,i)},s={value:e.state};s.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=t.indexOf("#"),f=d>-1?(i.host&&document.querySelector("base")?t:t.slice(d))+l:bI()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(p){console.error(p),i[c?"replace":"assign"](f)}}function a(l,u){const c=mt({},e.state,Hy(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});r(l,c,!0),n.value=l}function o(l,u){const c=mt({},s.value,e.state,{forward:l,scroll:qd()});r(c.current,c,!0);const d=mt({},Hy(n.value,l,null),{position:c.position+1},u);r(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function xI(t){t=hI(t);const e=TI(t),i=_I(t,e.state,e.location,e.replace);function n(r,a=!0){a||i.pauseListeners(),history.go(r)}const s=mt({location:"",base:t,go:n,createHref:pI.bind(null,t)},e,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function SI(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),xI(t)}function wI(t){return typeof t=="string"||t&&typeof t=="object"}function kx(t){return typeof t=="string"||typeof t=="symbol"}const Ax=Symbol("");var qy;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(qy||(qy={}));function yo(t,e){return mt(new Error,{type:t,[Ax]:!0},e)}function Ms(t,e){return t instanceof Error&&Ax in t&&(e==null||!!(t.type&e))}const jy="[^/]+?",CI={sensitive:!1,strict:!1,start:!0,end:!0},EI=/[.+*?^${}()[\]/\\]/g;function DI(t,e){const i=mt({},CI,e),n=[];let s=i.start?"^":"";const r=[];for(const u of t){const c=u.length?[]:[90];i.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=40+(i.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(EI,"\\$&"),p+=40;else if(f.type===1){const{value:b,repeatable:g,optional:_,regexp:w}=f;r.push({name:b,repeatable:g,optional:_});const x=w||jy;if(x!==jy){p+=10;try{new RegExp(`(${x})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${b}" (${x}): `+k.message)}}let C=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(C=_&&u.length<2?`(?:/${C})`:"/"+C),_&&(C+="?"),s+=C,p+=20,_&&(p+=-8),g&&(p+=-20),x===".*"&&(p+=-50)}c.push(p)}n.push(c)}if(i.strict&&i.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,i.sensitive?"":"i");function o(u){const c=u.match(a),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",b=r[f-1];d[b.name]=p&&b.repeatable?p.split("/"):p}return d}function l(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===0)c+=p.value;else if(p.type===1){const{value:b,repeatable:g,optional:_}=p,w=b in u?u[b]:"";if(Wn(w)&&!g)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const x=Wn(w)?w.join("/"):w;if(!x)if(_)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);c+=x}}return c||"/"}return{re:a,score:n,keys:r,parse:o,stringify:l}}function kI(t,e){let i=0;for(;i<t.length&&i<e.length;){const n=e[i]-t[i];if(n)return n;i++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ix(t,e){let i=0;const n=t.score,s=e.score;for(;i<n.length&&i<s.length;){const r=kI(n[i],s[i]);if(r)return r;i++}if(Math.abs(s.length-n.length)===1){if(Wy(n))return 1;if(Wy(s))return-1}return s.length-n.length}function Wy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AI={type:0,value:""},II=/[a-zA-Z0-9_]/;function PI(t){if(!t)return[[]];if(t==="/")return[[AI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${i})/"${u}": ${p}`)}let i=0,n=i;const s=[];let r;function a(){r&&s.push(r),r=[]}let o=0,l,u="",c="";function d(){u&&(i===0?r.push({type:0,value:u}):i===1||i===2||i===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&i!==2){n=i,i=4;continue}switch(i){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),i=1):f();break;case 4:f(),i=n;break;case 1:l==="("?i=2:II.test(l)?f():(d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:i=3:c+=l;break;case 3:d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),s}function OI(t,e,i){const n=DI(PI(t.path),i),s=mt(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function RI(t,e){const i=[],n=new Map;e=Yy({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function r(d,f,p){const b=!p,g=Xy(d);g.aliasOf=p&&p.record;const _=Yy(e,d),w=[g];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of k)w.push(Xy(mt({},g,{components:p?p.record.components:g.components,path:D,aliasOf:p?p.record:g})))}let x,C;for(const k of w){const{path:D}=k;if(f&&D[0]!=="/"){const R=f.record.path,M=R[R.length-1]==="/"?"":"/";k.path=f.record.path+(D&&M+D)}if(x=OI(k,f,_),p?p.alias.push(x):(C=C||x,C!==x&&C.alias.push(x),b&&d.name&&!Ky(x)&&a(d.name)),Px(x)&&l(x),g.children){const R=g.children;for(let M=0;M<R.length;M++)r(R[M],x,p&&p.children[M])}p=p||x}return C?()=>{a(C)}:Fl}function a(d){if(kx(d)){const f=n.get(d);f&&(n.delete(d),i.splice(i.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=i.indexOf(d);f>-1&&(i.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return i}function l(d){const f=BI(d,i);i.splice(f,0,d),d.record.name&&!Ky(d)&&n.set(d.record.name,d)}function u(d,f){let p,b={},g,_;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw yo(1,{location:d});_=p.record.name,b=mt(Gy(f.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),d.params&&Gy(d.params,p.keys.map(C=>C.name))),g=p.stringify(b)}else if(d.path!=null)g=d.path,p=i.find(C=>C.re.test(g)),p&&(b=p.parse(g),_=p.record.name);else{if(p=f.name?n.get(f.name):i.find(C=>C.re.test(f.path)),!p)throw yo(1,{location:d,currentLocation:f});_=p.record.name,b=mt({},f.params,d.params),g=p.stringify(b)}const w=[];let x=p;for(;x;)w.unshift(x.record),x=x.parent;return{name:_,path:g,params:b,matched:w,meta:LI(w)}}t.forEach(d=>r(d));function c(){i.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function Gy(t,e){const i={};for(const n of e)n in t&&(i[n]=t[n]);return i}function Xy(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:MI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function MI(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const n in t.components)e[n]=typeof i=="object"?i[n]:i;return e}function Ky(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function LI(t){return t.reduce((e,i)=>mt(e,i.meta),{})}function Yy(t,e){const i={};for(const n in t)i[n]=n in e?e[n]:t[n];return i}function BI(t,e){let i=0,n=e.length;for(;i!==n;){const r=i+n>>1;Ix(t,e[r])<0?n=r:i=r+1}const s=NI(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function NI(t){let e=t;for(;e=e.parent;)if(Px(e)&&Ix(t,e)===0)return e}function Px({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function FI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(xx," "),a=r.indexOf("="),o=au(a<0?r:r.slice(0,a)),l=a<0?null:au(r.slice(a+1));if(o in e){let u=e[o];Wn(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function Qy(t){let e="";for(let i in t){const n=t[i];if(i=nI(i),n==null){n!==void 0&&(e+=(e.length?"&":"")+i);continue}(Wn(n)?n.map(r=>r&&Np(r)):[n&&Np(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+i,r!=null&&(e+="="+r))})}return e}function $I(t){const e={};for(const i in t){const n=t[i];n!==void 0&&(e[i]=Wn(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const UI=Symbol(""),Zy=Symbol(""),jd=Symbol(""),Jm=Symbol(""),$p=Symbol("");function fl(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function Sr(t,e,i,n,s,r=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=f=>{f===!1?l(yo(4,{from:i,to:e})):f instanceof Error?l(f):wI(f)?l(yo(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),o())},c=r(()=>t.call(n&&n.instances[s],e,i,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function of(t,e,i,n,s=r=>r()){const r=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(_x(l)){const c=(l.__vccOpts||l)[e];c&&r.push(Sr(c,i,n,a,o,s))}else{let u=l();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=WA(c)?c.default:c;a.mods[o]=c,a.components[o]=d;const p=(d.__vccOpts||d)[e];return p&&Sr(p,i,n,a,o,s)()}))}}return r}function Jy(t){const e=Si(jd),i=Si(Jm),n=re(()=>{const l=mn(t.to);return e.resolve(l)}),s=re(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=i.matched;if(!c||!d.length)return-1;const f=d.findIndex(go.bind(null,c));if(f>-1)return f;const p=ev(l[u-2]);return u>1&&ev(c)===p&&d[d.length-1].path!==p?d.findIndex(go.bind(null,l[u-2])):f}),r=re(()=>s.value>-1&&jI(i.params,n.value.params)),a=re(()=>s.value>-1&&s.value===i.matched.length-1&&Ex(i.params,n.value.params));function o(l={}){if(qI(l)){const u=e[mn(t.replace)?"replace":"push"](mn(t.to)).catch(Fl);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:re(()=>n.value.href),isActive:r,isExactActive:a,navigate:o}}function zI(t){return t.length===1?t[0]:t}const VI=Te({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Jy,setup(t,{slots:e}){const i=Mt(Jy(t)),{options:n}=Si(jd),s=re(()=>({[tv(t.activeClass,n.linkActiveClass,"router-link-active")]:i.isActive,[tv(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const r=e.default&&zI(e.default(i));return t.custom?r:Qm("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},r)}}}),HI=VI;function qI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function jI(t,e){for(const i in e){const n=e[i],s=t[i];if(typeof n=="string"){if(n!==s)return!1}else if(!Wn(s)||s.length!==n.length||n.some((r,a)=>r!==s[a]))return!1}return!0}function ev(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const tv=(t,e,i)=>t??e??i,WI=Te({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const n=Si($p),s=re(()=>t.route||n.value),r=Si(Zy,0),a=re(()=>{let u=mn(r);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),o=re(()=>s.value.matched[a.value]);xs(Zy,re(()=>a.value+1)),xs(UI,o),xs($p,s);const l=oe();return Re(()=>[l.value,o.value,t.name],([u,c,d],[f,p,b])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!go(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=o.value,f=d&&d.components[c];if(!f)return iv(i.default,{Component:f,route:u});const p=d.props[c],b=p?p===!0?u.params:typeof p=="function"?p(u):p:null,_=Qm(f,mt({},b,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return iv(i.default,{Component:_,route:u})||_}}});function iv(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const Ox=WI;function GI(t){const e=RI(t.routes,t),i=t.parseQuery||FI,n=t.stringifyQuery||Qy,s=t.history,r=fl(),a=fl(),o=fl(),l=JD(cr);let u=cr;Ga&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=rf.bind(null,z=>""+z),d=rf.bind(null,rI),f=rf.bind(null,au);function p(z,ue){let se,Se;return kx(z)?(se=e.getRecordMatcher(z),Se=ue):Se=z,e.addRoute(Se,se)}function b(z){const ue=e.getRecordMatcher(z);ue&&e.removeRoute(ue)}function g(){return e.getRoutes().map(z=>z.record)}function _(z){return!!e.getRecordMatcher(z)}function w(z,ue){if(ue=mt({},ue||l.value),typeof z=="string"){const Q=af(i,z,ue.path),pe=e.resolve({path:Q.path},ue),ge=s.createHref(Q.fullPath);return mt(Q,pe,{params:f(pe.params),hash:au(Q.hash),redirectedFrom:void 0,href:ge})}let se;if(z.path!=null)se=mt({},z,{path:af(i,z.path,ue.path).path});else{const Q=mt({},z.params);for(const pe in Q)Q[pe]==null&&delete Q[pe];se=mt({},z,{params:d(Q)}),ue.params=d(ue.params)}const Se=e.resolve(se,ue),Fe=z.hash||"";Se.params=c(f(Se.params));const V=lI(n,mt({},z,{hash:iI(Fe),path:Se.path})),W=s.createHref(V);return mt({fullPath:V,hash:Fe,query:n===Qy?$I(z.query):z.query||{}},Se,{redirectedFrom:void 0,href:W})}function x(z){return typeof z=="string"?af(i,z,l.value.path):mt({},z)}function C(z,ue){if(u!==z)return yo(8,{from:ue,to:z})}function k(z){return M(z)}function D(z){return k(mt(x(z),{replace:!0}))}function R(z){const ue=z.matched[z.matched.length-1];if(ue&&ue.redirect){const{redirect:se}=ue;let Se=typeof se=="function"?se(z):se;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=x(Se):{path:Se},Se.params={}),mt({query:z.query,hash:z.hash,params:Se.path!=null?{}:z.params},Se)}}function M(z,ue){const se=u=w(z),Se=l.value,Fe=z.state,V=z.force,W=z.replace===!0,Q=R(se);if(Q)return M(mt(x(Q),{state:typeof Q=="object"?mt({},Fe,Q.state):Fe,force:V,replace:W}),ue||se);const pe=se;pe.redirectedFrom=ue;let ge;return!V&&uI(n,Se,se)&&(ge=yo(16,{to:pe,from:Se}),te(Se,Se,!0,!1)),(ge?Promise.resolve(ge):I(pe,Se)).catch(_e=>Ms(_e)?Ms(_e,2)?_e:he(_e):Z(_e,pe,Se)).then(_e=>{if(_e){if(Ms(_e,2))return M(mt({replace:W},x(_e.to),{state:typeof _e.to=="object"?mt({},Fe,_e.to.state):Fe,force:V}),ue||pe)}else _e=L(pe,Se,!0,W,Fe);return O(pe,Se,_e),_e})}function P(z,ue){const se=C(z,ue);return se?Promise.reject(se):Promise.resolve()}function E(z){const ue=ke.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(z):z()}function I(z,ue){let se;const[Se,Fe,V]=XI(z,ue);se=of(Se.reverse(),"beforeRouteLeave",z,ue);for(const Q of Se)Q.leaveGuards.forEach(pe=>{se.push(Sr(pe,z,ue))});const W=P.bind(null,z,ue);return se.push(W),Ie(se).then(()=>{se=[];for(const Q of r.list())se.push(Sr(Q,z,ue));return se.push(W),Ie(se)}).then(()=>{se=of(Fe,"beforeRouteUpdate",z,ue);for(const Q of Fe)Q.updateGuards.forEach(pe=>{se.push(Sr(pe,z,ue))});return se.push(W),Ie(se)}).then(()=>{se=[];for(const Q of V)if(Q.beforeEnter)if(Wn(Q.beforeEnter))for(const pe of Q.beforeEnter)se.push(Sr(pe,z,ue));else se.push(Sr(Q.beforeEnter,z,ue));return se.push(W),Ie(se)}).then(()=>(z.matched.forEach(Q=>Q.enterCallbacks={}),se=of(V,"beforeRouteEnter",z,ue,E),se.push(W),Ie(se))).then(()=>{se=[];for(const Q of a.list())se.push(Sr(Q,z,ue));return se.push(W),Ie(se)}).catch(Q=>Ms(Q,8)?Q:Promise.reject(Q))}function O(z,ue,se){o.list().forEach(Se=>E(()=>Se(z,ue,se)))}function L(z,ue,se,Se,Fe){const V=C(z,ue);if(V)return V;const W=ue===cr,Q=Ga?history.state:{};se&&(Se||W?s.replace(z.fullPath,mt({scroll:W&&Q&&Q.scroll},Fe)):s.push(z.fullPath,Fe)),l.value=z,te(z,ue,se,W),he()}let F;function X(){F||(F=s.listen((z,ue,se)=>{if(!ae.listening)return;const Se=w(z),Fe=R(Se);if(Fe){M(mt(Fe,{replace:!0,force:!0}),Se).catch(Fl);return}u=Se;const V=l.value;Ga&&yI(Vy(V.fullPath,se.delta),qd()),I(Se,V).catch(W=>Ms(W,12)?W:Ms(W,2)?(M(mt(x(W.to),{force:!0}),Se).then(Q=>{Ms(Q,20)&&!se.delta&&se.type===ou.pop&&s.go(-1,!1)}).catch(Fl),Promise.reject()):(se.delta&&s.go(-se.delta,!1),Z(W,Se,V))).then(W=>{W=W||L(Se,V,!1),W&&(se.delta&&!Ms(W,8)?s.go(-se.delta,!1):se.type===ou.pop&&Ms(W,20)&&s.go(-1,!1)),O(Se,V,W)}).catch(Fl)}))}let ee=fl(),K=fl(),Y;function Z(z,ue,se){he(z);const Se=K.list();return Se.length?Se.forEach(Fe=>Fe(z,ue,se)):console.error(z),Promise.reject(z)}function le(){return Y&&l.value!==cr?Promise.resolve():new Promise((z,ue)=>{ee.add([z,ue])})}function he(z){return Y||(Y=!z,X(),ee.list().forEach(([ue,se])=>z?se(z):ue()),ee.reset()),z}function te(z,ue,se,Se){const{scrollBehavior:Fe}=t;if(!Ga||!Fe)return Promise.resolve();const V=!se&&vI(Vy(z.fullPath,0))||(Se||!se)&&history.state&&history.state.scroll||null;return et().then(()=>Fe(z,ue,V)).then(W=>W&&gI(W)).catch(W=>Z(W,z,ue))}const ie=z=>s.go(z);let fe;const ke=new Set,ae={currentRoute:l,listening:!0,addRoute:p,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:_,getRoutes:g,resolve:w,options:t,push:k,replace:D,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:K.add,isReady:le,install(z){const ue=this;z.component("RouterLink",HI),z.component("RouterView",Ox),z.config.globalProperties.$router=ue,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>mn(l)}),Ga&&!fe&&l.value===cr&&(fe=!0,k(s.location).catch(Fe=>{}));const se={};for(const Fe in cr)Object.defineProperty(se,Fe,{get:()=>l.value[Fe],enumerable:!0});z.provide(jd,ue),z.provide(Jm,wT(se)),z.provide($p,l);const Se=z.unmount;ke.add(z),z.unmount=function(){ke.delete(z),ke.size<1&&(u=cr,F&&F(),F=null,l.value=cr,fe=!1,Y=!1),Se()}}};function Ie(z){return z.reduce((ue,se)=>ue.then(()=>E(se)),Promise.resolve())}return ae}function XI(t,e){const i=[],n=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(t.matched.find(u=>go(u,o))?n.push(o):i.push(o));const l=t.matched[a];l&&(e.matched.find(u=>go(u,l))||s.push(l))}return[i,n,s]}function pj(){return Si(jd)}function KI(t){return Si(Jm)}const Ul="generated",YI="pointerdown",QI="pointerup",Up="pointerleave",ZI="pointerout",ga="pointermove",JI="touchstart",nv="touchend",eP="touchmove",tP="touchcancel",iP="resize",nP="visibilitychange",bn="tsParticles - Error";class tn{constructor(e,i,n){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!Un(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:0}else if(e!==void 0&&i!==void 0)this.x=e,this.y=i,this.z=n??0;else throw new Error(`${bn} Vector3d not initialized correctly`)}static get origin(){return tn.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return tn.create(e.x,e.y,e.z)}static create(e,i,n){return new tn(e,i,n)}add(e){return tn.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return tn.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return tn.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return tn.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return tn.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const i=e;this.z=i.z?i.z:0}sub(e){return tn.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class ci extends tn{constructor(e,i){super(e,i,0)}static get origin(){return ci.create(0,0)}static clone(e){return ci.create(e.x,e.y)}static create(e,i){return new ci(e,i)}}let sP=Math.random;const zp=new Map;function lf(t,e){zp.get(t)||zp.set(t,e)}function Rx(t){return zp.get(t)||(e=>e)}function kt(){return Gn(sP(),0,1-1e-16)}function Gn(t,e,i){return Math.min(Math.max(t,e),i)}function uf(t,e,i,n){return Math.floor((t*i+e*n)/(i+n))}function Xi(t){const e=Er(t);let i=eg(t);return e===i&&(i=0),kt()*(e-i)+i}function We(t){return Un(t)?t:Xi(t)}function eg(t){return Un(t)?t:t.min}function Er(t){return Un(t)?t:t.max}function rt(t,e){if(t===e||e===void 0&&Un(t))return t;const i=eg(t),n=Er(t);return e!==void 0?{min:Math.min(i,e),max:Math.max(n,e)}:rt(i,n)}function ya(t){const e=t.random,{enable:i,minimumValue:n}=Ar(e)?{enable:e,minimumValue:0}:e;return We(i?rt(t.value,n):t.value)}function Hi(t,e){const i=t.x-e.x,n=t.y-e.y;return{dx:i,dy:n,distance:Math.sqrt(i**2+n**2)}}function sn(t,e){return Hi(t,e).distance}function rP(t,e,i){if(Un(t))return t*Math.PI/180;switch(t){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(i.y-e.y,i.x-e.x);case"outside":return Math.atan2(e.y-i.y,e.x-i.x);default:return kt()*Math.PI*2}}function aP(t){const e=ci.origin;return e.length=1,e.angle=t,e}function sv(t,e,i,n){return ci.create(t.x*(i-n)/(i+n)+e.x*2*n/(i+n),t.y)}function oP(t){var e,i;return{x:((e=t.position)==null?void 0:e.x)??kt()*t.size.width,y:((i=t.position)==null?void 0:i.y)??kt()*t.size.height}}function Mx(t){return t?t.endsWith("%")?parseFloat(t)/100:parseFloat(t):1}const lP={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function va(){return lP}function rv(t){const e={bounced:!1},{pSide:i,pOtherSide:n,rectSide:s,rectOtherSide:r,velocity:a,factor:o}=t;return n.min<r.min||n.min>r.max||n.max<r.min||n.max>r.max||(i.max>=s.min&&i.max<=(s.max+s.min)/2&&a>0||i.min<=s.max&&i.min>(s.max+s.min)/2&&a<0)&&(e.velocity=a*-o,e.bounced=!0),e}function uP(t,e){const i=hi(e,n=>t.matches(n));return rn(i)?i.some(n=>n):i}function vo(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function cP(){return!vo()&&typeof matchMedia<"u"}function Lx(t){if(cP())return matchMedia(t)}function dP(t){if(!(vo()||typeof MutationObserver>"u"))return new MutationObserver(t)}function Kt(t,e){return t===e||rn(e)&&e.indexOf(t)>-1}async function hP(t,e){try{await document.fonts.load(`${e??"400"} 36px '${t??"Verdana"}'`)}catch{}}function fP(t){return Math.floor(kt()*t.length)}function Wd(t,e,i=!0){return t[e!==void 0&&i?e%t.length:fP(t)]}function tg(t,e,i,n,s){return pP(wu(t,n??0),e,i,s)}function pP(t,e,i,n){let s=!0;return(!n||n==="bottom")&&(s=t.top<e.height+i.x),s&&(!n||n==="left")&&(s=t.right>i.x),s&&(!n||n==="right")&&(s=t.left<e.width+i.y),s&&(!n||n==="top")&&(s=t.bottom>i.y),s}function wu(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}function wi(t,...e){for(const i of e){if(i==null)continue;if(!Xa(i)){t=i;continue}const n=Array.isArray(i);n&&(Xa(t)||!t||!Array.isArray(t))?t=[]:!n&&(Xa(t)||!t||Array.isArray(t))&&(t={});for(const s in i){if(s==="__proto__")continue;const r=i,a=r[s],o=t;o[s]=Xa(a)&&Array.isArray(a)?a.map(l=>wi(o[s],l)):wi(o[s],a)}}return t}function ig(t,e){return!!Fx(e,i=>i.enable&&Kt(t,i.mode))}function ng(t,e,i){hi(e,n=>{const s=n.mode;n.enable&&Kt(t,s)&&mP(n,i)})}function mP(t,e){const i=t.selectors;hi(i,n=>{e(n,t)})}function Bx(t,e){if(!(!e||!t))return Fx(t,i=>uP(e,i.selectors))}function Vp(t){return{position:t.getPosition(),radius:t.getRadius(),mass:t.getMass(),velocity:t.velocity,factor:ci.create(ya(t.options.bounce.horizontal),ya(t.options.bounce.vertical))}}function Nx(t,e){const{x:i,y:n}=t.velocity.sub(e.velocity),[s,r]=[t.position,e.position],{dx:a,dy:o}=Hi(r,s);if(i*a+n*o<0)return;const l=-Math.atan2(o,a),u=t.mass,c=e.mass,d=t.velocity.rotate(l),f=e.velocity.rotate(l),p=sv(d,f,u,c),b=sv(f,d,u,c),g=p.rotate(-l),_=b.rotate(-l);t.velocity.x=g.x*t.factor.x,t.velocity.y=g.y*t.factor.y,e.velocity.x=_.x*e.factor.x,e.velocity.y=_.y*e.factor.y}function gP(t,e){const i=t.getPosition(),n=t.getRadius(),s=wu(i,n),r=rv({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:t.velocity.x,factor:ya(t.options.bounce.horizontal)});r.bounced&&(r.velocity!==void 0&&(t.velocity.x=r.velocity),r.position!==void 0&&(t.position.x=r.position));const a=rv({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:t.velocity.y,factor:ya(t.options.bounce.vertical)});a.bounced&&(a.velocity!==void 0&&(t.velocity.y=a.velocity),a.position!==void 0&&(t.position.y=a.position))}function hi(t,e){return rn(t)?t.map((i,n)=>e(i,n)):e(t,0)}function Ws(t,e,i){return rn(t)?Wd(t,e,i):t}function Fx(t,e){return rn(t)?t.find((i,n)=>e(i,n)):e(t,0)?t:void 0}function $x(t,e){const i=t.value,n=t.animation,s={delayTime:We(n.delay)*1e3,enable:n.enable,value:We(t.value)*e,max:Er(i)*e,min:eg(i)*e,loops:0,maxLoops:We(n.count),time:0};if(n.enable){switch(s.decay=1-We(n.decay),n.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=kt()>=.5?"increasing":"decreasing";break}const r=n.mode==="auto";switch(n.startValue){case"min":s.value=s.min,r&&(s.status="increasing");break;case"max":s.value=s.max,r&&(s.status="decreasing");break;case"random":default:s.value=Xi(s),r&&(s.status=kt()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function yP(t,e){if(!(t.mode==="percent")){const{mode:s,...r}=t;return r}return"x"in t?{x:t.x/100*e.width,y:t.y/100*e.height}:{width:t.width/100*e.width,height:t.height/100*e.height}}function Ux(t,e){return yP(t,e)}function Ar(t){return typeof t=="boolean"}function $n(t){return typeof t=="string"}function Un(t){return typeof t=="number"}function zx(t){return typeof t=="function"}function Xa(t){return typeof t=="object"&&t!==null}function rn(t){return Array.isArray(t)}const td="random",$c="mid",Gd=new Map;function av(t){Gd.set(t.key,t)}function cf(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function vP(t){for(const[,r]of Gd)if(t.startsWith(r.stringPrefix))return r.parseString(t);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,i=t.replace(e,(r,a,o,l,u)=>a+a+o+o+l+l+(u!==void 0?u+u:"")),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=n.exec(i);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function zn(t,e,i=!0){if(!t)return;const n=$n(t)?{value:t}:t;if($n(n.value))return Vx(n.value,e,i);if(rn(n.value))return zn({value:Wd(n.value,e,i)});for(const[,s]of Gd){const r=s.handleRangeColor(n);if(r)return r}}function Vx(t,e,i=!0){if(!t)return;const n=$n(t)?{value:t}:t;if($n(n.value))return n.value===td?qx():bP(n.value);if(rn(n.value))return Vx({value:Wd(n.value,e,i)});for(const[,s]of Gd){const r=s.handleColor(n);if(r)return r}}function lu(t,e,i=!0){const n=zn(t,e,i);return n?Hx(n):void 0}function Hx(t){const e=t.r/255,i=t.g/255,n=t.b/255,s=Math.max(e,i,n),r=Math.min(e,i,n),a={h:0,l:(s+r)/2,s:0};return s!==r&&(a.s=a.l<.5?(s-r)/(s+r):(s-r)/(2-s-r),a.h=e===s?(i-n)/(s-r):a.h=i===s?2+(n-e)/(s-r):4+(e-i)/(s-r)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a.h>=360&&(a.h-=360),a}function bP(t){return vP(t)}function bo(t){const e={b:0,g:0,r:0},i={h:t.h/360,l:t.l/100,s:t.s/100};if(!i.s)e.r=e.g=e.b=i.l;else{const n=i.l<.5?i.l*(1+i.s):i.l+i.s-i.l*i.s,s=2*i.l-n;e.r=cf(s,n,i.h+1/3),e.g=cf(s,n,i.h),e.b=cf(s,n,i.h-1/3)}return e.r=Math.floor(e.r*255),e.g=Math.floor(e.g*255),e.b=Math.floor(e.b*255),e}function _P(t){const e=bo(t);return{a:t.a,b:e.b,g:e.g,r:e.r}}function qx(t){return{b:Math.floor(Xi(rt(0,256))),g:Math.floor(Xi(rt(0,256))),r:Math.floor(Xi(rt(0,256)))}}function Gs(t,e){return`rgba(${t.r}, ${t.g}, ${t.b}, ${e??1})`}function uu(t,e){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${e??1})`}function sg(t,e,i,n){let s=t,r=e;return s.r===void 0&&(s=bo(t)),r.r===void 0&&(r=bo(e)),{b:uf(s.b,r.b,i,n),g:uf(s.g,r.g,i,n),r:uf(s.r,r.r,i,n)}}function Hp(t,e,i){if(i===td)return qx();if(i===$c){const n=t.getFillColor()??t.getStrokeColor(),s=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(n&&s&&e)return sg(n,s,t.getRadius(),e.getRadius());{const r=n??s;if(r)return bo(r)}}else return i}function jx(t,e,i){const n=$n(t)?t:t.value;return n===td?i?zn({value:n}):e?td:$c:n===$c?$c:zn({value:n})}function ov(t){return t!==void 0?{h:t.h.value,s:t.s.value,l:t.l.value}:void 0}function Wx(t,e,i){const n={h:{enable:!1,value:t.h},s:{enable:!1,value:t.s},l:{enable:!1,value:t.l}};return e&&(df(n.h,e.h,i),df(n.s,e.s,i),df(n.l,e.l,i)),n}function df(t,e,i){t.enable=e.enable,t.enable?(t.velocity=We(e.speed)/100*i,t.decay=1-We(e.decay),t.status="increasing",t.loops=0,t.maxLoops=We(e.count),t.time=0,t.delayTime=We(e.delay)*1e3,e.sync||(t.velocity*=kt(),t.value*=kt()),t.initialValue=t.value):t.velocity=0}function zl(t,e,i){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.closePath()}function TP(t,e,i,n){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.lineTo(n.x,n.y),t.closePath()}function xP(t,e,i){t.fillStyle=i??"rgba(0,0,0,0)",t.fillRect(0,0,e.width,e.height)}function SP(t,e,i,n){i&&(t.globalAlpha=n,t.drawImage(i,0,0,e.width,e.height),t.globalAlpha=1)}function hf(t,e){t.clearRect(0,0,e.width,e.height)}function wP(t){const{container:e,context:i,particle:n,delta:s,colorStyles:r,backgroundMask:a,composite:o,radius:l,opacity:u,shadow:c,transform:d}=t,f=n.getPosition(),p=n.rotation+(n.pathRotation?n.velocity.angle:0),b={sin:Math.sin(p),cos:Math.cos(p)},g={a:b.cos*(d.a??1),b:b.sin*(d.b??1),c:-b.sin*(d.c??1),d:b.cos*(d.d??1)};i.setTransform(g.a,g.b,g.c,g.d,f.x,f.y),i.beginPath(),a&&(i.globalCompositeOperation=o);const _=n.shadowColor;c.enable&&_&&(i.shadowBlur=c.blur,i.shadowColor=Gs(_),i.shadowOffsetX=c.offset.x,i.shadowOffsetY=c.offset.y),r.fill&&(i.fillStyle=r.fill);const w=n.strokeWidth??0;i.lineWidth=w,r.stroke&&(i.strokeStyle=r.stroke),CP(e,i,n,l,u,s),w>0&&i.stroke(),n.close&&i.closePath(),n.fill&&i.fill(),EP(e,i,n,l,u,s),i.globalCompositeOperation="source-over",i.setTransform(1,0,0,1,0,0)}function CP(t,e,i,n,s,r){if(!i.shape)return;const a=t.drawers.get(i.shape);a&&a.draw(e,i,n,s,r,t.retina.pixelRatio)}function EP(t,e,i,n,s,r){if(!i.shape)return;const a=t.drawers.get(i.shape);!a||!a.afterEffect||a.afterEffect(e,i,n,s,r,t.retina.pixelRatio)}function DP(t,e,i){e.draw&&e.draw(t,i)}function kP(t,e,i,n){e.drawParticle&&e.drawParticle(t,i,n)}function AP(t,e,i){return{h:t.h,s:t.s,l:t.l+(e==="darken"?-1:1)*i}}function IP(t,e,i){const n=e[i];n!==void 0&&(t[i]=(t[i]??1)*n)}class PP{constructor(e){this.container=e,this._applyPostDrawUpdaters=i=>{for(const n of this._postDrawUpdaters)n.afterDraw&&n.afterDraw(i)},this._applyPreDrawUpdaters=(i,n,s,r,a,o)=>{for(const l of this._preDrawUpdaters){if(l.getColorStyles){const{fill:u,stroke:c}=l.getColorStyles(n,i,s,r);u&&(a.fill=u),c&&(a.stroke=c)}if(l.getTransformValues){const u=l.getTransformValues(n);for(const c in u)IP(o,u,c)}l.beforeDraw&&l.beforeDraw(n)}},this._applyResizePlugins=()=>{for(const i of this._resizePlugins)i.resize&&i.resize()},this._getPluginParticleColors=i=>{let n,s;for(const r of this._colorPlugins)if(!n&&r.particleFillColor&&(n=lu(r.particleFillColor(i))),!s&&r.particleStrokeColor&&(s=lu(r.particleStrokeColor(i))),n&&s)break;return[n,s]},this._initCover=()=>{const i=this.container.actualOptions,n=i.backgroundMask.cover,s=n.color,r=zn(s);if(r){const a={...r,a:n.opacity};this._coverColorStyle=Gs(a,a.a)}},this._initStyle=()=>{const i=this.element,n=this.container.actualOptions;if(i){this._fullScreen?(this._originalStyle=wi({},i.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in n.style){if(!s||!n.style)continue;const r=n.style[s];r&&i.style.setProperty(s,r,"important")}}},this._initTrail=async()=>{const i=this.container.actualOptions,n=i.particles.move.trail,s=n.fill;if(n.enable)if(s.color){const r=zn(s.color);if(!r)return;const a=i.particles.move.trail;this._trailFill={color:{...r},opacity:1/a.length}}else await new Promise((r,a)=>{if(!s.image)return;const o=document.createElement("img");o.addEventListener("load",()=>{this._trailFill={image:o,opacity:1/n.length},r()}),o.addEventListener("error",l=>{a(l.error)}),o.src=s.image})},this._paintBase=i=>{this.draw(n=>xP(n,this.size,i))},this._paintImage=(i,n)=>{this.draw(s=>SP(s,this.size,i,n))},this._repairStyle=()=>{const i=this.element;i&&(this._safeMutationObserver(n=>n.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(n=>n.observe(i,{attributes:!0})))},this._resetOriginalStyle=()=>{const i=this.element,n=this._originalStyle;if(!(i&&n))return;const s=i.style;s.position=n.position,s.zIndex=n.zIndex,s.top=n.top,s.left=n.left,s.width=n.width,s.height=n.height},this._safeMutationObserver=i=>{this._mutationObserver&&i(this._mutationObserver)},this._setFullScreenStyle=()=>{const i=this.element;if(!i)return;const n="important",s=i.style;s.setProperty("position","fixed",n),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),n),s.setProperty("top","0",n),s.setProperty("left","0",n),s.setProperty("width","100%",n),s.setProperty("height","100%",n)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,i=e.particles.move.trail,n=this._trailFill;e.backgroundMask.enable?this.paint():i.enable&&i.length>0&&n?n.color?this._paintBase(Gs(n.color,n.opacity)):n.image&&this._paintImage(n.image,n.opacity):this.draw(s=>{hf(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const i=this._context;if(i)return e(i)}drawParticle(e,i){if(e.spawning||e.destroyed)return;const n=e.getRadius();if(n<=0)return;const s=e.getFillColor(),r=e.getStrokeColor()??s;let[a,o]=this._getPluginParticleColors(e);a||(a=s),o||(o=r),!(!a&&!o)&&this.draw(l=>{var C;const u=this.container,c=u.actualOptions,d=e.options.zIndex,f=(1-e.zIndexFactor)**d.opacityRate,p=e.bubble.opacity??((C=e.opacity)==null?void 0:C.value)??1,b=e.strokeOpacity??p,g=p*f,_=b*f,w={},x={fill:a?uu(a,g):void 0};x.stroke=o?uu(o,_):x.fill,this._applyPreDrawUpdaters(l,e,n,g,x,w),wP({container:u,context:l,particle:e,delta:i,colorStyles:x,backgroundMask:c.backgroundMask.enable,composite:c.backgroundMask.composite,radius:n*(1-e.zIndexFactor)**d.sizeRate,opacity:g,shadow:e.options.shadow,transform:w}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,i,n){this.draw(s=>kP(s,e,i,n))}drawPlugin(e,i){this.draw(n=>DP(n,e,i))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=dP(e=>{for(const i of e)i.type==="attributes"&&i.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){va().error(e)}this.initBackground(),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,i=e.background,n=this.element;if(!n)return;const s=n.style;if(s){if(i.color){const r=zn(i.color);s.backgroundColor=r?Gs(r,i.opacity):""}else s.backgroundColor="";s.backgroundImage=i.image||"",s.backgroundPosition=i.position||"",s.backgroundRepeat=i.repeat||"",s.backgroundSize=i.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&Ul in e.dataset?e.dataset[Ul]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=wi({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(i=>{this.element&&i.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(i=>{e.backgroundMask.enable&&e.backgroundMask.cover?(hf(i,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,i=e.retina.pixelRatio,n=e.canvas.size,s={width:this.element.offsetWidth*i,height:this.element.offsetHeight*i};if(s.height===n.height&&s.width===n.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const r={...n};return this.element.width=n.width=this.element.offsetWidth*i,this.element.height=n.height=this.element.offsetHeight*i,this.container.started&&(this.resizeFactor={width:n.width/r.width,height:n.height/r.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>hf(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,i=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),i&&await e.refresh()}}function dn(t,e,i,n,s){if(n){let r={passive:!0};Ar(s)?r.capture=s:s!==void 0&&(r=s),t.addEventListener(e,i,r)}else{const r=s;t.removeEventListener(e,i,r)}}class OP{constructor(e){this.container=e,this._doMouseTouchClick=i=>{const n=this.container,s=n.actualOptions;if(this._canPush){const r=n.interactivity.mouse,a=r.position;if(!a)return;r.clickPosition={...a},r.clickTime=new Date().getTime();const o=s.interactivity.events.onClick;hi(o.mode,l=>this.container.handleClickMode(l))}i.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=i=>{const n=i,s=this.container,r=s.options,a=r.defaultThemes,o=n.matches?a.dark:a.light,l=r.themes.find(u=>u.name===o);l&&l.default.auto&&s.loadTheme(o)},this._handleVisibilityChange=()=>{const i=this.container,n=i.actualOptions;this._mouseTouchFinish(),n.pauseOnBlur&&(document&&document.hidden?(i.pageHidden=!0,i.pause()):(i.pageHidden=!1,i.getAnimationStatus()?i.play(!0):i.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const i=this.container.canvas;i&&await i.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(i,n)=>{const s=this._handlers,r=this.container,a=r.actualOptions,o=r.interactivity.element;if(!o)return;const l=o,u=r.canvas.element;u&&(u.style.pointerEvents=l===u?"initial":"none"),(a.interactivity.events.onHover.enable||a.interactivity.events.onClick.enable)&&(dn(o,ga,s.mouseMove,n),dn(o,JI,s.touchStart,n),dn(o,eP,s.touchMove,n),a.interactivity.events.onClick.enable?(dn(o,nv,s.touchEndClick,n),dn(o,QI,s.mouseUp,n),dn(o,YI,s.mouseDown,n)):dn(o,nv,s.touchEnd,n),dn(o,i,s.mouseLeave,n),dn(o,tP,s.touchCancel,n))},this._manageListeners=i=>{const n=this._handlers,s=this.container,r=s.actualOptions,a=r.interactivity.detectsOn,o=s.canvas.element;let l=Up;a==="window"?(s.interactivity.element=window,l=ZI):a==="parent"&&o?s.interactivity.element=o.parentElement??o.parentNode:s.interactivity.element=o,this._manageMediaMatch(i),this._manageResize(i),this._manageInteractivityListeners(l,i),document&&dn(document,nP,n.visibilityChange,i,!1)},this._manageMediaMatch=i=>{const n=this._handlers,s=Lx("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){dn(s,"change",n.themeChange,i);return}s.addListener!==void 0&&(i?s.addListener(n.oldThemeChange):s.removeListener(n.oldThemeChange))}},this._manageResize=i=>{const n=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){dn(window,iP,n.resize,i);return}const a=s.canvas.element;this._resizeObserver&&!i?(a&&this._resizeObserver.unobserve(a),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&i&&a&&(this._resizeObserver=new ResizeObserver(async o=>{o.find(u=>u.target===a)&&await this._handleWindowResize()}),this._resizeObserver.observe(a))},this._mouseDown=()=>{const{interactivity:i}=this.container;if(!i)return;const{mouse:n}=i;n.clicking=!0,n.downPosition=n.position},this._mouseTouchClick=i=>{const n=this.container,s=n.actualOptions,{mouse:r}=n.interactivity;r.inside=!0;let a=!1;const o=r.position;if(!(!o||!s.interactivity.events.onClick.enable)){for(const[,l]of n.plugins)if(l.clickPositionValid&&(a=l.clickPositionValid(o),a))break;a||this._doMouseTouchClick(i),r.clicking=!1}},this._mouseTouchFinish=()=>{const i=this.container.interactivity;if(!i)return;const n=i.mouse;delete n.position,delete n.clickPosition,delete n.downPosition,i.status=Up,n.inside=!1,n.clicking=!1},this._mouseTouchMove=i=>{const n=this.container,s=n.actualOptions,r=n.interactivity,a=n.canvas.element;if(!r||!r.element)return;r.mouse.inside=!0;let o;if(i.type.startsWith("pointer")){this._canPush=!0;const u=i;if(r.element===window){if(a){const c=a.getBoundingClientRect();o={x:u.clientX-c.left,y:u.clientY-c.top}}}else if(s.interactivity.detectsOn==="parent"){const c=u.target,d=u.currentTarget;if(c&&d&&a){const f=c.getBoundingClientRect(),p=d.getBoundingClientRect(),b=a.getBoundingClientRect();o={x:u.offsetX+2*f.left-(p.left+b.left),y:u.offsetY+2*f.top-(p.top+b.top)}}else o={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY}}else u.target===a&&(o={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY})}else if(this._canPush=i.type!=="touchmove",a){const u=i,c=u.touches[u.touches.length-1],d=a.getBoundingClientRect();o={x:c.clientX-(d.left??0),y:c.clientY-(d.top??0)}}const l=n.retina.pixelRatio;o&&(o.x*=l,o.y*=l),r.mouse.position=o,r.status=ga},this._touchEnd=i=>{const n=i,s=Array.from(n.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=i=>{const n=i,s=Array.from(n.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(i)},this._touchStart=i=>{const n=i,s=Array.from(n.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(i)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:i=>this._mouseTouchMove(i),mouseUp:i=>this._mouseTouchClick(i),touchStart:i=>this._touchStart(i),touchMove:i=>this._mouseTouchMove(i),touchEnd:i=>this._touchEnd(i),touchCancel:i=>this._touchEnd(i),touchEndClick:i=>this._touchEndClick(i),visibilityChange:()=>this._handleVisibilityChange(),themeChange:i=>this._handleThemeChange(i),oldThemeChange:i=>this._handleThemeChange(i),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class vi{constructor(){this.value=""}static create(e,i){const n=new vi;return n.load(e),i!==void 0&&($n(i)||rn(i)?n.load({value:i}):n.load(i)),n}load(e){(e==null?void 0:e.value)!==void 0&&(this.value=e.value)}}class RP{constructor(){this.color=new vi,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=vi.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class MP{constructor(){this.color=new vi,this.color.value="#fff",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=vi.create(this.color,e.color)),e.opacity!==void 0&&(this.opacity=e.opacity))}}class LP{constructor(){this.composite="destination-out",this.cover=new MP,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const i=e.cover,n=$n(e.cover)?{color:e.cover}:e.cover;this.cover.load(i.color!==void 0?i:{color:n})}e.enable!==void 0&&(this.enable=e.enable)}}}class BP{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class NP{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}class lv{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return hi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=hi(e,i=>`#${i}`)}load(e){if(!e)return;const i=e.ids??e.elementId??e.el;i!==void 0&&(this.ids=i),e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type)}}class FP{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class $P{constructor(){this.enable=!1,this.mode=[],this.parallax=new FP}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class UP{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}let zP=class{constructor(){this.onClick=new NP,this.onDiv=new lv,this.onHover=new $P,this.resize=new UP}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const i=e.onDiv??e.ondiv;i!==void 0&&(this.onDiv=hi(i,n=>{const s=new lv;return s.load(n),s})),this.onHover.load(e.onHover??e.onhover),Ar(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}};class VP{constructor(e,i){this._engine=e,this._container=i}load(e){if(!e||!this._container)return;const i=this._engine.plugins.interactors.get(this._container);if(i)for(const n of i)n.loadModeOptions&&n.loadModeOptions(this,e)}}class Gx{constructor(e,i){this.detectsOn="window",this.events=new zP,this.modes=new VP(e,i)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const i=e.detectsOn??e.detect_on;i!==void 0&&(this.detectsOn=i),this.events.load(e.events),this.modes.load(e.modes)}}class HP{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=wi({},e.options)))}}class qP{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode==="screen"?this.mode="screen":this.mode="canvas"),e.options!==void 0&&(this.options=wi({},e.options)))}}class jP{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class WP{constructor(){this.name="",this.default=new jP}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=wi({},e.options)))}}class ff{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(e.count!==void 0&&(this.count=rt(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(this.offset=rt(e.offset)),e.speed!==void 0&&(this.speed=rt(e.speed)),e.decay!==void 0&&(this.decay=rt(e.decay)),e.delay!==void 0&&(this.delay=rt(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class GP{constructor(){this.h=new ff,this.s=new ff,this.l=new ff}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class cu extends vi{constructor(){super(),this.animation=new GP}static create(e,i){const n=new cu;return n.load(e),i!==void 0&&($n(i)||rn(i)?n.load({value:i}):n.load(i)),n}load(e){if(super.load(e),!e)return;const i=e.animation;i!==void 0&&(i.enable!==void 0?this.animation.h.load(i):this.animation.load(e.animation))}}class XP{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class KP{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class YP{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=rt(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=rt(e.speed)),e.decay!==void 0&&(this.decay=rt(e.decay)),e.delay!==void 0&&(this.delay=rt(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class Xx extends YP{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue),e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class QP{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue))}}class Br{constructor(){this.random=new QP,this.value=0}load(e){e&&(Ar(e.random)?this.random.enable=e.random:this.random.load(e.random),e.value!==void 0&&(this.value=rt(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class uv extends Br{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class Kx{constructor(){this.horizontal=new uv,this.vertical=new uv}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class ZP{constructor(){this.absorb=new XP,this.bounce=new Kx,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new KP}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=rt(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class JP{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=rt(e.offset)),e.value!==void 0&&(this.value=rt(e.value)))}}class eO{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){var s,r;if(!e)return;e.distance!==void 0&&(this.distance=rt(e.distance)),e.enable!==void 0&&(this.enable=e.enable);const i=((s=e.rotate)==null?void 0:s.x)??e.rotateX;i!==void 0&&(this.rotate.x=i);const n=((r=e.rotate)==null?void 0:r.y)??e.rotateY;n!==void 0&&(this.rotate.y=n)}}class tO{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class iO{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=rt(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=rt(e.maxSpeed)))}}class nO{constructor(){this.clamp=!0,this.delay=new Br,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=wi(this.options,e.options)))}}class sO{load(e){e&&(e.color!==void 0&&(this.color=vi.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class rO{constructor(){this.enable=!1,this.length=10,this.fill=new sO}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),(e.fill!==void 0||e.fillColor!==void 0)&&this.fill.load(e.fill||{color:e.fillColor}),e.length!==void 0&&(this.length=e.length))}}class aO{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class oO{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=rt(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=wi({},e.position)))}}class lO{constructor(){this.angle=new JP,this.attract=new eO,this.center=new tO,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new iO,this.path=new nO,this.outModes=new aO,this.random=!1,this.size=!1,this.speed=2,this.spin=new oO,this.straight=!1,this.trail=new rO,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(Un(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=rt(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Un(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=rt(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const i=e.outModes??e.outMode??e.out_mode;i!==void 0&&(Xa(i)?this.outModes.load(i):this.outModes.load({default:i})),this.path.load(e.path??e.noise),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=rt(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class uO extends Xx{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.opacity_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.opacity_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class cO extends Br{constructor(){super(),this.animation=new uO,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const i=e.animation??e.anim;i!==void 0&&(this.animation.load(i),this.value=rt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class dO{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const i=e.width??e.area??e.value_area;i!==void 0&&(this.width=i);const n=e.height??e.factor;n!==void 0&&(this.height=n)}}class hO{constructor(){this.density=new dO,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const i=e.limit??e.max;i!==void 0&&(this.limit=i),e.value!==void 0&&(this.value=e.value)}}class fO{constructor(){this.blur=0,this.color=new vi,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=vi.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}const pf="character",mf="char",gf="image",yf="images",vf="polygon",bf="star";class pO{constructor(){this.loadShape=(e,i,n,s)=>{if(!e)return;const r=rn(e),a=r?[]:{},o=r!==rn(this.options[i]),l=r!==rn(this.options[n]);o&&(this.options[i]=a),l&&s&&(this.options[n]=a),this.options[i]=wi(this.options[i]??a,e),(!this.options[n]||s)&&(this.options[n]=wi(this.options[n]??a,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[pf]??this.options[mf]}set character(e){this.options[mf]=this.options[pf]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options[gf]??this.options[yf]}set image(e){this.options[yf]=this.options[gf]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options[vf]??this.options[bf]}set polygon(e){this.options[bf]=this.options[vf]=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const i=e.options??e.custom;if(i!==void 0)for(const n in i){const s=i[n];s&&(this.options[n]=wi(this.options[n]??{},s))}this.loadShape(e.character,pf,mf,!0),this.loadShape(e.polygon,vf,bf,!1),this.loadShape(e.image??e.images,gf,yf,!0),e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class mO extends Xx{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.size_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.size_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class gO extends Br{constructor(){super(),this.animation=new mO,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const i=e.animation??e.anim;i!==void 0&&(this.animation.load(i),this.value=rt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class cv{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=cu.create(this.color,e.color)),e.width!==void 0&&(this.width=rt(e.width)),e.opacity!==void 0&&(this.opacity=rt(e.opacity)))}}class yO extends Br{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class vO{constructor(e,i){this._engine=e,this._container=i,this.bounce=new Kx,this.collisions=new ZP,this.color=new cu,this.color.value="#fff",this.groups={},this.move=new lO,this.number=new hO,this.opacity=new cO,this.reduceDuplicates=!1,this.shadow=new fO,this.shape=new pO,this.size=new gO,this.stroke=new cv,this.zIndex=new yO}load(e){var s,r,a;if(!e)return;if(this.bounce.load(e.bounce),this.color.load(cu.create(this.color,e.color)),e.groups!==void 0)for(const o in e.groups){const l=e.groups[o];l!==void 0&&(this.groups[o]=wi(this.groups[o]??{},l))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const i=((s=e.move)==null?void 0:s.collisions)??((r=e.move)==null?void 0:r.bounce);i!==void 0&&(this.collisions.enable=i),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=wi({},e.interactivity));const n=e.stroke??((a=e.shape)==null?void 0:a.stroke);if(n&&(this.stroke=hi(n,o=>{const l=new cv;return l.load(o),l})),this._container){const o=this._engine.plugins.updaters.get(this._container);if(o)for(const u of o)u.loadOptions&&u.loadOptions(this,e);const l=this._engine.plugins.interactors.get(this._container);if(l)for(const u of l)u.loadParticlesOptions&&u.loadParticlesOptions(this,e)}}}function Yx(t,...e){for(const i of e)t.load(i)}function Qx(t,e,...i){const n=new vO(t,e);return Yx(n,...i),n}class bO{constructor(e,i){this._findDefaultTheme=n=>this.themes.find(s=>s.default.value&&s.default.mode===n)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=n=>{this.load(this._engine.plugins.getPreset(n))},this._engine=e,this._container=i,this.autoPlay=!0,this.background=new RP,this.backgroundMask=new LP,this.defaultThemes={},this.delay=0,this.fullScreen=new BP,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Gx(e,i),this.manualParticles=[],this.particles=Qx(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){var a,o;if(!e)return;e.preset!==void 0&&hi(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.delay!==void 0&&(this.delay=rt(e.delay));const i=e.detectRetina??e.retina_detect;i!==void 0&&(this.detectRetina=i),e.duration!==void 0&&(this.duration=rt(e.duration));const n=e.fpsLimit??e.fps_limit;n!==void 0&&(this.fpsLimit=n),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen??e.backgroundMode;Ar(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const u=new HP;return u.load(l),u})),this.particles.load(e.particles),this.style=wi(this.style,e.style),this._engine.plugins.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.plugins.interactors.get(this._container);if(r)for(const l of r)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const u=new qP;u.load(l),this.responsive.push(u)}if(this.responsive.sort((l,u)=>l.maxWidth-u.maxWidth),e.themes!==void 0)for(const l of e.themes){const u=this.themes.find(c=>c.name===l.name);if(u)u.load(l);else{const c=new WP;c.load(l),this.themes.push(c)}}this.defaultThemes.dark=(a=this._findDefaultTheme("dark"))==null?void 0:a.name,this.defaultThemes.light=(o=this._findDefaultTheme("light"))==null?void 0:o.name}setResponsive(e,i,n){this.load(n);const s=this.responsive.find(r=>r.mode==="screen"&&screen?r.maxWidth>screen.availWidth:r.maxWidth*i>e);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(e){if(e){const i=this.themes.find(n=>n.name===e);i&&this.load(i.options)}else{const i=Lx("(prefers-color-scheme: dark)"),n=i&&i.matches,s=this._findDefaultTheme(n?"dark":"light");s&&this.load(s.options)}}}class _O{constructor(e,i){this.container=i,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const i of this._externalInteractors)i.isEnabled()&&await i.interact(e)}handleClickMode(e){for(const i of this._externalInteractors)i.handleClickMode&&i.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e);break}e.init()}}async particlesInteract(e,i){for(const n of this._externalInteractors)n.clear(e,i);for(const n of this._particleInteractors)n.isEnabled(e)&&await n.interact(e,i)}async reset(e){for(const i of this._externalInteractors)i.isEnabled()&&i.reset(e);for(const i of this._particleInteractors)i.isEnabled(e)&&i.reset(e)}}const dv=t=>{if(!Kt(t.outMode,t.checkModes))return;const e=t.radius*2;t.coord>t.maxCoord-e?t.setCb(-t.radius):t.coord<e&&t.setCb(t.radius)};class TO{constructor(e,i,n,s,r,a){this.container=n,this._calcPosition=(o,l,u,c=0)=>{for(const[,x]of o.plugins){const C=x.particlePosition!==void 0?x.particlePosition(l,this):void 0;if(C)return tn.create(C.x,C.y,u)}const d=o.canvas.size,f=oP({size:d,position:l}),p=tn.create(f.x,f.y,u),b=this.getRadius(),g=this.options.move.outModes,_=x=>{dv({outMode:x,checkModes:["bounce","bounce-horizontal"],coord:p.x,maxCoord:o.canvas.size.width,setCb:C=>p.x+=C,radius:b})},w=x=>{dv({outMode:x,checkModes:["bounce","bounce-vertical"],coord:p.y,maxCoord:o.canvas.size.height,setCb:C=>p.y+=C,radius:b})};return _(g.left??g.default),_(g.right??g.default),w(g.top??g.default),w(g.bottom??g.default),this._checkOverlap(p,c)?this._calcPosition(o,void 0,u,c+1):p},this._calculateVelocity=()=>{const o=aP(this.direction),l=o.copy(),u=this.options.move;if(u.direction==="inside"||u.direction==="outside")return l;const c=Math.PI/180*We(u.angle.value),d=Math.PI/180*We(u.angle.offset),f={left:d-c/2,right:d+c/2};return u.straight||(l.angle+=Xi(rt(f.left,f.right))),u.random&&typeof u.speed=="number"&&(l.length*=kt()),l},this._checkOverlap=(o,l=0)=>{const u=this.options.collisions,c=this.getRadius();if(!u.enable)return!1;const d=u.overlap;if(d.enable)return!1;const f=d.retries;if(f>=0&&l>f)throw new Error(`${bn} particle is overlapping and can't be placed`);return!!this.container.particles.find(p=>sn(o,p.position)<c+p.getRadius())},this._getRollColor=o=>{if(!o||!this.roll||!this.backColor&&!this.roll.alter)return o;const l=this.roll.horizontal&&this.roll.vertical?2:1,u=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+u)/(Math.PI/l))%2?this.backColor?this.backColor:this.roll.alter?AP(o,this.roll.alter.type,this.roll.alter.value):o:o},this._initPosition=o=>{const l=this.container,u=We(this.options.zIndex.value);this.position=this._calcPosition(l,o,Gn(u,0,l.zLayers)),this.initialPosition=this.position.copy();const c=l.canvas.size;switch(this.moveCenter={...Ux(this.options.move.center,c),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=rP(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=ci.origin},this._loadShapeData=(o,l)=>{const u=o.options[this.shape];if(u)return wi({close:o.close,fill:o.fill},Ws(u,this.id,l))},this._engine=e,this.init(i,s,r,a)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const i=this.container,n=this.pathGenerator;for(const[,s]of i.plugins)s.particleDestroyed&&s.particleDestroyed(this,e);for(const s of i.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,e);n&&n.reset(this)}draw(e){const i=this.container;for(const[,n]of i.plugins)i.canvas.drawParticlePlugin(n,this,e);i.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??ov(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??ov(this.strokeColor))}init(e,i,n,s){const r=this.container,a=this._engine;this.id=e,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const o=r.retina.pixelRatio,l=r.actualOptions,u=Qx(this._engine,r,l.particles),c=u.shape.type,{reduceDuplicates:d}=u;this.shape=Ws(c,this.id,d);const f=u.shape;if(n&&n.shape&&n.shape.type){const C=n.shape.type,k=Ws(C,this.id,d);k&&(this.shape=k,f.load(n.shape))}this.shapeData=this._loadShapeData(f,d),u.load(n);const p=this.shapeData;p&&u.load(p.particles);const b=new Gx(a,r);b.load(r.actualOptions.interactivity),b.load(u.interactivity),this.interactivity=b,this.fill=(p==null?void 0:p.fill)??u.shape.fill,this.close=(p==null?void 0:p.close)??u.shape.close,this.options=u;const g=this.options.move.path;this.pathDelay=ya(g.delay)*1e3,g.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(g.generator),this.pathGenerator&&r.addPath(g.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=$x(this.options.size,o),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(i),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-We(this.options.move.decay);const _=r.particles;_.needsSort=_.needsSort||_.lastZIndex<this.position.z,_.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let w=r.drawers.get(this.shape);w||(w=this._engine.plugins.getShapeDrawer(this.shape),w&&r.drawers.set(this.shape,w)),w&&w.loadShape&&w.loadShape(this);const x=w==null?void 0:w.getSidesCount;x&&(this.sides=x(this)),this.spawning=!1,this.shadowColor=zn(this.options.shadow.color);for(const C of r.particles.updaters)C.init(this);for(const C of r.particles.movers)C.init&&C.init(this);w&&w.particleInit&&w.particleInit(r,this);for(const[,C]of r.plugins)C.particleCreated&&C.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),i=this.container.canvas.size,n=this.position;return n.x>=-e&&n.y>=-e&&n.y<=i.height+e&&n.x<=i.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class xO{constructor(e,i){this.position=e,this.particle=i}}class Zx{constructor(e,i){this.position={x:e,y:i}}}class Xn extends Zx{constructor(e,i,n,s){super(e,i),this.size={height:s,width:n}}contains(e){const i=this.size.width,n=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+i&&e.y>=s.y&&e.y<=s.y+n}intersects(e){e instanceof Ki&&e.intersects(this);const i=this.size.width,n=this.size.height,s=this.position,r=e.position,a=e instanceof Xn?e.size:{width:0,height:0},o=a.width,l=a.height;return r.x<s.x+i&&r.x+o>s.x&&r.y<s.y+n&&r.y+l>s.y}}let Ki=class Jx extends Zx{constructor(e,i,n){super(e,i),this.radius=n}contains(e){return sn(e,this.position)<=this.radius}intersects(e){const i=this.position,n=e.position,s={x:Math.abs(n.x-i.x),y:Math.abs(n.y-i.y)},r=this.radius;if(e instanceof Jx){const a=r+e.radius,o=Math.sqrt(s.x**2+s.y**2);return a>o}else if(e instanceof Xn){const{width:a,height:o}=e.size;return Math.pow(s.x-a,2)+Math.pow(s.y-o,2)<=r**2||s.x<=r+a&&s.y<=r+o||s.x<=a||s.y<=o}return!1}};class id{constructor(e,i){this.rectangle=e,this.capacity=i,this._subdivide=()=>{const{x:n,y:s}=this.rectangle.position,{width:r,height:a}=this.rectangle.size,{capacity:o}=this;for(let l=0;l<4;l++)this._subs.push(new id(new Xn(n+r/2*(l%2),s+a/2*(Math.round(l/2)-l%2),r/2,a/2),o));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(i=>i.insert(e))):!1}query(e,i,n){const s=n||[];if(!e.intersects(this.rectangle))return[];for(const r of this._points)!e.contains(r.position)&&sn(e.position,r.position)>r.particle.getRadius()&&(!i||i(r.particle))||s.push(r.particle);if(this._divided)for(const r of this._subs)r.query(e,i,s);return s}queryCircle(e,i,n){return this.query(new Ki(e.x,e.y,i),n)}queryRectangle(e,i,n){return this.query(new Xn(e.x,e.y,i.width,i.height),n)}}const hv=4,fv=t=>new Xn(-t.width/4,-t.height/4,t.width*3/2,t.height*3/2);let SO=class{constructor(e,i){this._applyDensity=(s,r,a)=>{var p;if(!((p=s.number.density)!=null&&p.enable))return;const o=s.number,l=this._initDensityFactor(o.density),u=o.value,c=o.limit>0?o.limit:u,d=Math.min(u,c)*l+r,f=Math.min(this.count,this.filter(b=>b.group===a).length);this.limit=o.limit*l,f<d?this.push(Math.abs(d-f),void 0,s,a):f>d&&this.removeQuantity(f-d,a)},this._initDensityFactor=s=>{const r=this._container;if(!r.canvas.element||!s.enable)return 1;const a=r.canvas.element,o=r.retina.pixelRatio;return a.width*a.height/(s.factor*o**2*s.area)},this._pushParticle=(s,r,a,o)=>{try{let l=this.pool.pop();l?l.init(this._nextId,s,r,a):l=new TO(this._engine,this._nextId,this._container,s,r,a);let u=!0;return o&&(u=o(l)),u?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:l}}),l):void 0}catch(l){va().warning(`${bn} adding particle: ${l}`);return}},this._removeParticle=(s,r,a)=>{const o=this._array[s];if(!o||o.group!==r)return!1;o.destroy(a);const l=this._zArray.indexOf(o);return this._array.splice(s,1),this._zArray.splice(l,1),this.pool.push(o),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:o}}),!0},this._engine=e,this._container=i,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new _O(e,i);const n=i.canvas.size;this.quadTree=new id(fv(n),hv),this.movers=this._engine.plugins.getMovers(i,!0),this.updaters=this._engine.plugins.getUpdaters(i,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,i=e.actualOptions;for(const n of i.manualParticles)this.addParticle(n.position?Ux(n.position,e.canvas.size):void 0,n.options)}addParticle(e,i,n,s){const r=this._container,a=r.actualOptions,o=a.particles.number.limit;if(o>0){const l=this.count+1-o;l>0&&this.removeQuantity(l)}return this._pushParticle(e,i,n,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const i=this._container;i.canvas.clear(),await this.update(e);for(const[,n]of i.plugins)i.canvas.drawPlugin(n,e);for(const n of this._zArray)n.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){var s;const e=this._container,i=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let n=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,r]of e.plugins)if(r.particlesInitialization!==void 0&&(n=r.particlesInitialization()),n)break;this._interactionManager.init();for(const[,r]of e.pathGenerators)r.init(e);if(this.addManualParticles(),!n){for(const r in i.particles.groups){const a=i.particles.groups[r];for(let o=this.count,l=0;l<((s=a.number)==null?void 0:s.value)&&o<i.particles.number.value;o++,l++)this.addParticle(void 0,a,r)}for(let r=this.count;r<i.particles.number.value;r++)this.addParticle()}}push(e,i,n,s){this.pushing=!0;for(let r=0;r<e;r++)this.addParticle(i==null?void 0:i.position,n,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,i,n){this.removeAt(this._array.indexOf(e),void 0,i,n)}removeAt(e,i=1,n,s){if(e<0||e>this.count)return;let r=0;for(let a=e;r<i&&a<this.count;a++)this._removeParticle(a--,n,s)&&r++}removeQuantity(e,i){this.removeAt(0,e,i)}setDensity(){const e=this._container.actualOptions,i=e.particles.groups;for(const n in i)this._applyDensity(i[n],0,n);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const i=this._container,n=new Set;this.quadTree=new id(fv(i.canvas.size),hv);for(const[,s]of i.pathGenerators)s.update();for(const[,s]of i.plugins)s.update&&s.update(e);for(const s of this._array){const r=i.canvas.resizeFactor;r&&!s.ignoresResizeRatio&&(s.position.x*=r.width,s.position.y*=r.height,s.initialPosition.x*=r.width,s.initialPosition.y*=r.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,a]of this._container.plugins){if(s.destroyed)break;a.particleUpdate&&a.particleUpdate(s,e)}for(const a of this.movers)a.isEnabled(s)&&a.move(s,e);if(s.destroyed){n.add(s);continue}this.quadTree.insert(new xO(s.getPosition(),s))}if(n.size){const s=r=>!n.has(r);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...n)}await this._interactionManager.externalInteract(e);for(const s of this._array){for(const r of this.updaters)r.update(s,e);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,e)}if(delete i.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((r,a)=>a.position.z-r.position.z||r.id-a.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class wO{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,i=e.actualOptions;this.pixelRatio=!i.detectRetina||vo()?1:window.devicePixelRatio,this.reduceFactor=1;const n=this.pixelRatio;if(e.canvas.element){const a=e.canvas.element;e.canvas.size.width=a.offsetWidth*n,e.canvas.size.height=a.offsetHeight*n}const s=i.particles,r=s.move;this.attractDistance=We(r.attract.distance)*n,this.maxSpeed=We(r.gravity.maxSpeed)*n,this.sizeAnimationSpeed=We(s.size.animation.speed)*n}initParticle(e){const i=e.options,n=this.pixelRatio,s=i.move,r=s.distance,a=e.retina;a.attractDistance=We(s.attract.distance)*n,a.moveDrift=We(s.drift)*n,a.moveSpeed=We(s.speed)*n,a.sizeAnimationSpeed=We(i.size.animation.speed)*n;const o=a.maxDistance;o.horizontal=r.horizontal!==void 0?r.horizontal*n:void 0,o.vertical=r.vertical!==void 0?r.vertical*n:void 0,a.maxSpeed=We(s.gravity.maxSpeed)*n}}function Bt(t){return t&&!t.destroyed}function CO(t,e=60,i=!1){return{value:t,factor:i?60/e:60*t/1e3}}function Aa(t,e,...i){const n=new bO(t,e);return Yx(n,...i),n}const EO="default",pv={generate:t=>t.velocity,init:()=>{},update:()=>{},reset:()=>{}};class DO{constructor(e,i,n){this.id=i,this._intersectionManager=s=>{if(!(!Bt(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=s);const r=CO(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(r.value),this.lastFrameTime=s,r.value>1e3){this.draw(!1);return}if(await this.particles.draw(r),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(r){va().error(`${bn} in animation loop`,r)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=n,this._initialSourceOptions=n,this.retina=new wO(this),this.canvas=new PP(this),this.particles=new SO(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Aa(this._engine,this),this.actualOptions=Aa(this._engine,this),this._eventListeners=new OP(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Bt(this))return;const i=this.interactivity.element;if(!i)return;const n=(d,f,p)=>{if(!Bt(this))return;const b=this.retina.pixelRatio,g={x:f.x*b,y:f.y*b},_=this.particles.quadTree.queryCircle(g,p*b);e(d,_)},s=d=>{if(!Bt(this))return;const f=d,p={x:f.offsetX||f.clientX,y:f.offsetY||f.clientY};n(d,p,1)},r=()=>{Bt(this)&&(u=!0,c=!1)},a=()=>{Bt(this)&&(c=!0)},o=d=>{if(Bt(this)){if(u&&!c){const f=d;let p=f.touches[f.touches.length-1];if(!p&&(p=f.changedTouches[f.changedTouches.length-1],!p))return;const b=this.canvas.element,g=b?b.getBoundingClientRect():void 0,_={x:p.clientX-(g?g.left:0),y:p.clientY-(g?g.top:0)};n(d,_,Math.max(p.radiusX,p.radiusY))}u=!1,c=!1}},l=()=>{Bt(this)&&(u=!1,c=!1)};let u=!1,c=!1;i.addEventListener("click",s),i.addEventListener("touchstart",r),i.addEventListener("touchmove",a),i.addEventListener("touchend",o),i.addEventListener("touchcancel",l)}addLifeTime(e){this._lifeTime+=e}addPath(e,i,n=!1){return!Bt(this)||!n&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,i??pv),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!Bt(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,n]of this.drawers)n.destroy&&n.destroy(this);for(const n of this.drawers.keys())this.drawers.delete(n);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),i=e.findIndex(n=>n===this);i>=0&&e.splice(i,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!Bt(this))return;let i=e;this._drawAnimationFrame=requestAnimationFrame(async n=>{i&&(this.lastFrameTime=void 0,i=!1),await this._nextFrame(n)})}async export(e,i={}){for(const[,n]of this.plugins){if(!n.export)continue;const s=await n.export(e,i);if(s.supported)return s.blob}va().error(`${bn} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&Bt(this)}handleClickMode(e){if(Bt(this)){this.particles.handleClickMode(e);for(const[,i]of this.plugins)i.handleClickMode&&i.handleClickMode(e)}}async init(){if(!Bt(this))return;const e=this._engine.plugins.getSupportedShapes();for(const n of e){const s=this._engine.plugins.getShapeDrawer(n);s&&this.drawers.set(n,s)}this._options=Aa(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Aa(this._engine,this,this._options);const i=this._engine.plugins.getAvailablePlugins(this);for(const[n,s]of i)this.plugins.set(n,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=We(this.actualOptions.duration)*1e3,this._delay=We(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,n]of this.drawers)n.init&&await n.init(this);for(const[,n]of this.plugins)n.init&&await n.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,n]of this.plugins)n.particlesSetup&&n.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){Bt(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(Bt(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!Bt(this))return;const i=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),i)for(const[,n]of this.plugins)n.play&&n.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(i||!1)}async refresh(){if(Bt(this))return this.stop(),this.start()}async reset(){if(Bt(this))return this._initialSourceOptions=void 0,this._options=Aa(this._engine,this),this.actualOptions=Aa(this._engine,this,this._options),this.refresh()}setNoise(e,i,n){Bt(this)&&this.setPath(e,i,n)}setPath(e,i,n){if(!e||!Bt(this))return;const s={...pv};if(zx(e))s.generate=e,i&&(s.init=i),n&&(s.update=n);else{const r=s;s.generate=e.generate||r.generate,s.init=e.init||r.init,s.update=e.update||r.update}this.addPath(EO,s,!0)}async start(){!Bt(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,i]of this.plugins)i.start&&await i.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()},this._delay)}))}stop(){if(!(!Bt(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===e?!1:(this.responsiveMaxWidth=e,!0)}}class kO{constructor(){this._listeners=new Map}addEventListener(e,i){this.removeEventListener(e,i);let n=this._listeners.get(e);n||(n=[],this._listeners.set(e,n)),n.push(i)}dispatchEvent(e,i){const n=this._listeners.get(e);n&&n.forEach(s=>s(i))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,i){const n=this._listeners.get(e);if(!n)return;const s=n.length,r=n.indexOf(i);r<0||(s===1?this._listeners.delete(e):n.splice(r,1))}}function _f(t,e,i,n=!1){let s=e.get(t);return(!s||n)&&(s=[...i.values()].map(r=>r(t)),e.set(t,s)),s}class AO{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,i){this._initializers.interactors.set(e,i)}addParticleMover(e,i){this._initializers.movers.set(e,i)}addParticleUpdater(e,i){this._initializers.updaters.set(e,i)}addPathGenerator(e,i){!this.getPathGenerator(e)&&this.pathGenerators.set(e,i)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,i,n=!1){(n||!this.getPreset(e))&&this.presets.set(e,i)}addShapeDrawer(e,i){hi(e,n=>{!this.getShapeDrawer(n)&&this.drawers.set(n,i)})}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const i=new Map;for(const n of this.plugins)n.needsPlugin(e.actualOptions)&&i.set(n.id,n.getPlugin(e));return i}getInteractors(e,i=!1){return _f(e,this.interactors,this._initializers.interactors,i)}getMovers(e,i=!1){return _f(e,this.movers,this._initializers.movers,i)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(i=>i.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,i=!1){return _f(e,this.updaters,this._initializers.updaters,i)}loadOptions(e,i){for(const n of this.plugins)n.loadOptions(e,i)}loadParticlesOptions(e,i,...n){const s=this.updaters.get(e);if(s)for(const r of s)r.loadOptions&&r.loadOptions(i,...n)}}async function IO(t){const e=Ws(t.url,t.index);if(!e)return t.fallback;const i=await fetch(e);return i.ok?i.json():(va().error(`${bn} ${i.status} while retrieving config file`),t.fallback)}function PO(t){return!t.id&&!t.element&&!t.url&&!t.options}function OO(t){return!PO(t)}class RO{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new kO,this._initialized=!1,this.plugins=new AO(this)}get configs(){const e={};for(const[i,n]of this._configs)e[i]=n;return e}get version(){return"2.12.0"}addConfig(e,i){$n(e)?i&&(i.name=e,this._configs.set(e,i)):this._configs.set(e.name??"default",e)}addEventListener(e,i){this._eventDispatcher.addEventListener(e,i)}async addInteractor(e,i,n=!0){this.plugins.addInteractor(e,i),await this.refresh(n)}async addMover(e,i,n=!0){this.plugins.addParticleMover(e,i),await this.refresh(n)}async addParticleUpdater(e,i,n=!0){this.plugins.addParticleUpdater(e,i),await this.refresh(n)}async addPathGenerator(e,i,n=!0){this.plugins.addPathGenerator(e,i),await this.refresh(n)}async addPlugin(e,i=!0){this.plugins.addPlugin(e),await this.refresh(i)}async addPreset(e,i,n=!1,s=!0){this.plugins.addPreset(e,i,n),await this.refresh(s)}async addShape(e,i,n,s,r,a=!0){let o,l=a,u,c,d;Ar(n)?(l=n,u=void 0):u=n,Ar(s)?(l=s,c=void 0):c=s,Ar(r)?(l=r,d=void 0):d=r,zx(i)?o={afterEffect:c,destroy:d,draw:i,init:u}:o=i,this.plugins.addShapeDrawer(e,o),await this.refresh(l)}dispatchEvent(e,i){this._eventDispatcher.dispatchEvent(e,i)}dom(){return this._domArray}domItem(e){const i=this.dom(),n=i[e];if(!n||n.destroyed){i.splice(e,1);return}return n}init(){this._initialized||(this._initialized=!0)}async load(e,i){return this.loadFromArray(e,i)}async loadFromArray(e,i,n){let s;return OO(e)?s=e:(s={},$n(e)?s.id=e:s.options=e,Un(i)?s.index=i:s.options=i??s.options,s.index=n??s.index),this._loadParams(s)}async loadJSON(e,i,n){let s,r;return Un(i)||i===void 0?s=e:(r=e,s=i),this._loadParams({id:r,url:s,index:n})}async refresh(e=!0){e&&this.dom().forEach(i=>i.refresh())}removeEventListener(e,i){this._eventDispatcher.removeEventListener(e,i)}async set(e,i,n,s){const r={index:s};return $n(e)?r.id=e:r.element=e,i instanceof HTMLElement?r.element=i:r.options=i,Un(n)?r.index=n:r.options=n??r.options,this._loadParams(r)}async setJSON(e,i,n,s){const r={};return e instanceof HTMLElement?(r.element=e,r.url=i,r.index=n):(r.id=e,r.element=i,r.url=n,r.index=s),this._loadParams(r)}setOnClickHandler(e){const i=this.dom();if(!i.length)throw new Error(`${bn} can only set click handlers after calling tsParticles.load()`);for(const n of i)n.addClickHandler(e)}async _loadParams(e){const i=e.id??`tsparticles${Math.floor(kt()*1e4)}`,{index:n,url:s}=e,r=s?await IO({fallback:e.options,url:s,index:n}):e.options;let a=e.element??document.getElementById(i);a||(a=document.createElement("div"),a.id=i,document.body.append(a));const o=Ws(r,n),l=this.dom(),u=l.findIndex(f=>f.id===i);if(u>=0){const f=this.domItem(u);f&&!f.destroyed&&(f.destroy(),l.splice(u,1))}let c;if(a.tagName.toLowerCase()==="canvas")c=a,c.dataset[Ul]="false";else{const f=a.getElementsByTagName("canvas");f.length?(c=f[0],c.dataset[Ul]="false"):(c=document.createElement("canvas"),c.dataset[Ul]="true",a.appendChild(c))}c.style.width||(c.style.width="100%"),c.style.height||(c.style.height="100%");const d=new DO(this,i,o);return u>=0?l.splice(u,0,d):l.push(d),d.canvas.loadCanvas(c),await d.start(),d}}class MO{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const i=e.value,n=i.hsl??e.value;if(n.h!==void 0&&n.s!==void 0&&n.l!==void 0)return bo(n)}handleRangeColor(e){const i=e.value,n=i.hsl??e.value;if(n.h!==void 0&&n.l!==void 0)return bo({h:We(n.h),l:We(n.l),s:We(n.s)})}parseString(e){if(!e.startsWith("hsl"))return;const i=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,n=i.exec(e);return n?_P({a:n.length>4?Mx(n[5]):1,h:parseInt(n[1],10),l:parseInt(n[3],10),s:parseInt(n[2],10)}):void 0}}class LO{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const i=e.value,n=i.rgb??e.value;if(n.r!==void 0)return n}handleRangeColor(e){const i=e.value,n=i.rgb??e.value;if(n.r!==void 0)return{r:We(n.r),g:We(n.g),b:We(n.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const i=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,n=i.exec(e);return n?{a:n.length>4?Mx(n[5]):1,b:parseInt(n[3],10),g:parseInt(n[2],10),r:parseInt(n[1],10)}:void 0}}function BO(){const t=new LO,e=new MO;av(t),av(e);const i=new RO;return i.init(),i}class As{constructor(e){this.container=e,this.type="external"}}class rg{constructor(e){this.container=e,this.type="particles"}}const Vl=BO();vo()||(window.tsParticles=Vl);class nd{static init(e){var r;const i=new nd,n=e.selector;if(!n)throw new Error("No selector provided");const s=document.querySelector(n);if(!s)throw new Error("No element found for selector");return Vl.set(n.replace(".","").replace("!",""),s,{fullScreen:{enable:!1},particles:{color:{value:e.color??"!000000"},links:{color:"random",distance:e.minDistance??120,enable:e.connectParticles??!1},move:{enable:!0,speed:e.speed??.5},number:{value:e.maxParticles??100},size:{value:{min:1,max:e.sizeVariations??3}}},responsive:(r=e.responsive)==null?void 0:r.map(a=>{var o,l,u,c,d;return{maxWidth:a.breakpoint,options:{particles:{color:{value:(o=a.options)==null?void 0:o.color},links:{distance:(l=a.options)==null?void 0:l.minDistance,enable:(u=a.options)==null?void 0:u.connectParticles},number:{value:e.maxParticles},move:{enable:!0,speed:(c=a.options)==null?void 0:c.speed},size:{value:(d=a.options)==null?void 0:d.sizeVariations}}}}})}).then(a=>{i._container=a}),i}destroy(){const e=this._container;e&&e.destroy()}pauseAnimation(){const e=this._container;e&&e.pause()}resumeAnimation(){const e=this._container;e&&e.play()}}const NO=t=>{const e=(n,s)=>t.load(n,s);e.load=(n,s,r)=>{t.loadJSON(n,s).then(a=>{a&&r(a)}).catch(()=>{r(void 0)})},e.setOnClickHandler=n=>{t.setOnClickHandler(n)};const i=t.dom();return{particlesJS:e,pJSDom:i}},FO=t=>{const{particlesJS:e,pJSDom:i}=NO(t);return window.particlesJS=e,window.pJSDom=i,window.Particles=nd,{particlesJS:e,pJSDom:i,Particles:nd}};function $O(t){const e=t.initialPosition,{dx:i,dy:n}=Hi(e,t.position),s=Math.abs(i),r=Math.abs(n),{maxDistance:a}=t.retina,o=a.horizontal,l=a.vertical;if(!(!o&&!l)){if((o&&s>=o||l&&r>=l)&&!t.misplaced)t.misplaced=!!o&&s>o||!!l&&r>l,o&&(t.velocity.x=t.velocity.y/2-t.velocity.x),l&&(t.velocity.y=t.velocity.x/2-t.velocity.y);else if((!o||s<o)&&(!l||r<l)&&t.misplaced)t.misplaced=!1;else if(t.misplaced){const u=t.position,c=t.velocity;o&&(u.x<e.x&&c.x<0||u.x>e.x&&c.x>0)&&(c.x*=-kt()),l&&(u.y<e.y&&c.y<0||u.y>e.y&&c.y>0)&&(c.y*=-kt())}}}function UO(t,e,i,n,s,r){VO(t,r);const a=t.gravity,o=a!=null&&a.enable&&a.inverse?-1:1;s&&i&&(t.velocity.x+=s*r.factor/(60*i)),a!=null&&a.enable&&i&&(t.velocity.y+=o*(a.acceleration*r.factor)/(60*i));const l=t.moveDecay;t.velocity.multTo(l);const u=t.velocity.mult(i);a!=null&&a.enable&&n>0&&(!a.inverse&&u.y>=0&&u.y>=n||a.inverse&&u.y<=0&&u.y<=-n)&&(u.y=o*n,i&&(t.velocity.y=u.y/i));const c=t.options.zIndex,d=(1-t.zIndexFactor)**c.velocityRate;u.multTo(d);const{position:f}=t;f.addTo(u),e.vibrate&&(f.x+=Math.sin(f.x*Math.cos(f.y)),f.y+=Math.cos(f.y*Math.sin(f.x)))}function zO(t,e){const i=t.container;if(!t.spin)return;const n={x:t.spin.direction==="clockwise"?Math.cos:Math.sin,y:t.spin.direction==="clockwise"?Math.sin:Math.cos};t.position.x=t.spin.center.x+t.spin.radius*n.x(t.spin.angle),t.position.y=t.spin.center.y+t.spin.radius*n.y(t.spin.angle),t.spin.radius+=t.spin.acceleration;const s=Math.max(i.canvas.size.width,i.canvas.size.height);t.spin.radius>s/2?(t.spin.radius=s/2,t.spin.acceleration*=-1):t.spin.radius<0&&(t.spin.radius=0,t.spin.acceleration*=-1),t.spin.angle+=e/100*(1-t.spin.radius/s)}function VO(t,e){var a;const i=t.options,n=i.move.path;if(!n.enable)return;if(t.lastPathTime<=t.pathDelay){t.lastPathTime+=e.value;return}const r=(a=t.pathGenerator)==null?void 0:a.generate(t,e);r&&t.velocity.addTo(r),n.clamp&&(t.velocity.x=Gn(t.velocity.x,-1,1),t.velocity.y=Gn(t.velocity.y,-1,1)),t.lastPathTime-=t.pathDelay}function HO(t){return t.slow.inRange?t.slow.factor:1}const qO=2;class jO{constructor(){this._initSpin=e=>{const i=e.container,n=e.options,s=n.move.spin;if(!s.enable)return;const r=s.position??{x:50,y:50},a={x:r.x/100*i.canvas.size.width,y:r.y/100*i.canvas.size.height},o=e.getPosition(),l=sn(o,a),u=We(s.acceleration);e.retina.spinAcceleration=u*i.retina.pixelRatio,e.spin={center:a,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:l,acceleration:e.retina.spinAcceleration}}}init(e){const i=e.options,n=i.move.gravity;e.gravity={enable:n.enable,acceleration:We(n.acceleration),inverse:n.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,i){var b,g;const n=e.options,s=n.move;if(!s.enable)return;const r=e.container,a=r.retina.pixelRatio,o=HO(e),l=((b=e.retina).moveSpeed??(b.moveSpeed=We(s.speed)*a))*r.retina.reduceFactor,u=(g=e.retina).moveDrift??(g.moveDrift=We(e.options.move.drift)*a),c=Er(n.size.value)*a,d=s.size?e.getRadius()/c:1,f=l*d*o*(i.factor||1)/qO,p=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?zO(e,f):UO(e,s,f,p,u,i),$O(e)}}async function WO(t,e=!0){await t.addMover("base",()=>new jO,e)}class GO{draw(e,i,n){i.circleRange||(i.circleRange={min:0,max:Math.PI*2});const s=i.circleRange;e.arc(0,0,n,s.min,s.max,!1)}getSidesCount(){return 12}particleInit(e,i){const n=i.shapeData,s=(n==null?void 0:n.angle)??{max:360,min:0};i.circleRange=Xa(s)?{min:s.min*Math.PI/180,max:s.max*Math.PI/180}:{min:0,max:s*Math.PI/180}}}async function XO(t,e=!0){await t.addShape("circle",new GO,e)}function Tf(t,e,i,n,s){if(!e||!i.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=t.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const r=Xi(i.offset),a=(e.velocity??0)*t.factor+r*3.6,o=e.decay??1;!s||e.status==="increasing"?(e.value+=a,e.value>n&&(e.loops||(e.loops=0),e.loops++,s&&(e.status="decreasing",e.value-=e.value%n))):(e.value-=a,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&o!==1&&(e.velocity*=o),e.value>n&&(e.value%=n)}function KO(t,e){const{h:i,s:n,l:s}=t.options.color.animation,{color:r}=t;if(!r)return;const{h:a,s:o,l}=r;a&&Tf(e,a,i,360,!1),o&&Tf(e,o,n,100,!0),l&&Tf(e,l,s,100,!0)}class YO{constructor(e){this.container=e}init(e){const i=lu(e.options.color,e.id,e.options.reduceDuplicates);i&&(e.color=Wx(i,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:i,s:n,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&i.enable||(r==null?void 0:r.s.value)!==void 0&&n.enable||(r==null?void 0:r.l.value)!==void 0&&s.enable)}update(e,i){KO(e,i)}}async function QO(t,e=!0){await t.addParticleUpdater("color",i=>new YO(i),e)}function ZO(t,e,i,n){switch(t.options.opacity.animation.destroy){case"max":e>=n&&t.destroy();break;case"min":e<=i&&t.destroy();break}}function JO(t,e){const i=t.opacity;if(t.destroyed||!(i!=null&&i.enable)||(i.maxLoops??0)>0&&(i.loops??0)>(i.maxLoops??0))return;const n=i.min,s=i.max,r=i.decay??1;if(i.time||(i.time=0),(i.delayTime??0)>0&&i.time<(i.delayTime??0)&&(i.time+=e.value),!((i.delayTime??0)>0&&i.time<(i.delayTime??0))){switch(i.status){case"increasing":i.value>=s?(i.status="decreasing",i.loops||(i.loops=0),i.loops++):i.value+=(i.velocity??0)*e.factor;break;case"decreasing":i.value<=n?(i.status="increasing",i.loops||(i.loops=0),i.loops++):i.value-=(i.velocity??0)*e.factor;break}i.velocity&&i.decay!==1&&(i.velocity*=r),ZO(t,i.value,n,s),t.destroyed||(i.value=Gn(i.value,n,s))}}class eR{constructor(e){this.container=e}init(e){const i=e.options.opacity;e.opacity=$x(i,1);const n=i.animation;n.enable&&(e.opacity.velocity=We(n.speed)/100*this.container.retina.reduceFactor,n.sync||(e.opacity.velocity*=kt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,i){this.isEnabled(e)&&JO(e,i)}}async function tR(t,e=!0){await t.addParticleUpdater("opacity",i=>new eR(i),e)}function iR(t){if(t.outMode!=="bounce"&&t.outMode!=="bounce-horizontal"&&t.outMode!=="bounceHorizontal"&&t.outMode!=="split"||t.direction!=="left"&&t.direction!=="right")return;t.bounds.right<0&&t.direction==="left"?t.particle.position.x=t.size+t.offset.x:t.bounds.left>t.canvasSize.width&&t.direction==="right"&&(t.particle.position.x=t.canvasSize.width-t.size-t.offset.x);const e=t.particle.velocity.x;let i=!1;if(t.direction==="right"&&t.bounds.right>=t.canvasSize.width&&e>0||t.direction==="left"&&t.bounds.left<=0&&e<0){const s=ya(t.particle.options.bounce.horizontal);t.particle.velocity.x*=-s,i=!0}if(!i)return;const n=t.offset.x+t.size;t.bounds.right>=t.canvasSize.width&&t.direction==="right"?t.particle.position.x=t.canvasSize.width-n:t.bounds.left<=0&&t.direction==="left"&&(t.particle.position.x=n),t.outMode==="split"&&t.particle.destroy()}function nR(t){if(t.outMode!=="bounce"&&t.outMode!=="bounce-vertical"&&t.outMode!=="bounceVertical"&&t.outMode!=="split"||t.direction!=="bottom"&&t.direction!=="top")return;t.bounds.bottom<0&&t.direction==="top"?t.particle.position.y=t.size+t.offset.y:t.bounds.top>t.canvasSize.height&&t.direction==="bottom"&&(t.particle.position.y=t.canvasSize.height-t.size-t.offset.y);const e=t.particle.velocity.y;let i=!1;if(t.direction==="bottom"&&t.bounds.bottom>=t.canvasSize.height&&e>0||t.direction==="top"&&t.bounds.top<=0&&e<0){const s=ya(t.particle.options.bounce.vertical);t.particle.velocity.y*=-s,i=!0}if(!i)return;const n=t.offset.y+t.size;t.bounds.bottom>=t.canvasSize.height&&t.direction==="bottom"?t.particle.position.y=t.canvasSize.height-n:t.bounds.top<=0&&t.direction==="top"&&(t.particle.position.y=n),t.outMode==="split"&&t.particle.destroy()}class sR{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,i,n,s){if(!this.modes.includes(s))return;const r=this.container;let a=!1;for(const[,f]of r.plugins)if(f.particleBounce!==void 0&&(a=f.particleBounce(e,n,i)),a)break;if(a)return;const o=e.getPosition(),l=e.offset,u=e.getRadius(),c=wu(o,u),d=r.canvas.size;iR({particle:e,outMode:s,direction:i,bounds:c,canvasSize:d,offset:l,size:u}),nR({particle:e,outMode:s,direction:i,bounds:c,canvasSize:d,offset:l,size:u})}}class rR{constructor(e){this.container=e,this.modes=["destroy"]}update(e,i,n,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case"normal":case"outside":if(tg(e.position,r.canvas.size,ci.origin,e.getRadius(),i))return;break;case"inside":{const{dx:a,dy:o}=Hi(e.position,e.moveCenter),{x:l,y:u}=e.velocity;if(l<0&&a>e.moveCenter.radius||u<0&&o>e.moveCenter.radius||l>=0&&a<-e.moveCenter.radius||u>=0&&o<-e.moveCenter.radius)return;break}}r.particles.remove(e,void 0,!0)}}class aR{constructor(e){this.container=e,this.modes=["none"]}update(e,i,n,s){if(!this.modes.includes(s)||e.options.move.distance.horizontal&&(i==="left"||i==="right")||e.options.move.distance.vertical&&(i==="top"||i==="bottom"))return;const r=e.options.move.gravity,a=this.container,o=a.canvas.size,l=e.getRadius();if(r.enable){const u=e.position;(!r.inverse&&u.y>o.height+l&&i==="bottom"||r.inverse&&u.y<-l&&i==="top")&&a.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=o.height+l||e.velocity.y<0&&e.position.y>=-l||e.velocity.x>0&&e.position.x<=o.width+l||e.velocity.x<0&&e.position.x>=-l)return;tg(e.position,a.canvas.size,ci.origin,l,i)||a.particles.remove(e)}}}class oR{constructor(e){this.container=e,this.modes=["out"]}update(e,i,n,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case"inside":{const{x:a,y:o}=e.velocity,l=ci.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(ci.create(e.moveCenter));const{dx:u,dy:c}=Hi(e.position,l);if(a<=0&&u>=0||o<=0&&c>=0||a>=0&&u<=0||o>=0&&c<=0)return;e.position.x=Math.floor(Xi({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(Xi({min:0,max:r.canvas.size.height}));const{dx:d,dy:f}=Hi(e.position,e.moveCenter);e.direction=Math.atan2(-f,-d),e.velocity.angle=e.direction;break}default:{if(tg(e.position,r.canvas.size,ci.origin,e.getRadius(),i))return;switch(e.outType){case"outside":{e.position.x=Math.floor(Xi({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Xi({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:a,dy:o}=Hi(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(o,a),e.velocity.angle=e.direction);break}case"normal":{const a=e.options.move.warp,o=r.canvas.size,l={bottom:o.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:o.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},u=e.getRadius(),c=wu(e.position,u);i==="right"&&c.left>o.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,a||(e.position.y=kt()*o.height,e.initialPosition.y=e.position.y)):i==="left"&&c.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,a||(e.position.y=kt()*o.height,e.initialPosition.y=e.position.y)),i==="bottom"&&c.top>o.height+e.offset.y?(a||(e.position.x=kt()*o.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):i==="top"&&c.bottom<-e.offset.y&&(a||(e.position.x=kt()*o.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}class lR{constructor(e){this.container=e,this._updateOutMode=(i,n,s,r)=>{for(const a of this.updaters)a.update(i,r,n,s)},this.updaters=[new sR(e),new rR(e),new oR(e),new aR(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,i){const n=e.options.move.outModes;this._updateOutMode(e,i,n.bottom??n.default,"bottom"),this._updateOutMode(e,i,n.left??n.default,"left"),this._updateOutMode(e,i,n.right??n.default,"right"),this._updateOutMode(e,i,n.top??n.default,"top")}}async function uR(t,e=!0){await t.addParticleUpdater("outModes",i=>new lR(i),e)}function cR(t,e,i,n){switch(t.options.size.animation.destroy){case"max":e>=n&&t.destroy();break;case"min":e<=i&&t.destroy();break}}function dR(t,e){const i=t.size;if(t.destroyed||!i||!i.enable||(i.maxLoops??0)>0&&(i.loops??0)>(i.maxLoops??0))return;const n=(i.velocity??0)*e.factor,s=i.min,r=i.max,a=i.decay??1;if(i.time||(i.time=0),(i.delayTime??0)>0&&i.time<(i.delayTime??0)&&(i.time+=e.value),!((i.delayTime??0)>0&&i.time<(i.delayTime??0))){switch(i.status){case"increasing":i.value>=r?(i.status="decreasing",i.loops||(i.loops=0),i.loops++):i.value+=n;break;case"decreasing":i.value<=s?(i.status="increasing",i.loops||(i.loops=0),i.loops++):i.value-=n}i.velocity&&a!==1&&(i.velocity*=a),cR(t,i.value,s,r),t.destroyed||(i.value=Gn(i.value,s,r))}}class hR{init(e){const i=e.container,n=e.options.size,s=n.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??i.retina.sizeAnimationSpeed)/100*i.retina.reduceFactor,s.sync||(e.size.velocity*=kt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,i){this.isEnabled(e)&&dR(e,i)}}async function fR(t,e=!0){await t.addParticleUpdater("size",()=>new hR,e)}async function pR(t,e=!0){await WO(t,!1),await XO(t,!1),await QO(t,!1),await tR(t,!1),await uR(t,!1),await fR(t,!1),await t.refresh(e)}async function mR(){lf("ease-in-quad",t=>t**2),lf("ease-out-quad",t=>1-(1-t)**2),lf("ease-in-out-quad",t=>t<.5?2*t**2:1-(-2*t+2)**2/2)}class gR{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}let yR=class extends As{constructor(e,i){super(i),this._clickAttract=()=>{const n=this.container;n.attract||(n.attract={particles:[]});const{attract:s}=n;if(s.finish||(s.count||(s.count=0),s.count++,s.count===n.particles.count&&(s.finish=!0)),s.clicking){const r=n.interactivity.mouse.clickPosition,a=n.retina.attractModeDistance;if(!a||a<0||!r)return;this._processAttract(r,a,new Ki(r.x,r.y,a))}else s.clicking===!1&&(s.particles=[])},this._hoverAttract=()=>{const n=this.container,s=n.interactivity.mouse.position,r=n.retina.attractModeDistance;!r||r<0||!s||this._processAttract(s,r,new Ki(s.x,s.y,r))},this._processAttract=(n,s,r)=>{const a=this.container,o=a.actualOptions.interactivity.modes.attract;if(!o)return;const l=a.particles.quadTree.query(r,u=>this.isEnabled(u));for(const u of l){const{dx:c,dy:d,distance:f}=Hi(u.position,n),p=o.speed*o.factor,b=Gn(Rx(o.easing)(1-f/s)*p,0,o.maxSpeed),g=ci.create(f===0?p:c/f*b,f===0?p:d/f*b);u.position.subFrom(g)}},this._engine=e,i.attract||(i.attract={particles:[]}),this.handleClickMode=n=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||n!=="attract")){i.attract||(i.attract={particles:[]}),i.attract.clicking=!0,i.attract.count=0;for(const a of i.attract.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);i.attract.particles=[],i.attract.finish=!1,setTimeout(()=>{i.destroyed||(i.attract||(i.attract={particles:[]}),i.attract.clicking=!1)},r.duration*1e3)}}}clear(){}init(){const e=this.container,i=e.actualOptions.interactivity.modes.attract;i&&(e.retina.attractModeDistance=i.distance*e.retina.pixelRatio)}async interact(){const e=this.container,i=e.actualOptions,n=e.interactivity.status===ga,s=i.interactivity.events,r=s.onHover.enable,a=s.onHover.mode,o=s.onClick.enable,l=s.onClick.mode;n&&r&&Kt("attract",a)?this._hoverAttract():o&&Kt("attract",l)&&this._clickAttract()}isEnabled(e){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,r=((e==null?void 0:e.interactivity)??n.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const a=r.onHover.mode,o=r.onClick.mode;return Kt("attract",a)||Kt("attract",o)}loadModeOptions(e,...i){e.attract||(e.attract=new gR);for(const n of i)e.attract.load(n==null?void 0:n.attract)}reset(){}};async function vR(t,e=!0){await t.addInteractor("externalAttract",i=>new yR(t,i),e)}class bR{constructor(){this.distance=200}load(e){e&&e.distance!==void 0&&(this.distance=e.distance)}}class _R extends As{constructor(e){super(e),this._processBounce=(i,n,s)=>{const r=this.container.particles.quadTree.query(s,a=>this.isEnabled(a));for(const a of r)s instanceof Ki?Nx(Vp(a),{position:i,mass:n**2*Math.PI/2,velocity:ci.origin,factor:ci.origin}):s instanceof Xn&&gP(a,wu(i,n))},this._processMouseBounce=()=>{const i=this.container,n=i.retina.pixelRatio,s=10*n,r=i.interactivity.mouse.position,a=i.retina.bounceModeDistance;!a||a<0||!r||this._processBounce(r,a,new Ki(r.x,r.y,a+s))},this._singleSelectorBounce=(i,n)=>{const s=this.container,r=document.querySelectorAll(i);r.length&&r.forEach(a=>{const o=a,l=s.retina.pixelRatio,u={x:(o.offsetLeft+o.offsetWidth/2)*l,y:(o.offsetTop+o.offsetHeight/2)*l},c=o.offsetWidth/2*l,d=10*l,f=n.type==="circle"?new Ki(u.x,u.y,c+d):new Xn(o.offsetLeft*l-d,o.offsetTop*l-d,o.offsetWidth*l+d*2,o.offsetHeight*l+d*2);this._processBounce(u,c,f)})}}clear(){}init(){const e=this.container,i=e.actualOptions.interactivity.modes.bounce;i&&(e.retina.bounceModeDistance=i.distance*e.retina.pixelRatio)}async interact(){const e=this.container,i=e.actualOptions,n=i.interactivity.events,s=e.interactivity.status===ga,r=n.onHover.enable,a=n.onHover.mode,o=n.onDiv;s&&r&&Kt("bounce",a)?this._processMouseBounce():ng("bounce",o,(l,u)=>this._singleSelectorBounce(l,u))}isEnabled(e){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,r=((e==null?void 0:e.interactivity)??n.interactivity).events,a=r.onDiv;return s.position&&r.onHover.enable&&Kt("bounce",r.onHover.mode)||ig("bounce",a)}loadModeOptions(e,...i){e.bounce||(e.bounce=new bR);for(const n of i)e.bounce.load(n==null?void 0:n.bounce)}reset(){}}async function TR(t,e=!0){await t.addInteractor("externalBounce",i=>new _R(i),e)}class e1{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const i=rn(this.color)?void 0:this.color;this.color=hi(e.color,n=>vi.create(i,n))}e.size!==void 0&&(this.size=e.size)}}}class xR extends e1{constructor(){super(),this.selectors=[]}get ids(){return hi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=hi(e,i=>`#${i}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class SR extends e1{load(e){super.load(e),e&&(this.divs=hi(e.divs,i=>{const n=new xR;return n.load(i),n}))}}function mv(t,e,i,n){if(e>=i){const s=t+(e-i)*n;return Gn(s,t,e)}else if(e<i){const s=t-(i-e)*n;return Gn(s,e,t)}}class wR extends As{constructor(e){super(e),this._clickBubble=()=>{var u;const i=this.container,n=i.actualOptions,s=i.interactivity.mouse.clickPosition,r=n.interactivity.modes.bubble;if(!r||!s)return;i.bubble||(i.bubble={});const a=i.retina.bubbleModeDistance;if(!a||a<0)return;const o=i.particles.quadTree.queryCircle(s,a,c=>this.isEnabled(c)),{bubble:l}=i;for(const c of o){if(!l.clicking)continue;c.bubble.inRange=!l.durationEnd;const d=c.getPosition(),f=sn(d,s),p=(new Date().getTime()-(i.interactivity.mouse.clickTime||0))/1e3;p>r.duration&&(l.durationEnd=!0),p>r.duration*2&&(l.clicking=!1,l.durationEnd=!1);const b={bubbleObj:{optValue:i.retina.bubbleModeSize,value:c.bubble.radius},particlesObj:{optValue:Er(c.options.size.value)*i.retina.pixelRatio,value:c.size.value},type:"size"};this._process(c,f,p,b);const g={bubbleObj:{optValue:r.opacity,value:c.bubble.opacity},particlesObj:{optValue:Er(c.options.opacity.value),value:((u=c.opacity)==null?void 0:u.value)??1},type:"opacity"};this._process(c,f,p,g),!l.durationEnd&&f<=a?this._hoverBubbleColor(c,f):delete c.bubble.color}},this._hoverBubble=()=>{const i=this.container,n=i.interactivity.mouse.position,s=i.retina.bubbleModeDistance;if(!s||s<0||n===void 0)return;const r=i.particles.quadTree.queryCircle(n,s,a=>this.isEnabled(a));for(const a of r){a.bubble.inRange=!0;const o=a.getPosition(),l=sn(o,n),u=1-l/s;l<=s?u>=0&&i.interactivity.status===ga&&(this._hoverBubbleSize(a,u),this._hoverBubbleOpacity(a,u),this._hoverBubbleColor(a,u)):this.reset(a),i.interactivity.status===Up&&this.reset(a)}},this._hoverBubbleColor=(i,n,s)=>{const r=this.container.actualOptions,a=s??r.interactivity.modes.bubble;if(a){if(!i.bubble.finalColor){const o=a.color;if(!o)return;const l=Ws(o);i.bubble.finalColor=lu(l)}if(i.bubble.finalColor)if(a.mix){i.bubble.color=void 0;const o=i.getFillColor();i.bubble.color=o?Hx(sg(o,i.bubble.finalColor,1-n,n)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,n,s)=>{var d,f;const r=this.container,a=r.actualOptions,o=(s==null?void 0:s.opacity)??((d=a.interactivity.modes.bubble)==null?void 0:d.opacity);if(!o)return;const l=i.options.opacity.value,u=((f=i.opacity)==null?void 0:f.value)??1,c=mv(u,o,Er(l),n);c!==void 0&&(i.bubble.opacity=c)},this._hoverBubbleSize=(i,n,s)=>{const r=this.container,a=s!=null&&s.size?s.size*r.retina.pixelRatio:r.retina.bubbleModeSize;if(a===void 0)return;const o=Er(i.options.size.value)*r.retina.pixelRatio,l=i.size.value,u=mv(l,a,o,n);u!==void 0&&(i.bubble.radius=u)},this._process=(i,n,s,r)=>{const a=this.container,o=r.bubbleObj.optValue,l=a.actualOptions,u=l.interactivity.modes.bubble;if(!u||o===void 0)return;const c=u.duration,d=a.retina.bubbleModeDistance,f=r.particlesObj.optValue,p=r.bubbleObj.value,b=r.particlesObj.value||0,g=r.type;if(!(!d||d<0||o===f))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)p&&(g==="size"&&delete i.bubble.radius,g==="opacity"&&delete i.bubble.opacity);else if(n<=d){if((p??b)!==o){const w=b-s*(b-o)/c;g==="size"&&(i.bubble.radius=w),g==="opacity"&&(i.bubble.opacity=w)}}else g==="size"&&delete i.bubble.radius,g==="opacity"&&delete i.bubble.opacity},this._singleSelectorHover=(i,n,s)=>{const r=this.container,a=document.querySelectorAll(n),o=r.actualOptions.interactivity.modes.bubble;!o||!a.length||a.forEach(l=>{const u=l,c=r.retina.pixelRatio,d={x:(u.offsetLeft+u.offsetWidth/2)*c,y:(u.offsetTop+u.offsetHeight/2)*c},f=u.offsetWidth/2*c,p=s.type==="circle"?new Ki(d.x,d.y,f):new Xn(u.offsetLeft*c,u.offsetTop*c,u.offsetWidth*c,u.offsetHeight*c),b=r.particles.quadTree.query(p,g=>this.isEnabled(g));for(const g of b){if(!p.contains(g.getPosition()))continue;g.bubble.inRange=!0;const _=o.divs,w=Bx(_,u);(!g.bubble.div||g.bubble.div!==u)&&(this.clear(g,i,!0),g.bubble.div=u),this._hoverBubbleSize(g,1,w),this._hoverBubbleOpacity(g,1,w),this._hoverBubbleColor(g,1,w)}})},e.bubble||(e.bubble={}),this.handleClickMode=i=>{i==="bubble"&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,i,n){e.bubble.inRange&&!n||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,i=e.actualOptions.interactivity.modes.bubble;i&&(e.retina.bubbleModeDistance=i.distance*e.retina.pixelRatio,i.size!==void 0&&(e.retina.bubbleModeSize=i.size*e.retina.pixelRatio))}async interact(e){const i=this.container.actualOptions,n=i.interactivity.events,s=n.onHover,r=n.onClick,a=s.enable,o=s.mode,l=r.enable,u=r.mode,c=n.onDiv;a&&Kt("bubble",o)?this._hoverBubble():l&&Kt("bubble",u)?this._clickBubble():ng("bubble",c,(d,f)=>this._singleSelectorHover(e,d,f))}isEnabled(e){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,r=((e==null?void 0:e.interactivity)??n.interactivity).events,{onClick:a,onDiv:o,onHover:l}=r,u=ig("bubble",o);return u||l.enable&&s.position||a.enable&&s.clickPosition?Kt("bubble",l.mode)||Kt("bubble",a.mode)||u:!1}loadModeOptions(e,...i){e.bubble||(e.bubble=new SR);for(const n of i)e.bubble.load(n==null?void 0:n.bubble)}reset(e){e.bubble.inRange=!1}}async function CR(t,e=!0){await t.addInteractor("externalBubble",i=>new wR(i),e)}class ER{constructor(){this.opacity=.5}load(e){e&&e.opacity!==void 0&&(this.opacity=e.opacity)}}class DR{constructor(){this.distance=80,this.links=new ER,this.radius=60}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked),e.radius!==void 0&&(this.radius=e.radius))}}function kR(t,e,i,n){const s=Math.floor(i.getRadius()/e.getRadius()),r=e.getFillColor(),a=i.getFillColor();if(!r||!a)return;const o=e.getPosition(),l=i.getPosition(),u=sg(r,a,e.getRadius(),i.getRadius()),c=t.createLinearGradient(o.x,o.y,l.x,l.y);return c.addColorStop(0,uu(r,n)),c.addColorStop(s>1?1:s,Gs(u,n)),c.addColorStop(1,uu(a,n)),c}function AR(t,e,i,n,s){zl(t,n,s),t.lineWidth=e,t.strokeStyle=i,t.stroke()}function IR(t,e,i,n){const s=t.actualOptions,r=s.interactivity.modes.connect;if(r)return kR(e,i,n,r.links.opacity)}function PR(t,e,i){t.canvas.draw(n=>{const s=IR(t,n,e,i);if(!s)return;const r=e.getPosition(),a=i.getPosition();AR(n,e.retina.linksWidth??0,s,r,a)})}class OR extends As{constructor(e){super(e)}clear(){}init(){const e=this.container,i=e.actualOptions.interactivity.modes.connect;i&&(e.retina.connectModeDistance=i.distance*e.retina.pixelRatio,e.retina.connectModeRadius=i.radius*e.retina.pixelRatio)}async interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const n=e.interactivity.mouse.position;if(!e.retina.connectModeDistance||e.retina.connectModeDistance<0||!e.retina.connectModeRadius||e.retina.connectModeRadius<0||!n)return;const s=Math.abs(e.retina.connectModeRadius),r=e.particles.quadTree.queryCircle(n,s,o=>this.isEnabled(o));let a=0;for(const o of r){const l=o.getPosition();for(const u of r.slice(a+1)){const c=u.getPosition(),d=Math.abs(e.retina.connectModeDistance),f=Math.abs(l.x-c.x),p=Math.abs(l.y-c.y);f<d&&p<d&&PR(e,o,u)}++a}}}isEnabled(e){const i=this.container,n=i.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.actualOptions.interactivity).events;return s.onHover.enable&&n.position?Kt("connect",s.onHover.mode):!1}loadModeOptions(e,...i){e.connect||(e.connect=new DR);for(const n of i)e.connect.load(n==null?void 0:n.connect)}reset(){}}async function RR(t,e=!0){await t.addInteractor("externalConnect",i=>new OR(i),e)}class MR{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=vi.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class LR{constructor(){this.distance=100,this.links=new MR}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked))}}function BR(t,e,i,n,s,r){zl(t,i,n),t.strokeStyle=Gs(s,r),t.lineWidth=e,t.stroke()}function NR(t,e,i,n,s){t.canvas.draw(r=>{const a=e.getPosition();BR(r,e.retina.linksWidth??0,a,s,i,n)})}class FR extends As{constructor(e){super(e)}clear(){}init(){const e=this.container,i=e.actualOptions.interactivity.modes.grab;i&&(e.retina.grabModeDistance=i.distance*e.retina.pixelRatio)}async interact(){var o;const e=this.container,i=e.actualOptions,n=i.interactivity;if(!n.modes.grab||!n.events.onHover.enable||e.interactivity.status!==ga)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<0)return;const a=e.particles.quadTree.queryCircle(s,r,l=>this.isEnabled(l));for(const l of a){const u=l.getPosition(),c=sn(u,s);if(c>r)continue;const d=n.modes.grab.links,f=d.opacity,p=f-c*f/r;if(p<=0)continue;const b=d.color??((o=l.options.links)==null?void 0:o.color);if(!e.particles.grabLineColor&&b){const _=n.modes.grab.links;e.particles.grabLineColor=jx(b,_.blink,_.consent)}const g=Hp(l,void 0,e.particles.grabLineColor);g&&NR(e,l,g,p,s)}}isEnabled(e){const i=this.container,n=i.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.actualOptions.interactivity).events;return s.onHover.enable&&!!n.position&&Kt("grab",s.onHover.mode)}loadModeOptions(e,...i){e.grab||(e.grab=new LR);for(const n of i)e.grab.load(n==null?void 0:n.grab)}reset(){}}async function $R(t,e=!0){await t.addInteractor("externalGrab",i=>new FR(i),e)}class UR extends As{constructor(e){super(e),this.handleClickMode=i=>{if(i!=="pause")return;const n=this.container;n.getAnimationStatus()?n.pause():n.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function zR(t,e=!0){await t.addInteractor("externalPause",i=>new UR(i),e)}class VR{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=rt(e)}load(e){if(!e)return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(n=>n)),this.groups.length||(this.default=!0);const i=e.quantity??e.particles_nb;i!==void 0&&(this.quantity=rt(i))}}class HR extends As{constructor(e){super(e),this.handleClickMode=i=>{if(i!=="push")return;const n=this.container,s=n.actualOptions,r=s.interactivity.modes.push;if(!r)return;const a=We(r.quantity);if(a<=0)return;const o=Wd([void 0,...r.groups]),l=o!==void 0?n.actualOptions.particles.groups[o]:void 0;n.particles.push(a,n.interactivity.mouse,l,o)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...i){e.push||(e.push=new VR);for(const n of i)e.push.load(n==null?void 0:n.push)}reset(){}}async function qR(t,e=!0){await t.addInteractor("externalPush",i=>new HR(i),e)}class jR{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=rt(e)}load(e){if(!e)return;const i=e.quantity??e.particles_nb;i!==void 0&&(this.quantity=rt(i))}}class WR extends As{constructor(e){super(e),this.handleClickMode=i=>{const n=this.container,s=n.actualOptions;if(!s.interactivity.modes.remove||i!=="remove")return;const r=We(s.interactivity.modes.remove.quantity);n.particles.removeQuantity(r)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...i){e.remove||(e.remove=new jR);for(const n of i)e.remove.load(n==null?void 0:n.remove)}reset(){}}async function GR(t,e=!0){await t.addInteractor("externalRemove",i=>new WR(i),e)}class t1{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class XR extends t1{constructor(){super(),this.selectors=[]}get ids(){return hi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=hi(e,i=>`#${i}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class KR extends t1{load(e){super.load(e),e&&(this.divs=hi(e.divs,i=>{const n=new XR;return n.load(i),n}))}}class YR extends As{constructor(e,i){super(i),this._clickRepulse=()=>{const n=this.container,s=n.actualOptions.interactivity.modes.repulse;if(!s)return;const r=n.repulse||{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===n.particles.count&&(r.finish=!0)),r.clicking){const a=n.retina.repulseModeDistance;if(!a||a<0)return;const o=Math.pow(a/6,3),l=n.interactivity.mouse.clickPosition;if(l===void 0)return;const u=new Ki(l.x,l.y,o),c=n.particles.quadTree.query(u,d=>this.isEnabled(d));for(const d of c){const{dx:f,dy:p,distance:b}=Hi(l,d.position),g=b**2,_=s.speed,w=-o*_/g;if(g<=o){r.particles.push(d);const x=ci.create(f,p);x.length=w,d.velocity.setTo(x)}}}else if(r.clicking===!1){for(const a of r.particles)a.velocity.setTo(a.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const n=this.container,s=n.interactivity.mouse.position,r=n.retina.repulseModeDistance;!r||r<0||!s||this._processRepulse(s,r,new Ki(s.x,s.y,r))},this._processRepulse=(n,s,r,a)=>{const o=this.container,l=o.particles.quadTree.query(r,c=>this.isEnabled(c)),u=o.actualOptions.interactivity.modes.repulse;if(u)for(const c of l){const{dx:d,dy:f,distance:p}=Hi(c.position,n),b=((a==null?void 0:a.speed)??u.speed)*u.factor,g=Gn(Rx(u.easing)(1-p/s)*b,0,u.maxSpeed),_=ci.create(p===0?b:d/p*g,p===0?b:f/p*g);c.position.addTo(_)}},this._singleSelectorRepulse=(n,s)=>{const r=this.container,a=r.actualOptions.interactivity.modes.repulse;if(!a)return;const o=document.querySelectorAll(n);o.length&&o.forEach(l=>{const u=l,c=r.retina.pixelRatio,d={x:(u.offsetLeft+u.offsetWidth/2)*c,y:(u.offsetTop+u.offsetHeight/2)*c},f=u.offsetWidth/2*c,p=s.type==="circle"?new Ki(d.x,d.y,f):new Xn(u.offsetLeft*c,u.offsetTop*c,u.offsetWidth*c,u.offsetHeight*c),b=a.divs,g=Bx(b,u);this._processRepulse(d,f,p,g)})},this._engine=e,i.repulse||(i.repulse={particles:[]}),this.handleClickMode=n=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||n!=="repulse")return;i.repulse||(i.repulse={particles:[]});const a=i.repulse;a.clicking=!0,a.count=0;for(const o of i.repulse.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);a.particles=[],a.finish=!1,setTimeout(()=>{i.destroyed||(a.clicking=!1)},r.duration*1e3)}}clear(){}init(){const e=this.container,i=e.actualOptions.interactivity.modes.repulse;i&&(e.retina.repulseModeDistance=i.distance*e.retina.pixelRatio)}async interact(){const e=this.container,i=e.actualOptions,n=e.interactivity.status===ga,s=i.interactivity.events,r=s.onHover,a=r.enable,o=r.mode,l=s.onClick,u=l.enable,c=l.mode,d=s.onDiv;n&&a&&Kt("repulse",o)?this._hoverRepulse():u&&Kt("repulse",c)?this._clickRepulse():ng("repulse",d,(f,p)=>this._singleSelectorRepulse(f,p))}isEnabled(e){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,r=((e==null?void 0:e.interactivity)??n.interactivity).events,a=r.onDiv,o=r.onHover,l=r.onClick,u=ig("repulse",a);if(!(u||o.enable&&s.position||l.enable&&s.clickPosition))return!1;const c=o.mode,d=l.mode;return Kt("repulse",c)||Kt("repulse",d)||u}loadModeOptions(e,...i){e.repulse||(e.repulse=new KR);for(const n of i)e.repulse.load(n==null?void 0:n.repulse)}reset(){}}async function QR(t,e=!0){await t.addInteractor("externalRepulse",i=>new YR(t,i),e)}class ZR{constructor(){this.factor=3,this.radius=200}load(e){e&&(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}class JR extends As{constructor(e){super(e)}clear(e,i,n){e.slow.inRange&&!n||(e.slow.factor=1)}init(){const e=this.container,i=e.actualOptions.interactivity.modes.slow;i&&(e.retina.slowModeRadius=i.radius*e.retina.pixelRatio)}async interact(){}isEnabled(e){const i=this.container,n=i.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.actualOptions.interactivity).events;return s.onHover.enable&&!!n.position&&Kt("slow",s.onHover.mode)}loadModeOptions(e,...i){e.slow||(e.slow=new ZR);for(const n of i)e.slow.load(n==null?void 0:n.slow)}reset(e){e.slow.inRange=!1;const i=this.container,n=i.actualOptions,s=i.interactivity.mouse.position,r=i.retina.slowModeRadius,a=n.interactivity.modes.slow;if(!a||!r||r<0||!s)return;const o=e.getPosition(),l=sn(s,o),u=l/r,c=a.factor,{slow:d}=e;l>r||(d.inRange=!0,d.factor=u/c)}}async function eM(t,e=!0){await t.addInteractor("externalSlow",i=>new JR(i),e)}const xf=[0,4,2,1],gv=[8,8,4,2];class tM{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const i=this.data.slice(this.pos,this.pos+e);return this.pos+=i.length,i.reduce((n,s)=>n+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",i=0;do{i=this.data[this.pos++];for(let n=i;--n>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(i!==0);return e}readSubBlocksBin(){let e=0,i=0;for(let s=0;(e=this.data[this.pos+s])!==0;s+=e+1)i+=e;const n=new Uint8Array(i);for(let s=0;(e=this.data[this.pos++])!==0;)for(let r=e;--r>=0;n[s++]=this.data[this.pos++]);return n}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function i1(t,e){const i=[];for(let n=0;n<e;n++)i.push({r:t.data[t.pos],g:t.data[t.pos+1],b:t.data[t.pos+2]}),t.pos+=3;return i}async function iM(t,e,i,n){switch(t.nextByte()){case 249:{const s=e.frames[i(!1)];t.pos++;const r=t.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const a=(r&1)===1;s.delayTime=t.nextTwoBytes()*10;const o=t.nextByte();a&&n(o),t.pos++;break}case 255:{t.pos++;const s={identifier:t.getString(8),authenticationCode:t.getString(3),data:t.readSubBlocksBin()};e.applicationExtensions.push(s);break}case 254:{e.comments.push([i(!1),t.readSubBlocks()]);break}case 1:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");t.pos++,e.frames[i(!1)].plainTextData={left:t.nextTwoBytes(),top:t.nextTwoBytes(),width:t.nextTwoBytes(),height:t.nextTwoBytes(),charSize:{width:t.nextTwoBytes(),height:t.nextTwoBytes()},foregroundColor:t.nextByte(),backgroundColor:t.nextByte(),text:t.readSubBlocks()};break}default:t.skipSubBlocks();break}}async function nM(t,e,i,n,s,r){const a=e.frames[n(!0)];a.left=t.nextTwoBytes(),a.top=t.nextTwoBytes(),a.width=t.nextTwoBytes(),a.height=t.nextTwoBytes();const o=t.nextByte(),l=(o&128)===128,u=(o&64)===64;a.sortFlag=(o&32)===32,a.reserved=(o&24)>>>3;const c=1<<(o&7)+1;l&&(a.localColorTable=i1(t,c));const d=w=>{const{r:x,g:C,b:k}=(l?a.localColorTable:e.globalColorTable)[w];return{r:x,g:C,b:k,a:w===s(null)?i?~~((x+C+k)/3):0:255}},f=(()=>{try{return new ImageData(a.width,a.height,{colorSpace:"srgb"})}catch(w){if(w instanceof DOMException&&w.name==="IndexSizeError")return null;throw w}})();if(f==null)throw new EvalError("GIF frame size is to large");const p=t.nextByte(),b=t.readSubBlocksBin(),g=1<<p,_=(w,x)=>{const C=w>>>3,k=w&7;return(b[C]+(b[C+1]<<8)+(b[C+2]<<16)&(1<<x)-1<<k)>>>k};if(u){for(let w=0,x=p+1,C=0,k=[[0]],D=0;D<4;D++)if(xf[D]<a.height)for(let R=0,M=0;;){const P=w;if(w=_(C,x),C+=x+1,w===g){x=p+1,k.length=g+2;for(let E=0;E<k.length;E++)k[E]=E<g?[E]:[]}else{w>=k.length?k.push(k[P].concat(k[P][0])):P!==g&&k.push(k[P].concat(k[w][0]));for(let E=0;E<k[w].length;E++){const{r:I,g:O,b:L,a:F}=d(k[w][E]);f.data.set([I,O,L,F],xf[D]*a.width+gv[D]*M+R%(a.width*4)),R+=4}k.length===1<<x&&x<12&&x++}if(R===a.width*4*(M+1)&&(M++,xf[D]+gv[D]*M>=a.height))break}a.image=f,a.bitmap=await createImageBitmap(f)}else{for(let w=0,x=p+1,C=0,k=[[0]],D=-4;;){const R=w;if(w=_(C,x),C+=x,w===g){x=p+1,k.length=g+2;for(let M=0;M<k.length;M++)k[M]=M<g?[M]:[]}else{if(w===g+1)break;w>=k.length?k.push(k[R].concat(k[R][0])):R!==g&&k.push(k[R].concat(k[w][0]));for(let M=0;M<k[w].length;M++){const{r:P,g:E,b:I,a:O}=d(k[w][M]);f.data.set([P,E,I,O],D+=4)}k.length>=1<<x&&x<12&&x++}}a.image=f,a.bitmap=await createImageBitmap(f)}}async function sM(t,e,i,n,s,r){switch(t.nextByte()){case 59:return!0;case 44:await nM(t,e,i,n,s);break;case 33:await iM(t,e,n,s);break;default:throw new EvalError("undefined block found")}return!1}function rM(t){for(const e of t.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function aM(t,e,i){i||(i=!1);const n=await fetch(t);if(!n.ok&&n.status===404)throw new EvalError("file not found");const s=await n.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},a=new tM(new Uint8ClampedArray(s));if(a.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=a.nextTwoBytes(),r.height=a.nextTwoBytes();const o=a.nextByte(),l=(o&128)===128;r.colorRes=(o&112)>>>4,r.sortFlag=(o&8)===8;const u=1<<(o&7)+1,c=a.nextByte();r.pixelAspectRatio=a.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),l&&(r.globalColorTable=i1(a,u));const d=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(k){if(k instanceof DOMException&&k.name==="IndexSizeError")return null;throw k}})();if(d==null)throw new Error("GIF frame size is to large");const{r:f,g:p,b}=r.globalColorTable[c];d.data.set(l?[f,p,b,255]:[0,0,0,0]);for(let k=4;k<d.data.length;k*=2)d.data.copyWithin(k,0,k);r.backgroundImage=d;let g=-1,_=!0,w=-1;const x=k=>(k&&(_=!0),g),C=k=>(k!=null&&(w=k),w);try{do _&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),g++,w=-1,_=!1);while(!await sM(a,r,i,x,C,e));r.frames.length--;for(const k of r.frames){if(k.userInputDelayFlag&&k.delayTime===0){r.totalTime=1/0;break}r.totalTime+=k.delayTime}return r}catch(k){throw k instanceof EvalError?new Error(`error while parsing frame ${g} "${k.message}"`):k}}const oM=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function lM(t,e,i){const{svgData:n}=t;if(!n)return"";const s=uu(e,i);if(n.includes("fill"))return n.replace(oM,()=>s);const r=n.indexOf(">");return`${n.substring(0,r)} fill="${s}"${n.substring(r)}`}async function Xd(t){return new Promise(e=>{t.loading=!0;const i=new Image;t.element=i,i.addEventListener("load",()=>{t.loading=!1,e()}),i.addEventListener("error",()=>{t.element=void 0,t.error=!0,t.loading=!1,va().error(`${bn} loading image: ${t.source}`),e()}),i.src=t.source})}async function uM(t){if(t.type!=="gif"){await Xd(t);return}t.loading=!0;try{t.gifData=await aM(t.source),t.gifLoopCount=rM(t.gifData)??0,t.gifLoopCount===0&&(t.gifLoopCount=1/0)}catch{t.error=!0}t.loading=!1}async function cM(t){if(t.type!=="svg"){await Xd(t);return}t.loading=!0;const e=await fetch(t.source);e.ok?t.svgData=await e.text():(va().error(`${bn} Image not found`),t.error=!0),t.loading=!1}function dM(t,e,i,n){var a;const s=lM(t,i,((a=n.opacity)==null?void 0:a.value)??1),r={color:i,gif:e.gif,data:{...t,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor??e.replace_color,source:e.src};return new Promise(o=>{const l=new Blob([s],{type:"image/svg+xml"}),u=URL||window.URL||window.webkitURL||window,c=u.createObjectURL(l),d=new Image;d.addEventListener("load",()=>{r.loaded=!0,r.element=d,o(r),u.revokeObjectURL(c)}),d.addEventListener("error",async()=>{u.revokeObjectURL(c);const f={...t,error:!1,loading:!0};await Xd(f),r.loaded=!0,r.element=f.element,o(r)}),d.src=c})}class hM{constructor(e){this.loadImageShape=async i=>{if(!this._engine.loadImage)throw new Error(`${bn} image shape not initialized`);await this._engine.loadImage({gif:i.gif,name:i.name,replaceColor:i.replaceColor??i.replace_color??!1,src:i.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e,i,n,s,r){const a=i.image,o=a==null?void 0:a.element;if(a){if(e.globalAlpha=s,a.gif&&a.gifData){const l=new OffscreenCanvas(a.gifData.width,a.gifData.height),u=l.getContext("2d");if(!u)throw new Error("could not create offscreen canvas context");u.imageSmoothingQuality="low",u.imageSmoothingEnabled=!1,u.clearRect(0,0,l.width,l.height),i.gifLoopCount===void 0&&(i.gifLoopCount=a.gifLoopCount??0);let c=i.gifFrame??0;const d={x:-a.gifData.width*.5,y:-a.gifData.height*.5},f=a.gifData.frames[c];if(i.gifTime===void 0&&(i.gifTime=0),!f.bitmap)return;switch(e.scale(n/a.gifData.width,n/a.gifData.height),f.disposalMethod){case 4:case 5:case 6:case 7:case 0:u.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,d.x,d.y),u.clearRect(0,0,l.width,l.height);break;case 1:u.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,d.x,d.y);break;case 2:u.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,d.x,d.y),u.clearRect(0,0,l.width,l.height),a.gifData.globalColorTable.length===0?u.putImageData(a.gifData.frames[0].image,d.x+f.left,d.y+f.top):u.putImageData(a.gifData.backgroundImage,d.x,d.y);break;case 3:{const p=u.getImageData(0,0,l.width,l.height);u.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,d.x,d.y),u.clearRect(0,0,l.width,l.height),u.putImageData(p,0,0)}break}if(i.gifTime+=r.value,i.gifTime>f.delayTime){if(i.gifTime-=f.delayTime,++c>=a.gifData.frames.length){if(--i.gifLoopCount<=0)return;c=0,u.clearRect(0,0,l.width,l.height)}i.gifFrame=c}e.scale(a.gifData.width/n,a.gifData.height/n)}else if(o){const l=a.ratio,u={x:-n,y:-n};e.drawImage(o,u.x,u.y,n*2,n*2/l)}e.globalAlpha=1}}getSidesCount(){return 12}async init(e){const i=e.actualOptions;if(!(!i.preload||!this._engine.loadImage))for(const n of i.preload)await this._engine.loadImage(n)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=e.shapeData;this._engine.images.find(s=>s.name===i.name||s.source===i.src)||this.loadImageShape(i).then(()=>{this.loadShape(e)})}particleInit(e,i){if(i.shape!=="image"&&i.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=this._engine.images,s=i.shapeData,r=i.getFillColor(),a=n.find(l=>l.name===s.name||l.source===s.src);if(!a)return;const o=s.replaceColor??s.replace_color??a.replaceColor;if(a.loading){setTimeout(()=>{this.particleInit(e,i)});return}(async()=>{let l;a.svgData&&r?l=await dM(a,s,r,i):l={color:r,data:a,element:a.element,gif:a.gif,gifData:a.gifData,gifLoopCount:a.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:a.ratio??1,replaceColor:o,source:s.src},l.ratio||(l.ratio=1);const u=s.fill??i.fill,c=s.close??i.close,d={image:l,fill:u,close:c};i.image=d.image,i.fill=d.fill,i.close=d.close})()}}class fM{constructor(){this.src="",this.gif=!1}load(e){e&&(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class pM{constructor(e){this.id="imagePreloader",this._engine=e}getPlugin(){return{}}loadOptions(e,i){if(!i||!i.preload)return;e.preload||(e.preload=[]);const n=e.preload;for(const s of i.preload){const r=n.find(a=>a.name===s.name||a.src===s.src);if(r)r.load(s);else{const a=new fM;a.load(s),n.push(a)}}}needsPlugin(){return!0}}function mM(t){t.loadImage||(t.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${bn} no image source provided`);if(t.images||(t.images=[]),!t.images.find(i=>i.name===e.name||i.source===e.src))try{const i={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-3),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};t.images.push(i),await(e.gif?uM:e.replaceColor?cM:Xd)(i)}catch{throw new Error(`${bn} ${e.name??e.src} not found`)}})}async function gM(t,e=!0){mM(t);const i=new pM(t);await t.addPlugin(i,e),await t.addShape(["image","images"],new hM(t),e)}class yM extends Br{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class vM extends Br{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class bM{constructor(){this.count=0,this.delay=new yM,this.duration=new vM}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class _M{constructor(e){this.container=e}init(e){const i=this.container,n=e.options,s=n.life;s&&(e.life={delay:i.retina.reduceFactor?We(s.delay.value)*(s.delay.sync?1:kt())/i.retina.reduceFactor*1e3:0,delayTime:0,duration:i.retina.reduceFactor?We(s.duration.value)*(s.duration.sync?1:kt())/i.retina.reduceFactor*1e3:0,time:0,count:s.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e,...i){e.life||(e.life=new bM);for(const n of i)e.life.load(n==null?void 0:n.life)}update(e,i){if(!this.isEnabled(e)||!e.life)return;const n=e.life;let s=!1;if(e.spawning)if(n.delayTime+=i.value,n.delayTime>=e.life.delay)s=!0,e.spawning=!1,n.delayTime=0,n.time=0;else return;if(n.duration===-1||e.spawning||(s?n.time=0:n.time+=i.value,n.time<n.duration))return;if(n.time=0,e.life.count>0&&e.life.count--,e.life.count===0){e.destroy();return}const r=this.container.canvas.size,a=rt(0,r.width),o=rt(0,r.width);e.position.x=Xi(a),e.position.y=Xi(o),e.spawning=!0,n.delayTime=0,n.time=0,e.reset();const l=e.options.life;l&&(n.delay=We(l.delay.value)*1e3,n.duration=We(l.duration.value)*1e3)}}async function TM(t,e=!0){await t.addParticleUpdater("life",i=>new _M(i),e)}class xM{draw(e,i,n){const s=i.shapeData;e.moveTo(-n/2,0),e.lineTo(n/2,0),e.lineCap=(s==null?void 0:s.cap)??"butt"}getSidesCount(){return 1}}async function SM(t,e=!0){await t.addShape("line",new xM,e)}class wM{init(){}isEnabled(e){return!vo()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const i=e.container,n=i.actualOptions,s=n.interactivity.events.onHover.parallax;if(vo()||!s.enable)return;const r=s.force,a=i.interactivity.mouse.position;if(!a)return;const o=i.canvas.size,l={x:o.width/2,y:o.height/2},u=s.smooth,c=e.getRadius()/r,d={x:(a.x-l.x)*c,y:(a.y-l.y)*c},{offset:f}=e;f.x+=(d.x-f.x)/u,f.y+=(d.y-f.y)/u}}async function CM(t,e=!0){await t.addMover("parallax",()=>new wM,e)}class EM extends rg{constructor(e){super(e)}clear(){}init(){}async interact(e){const i=this.container,n=e.retina.attractDistance??i.retina.attractDistance,s=e.getPosition(),r=i.particles.quadTree.queryCircle(s,n);for(const a of r){if(e===a||!a.options.move.attract.enable||a.destroyed||a.spawning)continue;const o=a.getPosition(),{dx:l,dy:u}=Hi(s,o),c=e.options.move.attract.rotate,d=l/(c.x*1e3),f=u/(c.y*1e3),p=a.size.value/e.size.value,b=1/p;e.velocity.x-=d*p,e.velocity.y-=f*p,a.velocity.x+=d*b,a.velocity.y+=f*b}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function DM(t,e=!0){await t.addInteractor("particlesAttract",i=>new EM(i),e)}function yv(t,e,i,n,s,r){const a=Gn(t.options.collisions.absorb.speed*s.factor/10,0,n);t.size.value+=a/2,i.size.value-=a,n<=r&&(i.size.value=0,i.destroy())}function kM(t,e,i,n){const s=t.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?t.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?yv(t,s,e,r,i,n):yv(e,r,t,s,i,n))}const vv=t=>{t.collisionMaxSpeed===void 0&&(t.collisionMaxSpeed=We(t.options.collisions.maxSpeed)),t.velocity.length>t.collisionMaxSpeed&&(t.velocity.length=t.collisionMaxSpeed)};function n1(t,e){Nx(Vp(t),Vp(e)),vv(t),vv(e)}function AM(t,e){!t.unbreakable&&!e.unbreakable&&n1(t,e),t.getRadius()===void 0&&e.getRadius()!==void 0?t.destroy():t.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():t.getRadius()!==void 0&&e.getRadius()!==void 0&&(t.getRadius()>=e.getRadius()?e:t).destroy()}function IM(t,e,i,n){switch(t.options.collisions.mode){case"absorb":{kM(t,e,i,n);break}case"bounce":{n1(t,e);break}case"destroy":{AM(t,e);break}}}class PM extends rg{constructor(e){super(e)}clear(){}init(){}async interact(e,i){if(e.destroyed||e.spawning)return;const n=this.container,s=e.getPosition(),r=e.getRadius(),a=n.particles.quadTree.queryCircle(s,r*2);for(const o of a){if(e===o||!o.options.collisions.enable||e.options.collisions.mode!==o.options.collisions.mode||o.destroyed||o.spawning)continue;const l=o.getPosition(),u=o.getRadius();if(Math.abs(Math.round(s.z)-Math.round(l.z))>r+u)continue;const c=sn(s,l),d=r+u;c>d||IM(e,o,i,n.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function OM(t,e=!0){await t.addInteractor("particlesCollisions",i=>new PM(i),e)}class RM extends Ki{constructor(e,i,n,s){super(e,i,n),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:i,height:n}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-i,y:r})||super.contains({x:s-i,y:r-n})||super.contains({x:s,y:r-n})}intersects(e){if(super.intersects(e))return!0;const i=e,n=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(n.radius!==void 0){const r=new Ki(s.x,s.y,n.radius*2);return super.intersects(r)}else if(i.size!==void 0){const r=new Xn(s.x,s.y,i.size.width*2,i.size.height*2);return super.intersects(r)}return!1}}class MM{constructor(){this.blur=5,this.color=new vi,this.color.value="#000",this.enable=!1}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=vi.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class LM{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(e.color!==void 0&&(this.color=vi.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class BM{constructor(){this.blink=!1,this.color=new vi,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new MM,this.triangles=new LM,this.width=1,this.warp=!1}load(e){e&&(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=vi.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}function NM(t,e,i,n,s){const{dx:r,dy:a,distance:o}=Hi(t,e);if(!s||o<=i)return o;const l={x:Math.abs(r),y:Math.abs(a)},u={x:Math.min(l.x,n.width-l.x),y:Math.min(l.y,n.height-l.y)};return Math.sqrt(u.x**2+u.y**2)}class FM extends rg{constructor(e){super(e),this._setColor=i=>{if(!i.options.links)return;const n=this.linkContainer,s=i.options.links;let r=s.id===void 0?n.particles.linksColor:n.particles.linksColors.get(s.id);if(r)return;const a=s.color;r=jx(a,s.blink,s.consent),s.id===void 0?n.particles.linksColor=r:n.particles.linksColors.set(s.id,r)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){if(!e.options.links)return;e.links=[];const i=e.getPosition(),n=this.container,s=n.canvas.size;if(i.x<0||i.y<0||i.x>s.width||i.y>s.height)return;const r=e.options.links,a=r.opacity,o=e.retina.linksDistance??0,l=r.warp,u=l?new RM(i.x,i.y,o,s):new Ki(i.x,i.y,o),c=n.particles.quadTree.query(u);for(const d of c){const f=d.options.links;if(e===d||!(f!=null&&f.enable)||r.id!==f.id||d.spawning||d.destroyed||!d.links||e.links.some(_=>_.destination===d)||d.links.some(_=>_.destination===e))continue;const p=d.getPosition();if(p.x<0||p.y<0||p.x>s.width||p.y>s.height)continue;const b=NM(i,p,o,s,l&&f.warp);if(b>o)continue;const g=(1-b/o)*a;this._setColor(e),e.links.push({destination:d,opacity:g})}}isEnabled(e){var i;return!!((i=e.options.links)!=null&&i.enable)}loadParticlesOptions(e,...i){e.links||(e.links=new BM);for(const n of i)e.links.load((n==null?void 0:n.links)??(n==null?void 0:n.lineLinked)??(n==null?void 0:n.line_linked))}reset(){}}async function $M(t,e=!0){await t.addInteractor("particlesLinks",i=>new FM(i),e)}function UM(t){let e=!1;const{begin:i,end:n,maxDistance:s,context:r,canvasSize:a,width:o,backgroundMask:l,colorLine:u,opacity:c,links:d}=t;if(sn(i,n)<=s)zl(r,i,n),e=!0;else if(d.warp){let p,b;const g={x:n.x-a.width,y:n.y},_=Hi(i,g);if(_.distance<=s){const w=i.y-_.dy/_.dx*i.x;p={x:0,y:w},b={x:a.width,y:w}}else{const w={x:n.x,y:n.y-a.height},x=Hi(i,w);if(x.distance<=s){const k=-(i.y-x.dy/x.dx*i.x)/(x.dy/x.dx);p={x:k,y:0},b={x:k,y:a.height}}else{const C={x:n.x-a.width,y:n.y-a.height},k=Hi(i,C);if(k.distance<=s){const D=i.y-k.dy/k.dx*i.x;p={x:-D/(k.dy/k.dx),y:D},b={x:p.x+a.width,y:p.y+a.height}}}}p&&b&&(zl(r,i,p),zl(r,n,b),e=!0)}if(!e)return;r.lineWidth=o,l.enable&&(r.globalCompositeOperation=l.composite),r.strokeStyle=Gs(u,c);const{shadow:f}=d;if(f.enable){const p=zn(f.color);p&&(r.shadowBlur=f.blur,r.shadowColor=Gs(p))}r.stroke()}function zM(t){const{context:e,pos1:i,pos2:n,pos3:s,backgroundMask:r,colorTriangle:a,opacityTriangle:o}=t;TP(e,i,n,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=Gs(a,o),e.fill()}function VM(t){return t.sort((e,i)=>e-i),t.join("_")}function bv(t,e){const i=VM(t.map(s=>s.id));let n=e.get(i);return n===void 0&&(n=kt(),e.set(i,n)),n}class HM{constructor(e){this.container=e,this._drawLinkLine=(i,n)=>{const s=i.options.links;if(!(s!=null&&s.enable))return;const r=this.container,a=r.actualOptions,o=n.destination,l=i.getPosition(),u=o.getPosition();let c=n.opacity;r.canvas.draw(d=>{var w;let f;const p=(w=i.options.twinkle)==null?void 0:w.lines;if(p!=null&&p.enable){const x=p.frequency,C=zn(p.color);kt()<x&&C&&(f=C,c=We(p.opacity))}if(!f){const x=s.id!==void 0?r.particles.linksColors.get(s.id):r.particles.linksColor;f=Hp(i,o,x)}if(!f)return;const b=i.retina.linksWidth??0,g=i.retina.linksDistance??0,{backgroundMask:_}=a;UM({context:d,width:b,begin:l,end:u,maxDistance:g,canvasSize:r.canvas.size,links:s,backgroundMask:_,colorLine:f,opacity:c})})},this._drawLinkTriangle=(i,n,s)=>{const r=i.options.links;if(!(r!=null&&r.enable))return;const a=r.triangles;if(!a.enable)return;const o=this.container,l=o.actualOptions,u=n.destination,c=s.destination,d=a.opacity??(n.opacity+s.opacity)/2;d<=0||o.canvas.draw(f=>{const p=i.getPosition(),b=u.getPosition(),g=c.getPosition(),_=i.retina.linksDistance??0;if(sn(p,b)>_||sn(g,b)>_||sn(g,p)>_)return;let w=zn(a.color);if(!w){const x=r.id!==void 0?o.particles.linksColors.get(r.id):o.particles.linksColor;w=Hp(i,u,x)}w&&zM({context:f,pos1:p,pos2:b,pos3:g,backgroundMask:l.backgroundMask,colorTriangle:w,opacityTriangle:d})})},this._drawTriangles=(i,n,s,r)=>{var l,u,c;const a=s.destination;if(!((l=i.links)!=null&&l.triangles.enable&&((u=a.options.links)!=null&&u.triangles.enable)))return;const o=(c=a.links)==null?void 0:c.filter(d=>{const f=this._getLinkFrequency(a,d.destination);return a.options.links&&f<=a.options.links.frequency&&r.findIndex(p=>p.destination===d.destination)>=0});if(o!=null&&o.length)for(const d of o){const f=d.destination;this._getTriangleFrequency(n,a,f)>i.links.triangles.frequency||this._drawLinkTriangle(n,s,d)}},this._getLinkFrequency=(i,n)=>bv([i,n],this._freqs.links),this._getTriangleFrequency=(i,n,s)=>bv([i,n,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,i){const{links:n,options:s}=i;if(!n||n.length<=0)return;const r=n.filter(a=>s.links&&this._getLinkFrequency(i,a.destination)<=s.links.frequency);for(const a of r)this._drawTriangles(s,i,a,r),a.opacity>0&&(i.retina.linksWidth??0)>0&&this._drawLinkLine(i,a)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const i=this.container.retina.pixelRatio,{retina:n}=e,{distance:s,width:r}=e.options.links;n.linksDistance=s*i,n.linksWidth=r*i}particleDestroyed(e){e.links=[]}}class qM{constructor(){this.id="links"}getPlugin(e){return new HM(e)}loadOptions(){}needsPlugin(){return!0}}async function jM(t,e=!0){const i=new qM;await t.addPlugin(i,e)}async function WM(t,e=!0){await $M(t,e),await jM(t,e)}class s1{draw(e,i,n){const s=this.getCenter(i,n),r=this.getSidesData(i,n),a=r.count.numerator*r.count.denominator,o=r.count.numerator/r.count.denominator,l=180*(o-2)/o,u=Math.PI-Math.PI*l/180;if(e){e.beginPath(),e.translate(s.x,s.y),e.moveTo(0,0);for(let c=0;c<a;c++)e.lineTo(r.length,0),e.translate(r.length,0),e.rotate(u)}}getSidesCount(e){const i=e.shapeData;return Math.round(We((i==null?void 0:i.sides)??(i==null?void 0:i.nb_sides)??5))}}class GM extends s1{getCenter(e,i){return{x:-i/(e.sides/3.5),y:-i/(2.66/3.5)}}getSidesData(e,i){const n=e.sides;return{count:{denominator:1,numerator:n},length:i*2.66/(n/3)}}}class XM extends s1{getCenter(e,i){return{x:-i,y:i/1.66}}getSidesCount(){return 3}getSidesData(e,i){return{count:{denominator:2,numerator:3},length:i*2}}}async function KM(t,e=!0){await t.addShape("polygon",new GM,e)}async function YM(t,e=!0){await t.addShape("triangle",new XM,e)}async function QM(t,e=!0){await KM(t,e),await YM(t,e)}class ZM{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=rt(e.speed)),e.decay!==void 0&&(this.decay=rt(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class JM extends Br{constructor(){super(),this.animation=new ZM,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}function eL(t,e){const i=t.rotate,n=t.options.rotate;if(!i||!n)return;const s=n.animation,r=(i.velocity??0)*e.factor,a=2*Math.PI,o=i.decay??1;if(s.enable){switch(i.status){case"increasing":i.value+=r,i.value>a&&(i.value-=a);break;case"decreasing":default:i.value-=r,i.value<0&&(i.value+=a);break}i.velocity&&o!==1&&(i.velocity*=o)}}class tL{constructor(e){this.container=e}init(e){const i=e.options.rotate;if(!i)return;e.rotate={enable:i.animation.enable,value:We(i.value)*Math.PI/180},e.pathRotation=i.path;let n=i.direction;switch(n==="random"&&(n=Math.floor(kt()*2)>0?"counter-clockwise":"clockwise"),n){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing";break}const s=i.animation;s.enable&&(e.rotate.decay=1-We(s.decay),e.rotate.velocity=We(s.speed)/360*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=kt())),e.rotation=e.rotate.value}isEnabled(e){const i=e.options.rotate;return i?!e.destroyed&&!e.spawning&&i.animation.enable&&!i.path:!1}loadOptions(e,...i){e.rotate||(e.rotate=new JM);for(const n of i)e.rotate.load(n==null?void 0:n.rotate)}update(e,i){var n;this.isEnabled(e)&&(eL(e,i),e.rotation=((n=e.rotate)==null?void 0:n.value)??0)}}async function iL(t,e=!0){await t.addParticleUpdater("rotate",i=>new tL(i),e)}const nL=Math.sqrt(2);class sL{draw(e,i,n){const s=n/nL,r=s*2;e.rect(-s,-s,r,r)}getSidesCount(){return 4}}async function rL(t,e=!0){await t.addShape(["edge","square"],new sL,e)}class aL{draw(e,i,n){const s=i.sides,r=i.starInset??2;e.moveTo(0,0-n);for(let a=0;a<s;a++)e.rotate(Math.PI/s),e.lineTo(0,0-n*r),e.rotate(Math.PI/s),e.lineTo(0,0-n)}getSidesCount(e){const i=e.shapeData;return Math.round(We((i==null?void 0:i.sides)??(i==null?void 0:i.nb_sides)??5))}particleInit(e,i){const n=i.shapeData,s=We((n==null?void 0:n.inset)??2);i.starInset=s}}async function oL(t,e=!0){await t.addShape("star",new aL,e)}function Sf(t,e,i,n,s){if(!e||!i.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=t.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const r=Xi(i.offset),a=(e.velocity??0)*t.factor+r*3.6,o=e.decay??1;!s||e.status==="increasing"?(e.value+=a,e.value>n&&(e.loops||(e.loops=0),e.loops++,s&&(e.status="decreasing",e.value-=e.value%n))):(e.value-=a,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&o!==1&&(e.velocity*=o),e.value>n&&(e.value%=n)}function lL(t,e){if(!t.strokeColor||!t.strokeAnimation)return;const{h:i,s:n,l:s}=t.strokeColor,{h:r,s:a,l:o}=t.strokeAnimation;i&&Sf(e,i,r,360,!1),n&&Sf(e,n,a,100,!0),s&&Sf(e,s,o,100,!0)}class uL{constructor(e){this.container=e}init(e){var a;const i=this.container,n=e.options,s=Ws(n.stroke,e.id,n.reduceDuplicates);e.strokeWidth=We(s.width)*i.retina.pixelRatio,e.strokeOpacity=We(s.opacity??1),e.strokeAnimation=(a=s.color)==null?void 0:a.animation;const r=lu(s.color)??e.getFillColor();r&&(e.strokeColor=Wx(r,e.strokeAnimation,i.retina.reduceFactor))}isEnabled(e){const i=e.strokeAnimation,{strokeColor:n}=e;return!e.destroyed&&!e.spawning&&!!i&&((n==null?void 0:n.h.value)!==void 0&&n.h.enable||(n==null?void 0:n.s.value)!==void 0&&n.s.enable||(n==null?void 0:n.l.value)!==void 0&&n.l.enable)}update(e,i){this.isEnabled(e)&&lL(e,i)}}async function cL(t,e=!0){await t.addParticleUpdater("strokeColor",i=>new uL(i),e)}const Uc=["text","character","char"];class dL{draw(e,i,n,s){const r=i.shapeData;if(r===void 0)return;const a=r.value;if(a===void 0)return;i.text===void 0&&(i.text=Ws(a,i.randomIndexData));const o=i.text,l=r.style??"",u=r.weight??"400",c=Math.round(n)*2,d=r.font??"Verdana",f=i.fill,p=o.length*n/2;e.font=`${l} ${u} ${c}px "${d}"`;const b={x:-p,y:n/2};e.globalAlpha=s,f?e.fillText(o,b.x,b.y):e.strokeText(o,b.x,b.y),e.globalAlpha=1}getSidesCount(){return 12}async init(e){const i=e.actualOptions;if(Uc.find(n=>Kt(n,i.particles.shape.type))){const n=Uc.map(r=>i.particles.shape.options[r]).find(r=>!!r),s=[];hi(n,r=>{s.push(hP(r.font,r.weight))}),await Promise.all(s)}}particleInit(e,i){if(!i.shape||!Uc.includes(i.shape))return;const n=i.shapeData;if(n===void 0)return;const s=n.value;s!==void 0&&(i.text=Ws(s,i.randomIndexData))}}async function hL(t,e=!0){await t.addShape(Uc,new dL,e)}async function fL(t,e=!0){FO(t),await CM(t,!1),await vR(t,!1),await TR(t,!1),await CR(t,!1),await RR(t,!1),await $R(t,!1),await zR(t,!1),await qR(t,!1),await GR(t,!1),await QR(t,!1),await eM(t,!1),await DM(t,!1),await OM(t,!1),await WM(t,!1),await mR(),await gM(t,!1),await SM(t,!1),await QM(t,!1),await rL(t,!1),await oL(t,!1),await hL(t,!1),await TM(t,!1),await iL(t,!1),await cL(t,!1),await pR(t,e)}const r1=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},pL={__name:"ParticlesBackground",setup(t){const e=async n=>{await fL(n)},i={background:{color:{value:"#000022"}},fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"repulse"},resize:!0},modes:{connect:{distance:150,links:{opacity:.3,color:"#00ffff"},radius:150},bubble:{distance:400,duration:2,opacity:.6,size:20,color:{value:"#00ffff"}},push:{quantity:6},repulse:{distance:150,duration:.4}}},particles:{color:{value:["#00ffff","#0088ff","#0044ff","#ffffff"]},links:{color:"#00ffff",distance:150,enable:!0,opacity:.3,width:1},collisions:{enable:!1},move:{direction:"none",enable:!0,outModes:{default:"bounce"},random:!1,speed:1,straight:!1,trail:{enable:!1},vibrate:!0,vibrateDuration:5,vibrateFrequency:10},number:{density:{enable:!0,area:800},value:80},opacity:{value:{min:.2,max:.8},animation:{enable:!0,speed:.3,minimumValue:.2,sync:!1}},shape:{type:["circle","triangle","square"]},size:{value:{min:1,max:3},animation:{enable:!0,speed:1,minimumValue:.5,sync:!1}},twinkle:{particles:{enable:!0,frequency:.05,opacity:.8,color:{value:["#00ffff","#0088ff"]}},lines:{enable:!0,frequency:.02,opacity:.5,color:{value:"#00ffff"}}}},detectRetina:!0};return(n,s)=>{const r=Tk("Particles");return Ir(),nu(r,{id:"tsparticles",particlesInit:e,options:i})}}},mL=r1(pL,[["__scopeId","data-v-5f83e58d"]]),gL={id:"app"},yL={__name:"App",setup(t){const e=oe("667px");KI();const i=()=>{e.value=window.innerHeight+"px"};window.addEventListener("resize",i),window.addEventListener("DOMContentLoaded",i);const n=oe(!0);return xs("reload",()=>{n.value=!1,et(()=>{n.value=!0})}),(r,a)=>(Ir(),Xm("div",gL,[T(mL),n.value?(Ir(),nu(mn(Ox),{key:0,style:_u({height:e.value})},null,8,["style"])):tA("",!0)]))}},vL=r1(yL,[["__scopeId","data-v-5bd26d46"]]),bL="modulepreload",_L=function(t,e){return new URL(t,e).href},_v={},Tv=function(e,i,n){let s=Promise.resolve();if(i&&i.length>0){let a=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(i.map(c=>{if(c=_L(c,n),c in _v)return;_v[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let g=o.length-1;g>=0;g--){const _=o[g];if(_.href===c&&(!d||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const b=document.createElement("link");if(b.rel=d?"stylesheet":bL,d||(b.as="script"),b.crossOrigin="",b.href=c,u&&b.setAttribute("nonce",u),document.head.appendChild(b),d)return new Promise((g,_)=>{b.addEventListener("load",g),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})},TL="Battle",vj="https://114.242.53.3:1001",xL="/redirect";function SL(t){const e=[];t&&e.push(t),e.push(TL),document.title=e.join(" - ")}const wL=[{path:"/",redirect:"/home",children:[{path:"/home",name:"Home",component:()=>Tv(()=>import("./index-BY1xr8ZY.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),meta:{title:""}},{path:"/user",name:"User",component:()=>Tv(()=>import("./index-t3Apu8R5.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),meta:{title:""}}]}],a1=GI({history:SI(),routes:wL});a1.beforeEach(async t=>{t.path.includes(xL)||SL(t.meta.title)});function qp(){}const He=Object.assign,_n=typeof window<"u",Kn=t=>t!==null&&typeof t=="object",ct=t=>t!=null,_o=t=>typeof t=="function",ag=t=>Kn(t)&&_o(t.then)&&_o(t.catch),du=t=>Object.prototype.toString.call(t)==="[object Date]"&&!Number.isNaN(t.getTime());function o1(t){return t=t.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(t)||/^0[0-9-]{10,13}$/.test(t)}const l1=t=>typeof t=="number"||/^\d+(\.\d+)?$/.test(t),CL=()=>_n?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function xv(t,e){const i=e.split(".");let n=t;return i.forEach(s=>{var r;n=Kn(n)&&(r=n[s])!=null?r:""}),n}function dt(t,e,i){return e.reduce((n,s)=>((!i||t[s]!==void 0)&&(n[s]=t[s]),n),{})}const Ss=(t,e)=>JSON.stringify(t)===JSON.stringify(e),sd=t=>Array.isArray(t)?t:[t],EL=t=>t.reduce((e,i)=>e.concat(i),[]),Rt=null,Ce=[Number,String],be={type:Boolean,default:!0},oi=t=>({type:t,required:!0}),At=()=>({type:Array,default:()=>[]}),Jt=t=>({type:Number,default:t}),Ne=t=>({type:Ce,default:t}),De=t=>({type:String,default:t});var Nr=typeof window<"u";function Ci(t){return Nr?requestAnimationFrame(t):-1}function Kd(t){Nr&&cancelAnimationFrame(t)}function Dr(t){Ci(()=>Ci(t))}var DL=t=>t===window,Sv=(t,e)=>({top:0,left:0,right:t,bottom:e,width:t,height:e}),ft=t=>{const e=mn(t);if(DL(e)){const i=e.innerWidth,n=e.innerHeight;return Sv(i,n)}return e!=null&&e.getBoundingClientRect?e.getBoundingClientRect():Sv(0,0)};function kL(t=!1){const e=oe(t);return[e,(n=!e.value)=>{e.value=n}]}function bi(t){const e=Si(t,null);if(e){const i=Zn(),{link:n,unlink:s,internalChildren:r}=e;n(i),Ro(()=>s(i));const a=re(()=>r.indexOf(i));return{parent:e,index:a}}return{parent:null,index:oe(-1)}}function AL(t){const e=[],i=n=>{Array.isArray(n)&&n.forEach(s=>{var r;mo(s)&&(e.push(s),(r=s.component)!=null&&r.subTree&&(e.push(s.component.subTree),i(s.component.subTree.children)),s.children&&i(s.children))})};return i(t),e}var wv=(t,e)=>{const i=t.indexOf(e);return i===-1?t.findIndex(n=>e.key!==void 0&&e.key!==null&&n.type===e.type&&n.key===e.key):i};function IL(t,e,i){const n=AL(t.subTree.children);i.sort((r,a)=>wv(n,r.vnode)-wv(n,a.vnode));const s=i.map(r=>r.proxy);e.sort((r,a)=>{const o=s.indexOf(r),l=s.indexOf(a);return o-l})}function Pi(t){const e=Mt([]),i=Mt([]),n=Zn();return{children:e,linkChildren:r=>{xs(t,Object.assign({link:l=>{l.proxy&&(i.push(l),e.push(l.proxy),IL(n,e,i))},unlink:l=>{const u=i.indexOf(l);e.splice(u,1),i.splice(u,1)},children:e,internalChildren:i},r))}}}var jp=1e3,Wp=60*jp,Gp=60*Wp,Cv=24*Gp;function PL(t){const e=Math.floor(t/Cv),i=Math.floor(t%Cv/Gp),n=Math.floor(t%Gp/Wp),s=Math.floor(t%Wp/jp),r=Math.floor(t%jp);return{total:t,days:e,hours:i,minutes:n,seconds:s,milliseconds:r}}function OL(t,e){return Math.floor(t/1e3)===Math.floor(e/1e3)}function RL(t){let e,i,n,s;const r=oe(t.time),a=re(()=>PL(r.value)),o=()=>{n=!1,Kd(e)},l=()=>Math.max(i-Date.now(),0),u=g=>{var _,w;r.value=g,(_=t.onChange)==null||_.call(t,a.value),g===0&&(o(),(w=t.onFinish)==null||w.call(t))},c=()=>{e=Ci(()=>{n&&(u(l()),r.value>0&&c())})},d=()=>{e=Ci(()=>{if(n){const g=l();(!OL(g,r.value)||g===0)&&u(g),r.value>0&&d()}})},f=()=>{Nr&&(t.millisecond?c():d())},p=()=>{n||(i=Date.now()+r.value,n=!0,f())},b=(g=t.time)=>{o(),r.value=g};return Qn(o),Ds(()=>{s&&(n=!0,s=!1,f())}),ks(()=>{n&&(o(),s=!0)}),{start:p,pause:o,reset:b,current:a}}function Lo(t){let e;Lt(()=>{t(),et(()=>{e=!0})}),Ds(()=>{e&&t()})}function qt(t,e,i={}){if(!Nr)return;const{target:n=window,passive:s=!1,capture:r=!1}=i;let a=!1,o;const l=d=>{if(a)return;const f=mn(d);f&&!o&&(f.addEventListener(t,e,{capture:r,passive:s}),o=!0)},u=d=>{if(a)return;const f=mn(d);f&&o&&(f.removeEventListener(t,e,r),o=!1)};Ro(()=>u(n)),ks(()=>u(n)),Lo(()=>l(n));let c;return gi(n)&&(c=Re(n,(d,f)=>{u(f),l(d)})),()=>{c==null||c(),u(n),a=!0}}function Yd(t,e,i={}){if(!Nr)return;const{eventName:n="click"}=i;qt(n,r=>{(Array.isArray(t)?t:[t]).every(l=>{const u=mn(l);return u&&!u.contains(r.target)})&&e(r)},{target:document})}var uc,wf;function ML(){if(!uc&&(uc=oe(0),wf=oe(0),Nr)){const t=()=>{uc.value=window.innerWidth,wf.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:uc,height:wf}}var LL=/scroll|auto|overlay/i,u1=Nr?window:void 0;function BL(t){return t.tagName!=="HTML"&&t.tagName!=="BODY"&&t.nodeType===1}function og(t,e=u1){let i=t;for(;i&&i!==e&&BL(i);){const{overflowY:n}=window.getComputedStyle(i);if(LL.test(n))return i;i=i.parentNode}return e}function Bo(t,e=u1){const i=oe();return Lt(()=>{t.value&&(i.value=og(t.value,e))}),i}var cc;function NL(){if(!cc&&(cc=oe("visible"),Nr)){const t=()=>{cc.value=document.hidden?"hidden":"visible"};t(),window.addEventListener("visibilitychange",t)}return cc}var c1=Symbol("van-field");function Fr(t){const e=Si(c1,null);e&&!e.customValue.value&&(e.customValue.value=t,Re(t,()=>{e.resetValidation(),e.validateWithTrigger("onChange")}))}function Qs(t){const e="scrollTop"in t?t.scrollTop:t.pageYOffset;return Math.max(e,0)}function rd(t,e){"scrollTop"in t?t.scrollTop=e:t.scrollTo(t.scrollX,e)}function la(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function hu(t){rd(window,t),rd(document.body,t)}function Ev(t,e){if(t===window)return 0;const i=e?Qs(e):la();return ft(t).top+i}const FL=CL();function d1(){FL&&hu(la())}const lg=t=>t.stopPropagation();function wt(t,e){(typeof t.cancelable!="boolean"||t.cancelable)&&t.preventDefault(),e&&lg(t)}function ba(t){const e=mn(t);if(!e)return!1;const i=window.getComputedStyle(e),n=i.display==="none",s=e.offsetParent===null&&i.position!=="fixed";return n||s}const{width:Vn,height:gn}=ML();function $L(t){const e=window.getComputedStyle(t);return e.transform!=="none"||e.perspective!=="none"||["transform","perspective","filter"].some(i=>(e.willChange||"").includes(i))}function UL(t){let e=t.parentElement;for(;e;){if(e&&e.tagName!=="HTML"&&e.tagName!=="BODY"&&$L(e))return e;e=e.parentElement}return null}function Ye(t){if(ct(t))return l1(t)?`${t}px`:String(t)}function nr(t){if(ct(t)){if(Array.isArray(t))return{width:Ye(t[0]),height:Ye(t[1])};const e=Ye(t);return{width:e,height:e}}}function sr(t){const e={};return t!==void 0&&(e.zIndex=+t),e}let Cf;function zL(){if(!Cf){const t=document.documentElement,e=t.style.fontSize||window.getComputedStyle(t).fontSize;Cf=parseFloat(e)}return Cf}function VL(t){return t=t.replace(/rem/g,""),+t*zL()}function HL(t){return t=t.replace(/vw/g,""),+t*Vn.value/100}function qL(t){return t=t.replace(/vh/g,""),+t*gn.value/100}function ug(t){if(typeof t=="number")return t;if(_n){if(t.includes("rem"))return VL(t);if(t.includes("vw"))return HL(t);if(t.includes("vh"))return qL(t)}return parseFloat(t)}const jL=/-(\w)/g,h1=t=>t.replace(jL,(e,i)=>i.toUpperCase()),WL=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function Bn(t,e=2){let i=t+"";for(;i.length<e;)i="0"+i;return i}const si=(t,e,i)=>Math.min(Math.max(t,e),i);function Dv(t,e,i){const n=t.indexOf(e);return n===-1?t:e==="-"&&n!==0?t.slice(0,n):t.slice(0,n+1)+t.slice(n).replace(i,"")}function Xp(t,e=!0,i=!0){e?t=Dv(t,".",/\./g):t=t.split(".")[0],i?t=Dv(t,"-",/-/g):t=t.replace(/-/,"");const n=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(n,"")}function f1(t,e){return Math.round((t+e)*1e10)/1e10}const{hasOwnProperty:GL}=Object.prototype;function XL(t,e,i){const n=e[i];ct(n)&&(!GL.call(t,i)||!Kn(n)?t[i]=n:t[i]=p1(Object(t[i]),n))}function p1(t,e){return Object.keys(e).forEach(i=>{XL(t,e,i)}),t}var KL={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(t,e)=>`${t}${e}`,rangePrompt:t=>` ${t} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:t=>`${t}`,condition:t=>`${t}`},vanCouponCell:{title:"",count:t=>`${t}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const kv=oe("zh-CN"),Av=Mt({"zh-CN":KL}),m1={messages(){return Av[kv.value]},use(t,e){kv.value=t,this.add({[t]:e})},add(t={}){p1(Av,t)}};var YL=m1;function QL(t){const e=h1(t)+".";return(i,...n)=>{const s=YL.messages(),r=xv(s,e+i)||xv(s,i);return _o(r)?r(...n):r}}function Kp(t,e){return e?typeof e=="string"?` ${t}--${e}`:Array.isArray(e)?e.reduce((i,n)=>i+Kp(t,n),""):Object.keys(e).reduce((i,n)=>i+(e[n]?Kp(t,n):""),""):""}function ZL(t){return(e,i)=>(e&&typeof e!="string"&&(i=e,e=""),e=e?`${t}__${e}`:t,`${e}${Kp(e,i)}`)}function we(t){const e=`van-${t}`;return[e,ZL(e),QL(e)]}const rr="van-hairline",g1=`${rr}--top`,y1=`${rr}--left`,JL=`${rr}--right`,cg=`${rr}--bottom`,Hl=`${rr}--surround`,Qd=`${rr}--top-bottom`,e3=`${rr}-unset--top-bottom`,Ai="van-haptics-feedback",v1=Symbol("van-form"),b1=500,Iv=5;function $r(t,{args:e=[],done:i,canceled:n,error:s}){if(t){const r=t.apply(null,e);ag(r)?r.then(a=>{a?i():n&&n()}).catch(s||qp):r?i():n&&n()}else i()}function Ee(t){return t.install=e=>{const{name:i}=t;i&&(e.component(i,t),e.component(h1(`-${i}`),t))},t}function ad(t,e){return t.reduce((i,n)=>Math.abs(i-e)<Math.abs(n-e)?i:n)}const _1=Symbol();function Zd(t){const e=Si(_1,null);e&&Re(e,i=>{i&&t()})}const T1=(t,e)=>{const i=oe(),n=()=>{i.value=ft(t).height};return Lt(()=>{if(et(n),e)for(let s=1;s<=3;s++)setTimeout(n,100*s)}),Zd(()=>et(n)),Re([Vn,gn],n),i};function Jd(t,e){const i=T1(t,!0);return n=>T("div",{class:e("placeholder"),style:{height:i.value?`${i.value}px`:void 0}},[n()])}const[x1,Pv]=we("action-bar"),dg=Symbol(x1),t3={placeholder:Boolean,safeAreaInsetBottom:be};var i3=Te({name:x1,props:t3,setup(t,{slots:e}){const i=oe(),n=Jd(i,Pv),{linkChildren:s}=Pi(dg);s();const r=()=>{var a;return T("div",{ref:i,class:[Pv(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(a=e.default)==null?void 0:a.call(e)])};return()=>t.placeholder?n(r):r()}});const S1=Ee(i3);function ot(t){const e=Zn();e&&He(e.proxy,t)}const Ur={to:[String,Object],url:String,replace:Boolean};function w1({to:t,url:e,replace:i,$router:n}){t&&n?n[i?"replace":"push"](t):e&&(i?location.replace(e):location.href=e)}function Sa(){const t=Zn().proxy;return()=>w1(t)}const[n3,Ov]=we("badge"),s3={dot:Boolean,max:Ce,tag:De("div"),color:String,offset:Array,content:Ce,showZero:be,position:De("top-right")};var r3=Te({name:n3,props:s3,setup(t,{slots:e}){const i=()=>{if(e.content)return!0;const{content:o,showZero:l}=t;return ct(o)&&o!==""&&(l||o!==0&&o!=="0")},n=()=>{const{dot:o,max:l,content:u}=t;if(!o&&i())return e.content?e.content():ct(l)&&l1(u)&&+u>+l?`${l}+`:u},s=o=>o.startsWith("-")?o.replace("-",""):`-${o}`,r=re(()=>{const o={background:t.color};if(t.offset){const[l,u]=t.offset,{position:c}=t,[d,f]=c.split("-");e.default?(typeof u=="number"?o[d]=Ye(d==="top"?u:-u):o[d]=d==="top"?Ye(u):s(u),typeof l=="number"?o[f]=Ye(f==="left"?l:-l):o[f]=f==="left"?Ye(l):s(l)):(o.marginTop=Ye(u),o.marginLeft=Ye(l))}return o}),a=()=>{if(i()||t.dot)return T("div",{class:Ov([t.position,{dot:t.dot,fixed:!!e.default}]),style:r.value},[n()])};return()=>{if(e.default){const{tag:o}=t;return T(o,{class:Ov("wrapper")},{default:()=>[e.default(),a()]})}return a()}}});const wa=Ee(r3);let C1=2e3;const a3=()=>++C1,o3=t=>{C1=t},[E1,l3]=we("config-provider"),D1=Symbol(E1),u3={tag:De("div"),theme:De("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:De("local"),iconPrefix:String};function c3(t){return t.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function d3(t){const e={};return Object.keys(t).forEach(i=>{const n=c3(WL(i));e[`--van-${n}`]=t[i]}),e}function dc(t={},e={}){Object.keys(t).forEach(i=>{t[i]!==e[i]&&document.documentElement.style.setProperty(i,t[i])}),Object.keys(e).forEach(i=>{t[i]||document.documentElement.style.removeProperty(i)})}var h3=Te({name:E1,props:u3,setup(t,{slots:e}){const i=re(()=>d3(He({},t.themeVars,t.theme==="dark"?t.themeVarsDark:t.themeVarsLight)));if(_n){const n=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},s=(r=t.theme)=>{document.documentElement.classList.remove(`van-theme-${r}`)};Re(()=>t.theme,(r,a)=>{a&&s(a),n()},{immediate:!0}),Ds(n),ks(s),Qn(s),Re(i,(r,a)=>{t.themeVarsScope==="global"&&dc(r,a)}),Re(()=>t.themeVarsScope,(r,a)=>{a==="global"&&dc({},i.value),r==="global"&&dc(i.value,{})}),t.themeVarsScope==="global"&&dc(i.value,{})}return xs(D1,t),Mo(()=>{t.zIndex!==void 0&&o3(t.zIndex)}),()=>T(t.tag,{class:l3(),style:t.themeVarsScope==="local"?i.value:void 0},{default:()=>{var n;return[(n=e.default)==null?void 0:n.call(e)]}})}});const[f3,Rv]=we("icon"),p3=t=>t==null?void 0:t.includes("/"),m3={dot:Boolean,tag:De("i"),name:String,size:Ce,badge:Ce,color:String,badgeProps:Object,classPrefix:String};var g3=Te({name:f3,props:m3,setup(t,{slots:e}){const i=Si(D1,null),n=re(()=>t.classPrefix||(i==null?void 0:i.iconPrefix)||Rv());return()=>{const{tag:s,dot:r,name:a,size:o,badge:l,color:u}=t,c=p3(a);return T(wa,nt({dot:r,tag:s,class:[n.value,c?"":`${n.value}-${a}`],style:{color:u,fontSize:Ye(o)},content:l},t.badgeProps),{default:()=>{var d;return[(d=e.default)==null?void 0:d.call(e),c&&T("img",{class:Rv("image"),src:a},null)]}})}}});const Qe=Ee(g3);var y3=Qe;const[v3,ql]=we("loading"),b3=Array(12).fill(null).map((t,e)=>T("i",{class:ql("line",String(e+1))},null)),_3=T("svg",{class:ql("circular"),viewBox:"25 25 50 50"},[T("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),T3={size:Ce,type:De("circular"),color:String,vertical:Boolean,textSize:Ce,textColor:String};var x3=Te({name:v3,props:T3,setup(t,{slots:e}){const i=re(()=>He({color:t.color},nr(t.size))),n=()=>{const r=t.type==="spinner"?b3:_3;return T("span",{class:ql("spinner",t.type),style:i.value},[e.icon?e.icon():r])},s=()=>{var r;if(e.default)return T("span",{class:ql("text"),style:{fontSize:Ye(t.textSize),color:(r=t.textColor)!=null?r:t.color}},[e.default()])};return()=>{const{type:r,vertical:a}=t;return T("div",{class:ql([r,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[n(),s()])}}});const Jn=Ee(x3),[S3,Ia]=we("button"),w3=He({},Ur,{tag:De("button"),text:String,icon:String,type:De("default"),size:De("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:De("button"),loadingSize:Ce,loadingText:String,loadingType:String,iconPosition:De("left")});var C3=Te({name:S3,props:w3,emits:["click"],setup(t,{emit:e,slots:i}){const n=Sa(),s=()=>i.loading?i.loading():T(Jn,{size:t.loadingSize,type:t.loadingType,class:Ia("loading")},null),r=()=>{if(t.loading)return s();if(i.icon)return T("div",{class:Ia("icon")},[i.icon()]);if(t.icon)return T(Qe,{name:t.icon,class:Ia("icon"),classPrefix:t.iconPrefix},null)},a=()=>{let u;if(t.loading?u=t.loadingText:u=i.default?i.default():t.text,u)return T("span",{class:Ia("text")},[u])},o=()=>{const{color:u,plain:c}=t;if(u){const d={color:c?u:"white"};return c||(d.background=u),u.includes("gradient")?d.border=0:d.borderColor=u,d}},l=u=>{t.loading?wt(u):t.disabled||(e("click",u),n())};return()=>{const{tag:u,type:c,size:d,block:f,round:p,plain:b,square:g,loading:_,disabled:w,hairline:x,nativeType:C,iconPosition:k}=t,D=[Ia([c,d,{plain:b,block:f,round:p,square:g,loading:_,disabled:w,hairline:x}]),{[Hl]:x}];return T(u,{type:C,class:D,style:o(),disabled:w,onClick:l},{default:()=>[T("div",{class:Ia("content")},[k==="left"&&r(),a(),k==="right"&&r()])]})}}});const Ii=Ee(C3),[E3,D3]=we("action-bar-button"),k3=He({},Ur,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var A3=Te({name:E3,props:k3,setup(t,{slots:e}){const i=Sa(),{parent:n,index:s}=bi(dg),r=re(()=>{if(n){const o=n.children[s.value-1];return!(o&&"isButton"in o)}}),a=re(()=>{if(n){const o=n.children[s.value+1];return!(o&&"isButton"in o)}});return ot({isButton:!0}),()=>{const{type:o,icon:l,text:u,color:c,loading:d,disabled:f}=t;return T(Ii,{class:D3([o,{last:a.value,first:r.value}]),size:"large",type:o,icon:l,color:c,loading:d,disabled:f,onClick:i},{default:()=>[e.default?e.default():u]})}}});const Yp=Ee(A3),[I3,Ef]=we("action-bar-icon"),P3=He({},Ur,{dot:Boolean,text:String,icon:String,color:String,badge:Ce,iconClass:Rt,badgeProps:Object,iconPrefix:String});var O3=Te({name:I3,props:P3,setup(t,{slots:e}){const i=Sa();bi(dg);const n=()=>{const{dot:s,badge:r,icon:a,color:o,iconClass:l,badgeProps:u,iconPrefix:c}=t;return e.icon?T(wa,nt({dot:s,class:Ef("icon"),content:r},u),{default:e.icon}):T(Qe,{tag:"div",dot:s,name:a,badge:r,color:o,class:[Ef("icon"),l],badgeProps:u,classPrefix:c},null)};return()=>T("div",{role:"button",class:Ef(),tabindex:0,onClick:i},[n(),e.default?e.default():t.text])}});const R3=Ee(O3),No={show:Boolean,zIndex:Ce,overlay:be,duration:Ce,teleport:[String,Object],lockScroll:be,lazyRender:be,beforeClose:Function,overlayStyle:Object,overlayClass:Rt,transitionAppear:Boolean,closeOnClickOverlay:be},hg=Object.keys(No);function M3(t,e){return t>e?"horizontal":e>t?"vertical":""}function Sn(){const t=oe(0),e=oe(0),i=oe(0),n=oe(0),s=oe(0),r=oe(0),a=oe(""),o=oe(!0),l=()=>a.value==="vertical",u=()=>a.value==="horizontal",c=()=>{i.value=0,n.value=0,s.value=0,r.value=0,a.value="",o.value=!0};return{move:p=>{const b=p.touches[0];i.value=(b.clientX<0?0:b.clientX)-t.value,n.value=b.clientY-e.value,s.value=Math.abs(i.value),r.value=Math.abs(n.value);const g=10;(!a.value||s.value<g&&r.value<g)&&(a.value=M3(s.value,r.value)),o.value&&(s.value>Iv||r.value>Iv)&&(o.value=!1)},start:p=>{c(),t.value=p.touches[0].clientX,e.value=p.touches[0].clientY},reset:c,startX:t,startY:e,deltaX:i,deltaY:n,offsetX:s,offsetY:r,direction:a,isVertical:l,isHorizontal:u,isTap:o}}let pl=0;const Mv="van-overflow-hidden";function k1(t,e){const i=Sn(),n="01",s="10",r=c=>{i.move(c);const d=i.deltaY.value>0?s:n,f=og(c.target,t.value),{scrollHeight:p,offsetHeight:b,scrollTop:g}=f;let _="11";g===0?_=b>=p?"00":"01":g+b>=p&&(_="10"),_!=="11"&&i.isVertical()&&!(parseInt(_,2)&parseInt(d,2))&&wt(c,!0)},a=()=>{document.addEventListener("touchstart",i.start),document.addEventListener("touchmove",r,{passive:!1}),pl||document.body.classList.add(Mv),pl++},o=()=>{pl&&(document.removeEventListener("touchstart",i.start),document.removeEventListener("touchmove",r),pl--,pl||document.body.classList.remove(Mv))},l=()=>e()&&a(),u=()=>e()&&o();Lo(l),ks(u),Qn(u),Re(e,c=>{c?a():o()})}function fg(t){const e=oe(!1);return Re(t,i=>{i&&(e.value=i)},{immediate:!0}),i=>()=>e.value?i():null}const od=()=>{var t;const{scopeId:e}=((t=Zn())==null?void 0:t.vnode)||{};return e?{[e]:""}:null},[L3,B3]=we("overlay"),N3={show:Boolean,zIndex:Ce,duration:Ce,className:Rt,lockScroll:be,lazyRender:be,customStyle:Object,teleport:[String,Object]};var F3=Te({name:L3,inheritAttrs:!1,props:N3,setup(t,{attrs:e,slots:i}){const n=oe(),s=fg(()=>t.show||!t.lazyRender),r=o=>{t.lockScroll&&wt(o,!0)},a=s(()=>{var o;const l=He(sr(t.zIndex),t.customStyle);return ct(t.duration)&&(l.animationDuration=`${t.duration}s`),ui(T("div",nt({ref:n,style:l,class:[B3(),t.className]},e),[(o=i.default)==null?void 0:o.call(i)]),[[yi,t.show]])});return qt("touchmove",r,{target:n}),()=>{const o=T(Hd,{name:"van-fade",appear:!0},{default:a});return t.teleport?T(xa,{to:t.teleport},{default:()=>[o]}):o}}});const A1=Ee(F3),$3=He({},No,{round:Boolean,position:De("center"),closeIcon:De("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:De("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[U3,Lv]=we("popup");var z3=Te({name:U3,inheritAttrs:!1,props:$3,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(t,{emit:e,attrs:i,slots:n}){let s,r;const a=oe(),o=oe(),l=fg(()=>t.show||!t.lazyRender),u=re(()=>{const R={zIndex:a.value};if(ct(t.duration)){const M=t.position==="center"?"animationDuration":"transitionDuration";R[M]=`${t.duration}s`}return R}),c=()=>{s||(s=!0,a.value=t.zIndex!==void 0?+t.zIndex:a3(),e("open"))},d=()=>{s&&$r(t.beforeClose,{done(){s=!1,e("close"),e("update:show",!1)}})},f=R=>{e("clickOverlay",R),t.closeOnClickOverlay&&d()},p=()=>{if(t.overlay)return T(A1,nt({show:t.show,class:t.overlayClass,zIndex:a.value,duration:t.duration,customStyle:t.overlayStyle,role:t.closeOnClickOverlay?"button":void 0,tabindex:t.closeOnClickOverlay?0:void 0},od(),{onClick:f}),{default:n["overlay-content"]})},b=R=>{e("clickCloseIcon",R),d()},g=()=>{if(t.closeable)return T(Qe,{role:"button",tabindex:0,name:t.closeIcon,class:[Lv("close-icon",t.closeIconPosition),Ai],classPrefix:t.iconPrefix,onClick:b},null)};let _;const w=()=>{_&&clearTimeout(_),_=setTimeout(()=>{e("opened")})},x=()=>e("closed"),C=R=>e("keydown",R),k=l(()=>{var R;const{destroyOnClose:M,round:P,position:E,safeAreaInsetTop:I,safeAreaInsetBottom:O,show:L}=t;if(!(!L&&M))return ui(T("div",nt({ref:o,style:u.value,role:"dialog",tabindex:0,class:[Lv({round:P,[E]:E}),{"van-safe-area-top":I,"van-safe-area-bottom":O}],onKeydown:C},i,od()),[(R=n.default)==null?void 0:R.call(n),g()]),[[yi,L]])}),D=()=>{const{position:R,transition:M,transitionAppear:P}=t,E=R==="center"?"van-fade":`van-popup-slide-${R}`;return T(Hd,{name:M||E,appear:P,onAfterEnter:w,onAfterLeave:x},{default:k})};return Re(()=>t.show,R=>{R&&!s&&(c(),i.tabindex===0&&et(()=>{var M;(M=o.value)==null||M.focus()})),!R&&s&&(s=!1,e("close"))}),ot({popupRef:o}),k1(o,()=>t.show&&t.lockScroll),qt("popstate",()=>{t.closeOnPopstate&&(d(),r=!1)}),Lt(()=>{t.show&&c()}),Ds(()=>{r&&(e("update:show",!0),r=!1)}),ks(()=>{t.show&&t.teleport&&(d(),r=!0)}),xs(_1,()=>t.show),()=>t.teleport?T(xa,{to:t.teleport},{default:()=>[p(),D()]}):T(zt,null,[p(),D()])}});const es=Ee(z3),[V3,hn]=we("action-sheet"),H3=He({},No,{title:String,round:be,actions:At(),closeIcon:De("cross"),closeable:be,cancelText:String,description:String,closeOnPopstate:be,closeOnClickAction:Boolean,safeAreaInsetBottom:be}),q3=[...hg,"round","closeOnPopstate","safeAreaInsetBottom"];var j3=Te({name:V3,props:H3,emits:["select","cancel","update:show"],setup(t,{slots:e,emit:i}){const n=d=>i("update:show",d),s=()=>{n(!1),i("cancel")},r=()=>{if(t.title)return T("div",{class:hn("header")},[t.title,t.closeable&&T(Qe,{name:t.closeIcon,class:[hn("close"),Ai],onClick:s},null)])},a=()=>{if(e.cancel||t.cancelText)return[T("div",{class:hn("gap")},null),T("button",{type:"button",class:hn("cancel"),onClick:s},[e.cancel?e.cancel():t.cancelText])]},o=d=>{if(d.icon)return T(Qe,{class:hn("item-icon"),name:d.icon},null)},l=(d,f)=>d.loading?T(Jn,{class:hn("loading-icon")},null):e.action?e.action({action:d,index:f}):[T("span",{class:hn("name")},[d.name]),d.subname&&T("div",{class:hn("subname")},[d.subname])],u=(d,f)=>{const{color:p,loading:b,callback:g,disabled:_,className:w}=d,x=()=>{_||b||(g&&g(d),t.closeOnClickAction&&n(!1),et(()=>i("select",d,f)))};return T("button",{type:"button",style:{color:p},class:[hn("item",{loading:b,disabled:_}),w],onClick:x},[o(d),l(d,f)])},c=()=>{if(t.description||e.description){const d=e.description?e.description():t.description;return T("div",{class:hn("description")},[d])}};return()=>T(es,nt({class:hn(),position:"bottom","onUpdate:show":n},dt(t,q3)),{default:()=>{var d;return[r(),c(),T("div",{class:hn("content")},[t.actions.map(u),(d=e.default)==null?void 0:d.call(e)]),a()]}})}});const W3=Ee(j3),[G3,Hs,Bv]=we("picker"),I1=t=>t.find(e=>!e.disabled)||t[0];function X3(t,e){const i=t[0];if(i){if(Array.isArray(i))return"multiple";if(e.children in i)return"cascade"}return"default"}function zc(t,e){e=si(e,0,t.length);for(let i=e;i<t.length;i++)if(!t[i].disabled)return i;for(let i=e-1;i>=0;i--)if(!t[i].disabled)return i;return 0}const Nv=(t,e,i)=>e!==void 0&&t.some(n=>n[i.value]===e);function Qp(t,e,i){const n=t.findIndex(r=>r[i.value]===e),s=zc(t,n);return t[s]}function K3(t,e,i){const n=[];let s={[e.children]:t},r=0;for(;s&&s[e.children];){const a=s[e.children],o=i.value[r];if(s=ct(o)?Qp(a,o,e):void 0,!s&&a.length){const l=I1(a)[e.value];s=Qp(a,l,e)}r++,n.push(a)}return n}function Y3(t){const{transform:e}=window.getComputedStyle(t),i=e.slice(7,e.length-1).split(", ")[5];return Number(i)}function Q3(t){return He({text:"text",value:"value",children:"children"},t)}const Fv=200,$v=300,Z3=15,[P1,Df]=we("picker-column"),O1=Symbol(P1);var J3=Te({name:P1,props:{value:Ce,fields:oi(Object),options:At(),readonly:Boolean,allowHtml:Boolean,optionHeight:oi(Number),swipeDuration:oi(Ce),visibleOptionNum:oi(Ce)},emits:["change","clickOption","scrollInto"],setup(t,{emit:e,slots:i}){let n,s,r,a,o;const l=oe(),u=oe(),c=oe(0),d=oe(0),f=Sn(),p=()=>t.options.length,b=()=>t.optionHeight*(+t.visibleOptionNum-1)/2,g=I=>{let O=zc(t.options,I);const L=-O*t.optionHeight,F=()=>{O>p()-1&&(O=zc(t.options,I));const X=t.options[O][t.fields.value];X!==t.value&&e("change",X)};n&&L!==c.value?o=F:F(),c.value=L},_=()=>t.readonly||!t.options.length,w=I=>{n||_()||(o=null,d.value=Fv,g(I),e("clickOption",t.options[I]))},x=I=>si(Math.round(-I/t.optionHeight),0,p()-1),C=re(()=>x(c.value)),k=(I,O)=>{const L=Math.abs(I/O);I=c.value+L/.003*(I<0?-1:1);const F=x(I);d.value=+t.swipeDuration,g(F)},D=()=>{n=!1,d.value=0,o&&(o(),o=null)},R=I=>{if(!_()){if(f.start(I),n){const O=Y3(u.value);c.value=Math.min(0,O-b())}d.value=0,s=c.value,r=Date.now(),a=s,o=null}},M=I=>{if(_())return;f.move(I),f.isVertical()&&(n=!0,wt(I,!0));const O=si(s+f.deltaY.value,-(p()*t.optionHeight),t.optionHeight),L=x(O);L!==C.value&&e("scrollInto",t.options[L]),c.value=O;const F=Date.now();F-r>$v&&(r=F,a=O)},P=()=>{if(_())return;const I=c.value-a,O=Date.now()-r;if(O<$v&&Math.abs(I)>Z3){k(I,O);return}const F=x(c.value);d.value=Fv,g(F),setTimeout(()=>{n=!1},0)},E=()=>{const I={height:`${t.optionHeight}px`};return t.options.map((O,L)=>{const F=O[t.fields.text],{disabled:X}=O,ee=O[t.fields.value],K={role:"button",style:I,tabindex:X?-1:0,class:[Df("item",{disabled:X,selected:ee===t.value}),O.className],onClick:()=>w(L)},Y={class:"van-ellipsis",[t.allowHtml?"innerHTML":"textContent"]:F};return T("li",K,[i.option?i.option(O,L):T("div",Y,null)])})};return bi(O1),ot({stopMomentum:D}),Mo(()=>{const I=n?Math.floor(-c.value/t.optionHeight):t.options.findIndex(F=>F[t.fields.value]===t.value),O=zc(t.options,I),L=-O*t.optionHeight;n&&O<I&&D(),c.value=L}),qt("touchmove",M,{target:l}),()=>T("div",{ref:l,class:Df(),onTouchstartPassive:R,onTouchend:P,onTouchcancel:P},[T("ul",{ref:u,style:{transform:`translate3d(0, ${c.value+b()}px, 0)`,transitionDuration:`${d.value}ms`,transitionProperty:d.value?"all":"none"},class:Df("wrapper"),onTransitionend:D},[E()])])}});const[eB]=we("picker-toolbar"),eh={title:String,cancelButtonText:String,confirmButtonText:String},R1=["cancel","confirm","title","toolbar"],tB=Object.keys(eh);var M1=Te({name:eB,props:eh,emits:["confirm","cancel"],setup(t,{emit:e,slots:i}){const n=()=>{if(i.title)return i.title();if(t.title)return T("div",{class:[Hs("title"),"van-ellipsis"]},[t.title])},s=()=>e("cancel"),r=()=>e("confirm"),a=()=>{var l;const u=(l=t.cancelButtonText)!=null?l:Bv("cancel");if(!(!i.cancel&&!u))return T("button",{type:"button",class:[Hs("cancel"),Ai],onClick:s},[i.cancel?i.cancel():u])},o=()=>{var l;const u=(l=t.confirmButtonText)!=null?l:Bv("confirm");if(!(!i.confirm&&!u))return T("button",{type:"button",class:[Hs("confirm"),Ai],onClick:r},[i.confirm?i.confirm():u])};return()=>T("div",{class:Hs("toolbar")},[i.toolbar?i.toolbar():[a(),n(),o()]])}});const pg=(t,e)=>{const i=oe(t());return Re(t,n=>{n!==i.value&&(i.value=n)}),Re(i,n=>{n!==t()&&e(n)}),i};function iB(t,e,i){let n,s=0;const r=t.scrollLeft,a=i===0?1:Math.round(i*1e3/16);let o=r;function l(){Kd(n)}function u(){o+=(e-r)/a,t.scrollLeft=o,++s<a&&(n=Ci(u))}return u(),l}function nB(t,e,i,n){let s,r=Qs(t);const a=r<e,o=i===0?1:Math.round(i*1e3/16),l=(e-r)/o;function u(){Kd(s)}function c(){r+=l,(a&&r>e||!a&&r<e)&&(r=e),rd(t,r),a&&r<e||!a&&r>e?s=Ci(c):n&&(s=Ci(n))}return c(),u}let sB=0;function Fo(){const t=Zn(),{name:e="unknown"}=(t==null?void 0:t.type)||{};return`${e}-${++sB}`}function Cu(){const t=oe([]),e=[];return jT(()=>{t.value=[]}),[t,n=>(e[n]||(e[n]=s=>{t.value[n]=s}),e[n])]}function L1(t,e){if(!_n||!window.IntersectionObserver)return;const i=new IntersectionObserver(r=>{e(r[0].intersectionRatio>0)},{root:document.body}),n=()=>{t.value&&i.observe(t.value)},s=()=>{t.value&&i.unobserve(t.value)};ks(s),Qn(s),Lo(n)}const[rB,aB]=we("sticky"),oB={zIndex:Ce,position:De("top"),container:Object,offsetTop:Ne(0),offsetBottom:Ne(0)};var lB=Te({name:rB,props:oB,emits:["scroll","change"],setup(t,{emit:e,slots:i}){const n=oe(),s=Bo(n),r=Mt({fixed:!1,width:0,height:0,transform:0}),a=oe(!1),o=re(()=>ug(t.position==="top"?t.offsetTop:t.offsetBottom)),l=re(()=>{if(a.value)return;const{fixed:f,height:p,width:b}=r;if(f)return{width:`${b}px`,height:`${p}px`}}),u=re(()=>{if(!r.fixed||a.value)return;const f=He(sr(t.zIndex),{width:`${r.width}px`,height:`${r.height}px`,[t.position]:`${o.value}px`});return r.transform&&(f.transform=`translate3d(0, ${r.transform}px, 0)`),f}),c=f=>e("scroll",{scrollTop:f,isFixed:r.fixed}),d=()=>{if(!n.value||ba(n))return;const{container:f,position:p}=t,b=ft(n),g=Qs(window);if(r.width=b.width,r.height=b.height,p==="top")if(f){const _=ft(f),w=_.bottom-o.value-r.height;r.fixed=o.value>b.top&&_.bottom>0,r.transform=w<0?w:0}else r.fixed=o.value>b.top;else{const{clientHeight:_}=document.documentElement;if(f){const w=ft(f),x=_-w.top-o.value-r.height;r.fixed=_-o.value<b.bottom&&_>w.top,r.transform=x<0?-x:0}else r.fixed=_-o.value<b.bottom}c(g)};return Re(()=>r.fixed,f=>e("change",f)),qt("scroll",d,{target:s,passive:!0}),L1(n,d),Re([Vn,gn],()=>{!n.value||ba(n)||!r.fixed||(a.value=!0,et(()=>{const f=ft(n);r.width=f.width,r.height=f.height,a.value=!1}))}),()=>{var f;return T("div",{ref:n,style:l.value},[T("div",{class:aB({fixed:r.fixed&&!a.value}),style:u.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const B1=Ee(lB),[N1,hc]=we("swipe"),uB={loop:be,width:Ce,height:Ce,vertical:Boolean,autoplay:Ne(0),duration:Ne(500),touchable:be,lazyRender:Boolean,initialSwipe:Ne(0),indicatorColor:String,showIndicators:be,stopPropagation:be},F1=Symbol(N1);var cB=Te({name:N1,props:uB,emits:["change","dragStart","dragEnd"],setup(t,{emit:e,slots:i}){const n=oe(),s=oe(),r=Mt({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let a=!1;const o=Sn(),{children:l,linkChildren:u}=Pi(F1),c=re(()=>l.length),d=re(()=>r[t.vertical?"height":"width"]),f=re(()=>t.vertical?o.deltaY.value:o.deltaX.value),p=re(()=>r.rect?(t.vertical?r.rect.height:r.rect.width)-d.value*c.value:0),b=re(()=>d.value?Math.ceil(Math.abs(p.value)/d.value):c.value),g=re(()=>c.value*d.value),_=re(()=>(r.active+c.value)%c.value),w=re(()=>{const te=t.vertical?"vertical":"horizontal";return o.direction.value===te}),x=re(()=>{const te={transitionDuration:`${r.swiping?0:t.duration}ms`,transform:`translate${t.vertical?"Y":"X"}(${+r.offset.toFixed(2)}px)`};if(d.value){const ie=t.vertical?"height":"width",fe=t.vertical?"width":"height";te[ie]=`${g.value}px`,te[fe]=t[fe]?`${t[fe]}px`:""}return te}),C=te=>{const{active:ie}=r;return te?t.loop?si(ie+te,-1,c.value):si(ie+te,0,b.value):ie},k=(te,ie=0)=>{let fe=te*d.value;t.loop||(fe=Math.min(fe,-p.value));let ke=ie-fe;return t.loop||(ke=si(ke,p.value,0)),ke},D=({pace:te=0,offset:ie=0,emitChange:fe})=>{if(c.value<=1)return;const{active:ke}=r,ae=C(te),Ie=k(ae,ie);if(t.loop){if(l[0]&&Ie!==p.value){const z=Ie<p.value;l[0].setOffset(z?g.value:0)}if(l[c.value-1]&&Ie!==0){const z=Ie>0;l[c.value-1].setOffset(z?-g.value:0)}}r.active=ae,r.offset=Ie,fe&&ae!==ke&&e("change",_.value)},R=()=>{r.swiping=!0,r.active<=-1?D({pace:c.value}):r.active>=c.value&&D({pace:-c.value})},M=()=>{R(),o.reset(),Dr(()=>{r.swiping=!1,D({pace:-1,emitChange:!0})})},P=()=>{R(),o.reset(),Dr(()=>{r.swiping=!1,D({pace:1,emitChange:!0})})};let E;const I=()=>clearTimeout(E),O=()=>{I(),+t.autoplay>0&&c.value>1&&(E=setTimeout(()=>{P(),O()},+t.autoplay))},L=(te=+t.initialSwipe)=>{if(!n.value)return;const ie=()=>{var fe,ke;if(!ba(n)){const ae={width:n.value.offsetWidth,height:n.value.offsetHeight};r.rect=ae,r.width=+((fe=t.width)!=null?fe:ae.width),r.height=+((ke=t.height)!=null?ke:ae.height)}c.value&&(te=Math.min(c.value-1,te),te===-1&&(te=c.value-1)),r.active=te,r.swiping=!0,r.offset=k(te),l.forEach(ae=>{ae.setOffset(0)}),O()};ba(n)?et().then(ie):ie()},F=()=>L(r.active);let X;const ee=te=>{!t.touchable||te.touches.length>1||(o.start(te),a=!1,X=Date.now(),I(),R())},K=te=>{t.touchable&&r.swiping&&(o.move(te),w.value&&(!t.loop&&(r.active===0&&f.value>0||r.active===c.value-1&&f.value<0)||(wt(te,t.stopPropagation),D({offset:f.value}),a||(e("dragStart",{index:_.value}),a=!0))))},Y=()=>{if(!t.touchable||!r.swiping)return;const te=Date.now()-X,ie=f.value/te;if((Math.abs(ie)>.25||Math.abs(f.value)>d.value/2)&&w.value){const ke=t.vertical?o.offsetY.value:o.offsetX.value;let ae=0;t.loop?ae=ke>0?f.value>0?-1:1:0:ae=-Math[f.value>0?"ceil":"floor"](f.value/d.value),D({pace:ae,emitChange:!0})}else f.value&&D({pace:0});a=!1,r.swiping=!1,e("dragEnd",{index:_.value}),O()},Z=(te,ie={})=>{R(),o.reset(),Dr(()=>{let fe;t.loop&&te===c.value?fe=r.active===0?0:te:fe=te%c.value,ie.immediate?Dr(()=>{r.swiping=!1}):r.swiping=!1,D({pace:fe-r.active,emitChange:!0})})},le=(te,ie)=>{const fe=ie===_.value,ke=fe?{backgroundColor:t.indicatorColor}:void 0;return T("i",{style:ke,class:hc("indicator",{active:fe})},null)},he=()=>{if(i.indicator)return i.indicator({active:_.value,total:c.value});if(t.showIndicators&&c.value>1)return T("div",{class:hc("indicators",{vertical:t.vertical})},[Array(c.value).fill("").map(le)])};return ot({prev:M,next:P,state:r,resize:F,swipeTo:Z}),u({size:d,props:t,count:c,activeIndicator:_}),Re(()=>t.initialSwipe,te=>L(+te)),Re(c,()=>L(r.active)),Re(()=>t.autoplay,O),Re([Vn,gn,()=>t.width,()=>t.height],F),Re(NL(),te=>{te==="visible"?O():I()}),Lt(L),Ds(()=>L(r.active)),Zd(()=>L(r.active)),ks(I),Qn(I),qt("touchmove",K,{target:s}),()=>{var te;return T("div",{ref:n,class:hc()},[T("div",{ref:s,style:x.value,class:hc("track",{vertical:t.vertical}),onTouchstartPassive:ee,onTouchend:Y,onTouchcancel:Y},[(te=i.default)==null?void 0:te.call(i)]),he()])}}});const mg=Ee(cB),[dB,Uv]=we("tabs");var hB=Te({name:dB,props:{count:oi(Number),inited:Boolean,animated:Boolean,duration:oi(Ce),swipeable:Boolean,lazyRender:Boolean,currentIndex:oi(Number)},emits:["change"],setup(t,{emit:e,slots:i}){const n=oe(),s=o=>e("change",o),r=()=>{var o;const l=(o=i.default)==null?void 0:o.call(i);return t.animated||t.swipeable?T(mg,{ref:n,loop:!1,class:Uv("track"),duration:+t.duration*1e3,touchable:t.swipeable,lazyRender:t.lazyRender,showIndicators:!1,onChange:s},{default:()=>[l]}):l},a=o=>{const l=n.value;l&&l.state.active!==o&&l.swipeTo(o,{immediate:!t.inited})};return Re(()=>t.currentIndex,a),Lt(()=>{a(t.currentIndex)}),ot({swipeRef:n}),()=>T("div",{class:Uv("content",{animated:t.animated||t.swipeable})},[r()])}});const[$1,fc]=we("tabs"),fB={type:De("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:Ne(0),duration:Ne(.3),animated:Boolean,ellipsis:be,swipeable:Boolean,scrollspy:Boolean,offsetTop:Ne(0),background:String,lazyRender:be,showHeader:be,lineWidth:Ce,lineHeight:Ce,beforeChange:Function,swipeThreshold:Ne(5),titleActiveColor:String,titleInactiveColor:String},U1=Symbol($1);var pB=Te({name:$1,props:fB,emits:["change","scroll","rendered","clickTab","update:active"],setup(t,{emit:e,slots:i}){let n,s,r,a,o;const l=oe(),u=oe(),c=oe(),d=oe(),f=Fo(),p=Bo(l),[b,g]=Cu(),{children:_,linkChildren:w}=Pi(U1),x=Mt({inited:!1,position:"",lineStyle:{},currentIndex:-1}),C=re(()=>_.length>+t.swipeThreshold||!t.ellipsis||t.shrink),k=re(()=>({borderColor:t.color,background:t.background})),D=(ae,Ie)=>{var z;return(z=ae.name)!=null?z:Ie},R=re(()=>{const ae=_[x.currentIndex];if(ae)return D(ae,x.currentIndex)}),M=re(()=>ug(t.offsetTop)),P=re(()=>t.sticky?M.value+n:0),E=ae=>{const Ie=u.value,z=b.value;if(!C.value||!Ie||!z||!z[x.currentIndex])return;const ue=z[x.currentIndex].$el,se=ue.offsetLeft-(Ie.offsetWidth-ue.offsetWidth)/2;a&&a(),a=iB(Ie,se,ae?0:+t.duration)},I=()=>{const ae=x.inited;et(()=>{const Ie=b.value;if(!Ie||!Ie[x.currentIndex]||t.type!=="line"||ba(l.value))return;const z=Ie[x.currentIndex].$el,{lineWidth:ue,lineHeight:se}=t,Se=z.offsetLeft+z.offsetWidth/2,Fe={width:Ye(ue),backgroundColor:t.color,transform:`translateX(${Se}px) translateX(-50%)`};if(ae&&(Fe.transitionDuration=`${t.duration}s`),ct(se)){const V=Ye(se);Fe.height=V,Fe.borderRadius=V}x.lineStyle=Fe})},O=ae=>{const Ie=ae<x.currentIndex?-1:1;for(;ae>=0&&ae<_.length;){if(!_[ae].disabled)return ae;ae+=Ie}},L=(ae,Ie)=>{const z=O(ae);if(!ct(z))return;const ue=_[z],se=D(ue,z),Se=x.currentIndex!==null;x.currentIndex!==z&&(x.currentIndex=z,Ie||E(),I()),se!==t.active&&(e("update:active",se),Se&&e("change",se,ue.title)),r&&!t.scrollspy&&hu(Math.ceil(Ev(l.value)-M.value))},F=(ae,Ie)=>{const z=_.findIndex((ue,se)=>D(ue,se)===ae);L(z===-1?0:z,Ie)},X=(ae=!1)=>{if(t.scrollspy){const Ie=_[x.currentIndex].$el;if(Ie&&p.value){const z=Ev(Ie,p.value)-P.value;s=!0,o&&o(),o=nB(p.value,z,ae?0:+t.duration,()=>{s=!1})}}},ee=(ae,Ie,z)=>{const{title:ue,disabled:se}=_[Ie],Se=D(_[Ie],Ie);se||($r(t.beforeChange,{args:[Se],done:()=>{L(Ie),X()}}),w1(ae)),e("clickTab",{name:Se,title:ue,event:z,disabled:se})},K=ae=>{r=ae.isFixed,e("scroll",ae)},Y=ae=>{et(()=>{F(ae),X(!0)})},Z=()=>{for(let ae=0;ae<_.length;ae++){const{top:Ie}=ft(_[ae].$el);if(Ie>P.value)return ae===0?0:ae-1}return _.length-1},le=()=>{if(t.scrollspy&&!s){const ae=Z();L(ae)}},he=()=>{if(t.type==="line"&&_.length)return T("div",{class:fc("line"),style:x.lineStyle},null)},te=()=>{var ae,Ie,z;const{type:ue,border:se,sticky:Se}=t,Fe=[T("div",{ref:Se?void 0:c,class:[fc("wrap"),{[Qd]:ue==="line"&&se}]},[T("div",{ref:u,role:"tablist",class:fc("nav",[ue,{shrink:t.shrink,complete:C.value}]),style:k.value,"aria-orientation":"horizontal"},[(ae=i["nav-left"])==null?void 0:ae.call(i),_.map(V=>V.renderTitle(ee)),he(),(Ie=i["nav-right"])==null?void 0:Ie.call(i)])]),(z=i["nav-bottom"])==null?void 0:z.call(i)];return Se?T("div",{ref:c},[Fe]):Fe},ie=()=>{I(),et(()=>{var ae,Ie;E(!0),(Ie=(ae=d.value)==null?void 0:ae.swipeRef.value)==null||Ie.resize()})};Re(()=>[t.color,t.duration,t.lineWidth,t.lineHeight],I),Re(Vn,ie),Re(()=>t.active,ae=>{ae!==R.value&&F(ae)}),Re(()=>_.length,()=>{x.inited&&(F(t.active),I(),et(()=>{E(!0)}))});const fe=()=>{F(t.active,!0),et(()=>{x.inited=!0,c.value&&(n=ft(c.value).height),E(!0)})},ke=(ae,Ie)=>e("rendered",ae,Ie);return ot({resize:ie,scrollTo:Y}),Ds(I),Zd(I),Lo(fe),L1(l,I),qt("scroll",le,{target:p,passive:!0}),w({id:f,props:t,setLine:I,scrollable:C,onRendered:ke,currentName:R,setTitleRefs:g,scrollIntoView:E}),()=>T("div",{ref:l,class:fc([t.type])},[t.showHeader?t.sticky?T(B1,{container:l.value,offsetTop:M.value,onScroll:K},{default:()=>[te()]}):te():null,T(hB,{ref:d,count:_.length,inited:x.inited,animated:t.animated,duration:t.duration,swipeable:t.swipeable,lazyRender:t.lazyRender,currentIndex:x.currentIndex,onChange:L},{default:()=>{var ae;return[(ae=i.default)==null?void 0:ae.call(i)]}})])}});const z1=Symbol(),mB=()=>Si(z1,null),[gB,zv]=we("tab"),yB=Te({name:gB,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:Ce,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:be},setup(t,{slots:e}){const i=re(()=>{const s={},{type:r,color:a,disabled:o,isActive:l,activeColor:u,inactiveColor:c}=t;a&&r==="card"&&(s.borderColor=a,o||(l?s.backgroundColor=a:s.color=a));const f=l?u:c;return f&&(s.color=f),s}),n=()=>{const s=T("span",{class:zv("text",{ellipsis:!t.scrollable})},[e.title?e.title():t.title]);return t.dot||ct(t.badge)&&t.badge!==""?T(wa,{dot:t.dot,content:t.badge,showZero:t.showZeroBadge},{default:()=>[s]}):s};return()=>T("div",{id:t.id,role:"tab",class:[zv([t.type,{grow:t.scrollable&&!t.shrink,shrink:t.shrink,active:t.isActive,disabled:t.disabled}])],style:i.value,tabindex:t.disabled?void 0:t.isActive?0:-1,"aria-selected":t.isActive,"aria-disabled":t.disabled||void 0,"aria-controls":t.controls,"data-allow-mismatch":"attribute"},[n()])}}),[vB,bB]=we("swipe-item");var _B=Te({name:vB,setup(t,{slots:e}){let i;const n=Mt({offset:0,inited:!1,mounted:!1}),{parent:s,index:r}=bi(F1);if(!s)return;const a=re(()=>{const u={},{vertical:c}=s.props;return s.size.value&&(u[c?"height":"width"]=`${s.size.value}px`),n.offset&&(u.transform=`translate${c?"Y":"X"}(${n.offset}px)`),u}),o=re(()=>{const{loop:u,lazyRender:c}=s.props;if(!c||i)return!0;if(!n.mounted)return!1;const d=s.activeIndicator.value,f=s.count.value-1,p=d===0&&u?f:d-1,b=d===f&&u?0:d+1;return i=r.value===d||r.value===p||r.value===b,i}),l=u=>{n.offset=u};return Lt(()=>{et(()=>{n.mounted=!0})}),ot({setOffset:l}),()=>{var u;return T("div",{class:bB(),style:a.value},[o.value?(u=e.default)==null?void 0:u.call(e):null])}}});const gg=Ee(_B),[TB,kf]=we("tab"),xB=He({},Ur,{dot:Boolean,name:Ce,badge:Ce,title:String,disabled:Boolean,titleClass:Rt,titleStyle:[String,Object],showZeroBadge:be});var SB=Te({name:TB,props:xB,setup(t,{slots:e}){const i=Fo(),n=oe(!1),s=Zn(),{parent:r,index:a}=bi(U1);if(!r)return;const o=()=>{var b;return(b=t.name)!=null?b:a.value},l=()=>{n.value=!0,r.props.lazyRender&&et(()=>{r.onRendered(o(),t.title)})},u=re(()=>{const b=o()===r.currentName.value;return b&&!n.value&&l(),b}),c=oe(""),d=oe("");Mo(()=>{const{titleClass:b,titleStyle:g}=t;c.value=b?Nd(b):"",d.value=g&&typeof g!="string"?ID(_u(g)):g});const f=b=>T(yB,nt({key:i,id:`${r.id}-${a.value}`,ref:r.setTitleRefs(a.value),style:d.value,class:c.value,isActive:u.value,controls:i,scrollable:r.scrollable.value,activeColor:r.props.titleActiveColor,inactiveColor:r.props.titleInactiveColor,onClick:g=>b(s.proxy,a.value,g)},dt(r.props,["type","color","shrink"]),dt(t,["dot","badge","title","disabled","showZeroBadge"])),{title:e.title}),p=oe(!u.value);return Re(u,b=>{b?p.value=!1:Dr(()=>{p.value=!0})}),Re(()=>t.title,()=>{r.setLine(),r.scrollIntoView()}),xs(z1,u),ot({id:i,renderTitle:f}),()=>{var b;const g=`${r.id}-${a.value}`,{animated:_,swipeable:w,scrollspy:x,lazyRender:C}=r.props;if(!e.default&&!_)return;const k=x||u.value;if(_||w)return T(gg,{id:i,role:"tabpanel",class:kf("panel-wrapper",{inactive:p.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":g,"data-allow-mismatch":"attribute"},{default:()=>{var M;return[T("div",{class:kf("panel")},[(M=e.default)==null?void 0:M.call(e)])]}});const R=n.value||x||!C?(b=e.default)==null?void 0:b.call(e):null;return ui(T("div",{id:i,role:"tabpanel",class:kf("panel"),tabindex:k?0:-1,"aria-labelledby":g,"data-allow-mismatch":"attribute"},[R]),[[yi,k]])}}});const fu=Ee(SB),th=Ee(pB),[V1,Af]=we("picker-group"),H1=Symbol(V1),wB=He({tabs:At(),activeTab:Ne(0),nextStepText:String,showToolbar:be},eh);var CB=Te({name:V1,props:wB,emits:["confirm","cancel","update:activeTab"],setup(t,{emit:e,slots:i}){const n=pg(()=>t.activeTab,u=>e("update:activeTab",u)),{children:s,linkChildren:r}=Pi(H1);r();const a=()=>+n.value<t.tabs.length-1&&t.nextStepText,o=()=>{a()?n.value=+n.value+1:e("confirm",s.map(u=>u.confirm()))},l=()=>e("cancel");return()=>{var u,c;let d=(c=(u=i.default)==null?void 0:u.call(i))==null?void 0:c.filter(p=>p.type!==pi).map(p=>p.type===zt?p.children:p);d&&(d=EL(d));const f=a()?t.nextStepText:t.confirmButtonText;return T("div",{class:Af()},[t.showToolbar?T(M1,{title:t.title,cancelButtonText:t.cancelButtonText,confirmButtonText:f,onConfirm:o,onCancel:l},dt(i,R1)):null,T(th,{active:n.value,"onUpdate:active":p=>n.value=p,class:Af("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[t.tabs.map((p,b)=>T(fu,{title:p,titleClass:Af("tab-title")},{default:()=>[d==null?void 0:d[b]]}))]})])}}});const ih=He({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:Ne(44),showToolbar:be,swipeDuration:Ne(1e3),visibleOptionNum:Ne(6)},eh),EB=He({},ih,{columns:At(),modelValue:At(),toolbarPosition:De("top"),columnsFieldNames:Object});var DB=Te({name:G3,props:EB,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(),s=oe(t.modelValue.slice(0)),{parent:r}=bi(H1),{children:a,linkChildren:o}=Pi(O1);o();const l=re(()=>Q3(t.columnsFieldNames)),u=re(()=>ug(t.optionHeight)),c=re(()=>X3(t.columns,l.value)),d=re(()=>{const{columns:O}=t;switch(c.value){case"multiple":return O;case"cascade":return K3(O,l.value,s);default:return[O]}}),f=re(()=>d.value.some(O=>O.length)),p=re(()=>d.value.map((O,L)=>Qp(O,s.value[L],l.value))),b=re(()=>d.value.map((O,L)=>O.findIndex(F=>F[l.value.value]===s.value[L]))),g=(O,L)=>{if(s.value[O]!==L){const F=s.value.slice(0);F[O]=L,s.value=F}},_=()=>({selectedValues:s.value.slice(0),selectedOptions:p.value,selectedIndexes:b.value}),w=(O,L)=>{g(L,O),c.value==="cascade"&&s.value.forEach((F,X)=>{const ee=d.value[X];Nv(ee,F,l.value)||g(X,ee.length?ee[0][l.value.value]:void 0)}),et(()=>{e("change",He({columnIndex:L},_()))})},x=(O,L)=>{const F={columnIndex:L,currentOption:O};e("clickOption",He(_(),F)),e("scrollInto",F)},C=()=>{a.forEach(L=>L.stopMomentum());const O=_();return et(()=>{const L=_();e("confirm",L)}),O},k=()=>e("cancel",_()),D=()=>d.value.map((O,L)=>T(J3,{value:s.value[L],fields:l.value,options:O,readonly:t.readonly,allowHtml:t.allowHtml,optionHeight:u.value,swipeDuration:t.swipeDuration,visibleOptionNum:t.visibleOptionNum,onChange:F=>w(F,L),onClickOption:F=>x(F,L),onScrollInto:F=>{e("scrollInto",{currentOption:F,columnIndex:L})}},{option:i.option})),R=O=>{if(f.value){const L={height:`${u.value}px`},F={backgroundSize:`100% ${(O-u.value)/2}px`};return[T("div",{class:Hs("mask"),style:F},null),T("div",{class:[e3,Hs("frame")],style:L},null)]}},M=()=>{const O=u.value*+t.visibleOptionNum,L={height:`${O}px`};return!t.loading&&!f.value&&i.empty?i.empty():T("div",{ref:n,class:Hs("columns"),style:L},[D(),R(O)])},P=()=>{if(t.showToolbar&&!r)return T(M1,nt(dt(t,tB),{onConfirm:C,onCancel:k}),dt(i,R1))};Re(d,O=>{O.forEach((L,F)=>{L.length&&!Nv(L,s.value[F],l.value)&&g(F,I1(L)[l.value.value])})},{immediate:!0});let E;return Re(()=>t.modelValue,O=>{!Ss(O,s.value)&&!Ss(O,E)&&(s.value=O.slice(0),E=O.slice(0))},{deep:!0}),Re(s,O=>{Ss(O,t.modelValue)||(E=O.slice(0),e("update:modelValue",E))},{immediate:!0}),qt("touchmove",wt,{target:n}),ot({confirm:C,getSelectedOptions:()=>p.value}),()=>{var O,L;return T("div",{class:Hs()},[t.toolbarPosition==="top"?P():null,t.loading?T(Jn,{class:Hs("loading")},null):null,(O=i["columns-top"])==null?void 0:O.call(i),M(),(L=i["columns-bottom"])==null?void 0:L.call(i),t.toolbarPosition==="bottom"?P():null])}}});const io="000000",kB=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],q1=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],dr=(t="",e=io,i=void 0)=>({text:t,value:e,children:i});function AB({areaList:t,columnsNum:e,columnsPlaceholder:i}){const{city_list:n={},county_list:s={},province_list:r={}}=t,a=+e>1,o=+e>2,l=()=>{if(a)return i.length>1?[dr(i[1],io,o?[]:void 0)]:[]},u=new Map;Object.keys(r).forEach(f=>{u.set(f.slice(0,2),dr(r[f],f,l()))});const c=new Map;if(a){const f=()=>{if(o)return i.length>2?[dr(i[2])]:[]};Object.keys(n).forEach(p=>{const b=dr(n[p],p,f());c.set(p.slice(0,4),b);const g=u.get(p.slice(0,2));g&&g.children.push(b)})}o&&Object.keys(s).forEach(f=>{const p=c.get(f.slice(0,4));p&&p.children.push(dr(s[f],f))});const d=Array.from(u.values());if(i.length){const f=o?[dr(i[2])]:void 0,p=a?[dr(i[1],io,f)]:void 0;d.unshift(dr(i[0],io,p))}return d}const nh=Ee(DB),[IB,PB]=we("area"),OB=He({},dt(ih,q1),{modelValue:String,columnsNum:Ne(3),columnsPlaceholder:At(),areaList:{type:Object,default:()=>({})}});var RB=Te({name:IB,props:OB,emits:["change","confirm","cancel","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe([]),s=oe(),r=re(()=>AB(t)),a=(...u)=>e("change",...u),o=(...u)=>e("cancel",...u),l=(...u)=>e("confirm",...u);return Re(n,u=>{const c=u.length?u[u.length-1]:"";c&&c!==t.modelValue&&e("update:modelValue",c)},{deep:!0}),Re(()=>t.modelValue,u=>{if(u){const c=n.value.length?n.value[n.value.length-1]:"";u!==c&&(n.value=[`${u.slice(0,2)}0000`,`${u.slice(0,4)}00`,u].slice(0,+t.columnsNum))}else n.value=[]},{immediate:!0}),ot({confirm:()=>{var u;return(u=s.value)==null?void 0:u.confirm()},getSelectedOptions:()=>{var u;return((u=s.value)==null?void 0:u.getSelectedOptions())||[]}}),()=>T(nh,nt({ref:s,modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,class:PB(),columns:r.value,onChange:a,onCancel:o,onConfirm:l},dt(t,q1)),dt(i,kB))}});const j1=Ee(RB),[MB,Pa]=we("cell"),sh={tag:De("div"),icon:String,size:String,title:Ce,value:Ce,label:Ce,center:Boolean,isLink:Boolean,border:be,iconPrefix:String,valueClass:Rt,labelClass:Rt,titleClass:Rt,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},LB=He({},sh,Ur);var BB=Te({name:MB,props:LB,setup(t,{slots:e}){const i=Sa(),n=()=>{if(e.label||ct(t.label))return T("div",{class:[Pa("label"),t.labelClass]},[e.label?e.label():t.label])},s=()=>{var l;if(e.title||ct(t.title)){const u=(l=e.title)==null?void 0:l.call(e);return Array.isArray(u)&&u.length===0?void 0:T("div",{class:[Pa("title"),t.titleClass],style:t.titleStyle},[u||T("span",null,[t.title]),n()])}},r=()=>{const l=e.value||e.default;if(l||ct(t.value))return T("div",{class:[Pa("value"),t.valueClass]},[l?l():T("span",null,[t.value])])},a=()=>{if(e.icon)return e.icon();if(t.icon)return T(Qe,{name:t.icon,class:Pa("left-icon"),classPrefix:t.iconPrefix},null)},o=()=>{if(e["right-icon"])return e["right-icon"]();if(t.isLink){const l=t.arrowDirection&&t.arrowDirection!=="right"?`arrow-${t.arrowDirection}`:"arrow";return T(Qe,{name:l,class:Pa("right-icon")},null)}};return()=>{var l;const{tag:u,size:c,center:d,border:f,isLink:p,required:b}=t,g=(l=t.clickable)!=null?l:p,_={center:d,required:!!b,clickable:g,borderless:!f};return c&&(_[c]=!!c),T(u,{class:Pa(_),role:g?"button":void 0,tabindex:g?0:void 0,onClick:i},{default:()=>{var w;return[a(),s(),r(),o(),(w=e.extra)==null?void 0:w.call(e)]}})}}});const ts=Ee(BB),[NB,FB]=we("form"),$B={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:Ce,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:be,showErrorMessage:be,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var UB=Te({name:NB,props:$B,emits:["submit","failed"],setup(t,{emit:e,slots:i}){const{children:n,linkChildren:s}=Pi(v1),r=_=>_?n.filter(w=>_.includes(w.name)):n,a=_=>new Promise((w,x)=>{const C=[];r(_).reduce((D,R)=>D.then(()=>{if(!C.length)return R.validate().then(M=>{M&&C.push(M)})}),Promise.resolve()).then(()=>{C.length?x(C):w()})}),o=_=>new Promise((w,x)=>{const C=r(_);Promise.all(C.map(k=>k.validate())).then(k=>{k=k.filter(Boolean),k.length?x(k):w()})}),l=_=>{const w=n.find(x=>x.name===_);return w?new Promise((x,C)=>{w.validate().then(k=>{k?C(k):x()})}):Promise.reject()},u=_=>typeof _=="string"?l(_):t.validateFirst?a(_):o(_),c=_=>{typeof _=="string"&&(_=[_]),r(_).forEach(x=>{x.resetValidation()})},d=()=>n.reduce((_,w)=>(_[w.name]=w.getValidationStatus(),_),{}),f=(_,w)=>{n.some(x=>x.name===_?(x.$el.scrollIntoView(w),!0):!1)},p=()=>n.reduce((_,w)=>(w.name!==void 0&&(_[w.name]=w.formValue.value),_),{}),b=()=>{const _=p();u().then(()=>e("submit",_)).catch(w=>{e("failed",{values:_,errors:w});const{scrollToError:x,scrollToErrorPosition:C}=t;x&&w[0].name&&f(w[0].name,C?{block:C}:void 0)})},g=_=>{wt(_),b()};return s({props:t}),ot({submit:b,validate:u,getValues:p,scrollToField:f,resetValidation:c,getValidationStatus:d}),()=>{var _;return T("form",{class:FB(),onSubmit:g},[(_=i.default)==null?void 0:_.call(i)])}}});const yg=Ee(UB);function W1(t){return Array.isArray(t)?!t.length:t===0?!1:!t}function zB(t,e){if(W1(t)){if(e.required)return!1;if(e.validateEmpty===!1)return!0}return!(e.pattern&&!e.pattern.test(String(t)))}function VB(t,e){return new Promise(i=>{const n=e.validator(t,e);if(ag(n)){n.then(i);return}i(n)})}function Vv(t,e){const{message:i}=e;return _o(i)?i(t,e):i||""}function HB({target:t}){t.composing=!0}function Hv({target:t}){t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}function qB(t,e){const i=la();t.style.height="auto";let n=t.scrollHeight;if(Kn(e)){const{maxHeight:s,minHeight:r}=e;s!==void 0&&(n=Math.min(n,s)),r!==void 0&&(n=Math.max(n,r))}n&&(t.style.height=`${n}px`,hu(i))}function jB(t,e){return t==="number"&&(t="text",e??(e="decimal")),t==="digit"&&(t="tel",e??(e="numeric")),{type:t,inputmode:e}}function Ls(t){return[...t].length}function If(t,e){return[...t].slice(0,e).join("")}const[WB,fn]=we("field"),vg={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:Ce,max:Number,min:Number,formatter:Function,clearIcon:De("clear"),modelValue:Ne(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:De("focus"),formatTrigger:De("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},GB=He({},sh,vg,{rows:Ce,type:De("text"),rules:Array,autosize:[Boolean,Object],labelWidth:Ce,labelClass:Rt,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var XB=Te({name:WB,props:GB,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:i}){const n=Fo(),s=Mt({status:"unvalidated",focused:!1,validateMessage:""}),r=oe(),a=oe(),o=oe(),{parent:l}=bi(v1),u=()=>{var z;return String((z=t.modelValue)!=null?z:"")},c=z=>{if(ct(t[z]))return t[z];if(l&&ct(l.props[z]))return l.props[z]},d=re(()=>{const z=c("readonly");if(t.clearable&&!z){const ue=u()!=="",se=t.clearTrigger==="always"||t.clearTrigger==="focus"&&s.focused;return ue&&se}return!1}),f=re(()=>o.value&&i.input?o.value():t.modelValue),p=re(()=>{var z;const ue=c("required");return ue==="auto"?(z=t.rules)==null?void 0:z.some(se=>se.required):ue}),b=z=>z.reduce((ue,se)=>ue.then(()=>{if(s.status==="failed")return;let{value:Se}=f;if(se.formatter&&(Se=se.formatter(Se,se)),!zB(Se,se)){s.status="failed",s.validateMessage=Vv(Se,se);return}if(se.validator)return W1(Se)&&se.validateEmpty===!1?void 0:VB(Se,se).then(Fe=>{Fe&&typeof Fe=="string"?(s.status="failed",s.validateMessage=Fe):Fe===!1&&(s.status="failed",s.validateMessage=Vv(Se,se))})}),Promise.resolve()),g=()=>{s.status="unvalidated",s.validateMessage=""},_=()=>e("endValidate",{status:s.status,message:s.validateMessage}),w=(z=t.rules)=>new Promise(ue=>{g(),z?(e("startValidate"),b(z).then(()=>{s.status==="failed"?(ue({name:t.name,message:s.validateMessage}),_()):(s.status="passed",ue(),_())})):ue()}),x=z=>{if(l&&t.rules){const{validateTrigger:ue}=l.props,se=sd(ue).includes(z),Se=t.rules.filter(Fe=>Fe.trigger?sd(Fe.trigger).includes(z):se);Se.length&&w(Se)}},C=z=>{var ue;const{maxlength:se}=t;if(ct(se)&&Ls(z)>+se){const Se=u();if(Se&&Ls(Se)===+se)return Se;const Fe=(ue=r.value)==null?void 0:ue.selectionEnd;if(s.focused&&Fe){const V=[...z],W=V.length-+se;return V.splice(Fe-W,W),V.join("")}return If(z,+se)}return z},k=(z,ue="onChange")=>{var se,Se;const Fe=z;z=C(z);const V=Ls(Fe)-Ls(z);if(t.type==="number"||t.type==="digit"){const Q=t.type==="number";if(z=Xp(z,Q,Q),ue==="onBlur"&&z!==""&&(t.min!==void 0||t.max!==void 0)){const pe=si(+z,(se=t.min)!=null?se:-1/0,(Se=t.max)!=null?Se:1/0);+z!==pe&&(z=pe.toString())}}let W=0;if(t.formatter&&ue===t.formatTrigger){const{formatter:Q,maxlength:pe}=t;if(z=Q(z),ct(pe)&&Ls(z)>+pe&&(z=If(z,+pe)),r.value&&s.focused){const{selectionEnd:ge}=r.value,_e=If(Fe,ge);W=Ls(Q(_e))-Ls(_e)}}if(r.value&&r.value.value!==z)if(s.focused){let{selectionStart:Q,selectionEnd:pe}=r.value;if(r.value.value=z,ct(Q)&&ct(pe)){const ge=Ls(z);V?(Q-=V,pe-=V):W&&(Q+=W,pe+=W),r.value.setSelectionRange(Math.min(Q,ge),Math.min(pe,ge))}}else r.value.value=z;z!==t.modelValue&&e("update:modelValue",z)},D=z=>{z.target.composing||k(z.target.value)},R=()=>{var z;return(z=r.value)==null?void 0:z.blur()},M=()=>{var z;return(z=r.value)==null?void 0:z.focus()},P=()=>{const z=r.value;t.type==="textarea"&&t.autosize&&z&&qB(z,t.autosize)},E=z=>{s.focused=!0,e("focus",z),et(P),c("readonly")&&R()},I=z=>{s.focused=!1,k(u(),"onBlur"),e("blur",z),!c("readonly")&&(x("onBlur"),et(P),d1())},O=z=>e("clickInput",z),L=z=>e("clickLeftIcon",z),F=z=>e("clickRightIcon",z),X=z=>{wt(z),e("update:modelValue",""),e("clear",z)},ee=re(()=>{if(typeof t.error=="boolean")return t.error;if(l&&l.props.showError&&s.status==="failed")return!0}),K=re(()=>{const z=c("labelWidth"),ue=c("labelAlign");if(z&&ue!=="top")return{width:Ye(z)}}),Y=z=>{z.keyCode===13&&(!(l&&l.props.submitOnEnter)&&t.type!=="textarea"&&wt(z),t.type==="search"&&R()),e("keypress",z)},Z=()=>t.id||`${n}-input`,le=()=>s.status,he=()=>{const z=fn("control",[c("inputAlign"),{error:ee.value,custom:!!i.input,"min-height":t.type==="textarea"&&!t.autosize}]);if(i.input)return T("div",{class:z,onClick:O},[i.input()]);const ue={id:Z(),ref:r,name:t.name,rows:t.rows!==void 0?+t.rows:void 0,class:z,disabled:c("disabled"),readonly:c("readonly"),autofocus:t.autofocus,placeholder:t.placeholder,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,enterkeyhint:t.enterkeyhint,spellcheck:t.spellcheck,"aria-labelledby":t.label?`${n}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:I,onFocus:E,onInput:D,onClick:O,onChange:Hv,onKeypress:Y,onCompositionend:Hv,onCompositionstart:HB};return t.type==="textarea"?T("textarea",nt(ue,{inputmode:t.inputmode}),null):T("input",nt(jB(t.type,t.inputmode),ue),null)},te=()=>{const z=i["left-icon"];if(t.leftIcon||z)return T("div",{class:fn("left-icon"),onClick:L},[z?z():T(Qe,{name:t.leftIcon,classPrefix:t.iconPrefix},null)])},ie=()=>{const z=i["right-icon"];if(t.rightIcon||z)return T("div",{class:fn("right-icon"),onClick:F},[z?z():T(Qe,{name:t.rightIcon,classPrefix:t.iconPrefix},null)])},fe=()=>{if(t.showWordLimit&&t.maxlength){const z=Ls(u());return T("div",{class:fn("word-limit")},[T("span",{class:fn("word-num")},[z]),Km("/"),t.maxlength])}},ke=()=>{if(l&&l.props.showErrorMessage===!1)return;const z=t.errorMessage||s.validateMessage;if(z){const ue=i["error-message"],se=c("errorMessageAlign");return T("div",{class:fn("error-message",se)},[ue?ue({message:z}):z])}},ae=()=>{const z=c("labelWidth"),ue=c("labelAlign"),se=c("colon")?":":"";if(i.label)return[i.label(),se];if(t.label)return T("label",{id:`${n}-label`,for:i.input?void 0:Z(),"data-allow-mismatch":"attribute",onClick:Se=>{wt(Se),M()},style:ue==="top"&&z?{width:Ye(z)}:void 0},[t.label+se])},Ie=()=>[T("div",{class:fn("body")},[he(),d.value&&T(Qe,{ref:a,name:t.clearIcon,class:fn("clear")},null),ie(),i.button&&T("div",{class:fn("button")},[i.button()])]),fe(),ke()];return ot({blur:R,focus:M,validate:w,formValue:f,resetValidation:g,getValidationStatus:le}),xs(c1,{customValue:o,resetValidation:g,validateWithTrigger:x}),Re(()=>t.modelValue,()=>{k(u()),g(),x("onChange"),et(P)}),Lt(()=>{k(u(),t.formatTrigger),et(P)}),qt("touchstart",X,{target:re(()=>{var z;return(z=a.value)==null?void 0:z.$el})}),()=>{const z=c("disabled"),ue=c("labelAlign"),se=te(),Se=()=>{const Fe=ae();return ue==="top"?[se,Fe].filter(Boolean):Fe||[]};return T(ts,{size:t.size,class:fn({error:ee.value,disabled:z,[`label-${ue}`]:ue}),center:t.center,border:t.border,isLink:t.isLink,clickable:t.clickable,titleStyle:K.value,valueClass:fn("value"),titleClass:[fn("label",[ue,{required:p.value}]),t.labelClass],arrowDirection:t.arrowDirection},{icon:se&&ue!=="top"?()=>se:null,title:Se,value:Ie,extra:i.extra})}}});const Xs=Ee(XB);let ml=0;function KB(t){t?(ml||document.body.classList.add("van-toast--unclickable"),ml++):ml&&(ml--,ml||document.body.classList.remove("van-toast--unclickable"))}const[YB,Oa]=we("toast"),QB=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],ZB={icon:String,show:Boolean,type:De("text"),overlay:Boolean,message:Ce,iconSize:Ce,duration:Jt(2e3),position:De("middle"),teleport:[String,Object],wordBreak:String,className:Rt,iconPrefix:String,transition:De("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:Rt,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:Ce};var G1=Te({name:YB,props:ZB,emits:["update:show"],setup(t,{emit:e,slots:i}){let n,s=!1;const r=()=>{const d=t.show&&t.forbidClick;s!==d&&(s=d,KB(s))},a=d=>e("update:show",d),o=()=>{t.closeOnClick&&a(!1)},l=()=>clearTimeout(n),u=()=>{const{icon:d,type:f,iconSize:p,iconPrefix:b,loadingType:g}=t;if(d||f==="success"||f==="fail")return T(Qe,{name:d||f,size:p,class:Oa("icon"),classPrefix:b},null);if(f==="loading")return T(Jn,{class:Oa("loading"),size:p,type:g},null)},c=()=>{const{type:d,message:f}=t;if(i.message)return T("div",{class:Oa("text")},[i.message()]);if(ct(f)&&f!=="")return d==="html"?T("div",{key:0,class:Oa("text"),innerHTML:String(f)},null):T("div",{class:Oa("text")},[f])};return Re(()=>[t.show,t.forbidClick],r),Re(()=>[t.show,t.type,t.message,t.duration],()=>{l(),t.show&&t.duration>0&&(n=setTimeout(()=>{a(!1)},t.duration))}),Lt(r),Ro(r),()=>T(es,nt({class:[Oa([t.position,t.wordBreak==="normal"?"break-normal":t.wordBreak,{[t.type]:!t.icon}]),t.className],lockScroll:!1,onClick:o,onClosed:l,"onUpdate:show":a},dt(t,QB)),{default:()=>[u(),c()]})}});function X1(){const t=Mt({show:!1}),e=s=>{t.show=s},i=s=>{He(t,s,{transitionAppear:!0}),e(!0)},n=()=>e(!1);return ot({open:i,close:n,toggle:e}),{open:i,close:n,state:t,toggle:e}}function K1(t){const e=bx(t),i=document.createElement("div");return document.body.appendChild(i),{instance:e.mount(i),unmount(){e.unmount(),document.body.removeChild(i)}}}const JB={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let pc=[],e4=!1,qv=He({},JB);const t4=new Map;function i4(t){return Kn(t)?t:{message:t}}function n4(){const{instance:t}=K1({setup(){const e=oe(""),{open:i,state:n,close:s,toggle:r}=X1(),a=()=>{},o=()=>T(G1,nt(n,{onClosed:a,"onUpdate:show":r}),null);return Re(e,l=>{n.message=l}),Zn().render=o,{open:i,close:s,message:e}}});return t}function s4(){if(!pc.length||e4){const t=n4();pc.push(t)}return pc[pc.length-1]}function Zp(t={}){if(!_n)return{};const e=s4(),i=i4(t);return e.open(He({},qv,t4.get(i.type||qv.type),i)),e}const r4=Ee(G1),[a4,Pf]=we("switch"),o4={size:Ce,loading:Boolean,disabled:Boolean,modelValue:Rt,activeColor:String,inactiveColor:String,activeValue:{type:Rt,default:!0},inactiveValue:{type:Rt,default:!1}};var l4=Te({name:a4,props:o4,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const n=()=>t.modelValue===t.activeValue,s=()=>{if(!t.disabled&&!t.loading){const a=n()?t.inactiveValue:t.activeValue;e("update:modelValue",a),e("change",a)}},r=()=>{if(t.loading){const a=n()?t.activeColor:t.inactiveColor;return T(Jn,{class:Pf("loading"),color:a},null)}if(i.node)return i.node()};return Fr(()=>t.modelValue),()=>{var a;const{size:o,loading:l,disabled:u,activeColor:c,inactiveColor:d}=t,f=n(),p={fontSize:Ye(o),backgroundColor:f?c:d};return T("div",{role:"switch",class:Pf({on:f,loading:l,disabled:u}),style:p,tabindex:u?void 0:0,"aria-checked":f,onClick:s},[T("div",{class:Pf("node")},[r()]),(a=i.background)==null?void 0:a.call(i)])}}});const bg=Ee(l4),[u4,jv]=we("address-edit-detail"),Wv=we("address-edit")[2];var c4=Te({name:u4,props:{show:Boolean,rows:Ce,value:String,rules:Array,focused:Boolean,maxlength:Ce,searchResult:Array,showSearchResult:Boolean},emits:["blur","focus","input","selectSearch"],setup(t,{emit:e}){const i=oe(),n=()=>t.focused&&t.searchResult&&t.showSearchResult,s=u=>{e("selectSearch",u),e("input",`${u.address||""} ${u.name||""}`.trim())},r=()=>{if(!n())return;const{searchResult:u}=t;return u.map(c=>T(ts,{clickable:!0,key:(c.name||"")+(c.address||""),icon:"location-o",title:c.name,label:c.address,class:jv("search-item"),border:!1,onClick:()=>s(c)},null))},a=u=>e("blur",u),o=u=>e("focus",u),l=u=>e("input",u);return()=>{if(t.show)return T(zt,null,[T(Xs,{autosize:!0,clearable:!0,ref:i,class:jv(),rows:t.rows,type:"textarea",rules:t.rules,label:Wv("addressDetail"),border:!n(),maxlength:t.maxlength,modelValue:t.value,placeholder:Wv("addressDetail"),onBlur:a,onFocus:o,"onUpdate:modelValue":l},null),r()])}}});const[d4,Ra,Ri]=we("address-edit"),Y1={name:"",tel:"",city:"",county:"",province:"",areaCode:"",isDefault:!1,addressDetail:""},h4={areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showArea:be,showDetail:be,showDelete:Boolean,disableArea:Boolean,searchResult:Array,telMaxlength:Ce,showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,detailRows:Ne(1),detailMaxlength:Ne(200),areaColumnsPlaceholder:At(),addressInfo:{type:Object,default:()=>He({},Y1)},telValidator:{type:Function,default:o1}};var f4=Te({name:d4,props:h4,emits:["save","focus","change","delete","clickArea","changeArea","changeDetail","selectSearch","changeDefault"],setup(t,{emit:e,slots:i}){const n=oe(),s=Mt({}),r=oe(!1),a=oe(!1),o=re(()=>Kn(t.areaList)&&Object.keys(t.areaList).length),l=re(()=>{const{province:R,city:M,county:P,areaCode:E}=s;if(E){const I=[R,M,P];return R&&R===M&&I.splice(1,1),I.filter(Boolean).join("/")}return""}),u=re(()=>{var R;return((R=t.searchResult)==null?void 0:R.length)&&a.value}),c=R=>{a.value=R==="addressDetail",e("focus",R)},d=(R,M)=>{e("change",{key:R,value:M})},f=re(()=>{const{validator:R,telValidator:M}=t,P=(E,I)=>({validator:O=>{if(R){const L=R(E,O);if(L)return L}return O?!0:I}});return{name:[P("name",Ri("nameEmpty"))],tel:[P("tel",Ri("telInvalid")),{validator:M,message:Ri("telInvalid")}],areaCode:[P("areaCode",Ri("areaEmpty"))],addressDetail:[P("addressDetail",Ri("addressEmpty"))]}}),p=()=>e("save",s),b=R=>{s.addressDetail=R,e("changeDetail",R)},g=R=>{s.province=R[0].text,s.city=R[1].text,s.county=R[2].text},_=({selectedValues:R,selectedOptions:M})=>{R.some(P=>P===io)?Zp(Ri("areaEmpty")):(r.value=!1,g(M),e("changeArea",M))},w=()=>e("delete",s),x=R=>{s.areaCode=R||""},C=()=>{setTimeout(()=>{a.value=!1})},k=R=>{s.addressDetail=R},D=()=>{if(t.showSetDefault){const R={"right-icon":()=>T(bg,{modelValue:s.isDefault,"onUpdate:modelValue":M=>s.isDefault=M,onChange:M=>e("changeDefault",M)},null)};return ui(T(ts,{center:!0,border:!1,title:Ri("defaultAddress"),class:Ra("default")},R),[[yi,!u.value]])}};return ot({setAreaCode:x,setAddressDetail:k}),Re(()=>t.addressInfo,R=>{He(s,Y1,R),et(()=>{var M;const P=(M=n.value)==null?void 0:M.getSelectedOptions();P&&P.every(E=>E&&E.value!==io)&&g(P)})},{deep:!0,immediate:!0}),()=>{const{disableArea:R}=t;return T(yg,{class:Ra(),onSubmit:p},{default:()=>{var M;return[T("div",{class:Ra("fields")},[T(Xs,{modelValue:s.name,"onUpdate:modelValue":[P=>s.name=P,P=>d("name",P)],clearable:!0,label:Ri("name"),rules:f.value.name,placeholder:Ri("name"),onFocus:()=>c("name")},null),T(Xs,{modelValue:s.tel,"onUpdate:modelValue":[P=>s.tel=P,P=>d("tel",P)],clearable:!0,type:"tel",label:Ri("tel"),rules:f.value.tel,maxlength:t.telMaxlength,placeholder:Ri("tel"),onFocus:()=>c("tel")},null),ui(T(Xs,{readonly:!0,label:Ri("area"),"is-link":!R,modelValue:l.value,rules:t.showArea?f.value.areaCode:void 0,placeholder:t.areaPlaceholder||Ri("area"),onFocus:()=>c("areaCode"),onClick:()=>{e("clickArea"),r.value=!R}},null),[[yi,t.showArea]]),T(c4,{show:t.showDetail,rows:t.detailRows,rules:f.value.addressDetail,value:s.addressDetail,focused:a.value,maxlength:t.detailMaxlength,searchResult:t.searchResult,showSearchResult:t.showSearchResult,onBlur:C,onFocus:()=>c("addressDetail"),onInput:b,onSelectSearch:P=>e("selectSearch",P)},null),(M=i.default)==null?void 0:M.call(i)]),D(),ui(T("div",{class:Ra("buttons")},[T(Ii,{block:!0,round:!0,type:"primary",text:t.saveButtonText||Ri("save"),class:Ra("button"),loading:t.isSaving,nativeType:"submit"},null),t.showDelete&&T(Ii,{block:!0,round:!0,class:Ra("button"),loading:t.isDeleting,text:t.deleteButtonText||Ri("delete"),onClick:w},null)]),[[yi,!u.value]]),T(es,{show:r.value,"onUpdate:show":P=>r.value=P,round:!0,teleport:"body",position:"bottom",lazyRender:!1},{default:()=>[T(j1,{modelValue:s.areaCode,"onUpdate:modelValue":P=>s.areaCode=P,ref:n,loading:!o.value,areaList:t.areaList,columnsPlaceholder:t.areaColumnsPlaceholder,onConfirm:_,onCancel:()=>{r.value=!1}},null)]})]}})}}});const p4=Ee(f4),[Q1,m4]=we("radio-group"),g4={shape:String,disabled:Boolean,iconSize:Ce,direction:String,modelValue:Rt,checkedColor:String},Z1=Symbol(Q1);var y4=Te({name:Q1,props:g4,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const{linkChildren:n}=Pi(Z1),s=r=>e("update:modelValue",r);return Re(()=>t.modelValue,r=>e("change",r)),n({props:t,updateValue:s}),Fr(()=>t.modelValue),()=>{var r;return T("div",{class:m4([t.direction]),role:"radiogroup"},[(r=i.default)==null?void 0:r.call(i)])}}});const _g=Ee(y4),[J1,v4]=we("checkbox-group"),b4={max:Ce,shape:De("round"),disabled:Boolean,iconSize:Ce,direction:String,modelValue:At(),checkedColor:String},eS=Symbol(J1);var _4=Te({name:J1,props:b4,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const{children:n,linkChildren:s}=Pi(eS),r=o=>e("update:modelValue",o),a=(o={})=>{typeof o=="boolean"&&(o={checked:o});const{checked:l,skipDisabled:u}=o,d=n.filter(f=>f.props.bindGroup?f.props.disabled&&u?f.checked.value:l??!f.checked.value:!1).map(f=>f.name);r(d)};return Re(()=>t.modelValue,o=>e("change",o)),ot({toggleAll:a}),Fr(()=>t.modelValue),s({props:t,updateValue:r}),()=>{var o;return T("div",{class:v4([t.direction])},[(o=i.default)==null?void 0:o.call(i)])}}});const tS=Ee(_4),[T4,Gv]=we("tag"),x4={size:String,mark:Boolean,show:be,type:De("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var S4=Te({name:T4,props:x4,emits:["close"],setup(t,{slots:e,emit:i}){const n=a=>{a.stopPropagation(),i("close",a)},s=()=>t.plain?{color:t.textColor||t.color,borderColor:t.color}:{color:t.textColor,background:t.color},r=()=>{var a;const{type:o,mark:l,plain:u,round:c,size:d,closeable:f}=t,p={mark:l,plain:u,round:c};d&&(p[d]=d);const b=f&&T(Qe,{name:"cross",class:[Gv("close"),Ai],onClick:n},null);return T("span",{style:s(),class:Gv([p,o])},[(a=e.default)==null?void 0:a.call(e),b])};return()=>T(Hd,{name:t.closeable?"van-fade":void 0},{default:()=>[t.show?r():null]})}});const rh=Ee(S4),Tg={name:Rt,disabled:Boolean,iconSize:Ce,modelValue:Rt,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var iS=Te({props:He({},Tg,{bem:oi(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:be,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(t,{emit:e,slots:i}){const n=oe(),s=f=>{if(t.parent&&t.bindGroup)return t.parent.props[f]},r=re(()=>{if(t.parent&&t.bindGroup){const f=s("disabled")||t.disabled;if(t.role==="checkbox"){const p=s("modelValue").length,b=s("max"),g=b&&p>=+b;return f||g&&!t.checked}return f}return t.disabled}),a=re(()=>s("direction")),o=re(()=>{const f=t.checkedColor||s("checkedColor");if(f&&t.checked&&!r.value)return{borderColor:f,backgroundColor:f}}),l=re(()=>t.shape||s("shape")||"round"),u=f=>{const{target:p}=f,b=n.value,g=b===p||(b==null?void 0:b.contains(p));!r.value&&(g||!t.labelDisabled)&&e("toggle"),e("click",f)},c=()=>{var f,p;const{bem:b,checked:g,indeterminate:_}=t,w=t.iconSize||s("iconSize");return T("div",{ref:n,class:b("icon",[l.value,{disabled:r.value,checked:g,indeterminate:_}]),style:l.value!=="dot"?{fontSize:Ye(w)}:{width:Ye(w),height:Ye(w),borderColor:(f=o.value)==null?void 0:f.borderColor}},[i.icon?i.icon({checked:g,disabled:r.value}):l.value!=="dot"?T(Qe,{name:_?"minus":"success",style:o.value},null):T("div",{class:b("icon--dot__icon"),style:{backgroundColor:(p=o.value)==null?void 0:p.backgroundColor}},null)])},d=()=>{const{checked:f}=t;if(i.default)return T("span",{class:t.bem("label",[t.labelPosition,{disabled:r.value}])},[i.default({checked:f,disabled:r.value})])};return()=>{const f=t.labelPosition==="left"?[d(),c()]:[c(),d()];return T("div",{role:t.role,class:t.bem([{disabled:r.value,"label-disabled":t.labelDisabled},a.value]),tabindex:r.value?void 0:0,"aria-checked":t.checked,onClick:u},[f])}}});const w4=He({},Tg,{shape:String}),[C4,E4]=we("radio");var D4=Te({name:C4,props:w4,emits:["update:modelValue"],setup(t,{emit:e,slots:i}){const{parent:n}=bi(Z1),s=()=>(n?n.props.modelValue:t.modelValue)===t.name,r=()=>{n?n.updateValue(t.name):e("update:modelValue",t.name)};return()=>T(iS,nt({bem:E4,role:"radio",parent:n,checked:s(),onToggle:r},t),dt(i,["default","icon"]))}});const xg=Ee(D4),[k4,A4]=we("checkbox"),I4=He({},Tg,{shape:String,bindGroup:be,indeterminate:{type:Boolean,default:null}});var P4=Te({name:k4,props:I4,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const{parent:n}=bi(eS),s=o=>{const{name:l}=t,{max:u,modelValue:c}=n.props,d=c.slice();if(o)!(u&&d.length>=+u)&&!d.includes(l)&&(d.push(l),t.bindGroup&&n.updateValue(d));else{const f=d.indexOf(l);f!==-1&&(d.splice(f,1),t.bindGroup&&n.updateValue(d))}},r=re(()=>n&&t.bindGroup?n.props.modelValue.indexOf(t.name)!==-1:!!t.modelValue),a=(o=!r.value)=>{n&&t.bindGroup?s(o):e("update:modelValue",o),t.indeterminate!==null&&e("change",o)};return Re(()=>t.modelValue,o=>{t.indeterminate===null&&e("change",o)}),ot({toggle:a,props:t,checked:r}),Fr(()=>t.modelValue),()=>T(iS,nt({bem:A4,role:"checkbox",parent:n,checked:r.value,onToggle:a},t),dt(i,["default","icon"]))}});const Sg=Ee(P4),[O4,Ma]=we("address-item");var R4=Te({name:O4,props:{address:oi(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:De("edit")},emits:["edit","click","select"],setup(t,{slots:e,emit:i}){const n=o=>{t.switchable&&i("select"),i("click",o)},s=()=>T(Qe,{name:t.rightIcon,class:Ma("edit"),onClick:o=>{o.stopPropagation(),i("edit"),i("click",o)}},null),r=()=>{if(e.tag)return e.tag(t.address);if(t.address.isDefault&&t.defaultTagText)return T(rh,{type:"primary",round:!0,class:Ma("tag")},{default:()=>[t.defaultTagText]})},a=()=>{const{address:o,disabled:l,switchable:u,singleChoice:c}=t,d=[T("div",{class:Ma("name")},[`${o.name} ${o.tel}`,r()]),T("div",{class:Ma("address")},[o.address])];return u&&!l?c?T(xg,{name:o.id,iconSize:18},{default:()=>[d]}):T(Sg,{name:o.id,iconSize:18},{default:()=>[d]}):d};return()=>{var o;const{disabled:l}=t;return T("div",{class:Ma({disabled:l}),onClick:n},[T(ts,{border:!1,titleClass:Ma("title")},{title:a,"right-icon":s}),(o=e.bottom)==null?void 0:o.call(e,He({},t.address,{disabled:l}))])}}});const[M4,mc,L4]=we("address-list"),B4={list:At(),modelValue:[...Ce,Array],switchable:be,disabledText:String,disabledList:At(),showAddButton:be,addButtonText:String,defaultTagText:String,rightIcon:De("edit")};var N4=Te({name:M4,props:B4,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(t,{slots:e,emit:i}){const n=re(()=>!Array.isArray(t.modelValue)),s=(o,l,u)=>{const c=()=>i(u?"editDisabled":"edit",o,l),d=p=>i("clickItem",o,l,{event:p}),f=()=>{if(i(u?"selectDisabled":"select",o,l),!u)if(n.value)i("update:modelValue",o.id);else{const p=t.modelValue;p.includes(o.id)?i("update:modelValue",p.filter(b=>b!==o.id)):i("update:modelValue",[...p,o.id])}};return T(R4,{key:o.id,address:o,disabled:u,switchable:t.switchable,singleChoice:n.value,defaultTagText:t.defaultTagText,rightIcon:t.rightIcon,onEdit:c,onClick:d,onSelect:f},{bottom:e["item-bottom"],tag:e.tag})},r=(o,l)=>{if(o)return o.map((u,c)=>s(u,c,l))},a=()=>t.showAddButton?T("div",{class:[mc("bottom"),"van-safe-area-bottom"]},[T(Ii,{round:!0,block:!0,type:"primary",text:t.addButtonText||L4("add"),class:mc("add"),onClick:()=>i("add")},null)]):void 0;return()=>{var o,l;const u=r(t.list),c=r(t.disabledList,!0),d=t.disabledText&&T("div",{class:mc("disabled-text")},[t.disabledText]);return T("div",{class:mc()},[(o=e.top)==null?void 0:o.call(e),!n.value&&Array.isArray(t.modelValue)?T(tS,{modelValue:t.modelValue},{default:()=>[u]}):T(_g,{modelValue:t.modelValue},{default:()=>[u]}),d,c,(l=e.default)==null?void 0:l.call(e),a()])}}});const F4=Ee(N4);function $4(t,e){let i=null,n=0;return function(...s){if(i)return;const r=Date.now()-n,a=()=>{n=Date.now(),i=!1,t.apply(this,s)};r>=e?a():i=setTimeout(a,e)}}const[U4,Of]=we("back-top"),z4={right:Ce,bottom:Ce,zIndex:Ce,target:[String,Object],offset:Ne(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var V4=Te({name:U4,inheritAttrs:!1,props:z4,emits:["click"],setup(t,{emit:e,slots:i,attrs:n}){let s=!1;const r=oe(!1),a=oe(),o=oe(),l=re(()=>He(sr(t.zIndex),{right:Ye(t.right),bottom:Ye(t.bottom)})),u=p=>{var b;e("click",p),(b=o.value)==null||b.scrollTo({top:0,behavior:t.immediate?"auto":"smooth"})},c=()=>{r.value=o.value?Qs(o.value)>=+t.offset:!1},d=()=>{const{target:p}=t;if(typeof p=="string"){const b=document.querySelector(p);if(b)return b}else return p},f=()=>{_n&&et(()=>{o.value=t.target?d():og(a.value),c()})};return qt("scroll",$4(c,100),{target:o}),Lt(f),Ds(()=>{s&&(r.value=!0,s=!1)}),ks(()=>{r.value&&t.teleport&&(r.value=!1,s=!0)}),Re(()=>t.target,f),()=>{const p=T("div",nt({ref:t.teleport?void 0:a,class:Of({active:r.value}),style:l.value,onClick:u},n),[i.default?i.default():T(Qe,{name:"back-top",class:Of("icon")},null)]);return t.teleport?[T("div",{ref:a,class:Of("placeholder")},null),T(xa,{to:t.teleport},{default:()=>[p]})]:p}}});const H4=Ee(V4);var q4=(t,e,i)=>new Promise((n,s)=>{var r=l=>{try{o(i.next(l))}catch(u){s(u)}},a=l=>{try{o(i.throw(l))}catch(u){s(u)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(r,a);o((i=i.apply(t,e)).next())});const j4={top:Ne(10),rows:Ne(4),duration:Ne(4e3),autoPlay:be,delay:Jt(300),modelValue:At()},[W4,Xv]=we("barrage");var G4=Te({name:W4,props:j4,emits:["update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(),s=Xv("item"),r=oe(0),a=[],o=(g,_=t.delay)=>{const w=document.createElement("span");return w.className=s,w.innerText=String(g),w.style.animationDuration=`${t.duration}ms`,w.style.animationDelay=`${_}ms`,w.style.animationName="van-barrage",w.style.animationTimingFunction="linear",w},l=oe(!0),u=oe(t.autoPlay),c=({id:g,text:_},w)=>{var x;const C=o(_,l.value?w*t.delay:void 0);!t.autoPlay&&u.value===!1&&(C.style.animationPlayState="paused"),(x=n.value)==null||x.append(C),r.value++;const k=(r.value-1)%+t.rows*C.offsetHeight+ +t.top;C.style.top=`${k}px`,C.dataset.id=String(g),a.push(C),C.addEventListener("animationend",()=>{e("update:modelValue",[...t.modelValue].filter(D=>String(D.id)!==C.dataset.id))})},d=(g,_)=>{const w=new Map(_.map(x=>[x.id,x]));g.forEach((x,C)=>{w.has(x.id)?w.delete(x.id):c(x,C)}),w.forEach(x=>{const C=a.findIndex(k=>k.dataset.id===String(x.id));C>-1&&(a[C].remove(),a.splice(C,1))}),l.value=!1};Re(()=>t.modelValue.slice(),(g,_)=>d(g??[],_??[]),{deep:!0});const f=oe({});return Lt(()=>q4(this,null,function*(){var g;f.value["--move-distance"]=`-${(g=n.value)==null?void 0:g.offsetWidth}px`,yield et(),d(t.modelValue,[])})),ot({play:()=>{u.value=!0,a.forEach(g=>{g.style.animationPlayState="running"})},pause:()=>{u.value=!1,a.forEach(g=>{g.style.animationPlayState="paused"})}}),()=>{var g;return T("div",{class:Xv(),ref:n,style:f.value},[(g=i.default)==null?void 0:g.call(i)])}}});const X4=Ee(G4),[K4,$t,Ks]=we("calendar"),Y4=t=>Ks("monthTitle",t.getFullYear(),t.getMonth()+1);function sa(t,e){const i=t.getFullYear(),n=e.getFullYear();if(i===n){const s=t.getMonth(),r=e.getMonth();return s===r?0:s>r?1:-1}return i>n?1:-1}function ji(t,e){const i=sa(t,e);if(i===0){const n=t.getDate(),s=e.getDate();return n===s?0:n>s?1:-1}return i}const To=t=>new Date(t),Kv=t=>Array.isArray(t)?t.map(To):To(t);function wg(t,e){const i=To(t);return i.setDate(i.getDate()+e),i}function Cg(t,e){const i=To(t);return i.setMonth(i.getMonth()+e),i.getDate()!==t.getDate()&&i.setDate(0),i}function nS(t,e){const i=To(t);return i.setFullYear(i.getFullYear()+e),i.getDate()!==t.getDate()&&i.setDate(0),i}const Jp=t=>wg(t,-1),em=t=>wg(t,1),Yv=t=>Cg(t,-1),Qv=t=>Cg(t,1),Zv=t=>nS(t,-1),Jv=t=>nS(t,1),gc=()=>{const t=new Date;return t.setHours(0,0,0,0),t};function Q4(t){const e=t[0].getTime();return(t[1].getTime()-e)/(1e3*60*60*24)+1}function Z4(t,e=0){const i=new Date(t.getFullYear(),t.getMonth()+1,0),n=e+t.getDate()-1,s=e+i.getDate()-1;return Math.floor(n/7)===Math.floor(s/7)}const sS=He({},ih,{modelValue:At(),filter:Function,formatter:{type:Function,default:(t,e)=>e}}),rS=Object.keys(ih);function J4(t,e){if(t<0)return[];const i=Array(t);let n=-1;for(;++n<t;)i[n]=e(n);return i}const aS=(t,e)=>32-new Date(t,e-1,32).getDate(),no=(t,e,i,n,s,r)=>{const a=J4(e-t+1,o=>{const l=Bn(t+o);return n(i,{text:l,value:l})});return s?s(i,a,r):a},oS=(t,e)=>t.map((i,n)=>{const s=e[n];if(s.length){const r=+s[0].value,a=+s[s.length-1].value;return Bn(si(+i,r,a))}return i}),[e5]=we("calendar-day");var t5=Te({name:e5,props:{item:oi(Object),color:String,index:Number,offset:Jt(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(t,{emit:e,slots:i}){const n=re(()=>{const{item:u,index:c,color:d,offset:f,rowHeight:p}=t,b={height:p};if(u.type==="placeholder")return b.width="100%",b;if(c===0&&(b.marginLeft=`${100*f/7}%`),d)switch(u.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":b.background=d;break;case"middle":b.color=d;break}return u.date&&Z4(u.date,f)&&(b.marginBottom=0),b}),s=()=>{t.item.type!=="disabled"?e("click",t.item):e("clickDisabledDate",t.item)},r=()=>{const{topInfo:u}=t.item;if(u||i["top-info"])return T("div",{class:$t("top-info")},[i["top-info"]?i["top-info"](t.item):u])},a=()=>{const{bottomInfo:u}=t.item;if(u||i["bottom-info"])return T("div",{class:$t("bottom-info")},[i["bottom-info"]?i["bottom-info"](t.item):u])},o=()=>i.text?i.text(t.item):t.item.text,l=()=>{const{item:u,color:c,rowHeight:d}=t,{type:f}=u,p=[r(),o(),a()];return f==="selected"?T("div",{class:$t("selected-day"),style:{width:d,height:d,background:c}},[p]):p};return()=>{const{type:u,className:c}=t.item;return u==="placeholder"?T("div",{class:$t("day"),style:n.value},null):T("div",{role:"gridcell",style:n.value,class:[$t("day",u),c],tabindex:u==="disabled"?void 0:-1,onClick:s},[l()])}}});const[i5]=we("calendar-month"),n5={date:oi(Date),type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:Ce,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var s5=Te({name:i5,props:n5,emits:["click","clickDisabledDate"],setup(t,{emit:e,slots:i}){const[n,s]=kL(),r=oe(),a=oe(),o=T1(a),l=re(()=>Y4(t.date)),u=re(()=>Ye(t.rowHeight)),c=re(()=>{const I=t.date.getDate(),L=(t.date.getDay()-I%7+8)%7;return t.firstDayOfWeek?(L+7-t.firstDayOfWeek)%7:L}),d=re(()=>aS(t.date.getFullYear(),t.date.getMonth()+1)),f=re(()=>n.value||!t.lazyRender),p=()=>l.value,b=I=>{const O=L=>t.currentDate.some(F=>ji(F,L)===0);if(O(I)){const L=Jp(I),F=em(I),X=O(L),ee=O(F);return X&&ee?"multiple-middle":X?"end":ee?"start":"multiple-selected"}return""},g=I=>{const[O,L]=t.currentDate;if(!O)return"";const F=ji(I,O);if(!L)return F===0?"start":"";const X=ji(I,L);return t.allowSameDay&&F===0&&X===0?"start-end":F===0?"start":X===0?"end":F>0&&X<0?"middle":""},_=I=>{const{type:O,minDate:L,maxDate:F,currentDate:X}=t;if(L&&ji(I,L)<0||F&&ji(I,F)>0)return"disabled";if(X===null)return"";if(Array.isArray(X)){if(O==="multiple")return b(I);if(O==="range")return g(I)}else if(O==="single")return ji(I,X)===0?"selected":"";return""},w=I=>{if(t.type==="range"){if(I==="start"||I==="end")return Ks(I);if(I==="start-end")return`${Ks("start")}/${Ks("end")}`}},x=()=>{if(t.showMonthTitle)return T("div",{class:$t("month-title")},[i["month-title"]?i["month-title"]({date:t.date,text:l.value}):l.value])},C=()=>{if(t.showMark&&f.value)return T("div",{class:$t("month-mark")},[t.date.getMonth()+1])},k=re(()=>{const I=Math.ceil((d.value+c.value)/7);return Array(I).fill({type:"placeholder"})}),D=re(()=>{const I=[],O=t.date.getFullYear(),L=t.date.getMonth();for(let F=1;F<=d.value;F++){const X=new Date(O,L,F),ee=_(X);let K={date:X,type:ee,text:F,bottomInfo:w(ee)};t.formatter&&(K=t.formatter(K)),I.push(K)}return I}),R=re(()=>D.value.filter(I=>I.type==="disabled")),M=(I,O)=>{if(r.value){const L=ft(r.value),F=k.value.length,ee=(Math.ceil((O.getDate()+c.value)/7)-1)*L.height/F;rd(I,L.top+ee+I.scrollTop-ft(I).top)}},P=(I,O)=>T(t5,{item:I,index:O,color:t.color,offset:c.value,rowHeight:u.value,onClick:L=>e("click",L),onClickDisabledDate:L=>e("clickDisabledDate",L)},dt(i,["top-info","bottom-info","text"])),E=()=>T("div",{ref:r,role:"grid",class:$t("days")},[C(),(f.value?D:k).value.map(P)]);return ot({getTitle:p,getHeight:()=>o.value,setVisible:s,scrollToDate:M,disabledDays:R}),()=>T("div",{class:$t("month"),ref:a},[x(),E()])}});const[r5]=we("calendar-header");var a5=Te({name:r5,props:{date:Date,minDate:Date,maxDate:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number,switchMode:De("none")},emits:["clickSubtitle","panelChange"],setup(t,{slots:e,emit:i}){const n=re(()=>t.date&&t.minDate&&sa(Yv(t.date),t.minDate)<0),s=re(()=>t.date&&t.minDate&&sa(Zv(t.date),t.minDate)<0),r=re(()=>t.date&&t.maxDate&&sa(Qv(t.date),t.maxDate)>0),a=re(()=>t.date&&t.maxDate&&sa(Jv(t.date),t.maxDate)>0),o=()=>{if(t.showTitle){const p=t.title||Ks("title"),b=e.title?e.title():p;return T("div",{class:$t("header-title")},[b])}},l=p=>i("clickSubtitle",p),u=p=>i("panelChange",p),c=p=>{const b=t.switchMode==="year-month",g=e[p?"next-month":"prev-month"],_=e[p?"next-year":"prev-year"],w=p?r.value:n.value,x=p?a.value:s.value,C=p?"arrow":"arrow-left",k=p?"arrow-double-right":"arrow-double-left",D=()=>u((p?Qv:Yv)(t.date)),R=()=>u((p?Jv:Zv)(t.date)),M=T("view",{class:$t("header-action",{disabled:w}),onClick:w?void 0:D},[g?g({disabled:w}):T(Qe,{class:{[Ai]:!w},name:C},null)]),P=b&&T("view",{class:$t("header-action",{disabled:x}),onClick:x?void 0:R},[_?_({disabled:x}):T(Qe,{class:{[Ai]:!x},name:k},null)]);return p?[M,P]:[P,M]},d=()=>{if(t.showSubtitle){const p=e.subtitle?e.subtitle({date:t.date,text:t.subtitle}):t.subtitle,b=t.switchMode!=="none";return T("div",{class:$t("header-subtitle",{"with-switch":b}),onClick:l},[b?[c(),T("div",{class:$t("header-subtitle-text")},[p]),c(!0)]:p])}},f=()=>{const{firstDayOfWeek:p}=t,b=Ks("weekdays"),g=[...b.slice(p,7),...b.slice(0,p)];return T("div",{class:$t("weekdays")},[g.map(_=>T("span",{class:$t("weekday")},[_]))])};return()=>T("div",{class:$t("header")},[o(),d(),f()])}});const o5={show:Boolean,type:De("single"),switchMode:De("none"),title:String,color:String,round:be,readonly:Boolean,poppable:be,maxRange:Ne(null),position:De("bottom"),teleport:[String,Object],showMark:be,showTitle:be,formatter:Function,rowHeight:Ce,confirmText:String,rangePrompt:String,lazyRender:be,showConfirm:be,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:be,closeOnPopstate:be,showRangePrompt:be,confirmDisabledText:String,closeOnClickOverlay:be,safeAreaInsetTop:Boolean,safeAreaInsetBottom:be,minDate:{type:Date,validator:du},maxDate:{type:Date,validator:du},firstDayOfWeek:{type:Ce,default:0,validator:t=>t>=0&&t<=6}};var l5=Te({name:K4,props:o5,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate","clickOverlay","panelChange"],setup(t,{emit:e,slots:i}){const n=re(()=>t.switchMode!=="none"),s=re(()=>!t.minDate&&!n.value?gc():t.minDate),r=re(()=>!t.maxDate&&!n.value?Cg(gc(),6):t.maxDate),a=(ie,fe=s.value,ke=r.value)=>fe&&ji(ie,fe)===-1?fe:ke&&ji(ie,ke)===1?ke:ie,o=(ie=t.defaultDate)=>{const{type:fe,allowSameDay:ke}=t;if(ie===null)return ie;const ae=gc();if(fe==="range"){Array.isArray(ie)||(ie=[]),ie.length===1&&ji(ie[0],ae)===1&&(ie=[]);const Ie=s.value,z=r.value,ue=a(ie[0]||ae,Ie,z?ke?z:Jp(z):void 0),se=a(ie[1]||(ke?ae:em(ae)),Ie?ke?Ie:em(Ie):void 0);return[ue,se]}return fe==="multiple"?Array.isArray(ie)?ie.map(Ie=>a(Ie)):[a(ae)]:((!ie||Array.isArray(ie))&&(ie=ae),a(ie))},l=()=>{const ie=Array.isArray(d.value)?d.value[0]:d.value;return ie||a(gc())};let u;const c=oe(),d=oe(o()),f=oe(l()),p=oe(),[b,g]=Cu(),_=re(()=>t.firstDayOfWeek?+t.firstDayOfWeek%7:0),w=re(()=>{const ie=[];if(!s.value||!r.value)return ie;const fe=new Date(s.value);fe.setDate(1);do ie.push(new Date(fe)),fe.setMonth(fe.getMonth()+1);while(sa(fe,r.value)!==1);return ie}),x=re(()=>{if(d.value){if(t.type==="range")return!d.value[0]||!d.value[1];if(t.type==="multiple")return!d.value.length}return!d.value}),C=()=>d.value,k=()=>{const ie=Qs(c.value),fe=ie+u,ke=w.value.map((se,Se)=>b.value[Se].getHeight()),ae=ke.reduce((se,Se)=>se+Se,0);if(fe>ae&&ie>0)return;let Ie=0,z;const ue=[-1,-1];for(let se=0;se<w.value.length;se++){const Se=b.value[se];Ie<=fe&&Ie+ke[se]>=ie&&(ue[1]=se,z||(z=Se,ue[0]=se),b.value[se].showed||(b.value[se].showed=!0,e("monthShow",{date:Se.date,title:Se.getTitle()}))),Ie+=ke[se]}w.value.forEach((se,Se)=>{const Fe=Se>=ue[0]-1&&Se<=ue[1]+1;b.value[Se].setVisible(Fe)}),z&&(p.value=z)},D=ie=>{n.value?f.value=ie:Ci(()=>{w.value.some((fe,ke)=>sa(fe,ie)===0?(c.value&&b.value[ke].scrollToDate(c.value,ie),!0):!1),k()})},R=()=>{if(!(t.poppable&&!t.show))if(d.value){const ie=t.type==="single"?d.value:d.value[0];du(ie)&&D(ie)}else n.value||Ci(k)},M=()=>{t.poppable&&!t.show||(n.value||Ci(()=>{u=Math.floor(ft(c).height)}),R())},P=(ie=o())=>{d.value=ie,R()},E=ie=>{const{maxRange:fe,rangePrompt:ke,showRangePrompt:ae}=t;return fe&&Q4(ie)>+fe?(ae&&Zp(ke||Ks("rangePrompt",fe)),e("overRange"),!1):!0},I=ie=>{f.value=ie,e("panelChange",{date:ie})},O=()=>{var ie;return e("confirm",(ie=d.value)!=null?ie:Kv(d.value))},L=(ie,fe)=>{const ke=ae=>{d.value=ae,e("select",Kv(ae))};if(fe&&t.type==="range"&&!E(ie)){ke([ie[0],wg(ie[0],+t.maxRange-1)]);return}ke(ie),fe&&!t.showConfirm&&O()},F=(ie,fe,ke)=>{var ae;return(ae=ie.find(Ie=>ji(fe,Ie.date)===-1&&ji(Ie.date,ke)===-1))==null?void 0:ae.date},X=re(()=>b.value.reduce((ie,fe)=>{var ke,ae;return ie.push(...(ae=(ke=fe.disabledDays)==null?void 0:ke.value)!=null?ae:[]),ie},[])),ee=ie=>{if(t.readonly||!ie.date)return;const{date:fe}=ie,{type:ke}=t;if(ke==="range"){if(!d.value){L([fe]);return}const[ae,Ie]=d.value;if(ae&&!Ie){const z=ji(fe,ae);if(z===1){const ue=F(X.value,ae,fe);if(ue){const se=Jp(ue);ji(ae,se)===-1?L([ae,se]):L([fe])}else L([ae,fe],!0)}else z===-1?L([fe]):t.allowSameDay&&L([fe,fe],!0)}else L([fe])}else if(ke==="multiple"){if(!d.value){L([fe]);return}const ae=d.value,Ie=ae.findIndex(z=>ji(z,fe)===0);if(Ie!==-1){const[z]=ae.splice(Ie,1);e("unselect",To(z))}else t.maxRange&&ae.length>=+t.maxRange?Zp(t.rangePrompt||Ks("rangePrompt",t.maxRange)):L([...ae,fe])}else L(fe,!0)},K=ie=>e("clickOverlay",ie),Y=ie=>e("update:show",ie),Z=(ie,fe)=>{const ke=fe!==0||!t.showSubtitle;return T(s5,nt({ref:n.value?p:g(fe),date:ie,currentDate:d.value,showMonthTitle:ke,firstDayOfWeek:_.value,lazyRender:n.value?!1:t.lazyRender,maxDate:r.value,minDate:s.value},dt(t,["type","color","showMark","formatter","rowHeight","showSubtitle","allowSameDay"]),{onClick:ee,onClickDisabledDate:ae=>e("clickDisabledDate",ae)}),dt(i,["top-info","bottom-info","month-title","text"]))},le=()=>{if(i.footer)return i.footer();if(t.showConfirm){const ie=i["confirm-text"],fe=x.value,ke=fe?t.confirmDisabledText:t.confirmText;return T(Ii,{round:!0,block:!0,type:"primary",color:t.color,class:$t("confirm"),disabled:fe,nativeType:"button",onClick:O},{default:()=>[ie?ie({disabled:fe}):ke||Ks("confirm")]})}},he=()=>T("div",{class:[$t("footer"),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[le()]),te=()=>{var ie,fe;return T("div",{class:$t()},[T(a5,{date:(ie=p.value)==null?void 0:ie.date,maxDate:r.value,minDate:s.value,title:t.title,subtitle:(fe=p.value)==null?void 0:fe.getTitle(),showTitle:t.showTitle,showSubtitle:t.showSubtitle,switchMode:t.switchMode,firstDayOfWeek:_.value,onClickSubtitle:ke=>e("clickSubtitle",ke),onPanelChange:I},dt(i,["title","subtitle","prev-month","prev-year","next-month","next-year"])),T("div",{ref:c,class:$t("body"),onScroll:n.value?void 0:k},[n.value?Z(f.value,0):w.value.map(Z)]),he()])};return Re(()=>t.show,M),Re(()=>[t.type,t.minDate,t.maxDate,t.switchMode],()=>P(o(d.value))),Re(()=>t.defaultDate,ie=>{P(ie)}),ot({reset:P,scrollToDate:D,getSelectedDate:C}),Lo(M),()=>t.poppable?T(es,{show:t.show,class:$t("popup"),round:t.round,position:t.position,closeable:t.showTitle||t.showSubtitle,teleport:t.teleport,closeOnPopstate:t.closeOnPopstate,safeAreaInsetTop:t.safeAreaInsetTop,closeOnClickOverlay:t.closeOnClickOverlay,onClickOverlay:K,"onUpdate:show":Y},{default:te}):te()}});const u5=Ee(l5),[c5,La]=we("image"),d5={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:Ce,height:Ce,radius:Ce,lazyLoad:Boolean,iconSize:Ce,showError:be,errorIcon:De("photo-fail"),iconPrefix:String,showLoading:be,loadingIcon:De("photo"),crossorigin:String,referrerpolicy:String};var h5=Te({name:c5,props:d5,emits:["load","error"],setup(t,{emit:e,slots:i}){const n=oe(!1),s=oe(!0),r=oe(),{$Lazyload:a}=Zn().proxy,o=re(()=>{const _={width:Ye(t.width),height:Ye(t.height)};return ct(t.radius)&&(_.overflow="hidden",_.borderRadius=Ye(t.radius)),_});Re(()=>t.src,()=>{n.value=!1,s.value=!0});const l=_=>{s.value&&(s.value=!1,e("load",_))},u=()=>{const _=new Event("load");Object.defineProperty(_,"target",{value:r.value,enumerable:!0}),l(_)},c=_=>{n.value=!0,s.value=!1,e("error",_)},d=(_,w,x)=>x?x():T(Qe,{name:_,size:t.iconSize,class:w,classPrefix:t.iconPrefix},null),f=()=>{if(s.value&&t.showLoading)return T("div",{class:La("loading")},[d(t.loadingIcon,La("loading-icon"),i.loading)]);if(n.value&&t.showError)return T("div",{class:La("error")},[d(t.errorIcon,La("error-icon"),i.error)])},p=()=>{if(n.value||!t.src)return;const _={alt:t.alt,class:La("img"),style:{objectFit:t.fit,objectPosition:t.position},crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy};return t.lazyLoad?ui(T("img",nt({ref:r},_),null),[[Sk("lazy"),t.src]]):T("img",nt({ref:r,src:t.src,onLoad:l,onError:c},_),null)},b=({el:_})=>{const w=()=>{_===r.value&&s.value&&u()};r.value?w():et(w)},g=({el:_})=>{_===r.value&&!n.value&&c()};return a&&_n&&(a.$on("loaded",b),a.$on("error",g),Qn(()=>{a.$off("loaded",b),a.$off("error",g)})),Lt(()=>{et(()=>{var _;(_=r.value)!=null&&_.complete&&!t.lazyLoad&&u()})}),()=>{var _;return T("div",{class:La({round:t.round,block:t.block}),style:o.value},[p(),f(),(_=i.default)==null?void 0:_.call(i)])}}});const ah=Ee(h5),[f5,Mi]=we("card"),p5={tag:String,num:Ce,desc:String,thumb:String,title:String,price:Ce,centered:Boolean,lazyLoad:Boolean,currency:De(""),thumbLink:String,originPrice:Ce};var m5=Te({name:f5,props:p5,emits:["clickThumb"],setup(t,{slots:e,emit:i}){const n=()=>{if(e.title)return e.title();if(t.title)return T("div",{class:[Mi("title"),"van-multi-ellipsis--l2"]},[t.title])},s=()=>{if(e.tag||t.tag)return T("div",{class:Mi("tag")},[e.tag?e.tag():T(rh,{mark:!0,type:"primary"},{default:()=>[t.tag]})])},r=()=>e.thumb?e.thumb():T(ah,{src:t.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:t.lazyLoad},null),a=()=>{if(e.thumb||t.thumb)return T("a",{href:t.thumbLink,class:Mi("thumb"),onClick:u=>i("clickThumb",u)},[r(),s()])},o=()=>{if(e.desc)return e.desc();if(t.desc)return T("div",{class:[Mi("desc"),"van-ellipsis"]},[t.desc])},l=()=>{const u=t.price.toString().split(".");return T("div",null,[T("span",{class:Mi("price-currency")},[t.currency]),T("span",{class:Mi("price-integer")},[u[0]]),u.length>1&&T(zt,null,[Km("."),T("span",{class:Mi("price-decimal")},[u[1]])])])};return()=>{var u,c,d;const f=e.num||ct(t.num),p=e.price||ct(t.price),b=e["origin-price"]||ct(t.originPrice),g=f||p||b||e.bottom,_=p&&T("div",{class:Mi("price")},[e.price?e.price():l()]),w=b&&T("div",{class:Mi("origin-price")},[e["origin-price"]?e["origin-price"]():`${t.currency} ${t.originPrice}`]),x=f&&T("div",{class:Mi("num")},[e.num?e.num():`x${t.num}`]),C=e.footer&&T("div",{class:Mi("footer")},[e.footer()]),k=g&&T("div",{class:Mi("bottom")},[(u=e["price-top"])==null?void 0:u.call(e),_,w,x,(c=e.bottom)==null?void 0:c.call(e)]);return T("div",{class:Mi()},[T("div",{class:Mi("header")},[a(),T("div",{class:Mi("content",{centered:t.centered})},[T("div",null,[n(),o(),(d=e.tags)==null?void 0:d.call(e)]),k])]),C])}}});const g5=Ee(m5),[y5,Bs,v5]=we("cascader"),b5={title:String,options:At(),closeable:be,swipeable:be,closeIcon:De("cross"),showHeader:be,modelValue:Ce,fieldNames:Object,placeholder:String,activeColor:String};var _5=Te({name:y5,props:b5,emits:["close","change","finish","clickTab","update:modelValue"],setup(t,{slots:e,emit:i}){const n=oe([]),s=oe(0),[r,a]=Cu(),{text:o,value:l,children:u}=He({text:"text",value:"value",children:"children"},t.fieldNames),c=(D,R)=>{for(const M of D){if(M[l]===R)return[M];if(M[u]){const P=c(M[u],R);if(P)return[M,...P]}}},d=()=>{const{options:D,modelValue:R}=t;if(R!==void 0){const M=c(D,R);if(M){let P=D;n.value=M.map(E=>{const I={options:P,selected:E},O=P.find(L=>L[l]===E[l]);return O&&(P=O[u]),I}),P&&n.value.push({options:P,selected:null}),et(()=>{s.value=n.value.length-1});return}}n.value=[{options:D,selected:null}]},f=(D,R)=>{if(D.disabled)return;if(n.value[R].selected=D,n.value.length>R+1&&(n.value=n.value.slice(0,R+1)),D[u]){const E={options:D[u],selected:null};n.value[R+1]?n.value[R+1]=E:n.value.push(E),et(()=>{s.value++})}const M=n.value.map(E=>E.selected).filter(Boolean);i("update:modelValue",D[l]);const P={value:D[l],tabIndex:R,selectedOptions:M};i("change",P),D[u]||i("finish",P)},p=()=>i("close"),b=({name:D,title:R})=>i("clickTab",D,R),g=()=>t.showHeader?T("div",{class:Bs("header")},[T("h2",{class:Bs("title")},[e.title?e.title():t.title]),t.closeable?T(Qe,{name:t.closeIcon,class:[Bs("close-icon"),Ai],onClick:p},null):null]):null,_=(D,R,M)=>{const{disabled:P}=D,E=!!(R&&D[l]===R[l]),I=D.color||(E?t.activeColor:void 0),O=e.option?e.option({option:D,selected:E}):T("span",null,[D[o]]);return T("li",{ref:E?a(M):void 0,role:"menuitemradio",class:[Bs("option",{selected:E,disabled:P}),D.className],style:{color:I},tabindex:P?void 0:E?0:-1,"aria-checked":E,"aria-disabled":P||void 0,onClick:()=>f(D,M)},[O,E?T(Qe,{name:"success",class:Bs("selected-icon")},null):null])},w=(D,R,M)=>T("ul",{role:"menu",class:Bs("options")},[D.map(P=>_(P,R,M))]),x=(D,R)=>{const{options:M,selected:P}=D,E=t.placeholder||v5("select"),I=P?P[o]:E;return T(fu,{title:I,titleClass:Bs("tab",{unselected:!P})},{default:()=>{var O,L;return[(O=e["options-top"])==null?void 0:O.call(e,{tabIndex:R}),w(M,P,R),(L=e["options-bottom"])==null?void 0:L.call(e,{tabIndex:R})]}})},C=()=>T(th,{active:s.value,"onUpdate:active":D=>s.value=D,shrink:!0,animated:!0,class:Bs("tabs"),color:t.activeColor,swipeable:t.swipeable,onClickTab:b},{default:()=>[n.value.map(x)]}),k=D=>{const R=D.parentElement;R&&(R.scrollTop=D.offsetTop-(R.offsetHeight-D.offsetHeight)/2)};return d(),Re(s,D=>{const R=r.value[D];R&&k(R)}),Re(()=>t.options,d,{deep:!0}),Re(()=>t.modelValue,D=>{D!==void 0&&n.value.map(M=>{var P;return(P=M.selected)==null?void 0:P[l]}).includes(D)||d()}),()=>T("div",{class:Bs()},[g(),C()])}});const T5=Ee(_5),[x5,eb]=we("cell-group"),S5={title:String,inset:Boolean,border:be};var w5=Te({name:x5,inheritAttrs:!1,props:S5,setup(t,{slots:e,attrs:i}){const n=()=>{var r;return T("div",nt({class:[eb({inset:t.inset}),{[Qd]:t.border&&!t.inset}]},i,od()),[(r=e.default)==null?void 0:r.call(e)])},s=()=>T("div",{class:eb("title",{inset:t.inset})},[e.title?e.title():t.title]);return()=>t.title||e.title?T(zt,null,[s(),n()]):n()}});const C5=Ee(w5),[E5,yc]=we("circle");let D5=0;const tb=t=>Math.min(Math.max(+t,0),100);function k5(t,e){const i=t?1:0;return`M ${e/2} ${e/2} m 0, -500 a 500, 500 0 1, ${i} 0, 1000 a 500, 500 0 1, ${i} 0, -1000`}const A5={text:String,size:Ce,fill:De("none"),rate:Ne(100),speed:Ne(0),color:[String,Object],clockwise:be,layerColor:String,currentRate:Jt(0),strokeWidth:Ne(40),strokeLinecap:String,startPosition:De("top")};var I5=Te({name:E5,props:A5,emits:["update:currentRate"],setup(t,{emit:e,slots:i}){const n=`van-circle-${D5++}`,s=re(()=>+t.strokeWidth+1e3),r=re(()=>k5(t.clockwise,s.value)),a=re(()=>{const f={top:0,right:90,bottom:180,left:270}[t.startPosition];if(f)return{transform:`rotate(${f}deg)`}});Re(()=>t.rate,d=>{let f;const p=Date.now(),b=t.currentRate,g=tb(d),_=Math.abs((b-g)*1e3/+t.speed),w=()=>{const x=Date.now(),k=Math.min((x-p)/_,1)*(g-b)+b;e("update:currentRate",tb(parseFloat(k.toFixed(1)))),(g>b?k<g:k>g)&&(f=Ci(w))};t.speed?(f&&Kd(f),f=Ci(w)):e("update:currentRate",g)},{immediate:!0});const o=()=>{const{strokeWidth:f,currentRate:p,strokeLinecap:b}=t,g=3140*p/100,_=Kn(t.color)?`url(#${n})`:t.color,w={stroke:_,strokeWidth:`${+f+1}px`,strokeLinecap:b,strokeDasharray:`${g}px 3140px`};return T("path",{d:r.value,style:w,class:yc("hover"),stroke:_},null)},l=()=>{const d={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return T("path",{class:yc("layer"),style:d,d:r.value},null)},u=()=>{const{color:d}=t;if(!Kn(d))return;const f=Object.keys(d).sort((p,b)=>parseFloat(p)-parseFloat(b)).map((p,b)=>T("stop",{key:b,offset:p,"stop-color":d[p]},null));return T("defs",null,[T("linearGradient",{id:n,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[f])])},c=()=>{if(i.default)return i.default();if(t.text)return T("div",{class:yc("text")},[t.text])};return()=>T("div",{class:yc(),style:nr(t.size)},[T("svg",{viewBox:`0 0 ${s.value} ${s.value}`,style:a.value},[u(),l(),o()]),c()])}});const P5=Ee(I5),[lS,O5]=we("row"),uS=Symbol(lS),R5={tag:De("div"),wrap:be,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var M5=Te({name:lS,props:R5,setup(t,{slots:e}){const{children:i,linkChildren:n}=Pi(uS),s=re(()=>{const o=[[]];let l=0;return i.forEach((u,c)=>{l+=Number(u.span),l>24?(o.push([c]),l-=24):o[o.length-1].push(c)}),o}),r=re(()=>{let o=0;Array.isArray(t.gutter)?o=Number(t.gutter[0])||0:o=Number(t.gutter);const l=[];return o&&s.value.forEach(u=>{const c=o*(u.length-1)/u.length;u.forEach((d,f)=>{if(f===0)l.push({right:c});else{const p=o-l[d-1].right,b=c-p;l.push({left:p,right:b})}})}),l}),a=re(()=>{const{gutter:o}=t,l=[];if(Array.isArray(o)&&o.length>1){const u=Number(o[1])||0;if(u<=0)return l;s.value.forEach((c,d)=>{d!==s.value.length-1&&c.forEach(()=>{l.push({bottom:u})})})}return l});return n({spaces:r,verticalSpaces:a}),()=>{const{tag:o,wrap:l,align:u,justify:c}=t;return T(o,{class:O5({[`align-${u}`]:u,[`justify-${c}`]:c,nowrap:!l})},{default:()=>{var d;return[(d=e.default)==null?void 0:d.call(e)]}})}}});const[L5,B5]=we("col"),N5={tag:De("div"),span:Ne(0),offset:Ce};var F5=Te({name:L5,props:N5,setup(t,{slots:e}){const{parent:i,index:n}=bi(uS),s=re(()=>{if(!i)return;const{spaces:r,verticalSpaces:a}=i;let o={};if(r&&r.value&&r.value[n.value]){const{left:u,right:c}=r.value[n.value];o={paddingLeft:u?`${u}px`:null,paddingRight:c?`${c}px`:null}}const{bottom:l}=a.value[n.value]||{};return He(o,{marginBottom:l?`${l}px`:null})});return()=>{const{tag:r,span:a,offset:o}=t;return T(r,{style:s.value,class:B5({[a]:a,[`offset-${o}`]:o})},{default:()=>{var l;return[(l=e.default)==null?void 0:l.call(e)]}})}}});const $5=Ee(F5),[cS,U5]=we("collapse"),dS=Symbol(cS),z5={border:be,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var V5=Te({name:cS,props:z5,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const{linkChildren:n,children:s}=Pi(dS),r=u=>{e("change",u),e("update:modelValue",u)},a=(u,c)=>{const{accordion:d,modelValue:f}=t;r(d?u===f?"":u:c?f.concat(u):f.filter(p=>p!==u))},o=(u={})=>{if(t.accordion)return;typeof u=="boolean"&&(u={expanded:u});const{expanded:c,skipDisabled:d}=u,p=s.filter(b=>b.disabled&&d?b.expanded.value:c??!b.expanded.value).map(b=>b.itemName.value);r(p)},l=u=>{const{accordion:c,modelValue:d}=t;return c?d===u:d.includes(u)};return ot({toggleAll:o}),n({toggle:a,isExpanded:l}),()=>{var u;return T("div",{class:[U5(),{[Qd]:t.border}]},[(u=i.default)==null?void 0:u.call(i)])}}});const H5=Ee(V5),[q5,vc]=we("collapse-item"),j5=["icon","title","value","label","right-icon"],W5=He({},sh,{name:Ce,isLink:be,disabled:Boolean,readonly:Boolean,lazyRender:be});var G5=Te({name:q5,props:W5,setup(t,{slots:e}){const i=oe(),n=oe(),{parent:s,index:r}=bi(dS);if(!s)return;const a=re(()=>{var g;return(g=t.name)!=null?g:r.value}),o=re(()=>s.isExpanded(a.value)),l=oe(o.value),u=fg(()=>l.value||!t.lazyRender),c=()=>{o.value?i.value&&(i.value.style.height=""):l.value=!1};Re(o,(g,_)=>{if(_===null)return;g&&(l.value=!0),(g?et:Ci)(()=>{if(!n.value||!i.value)return;const{offsetHeight:x}=n.value;if(x){const C=`${x}px`;i.value.style.height=g?"0":C,Dr(()=>{i.value&&(i.value.style.height=g?C:"0")})}else c()})});const d=(g=!o.value)=>{s.toggle(a.value,g)},f=()=>{!t.disabled&&!t.readonly&&d()},p=()=>{const{border:g,disabled:_,readonly:w}=t,x=dt(t,Object.keys(sh));return w&&(x.isLink=!1),(_||w)&&(x.clickable=!1),T(ts,nt({role:"button",class:vc("title",{disabled:_,expanded:o.value,borderless:!g}),"aria-expanded":String(o.value),onClick:f},x),dt(e,j5))},b=u(()=>{var g;return ui(T("div",{ref:i,class:vc("wrapper"),onTransitionend:c},[T("div",{ref:n,class:vc("content")},[(g=e.default)==null?void 0:g.call(e)])]),[[yi,l.value]])});return ot({toggle:d,expanded:o,itemName:a}),()=>T("div",{class:[vc({border:r.value&&t.border})]},[p(),b()])}});const X5=Ee(G5),K5=Ee(h3),[Y5,ib,Rf]=we("contact-card"),Q5={tel:String,name:String,type:De("add"),addText:String,editable:be};var Z5=Te({name:Y5,props:Q5,emits:["click"],setup(t,{emit:e}){const i=s=>{t.editable&&e("click",s)},n=()=>t.type==="add"?t.addText||Rf("addContact"):[T("div",null,[`${Rf("name")}${t.name}`]),T("div",null,[`${Rf("tel")}${t.tel}`])];return()=>T(ts,{center:!0,icon:t.type==="edit"?"contact":"add-square",class:ib([t.type]),border:!1,isLink:t.editable,titleClass:ib("title"),onClick:i},{title:n})}});const J5=Ee(Z5),[eN,Ba,hr]=we("contact-edit"),tm={tel:"",name:""},tN={isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,showSetDefault:Boolean,setDefaultLabel:String,contactInfo:{type:Object,default:()=>He({},tm)},telValidator:{type:Function,default:o1}};var iN=Te({name:eN,props:tN,emits:["save","delete","changeDefault"],setup(t,{emit:e}){const i=Mt(He({},tm,t.contactInfo)),n=()=>{t.isSaving||e("save",i)},s=()=>e("delete",i),r=()=>T("div",{class:Ba("buttons")},[T(Ii,{block:!0,round:!0,type:"primary",text:hr("save"),class:Ba("button"),loading:t.isSaving,nativeType:"submit"},null),t.isEdit&&T(Ii,{block:!0,round:!0,text:hr("delete"),class:Ba("button"),loading:t.isDeleting,onClick:s},null)]),a=()=>T(bg,{modelValue:i.isDefault,"onUpdate:modelValue":l=>i.isDefault=l,onChange:l=>e("changeDefault",l)},null),o=()=>{if(t.showSetDefault)return T(ts,{title:t.setDefaultLabel,class:Ba("switch-cell"),border:!1},{"right-icon":a})};return Re(()=>t.contactInfo,l=>He(i,tm,l)),()=>T(yg,{class:Ba(),onSubmit:n},{default:()=>[T("div",{class:Ba("fields")},[T(Xs,{modelValue:i.name,"onUpdate:modelValue":l=>i.name=l,clearable:!0,label:hr("name"),rules:[{required:!0,message:hr("nameEmpty")}],maxlength:"30",placeholder:hr("name")},null),T(Xs,{modelValue:i.tel,"onUpdate:modelValue":l=>i.tel=l,clearable:!0,type:"tel",label:hr("tel"),rules:[{validator:t.telValidator,message:hr("telInvalid")}],placeholder:hr("tel")},null)]),o(),r()]})}});const nN=Ee(iN),[sN,Ns,rN]=we("contact-list"),aN={list:Array,addText:String,modelValue:Rt,defaultTagText:String};var oN=Te({name:sN,props:aN,emits:["add","edit","select","update:modelValue"],setup(t,{emit:e}){const i=(n,s)=>{const r=()=>{e("update:modelValue",n.id),e("select",n,s)},a=()=>T(xg,{class:Ns("radio"),name:n.id,iconSize:18},null),o=()=>T(Qe,{name:"edit",class:Ns("edit"),onClick:u=>{u.stopPropagation(),e("edit",n,s)}},null),l=()=>{const u=[`${n.name}${n.tel}`];return n.isDefault&&t.defaultTagText&&u.push(T(rh,{type:"primary",round:!0,class:Ns("item-tag")},{default:()=>[t.defaultTagText]})),u};return T(ts,{key:n.id,isLink:!0,center:!0,class:Ns("item"),titleClass:Ns("item-title"),onClick:r},{icon:o,title:l,"right-icon":a})};return()=>T("div",{class:Ns()},[T(_g,{modelValue:t.modelValue,class:Ns("group")},{default:()=>[t.list&&t.list.map(i)]}),T("div",{class:[Ns("bottom"),"van-safe-area-bottom"]},[T(Ii,{round:!0,block:!0,type:"primary",class:Ns("add"),text:t.addText||rN("addContact"),onClick:()=>e("add")},null)])])}});const lN=Ee(oN);function uN(t,e){const{days:i}=e;let{hours:n,minutes:s,seconds:r,milliseconds:a}=e;if(t.includes("DD")?t=t.replace("DD",Bn(i)):n+=i*24,t.includes("HH")?t=t.replace("HH",Bn(n)):s+=n*60,t.includes("mm")?t=t.replace("mm",Bn(s)):r+=s*60,t.includes("ss")?t=t.replace("ss",Bn(r)):a+=r*1e3,t.includes("S")){const o=Bn(a,3);t.includes("SSS")?t=t.replace("SSS",o):t.includes("SS")?t=t.replace("SS",o.slice(0,2)):t=t.replace("S",o.charAt(0))}return t}const[cN,dN]=we("count-down"),hN={time:Ne(0),format:De("HH:mm:ss"),autoStart:be,millisecond:Boolean};var fN=Te({name:cN,props:hN,emits:["change","finish"],setup(t,{emit:e,slots:i}){const{start:n,pause:s,reset:r,current:a}=RL({time:+t.time,millisecond:t.millisecond,onChange:u=>e("change",u),onFinish:()=>e("finish")}),o=re(()=>uN(t.format,a.value)),l=()=>{r(+t.time),t.autoStart&&n()};return Re(()=>t.time,l,{immediate:!0}),ot({start:n,pause:s,reset:l}),()=>T("div",{role:"timer",class:dN()},[i.default?i.default(a.value):o.value])}});const pN=Ee(fN);function nb(t){const e=new Date(t*1e3);return`${e.getFullYear()}.${Bn(e.getMonth()+1)}.${Bn(e.getDate())}`}const mN=t=>(t/10).toFixed(t%10===0?0:1),sb=t=>(t/100).toFixed(t%100===0?0:t%10===0?1:2),[gN,cs,Mf]=we("coupon");var yN=Te({name:gN,props:{chosen:Boolean,coupon:oi(Object),disabled:Boolean,currency:De("")},setup(t){const e=re(()=>{const{startAt:s,endAt:r}=t.coupon;return`${nb(s)} - ${nb(r)}`}),i=re(()=>{const{coupon:s,currency:r}=t;if(s.valueDesc)return[s.valueDesc,T("span",null,[s.unitDesc||""])];if(s.denominations){const a=sb(s.denominations);return[T("span",null,[r]),` ${a}`]}return s.discount?Mf("discount",mN(s.discount)):""}),n=re(()=>{const s=sb(t.coupon.originCondition||0);return s==="0"?Mf("unlimited"):Mf("condition",s)});return()=>{const{chosen:s,coupon:r,disabled:a}=t,o=a&&r.reason||r.description;return T("div",{class:cs({disabled:a})},[T("div",{class:cs("content")},[T("div",{class:cs("head")},[T("h2",{class:cs("amount")},[i.value]),T("p",{class:cs("condition")},[r.condition||n.value])]),T("div",{class:cs("body")},[T("p",{class:cs("name")},[r.name]),T("p",{class:cs("valid")},[e.value]),!a&&T(Sg,{class:cs("corner"),modelValue:s},null)])]),o&&T("p",{class:cs("description")},[o])])}}});const im=Ee(yN),[vN,rb,nm]=we("coupon-cell"),bN={title:String,border:be,editable:be,coupons:At(),currency:De(""),chosenCoupon:{type:[Number,Array],default:-1}},_N=t=>{const{value:e,denominations:i}=t;return ct(e)?e:ct(i)?i:0};function TN({coupons:t,chosenCoupon:e,currency:i}){let n=0,s=!1;return(Array.isArray(e)?e:[e]).forEach(r=>{const a=t[+r];a&&(s=!0,n+=_N(a))}),s?`-${i} ${(n/100).toFixed(2)}`:t.length===0?nm("noCoupon"):nm("count",t.length)}var xN=Te({name:vN,props:bN,setup(t){return()=>{const e=Array.isArray(t.chosenCoupon)?t.chosenCoupon.length:t.coupons[+t.chosenCoupon];return T(ts,{class:rb(),value:TN(t),title:t.title||nm("title"),border:t.border,isLink:t.editable,valueClass:rb("value",{selected:e})},null)}}});const SN=Ee(xN),[wN,bc]=we("empty"),CN={image:De("default"),imageSize:[Number,String,Array],description:String};var EN=Te({name:wN,props:CN,setup(t,{slots:e}){const i=()=>{const w=e.description?e.description():t.description;if(w)return T("p",{class:bc("description")},[w])},n=()=>{if(e.default)return T("div",{class:bc("bottom")},[e.default()])},s=Fo(),r=w=>`${s}-${w}`,a=w=>`url(#${r(w)})`,o=(w,x,C)=>T("stop",{"stop-color":w,offset:`${x}%`,"stop-opacity":C},null),l=(w,x)=>[o(w,0),o(x,100)],u=w=>[T("defs",null,[T("radialGradient",{id:r(w),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[o("#EBEDF0",0),o("#F2F3F5",100,.3)])]),T("ellipse",{fill:a(w),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],c=()=>[T("defs",null,[T("linearGradient",{id:r("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[o("#FFF",0,.5),o("#F2F3F5",100)])]),T("g",{opacity:".8","data-allow-mismatch":"children"},[T("path",{d:"M36 131V53H16v20H2v58h34z",fill:a("a")},null),T("path",{d:"M123 15h22v14h9v77h-31V15z",fill:a("a")},null)])],d=()=>[T("defs",null,[T("linearGradient",{id:r("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[o("#F2F3F5",0,.3),o("#F2F3F5",100)])]),T("g",{opacity:".8","data-allow-mismatch":"children"},[T("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:a("b")},null),T("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:a("b")},null)])],f=()=>T("svg",{viewBox:"0 0 160 160"},[T("defs",{"data-allow-mismatch":"children"},[T("linearGradient",{id:r(1),x1:"64%",y1:"100%",x2:"64%"},[o("#FFF",0,.5),o("#F2F3F5",100)]),T("linearGradient",{id:r(2),x1:"50%",x2:"50%",y2:"84%"},[o("#EBEDF0",0),o("#DCDEE0",100,0)]),T("linearGradient",{id:r(3),x1:"100%",x2:"100%",y2:"100%"},[l("#EAEDF0","#DCDEE0")]),T("radialGradient",{id:r(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[o("#EBEDF0",0),o("#FFF",100,0)])]),T("g",{fill:"none"},[c(),T("path",{fill:a(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),T("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:a(2),"data-allow-mismatch":"attribute"},null),T("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[T("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:a(3)},null),T("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:a(3)},null),T("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:a(3)},null),T("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:a(3)},null)]),T("g",{transform:"translate(31 105)"},[T("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),T("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),T("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),p=()=>T("svg",{viewBox:"0 0 160 160"},[T("defs",{"data-allow-mismatch":"children"},[T("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(5)},[l("#F2F3F5","#DCDEE0")]),T("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:r(6)},[l("#EAEDF1","#DCDEE0")]),T("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:r(7)},[l("#EAEDF1","#DCDEE0")])]),c(),d(),T("g",{transform:"translate(36 50)",fill:"none"},[T("g",{transform:"translate(8)"},[T("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),T("rect",{fill:a(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),T("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),T("g",{transform:"translate(15 17)",fill:a(6),"data-allow-mismatch":"attribute"},[T("rect",{width:"34",height:"6",rx:"1"},null),T("path",{d:"M0 14h34v6H0z"},null),T("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),T("rect",{fill:a(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),T("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),b=()=>T("svg",{viewBox:"0 0 160 160"},[T("defs",null,[T("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(8),"data-allow-mismatch":"attribute"},[l("#EAEDF1","#DCDEE0")])]),c(),d(),u("c"),T("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:a(8),"data-allow-mismatch":"attribute"},null)]),g=()=>T("svg",{viewBox:"0 0 160 160"},[T("defs",{"data-allow-mismatch":"children"},[T("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:r(9)},[l("#EEE","#D8D8D8")]),T("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:r(10)},[l("#F2F3F5","#DCDEE0")]),T("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(11)},[l("#F2F3F5","#DCDEE0")]),T("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(12)},[l("#FFF","#F7F8FA")])]),c(),d(),u("d"),T("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[T("rect",{fill:a(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),T("rect",{fill:a(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),T("circle",{stroke:a(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),T("circle",{fill:a(12),cx:"27",cy:"27",r:"16"},null),T("path",{d:"M37 7c-8 0-15 5-16 12",stroke:a(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),_=()=>{var w;if(e.image)return e.image();const x={error:b,search:g,network:f,default:p};return((w=x[t.image])==null?void 0:w.call(x))||T("img",{src:t.image},null)};return()=>T("div",{class:bc()},[T("div",{class:bc("image"),style:nr(t.imageSize)},[_()]),i(),n()])}});const hS=Ee(EN),[DN,ds,Na]=we("coupon-list"),kN={code:De(""),coupons:At(),currency:De(""),showCount:be,emptyImage:String,enabledTitle:String,disabledTitle:String,disabledCoupons:At(),showExchangeBar:be,showCloseButton:be,closeButtonText:String,inputPlaceholder:String,exchangeMinLength:Jt(1),exchangeButtonText:String,displayedCouponIndex:Jt(-1),exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,chosenCoupon:{type:[Number,Array],default:-1}};var AN=Te({name:DN,props:kN,emits:["change","exchange","update:code"],setup(t,{emit:e,slots:i}){const[n,s]=Cu(),r=oe(),a=oe(),o=oe(0),l=oe(0),u=oe(t.code),c=re(()=>!t.exchangeButtonLoading&&(t.exchangeButtonDisabled||!u.value||u.value.length<t.exchangeMinLength)),d=()=>{const C=ft(r).height,k=ft(a).height+44;l.value=(C>k?C:gn.value)-k},f=()=>{e("exchange",u.value),t.code||(u.value="")},p=x=>{et(()=>{var C;return(C=n.value[x])==null?void 0:C.scrollIntoView()})},b=()=>T(hS,{image:t.emptyImage},{default:()=>[T("p",{class:ds("empty-tip")},[Na("noCoupon")])]}),g=()=>{if(t.showExchangeBar)return T("div",{ref:a,class:ds("exchange-bar")},[T(Xs,{modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,clearable:!0,border:!1,class:ds("field"),placeholder:t.inputPlaceholder||Na("placeholder"),maxlength:"20"},null),T(Ii,{plain:!0,type:"primary",class:ds("exchange"),text:t.exchangeButtonText||Na("exchange"),loading:t.exchangeButtonLoading,disabled:c.value,onClick:f},null)])},_=()=>{const{coupons:x,chosenCoupon:C}=t,k=t.showCount?` (${x.length})`:"",D=(t.enabledTitle||Na("enable"))+k,R=(M=[],P=0)=>M.includes(P)?M.filter(E=>E!==P):[...M,P];return T(fu,{title:D},{default:()=>{var M;return[T("div",{class:ds("list",{"with-bottom":t.showCloseButton}),style:{height:`${l.value}px`}},[x.map((P,E)=>T(im,{key:P.id,ref:s(E),coupon:P,chosen:Array.isArray(C)?C.includes(E):E===C,currency:t.currency,onClick:()=>e("change",Array.isArray(C)?R(C,E):E)},null)),!x.length&&b(),(M=i["list-footer"])==null?void 0:M.call(i)])]}})},w=()=>{const{disabledCoupons:x}=t,C=t.showCount?` (${x.length})`:"",k=(t.disabledTitle||Na("disabled"))+C;return T(fu,{title:k},{default:()=>{var D;return[T("div",{class:ds("list",{"with-bottom":t.showCloseButton}),style:{height:`${l.value}px`}},[x.map(R=>T(im,{disabled:!0,key:R.id,coupon:R,currency:t.currency},null)),!x.length&&b(),(D=i["disabled-list-footer"])==null?void 0:D.call(i)])]}})};return Re(()=>t.code,x=>{u.value=x}),Re(gn,d),Re(u,x=>e("update:code",x)),Re(()=>t.displayedCouponIndex,p),Lt(()=>{d(),p(t.displayedCouponIndex)}),()=>T("div",{ref:r,class:ds()},[g(),T(th,{active:o.value,"onUpdate:active":x=>o.value=x,class:ds("tab")},{default:()=>[_(),w()]}),T("div",{class:ds("bottom")},[i["list-button"]?i["list-button"]():ui(T(Ii,{round:!0,block:!0,type:"primary",class:ds("close"),text:t.closeButtonText||Na("close"),onClick:()=>e("change",Array.isArray(t.chosenCoupon)?[]:-1)},null),[[yi,t.showCloseButton]])])])}});const IN=Ee(AN),ab=new Date().getFullYear(),[PN]=we("date-picker"),ON=He({},sS,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(ab-10,0,1),validator:du},maxDate:{type:Date,default:()=>new Date(ab+10,11,31),validator:du}});var RN=Te({name:PN,props:ON,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(t.modelValue),s=oe(!1),r=oe(),a=re(()=>s.value?t.modelValue:n.value),o=D=>D===t.minDate.getFullYear(),l=D=>D===t.maxDate.getFullYear(),u=D=>D===t.minDate.getMonth()+1,c=D=>D===t.maxDate.getMonth()+1,d=D=>{const{minDate:R,columnsType:M}=t,P=M.indexOf(D),E=a.value[P];if(E)return+E;switch(D){case"year":return R.getFullYear();case"month":return R.getMonth()+1;case"day":return R.getDate()}},f=()=>{const D=t.minDate.getFullYear(),R=t.maxDate.getFullYear();return no(D,R,"year",t.formatter,t.filter,a.value)},p=()=>{const D=d("year"),R=o(D)?t.minDate.getMonth()+1:1,M=l(D)?t.maxDate.getMonth()+1:12;return no(R,M,"month",t.formatter,t.filter,a.value)},b=()=>{const D=d("year"),R=d("month"),M=o(D)&&u(R)?t.minDate.getDate():1,P=l(D)&&c(R)?t.maxDate.getDate():aS(D,R);return no(M,P,"day",t.formatter,t.filter,a.value)},g=()=>{var D;return(D=r.value)==null?void 0:D.confirm()},_=()=>n.value,w=re(()=>t.columnsType.map(D=>{switch(D){case"year":return f();case"month":return p();case"day":return b();default:return[]}}));Re(n,D=>{Ss(D,t.modelValue)||e("update:modelValue",D)}),Re(()=>t.modelValue,(D,R)=>{s.value=Ss(R,n.value),D=oS(D,w.value),Ss(D,n.value)||(n.value=D),s.value=!1},{immediate:!0});const x=(...D)=>e("change",...D),C=(...D)=>e("cancel",...D),k=(...D)=>e("confirm",...D);return ot({confirm:g,getSelectedDate:_}),()=>T(nh,nt({ref:r,modelValue:n.value,"onUpdate:modelValue":D=>n.value=D,columns:w.value,onChange:x,onCancel:C,onConfirm:k},dt(t,rS)),i)}});const MN=Ee(RN),[LN,Rn,_c]=we("dialog"),BN=He({},No,{title:String,theme:String,width:Ce,message:[String,Function],callback:Function,allowHtml:Boolean,className:Rt,transition:De("van-dialog-bounce"),messageAlign:String,closeOnPopstate:be,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:be,closeOnClickOverlay:Boolean,keyboardEnabled:be,destroyOnClose:Boolean}),NN=[...hg,"transition","closeOnPopstate","destroyOnClose"];var FN=Te({name:LN,props:BN,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:i}){const n=oe(),s=Mt({confirm:!1,cancel:!1}),r=w=>e("update:show",w),a=w=>{var x;r(!1),(x=t.callback)==null||x.call(t,w)},o=w=>()=>{t.show&&(e(w),t.beforeClose?(s[w]=!0,$r(t.beforeClose,{args:[w],done(){a(w),s[w]=!1},canceled(){s[w]=!1}})):a(w))},l=o("cancel"),u=o("confirm"),c=$A(w=>{var x,C;if(!t.keyboardEnabled||w.target!==((C=(x=n.value)==null?void 0:x.popupRef)==null?void 0:C.value))return;({Enter:t.showConfirmButton?u:qp,Escape:t.showCancelButton?l:qp})[w.key](),e("keydown",w)},["enter","esc"]),d=()=>{const w=i.title?i.title():t.title;if(w)return T("div",{class:Rn("header",{isolated:!t.message&&!i.default})},[w])},f=w=>{const{message:x,allowHtml:C,messageAlign:k}=t,D=Rn("message",{"has-title":w,[k]:k}),R=_o(x)?x():x;return C&&typeof R=="string"?T("div",{class:D,innerHTML:R},null):T("div",{class:D},[R])},p=()=>{if(i.default)return T("div",{class:Rn("content")},[i.default()]);const{title:w,message:x,allowHtml:C}=t;if(x){const k=!!(w||i.title);return T("div",{key:C?1:0,class:Rn("content",{isolated:!k})},[f(k)])}},b=()=>T("div",{class:[g1,Rn("footer")]},[t.showCancelButton&&T(Ii,{size:"large",text:t.cancelButtonText||_c("cancel"),class:Rn("cancel"),style:{color:t.cancelButtonColor},loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&T(Ii,{size:"large",text:t.confirmButtonText||_c("confirm"),class:[Rn("confirm"),{[y1]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:u},null)]),g=()=>T(S1,{class:Rn("footer")},{default:()=>[t.showCancelButton&&T(Yp,{type:"warning",text:t.cancelButtonText||_c("cancel"),class:Rn("cancel"),color:t.cancelButtonColor,loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&T(Yp,{type:"danger",text:t.confirmButtonText||_c("confirm"),class:Rn("confirm"),color:t.confirmButtonColor,loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:u},null)]}),_=()=>i.footer?i.footer():t.theme==="round-button"?g():b();return()=>{const{width:w,title:x,theme:C,message:k,className:D}=t;return T(es,nt({ref:n,role:"dialog",class:[Rn([C]),D],style:{width:Ye(w)},tabindex:0,"aria-labelledby":x||k,onKeydown:c,"onUpdate:show":r},dt(t,NN)),{default:()=>[d(),p(),_()]})}}});const $N=Ee(FN),[UN,zN]=we("divider"),VN={dashed:Boolean,hairline:be,vertical:Boolean,contentPosition:De("center")};var HN=Te({name:UN,props:VN,setup(t,{slots:e}){return()=>{var i;return T("div",{role:"separator",class:zN({dashed:t.dashed,hairline:t.hairline,vertical:t.vertical,[`content-${t.contentPosition}`]:!!e.default&&!t.vertical})},[!t.vertical&&((i=e.default)==null?void 0:i.call(e))])}}});const qN=Ee(HN),[fS,Tc]=we("dropdown-menu"),jN={overlay:be,zIndex:Ce,duration:Ne(.2),direction:De("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:be,closeOnClickOverlay:be,swipeThreshold:Ce},pS=Symbol(fS);var WN=Te({name:fS,props:jN,setup(t,{slots:e}){const i=Fo(),n=oe(),s=oe(),r=oe(0),{children:a,linkChildren:o}=Pi(pS),l=Bo(n),u=re(()=>a.some(x=>x.state.showWrapper)),c=re(()=>t.swipeThreshold&&a.length>+t.swipeThreshold),d=re(()=>{if(u.value&&ct(t.zIndex))return{zIndex:+t.zIndex+1}}),f=()=>{a.forEach(x=>{x.toggle(!1)})},p=()=>{t.closeOnClickOutside&&f()},b=()=>{if(s.value){const x=ft(s);t.direction==="down"?r.value=x.bottom:r.value=gn.value-x.top}},g=()=>{u.value&&b()},_=x=>{a.forEach((C,k)=>{k===x?C.toggle():C.state.showPopup&&C.toggle(!1,{immediate:!0})})},w=(x,C)=>{const{showPopup:k}=x.state,{disabled:D,titleClass:R}=x;return T("div",{id:`${i}-${C}`,role:"button",tabindex:D?void 0:0,"data-allow-mismatch":"attribute",class:[Tc("item",{disabled:D,grow:c.value}),{[Ai]:!D}],onClick:()=>{D||_(C)}},[T("span",{class:[Tc("title",{down:k===(t.direction==="down"),active:k}),R],style:{color:k?t.activeColor:""}},[T("div",{class:"van-ellipsis"},[x.renderTitle()])])])};return ot({close:f}),o({id:i,props:t,offset:r,updateOffset:b}),Yd(n,p),qt("scroll",g,{target:l,passive:!0}),()=>{var x;return T("div",{ref:n,class:Tc()},[T("div",{ref:s,style:d.value,class:Tc("bar",{opened:u.value,scrollable:c.value})},[a.map(w)]),(x=e.default)==null?void 0:x.call(e)])}}});const[GN,xc]=we("dropdown-item"),XN={title:String,options:At(),disabled:Boolean,teleport:[String,Object],lazyRender:be,modelValue:Rt,titleClass:Rt};var KN=Te({name:GN,inheritAttrs:!1,props:XN,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:e,slots:i,attrs:n}){const s=Mt({showPopup:!1,transition:!0,showWrapper:!1}),r=oe(),{parent:a,index:o}=bi(pS);if(!a)return;const l=x=>()=>e(x),u=l("open"),c=l("close"),d=l("opened"),f=()=>{s.showWrapper=!1,e("closed")},p=x=>{t.teleport&&x.stopPropagation()},b=(x=!s.showPopup,C={})=>{x!==s.showPopup&&(s.showPopup=x,s.transition=!C.immediate,x&&(a.updateOffset(),s.showWrapper=!0))},g=()=>{if(i.title)return i.title();if(t.title)return t.title;const x=t.options.find(C=>C.value===t.modelValue);return x?x.text:""},_=x=>{const{activeColor:C}=a.props,{disabled:k}=x,D=x.value===t.modelValue,R=()=>{k||(s.showPopup=!1,x.value!==t.modelValue&&(e("update:modelValue",x.value),e("change",x.value)))},M=()=>{if(D)return T(Qe,{class:xc("icon"),color:k?void 0:C,name:"success"},null)};return T(ts,{role:"menuitem",key:String(x.value),icon:x.icon,title:x.text,class:xc("option",{active:D,disabled:k}),style:{color:D?C:""},tabindex:D?0:-1,clickable:!k,onClick:R},{value:M})},w=()=>{const{offset:x}=a,{autoLocate:C,zIndex:k,overlay:D,duration:R,direction:M,closeOnClickOverlay:P}=a.props,E=sr(k);let I=x.value;if(C&&r.value){const O=UL(r.value);O&&(I-=ft(O).top)}return M==="down"?E.top=`${I}px`:E.bottom=`${I}px`,ui(T("div",nt({ref:r,style:E,class:xc([M]),onClick:p},n),[T(es,{show:s.showPopup,"onUpdate:show":O=>s.showPopup=O,role:"menu",class:xc("content"),overlay:D,position:M==="down"?"top":"bottom",duration:s.transition?R:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${a.id}-${o.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:P,onOpen:u,onClose:c,onOpened:d,onClosed:f},{default:()=>{var O;return[t.options.map(_),(O=i.default)==null?void 0:O.call(i)]}})]),[[yi,s.showWrapper]])};return ot({state:s,toggle:b,renderTitle:g}),()=>t.teleport?T(xa,{to:t.teleport},{default:()=>[w()]}):w()}});const YN=Ee(KN),QN=Ee(WN),ZN={gap:{type:[Number,Object],default:24},icon:String,axis:De("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[JN,ob]=we("floating-bubble");var e8=Te({name:JN,inheritAttrs:!1,props:ZN,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:i,attrs:n}){const s=oe(),r=oe({x:0,y:0,width:0,height:0}),a=re(()=>Kn(t.gap)?t.gap.x:t.gap),o=re(()=>Kn(t.gap)?t.gap.y:t.gap),l=re(()=>({top:o.value,right:Vn.value-r.value.width-a.value,bottom:gn.value-r.value.height-o.value,left:a.value})),u=oe(!1);let c=!1;const d=re(()=>{const D={},R=Ye(r.value.x),M=Ye(r.value.y);return D.transform=`translate3d(${R}, ${M}, 0)`,(u.value||!c)&&(D.transition="none"),D}),f=()=>{if(!k.value)return;const{width:D,height:R}=ft(s.value),{offset:M}=t;r.value={x:M.x>-1?M.x:Vn.value-D-a.value,y:M.y>-1?M.y:gn.value-R-o.value,width:D,height:R}},p=Sn();let b=0,g=0;const _=D=>{p.start(D),u.value=!0,b=r.value.x,g=r.value.y};qt("touchmove",D=>{if(D.preventDefault(),p.move(D),t.axis!=="lock"&&!p.isTap.value){if(t.axis==="x"||t.axis==="xy"){let M=b+p.deltaX.value;M<l.value.left&&(M=l.value.left),M>l.value.right&&(M=l.value.right),r.value.x=M}if(t.axis==="y"||t.axis==="xy"){let M=g+p.deltaY.value;M<l.value.top&&(M=l.value.top),M>l.value.bottom&&(M=l.value.bottom),r.value.y=M}const R=dt(r.value,["x","y"]);i("update:offset",R)}},{target:s});const x=()=>{u.value=!1,et(()=>{if(t.magnetic==="x"){const D=ad([l.value.left,l.value.right],r.value.x);r.value.x=D}if(t.magnetic==="y"){const D=ad([l.value.top,l.value.bottom],r.value.y);r.value.y=D}if(!p.isTap.value){const D=dt(r.value,["x","y"]);i("update:offset",D),(b!==D.x||g!==D.y)&&i("offsetChange",D)}})},C=D=>{p.isTap.value?i("click",D):D.stopPropagation()};Lt(()=>{f(),et(()=>{c=!0})}),Re([Vn,gn,a,o,()=>t.offset],f,{deep:!0});const k=oe(!0);return Ds(()=>{k.value=!0}),ks(()=>{t.teleport&&(k.value=!1)}),()=>{const D=ui(T("div",nt({class:ob(),ref:s,onTouchstartPassive:_,onTouchend:x,onTouchcancel:x,onClickCapture:C,style:d.value},n),[e.default?e.default():T(y3,{name:t.icon,class:ob("icon")},null)]),[[yi,k.value]]);return t.teleport?T(xa,{to:t.teleport},{default:()=>[D]}):D}}});const t8=Ee(e8),i8={height:Ne(0),anchors:At(),duration:Ne(.3),contentDraggable:be,lockScroll:Boolean,safeAreaInsetBottom:be},[n8,Sc]=we("floating-panel");var s8=Te({name:n8,props:i8,emits:["heightChange","update:height"],setup(t,{emit:e,slots:i}){const s=oe(),r=oe(),a=pg(()=>+t.height,C=>e("update:height",C)),o=re(()=>{var C,k;return{min:(C=t.anchors[0])!=null?C:100,max:(k=t.anchors[t.anchors.length-1])!=null?k:Math.round(gn.value*.6)}}),l=re(()=>t.anchors.length>=2?t.anchors:[o.value.min,o.value.max]),u=oe(!1),c=re(()=>({height:Ye(o.value.max),transform:`translateY(calc(100% + ${Ye(-a.value)}))`,transition:u.value?"none":`transform ${t.duration}s cubic-bezier(0.18, 0.89, 0.32, 1.28)`})),d=C=>{const k=Math.abs(C),{min:D,max:R}=o.value;return k>R?-(R+(k-R)*.2):k<D?-(D-(D-k)*.2):C};let f,p=-1;const b=Sn(),g=C=>{b.start(C),u.value=!0,f=-a.value,p=-1},_=C=>{var k;b.move(C);const D=C.target;if(r.value===D||(k=r.value)!=null&&k.contains(D)){const{scrollTop:M}=r.value;if(p=Math.max(p,M),!t.contentDraggable)return;if(-f<o.value.max)wt(C,!0);else if(!(M<=0&&b.deltaY.value>0)||p>0)return}const R=b.deltaY.value+f;a.value=-d(R)},w=()=>{p=-1,u.value=!1,a.value=ad(l.value,a.value),a.value!==-f&&e("heightChange",{height:a.value})};Re(o,()=>{a.value=ad(l.value,a.value)},{immediate:!0}),k1(s,()=>t.lockScroll||u.value),qt("touchmove",_,{target:s});const x=()=>i.header?i.header():T("div",{class:Sc("header")},[T("div",{class:Sc("header-bar")},null)]);return()=>{var C;return T("div",{class:[Sc(),{"van-safe-area-bottom":t.safeAreaInsetBottom}],ref:s,style:c.value,onTouchstartPassive:g,onTouchend:w,onTouchcancel:w},[x(),T("div",{class:Sc("content"),ref:r},[(C=i.default)==null?void 0:C.call(i)])])}}});const r8=Ee(s8),[mS,a8]=we("grid"),o8={square:Boolean,center:be,border:be,gutter:Ce,reverse:Boolean,iconSize:Ce,direction:String,clickable:Boolean,columnNum:Ne(4)},gS=Symbol(mS);var l8=Te({name:mS,props:o8,setup(t,{slots:e}){const{linkChildren:i}=Pi(gS);return i({props:t}),()=>{var n;return T("div",{style:{paddingLeft:Ye(t.gutter)},class:[a8(),{[g1]:t.border&&!t.gutter}]},[(n=e.default)==null?void 0:n.call(e)])}}});const u8=Ee(l8),[c8,wc]=we("grid-item"),d8=He({},Ur,{dot:Boolean,text:String,icon:String,badge:Ce,iconColor:String,iconPrefix:String,badgeProps:Object});var h8=Te({name:c8,props:d8,setup(t,{slots:e}){const{parent:i,index:n}=bi(gS),s=Sa();if(!i)return;const r=re(()=>{const{square:c,gutter:d,columnNum:f}=i.props,p=`${100/+f}%`,b={flexBasis:p};if(c)b.paddingTop=p;else if(d){const g=Ye(d);b.paddingRight=g,n.value>=+f&&(b.marginTop=g)}return b}),a=re(()=>{const{square:c,gutter:d}=i.props;if(c&&d){const f=Ye(d);return{right:f,bottom:f,height:"auto"}}}),o=()=>{if(e.icon)return T(wa,nt({dot:t.dot,content:t.badge},t.badgeProps),{default:e.icon});if(t.icon)return T(Qe,{dot:t.dot,name:t.icon,size:i.props.iconSize,badge:t.badge,class:wc("icon"),color:t.iconColor,badgeProps:t.badgeProps,classPrefix:t.iconPrefix},null)},l=()=>{if(e.text)return e.text();if(t.text)return T("span",{class:wc("text")},[t.text])},u=()=>e.default?e.default():[o(),l()];return()=>{const{center:c,border:d,square:f,gutter:p,reverse:b,direction:g,clickable:_}=i.props,w=[wc("content",[g,{center:c,square:f,reverse:b,clickable:_,surround:d&&p}]),{[rr]:d}];return T("div",{class:[wc({square:f})],style:r.value},[T("div",{role:_?"button":void 0,class:w,style:a.value,tabindex:_?0:void 0,onClick:s},[u()])])}}});const f8=Ee(h8),[p8,lb]=we("highlight"),m8={autoEscape:be,caseSensitive:Boolean,highlightClass:String,highlightTag:De("span"),keywords:oi([String,Array]),sourceString:De(""),tag:De("div"),unhighlightClass:String,unhighlightTag:De("span")};var g8=Te({name:p8,props:m8,setup(t){const e=re(()=>{const{autoEscape:n,caseSensitive:s,keywords:r,sourceString:a}=t,o=s?"g":"gi";let u=(Array.isArray(r)?r:[r]).filter(d=>d).reduce((d,f)=>{n&&(f=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));const p=new RegExp(f,o);let b;for(;b=p.exec(a);){const g=b.index,_=p.lastIndex;if(g>=_){p.lastIndex++;continue}d.push({start:g,end:_,highlight:!0})}return d},[]);u=u.sort((d,f)=>d.start-f.start).reduce((d,f)=>{const p=d[d.length-1];if(!p||f.start>p.end){const b=p?p.end:0,g=f.start;b!==g&&d.push({start:b,end:g,highlight:!1}),d.push(f)}else p.end=Math.max(p.end,f.end);return d},[]);const c=u[u.length-1];return c||u.push({start:0,end:a.length,highlight:!1}),c&&c.end<a.length&&u.push({start:c.end,end:a.length,highlight:!1}),u}),i=()=>{const{sourceString:n,highlightClass:s,unhighlightClass:r,highlightTag:a,unhighlightTag:o}=t;return e.value.map(l=>{const{start:u,end:c,highlight:d}=l,f=n.slice(u,c);return d?T(a,{class:[lb("tag"),s]},{default:()=>[f]}):T(o,{class:r},{default:()=>[f]})})};return()=>{const{tag:n}=t;return T(n,{class:lb()},{default:()=>[i()]})}}});const y8=Ee(g8),ub=t=>Math.sqrt((t[0].clientX-t[1].clientX)**2+(t[0].clientY-t[1].clientY)**2),v8=t=>({x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2}),Lf=we("image-preview")[1],cb=2.6,b8={src:String,show:Boolean,active:Number,minZoom:oi(Ce),maxZoom:oi(Ce),rootWidth:oi(Number),rootHeight:oi(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var _8=Te({props:b8,emits:["scale","close","longPress"],setup(t,{emit:e,slots:i}){const n=Mt({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),s=Sn(),r=oe(),a=oe(),o=oe(!1),l=oe(!1);let u=0;const c=re(()=>{const{scale:K,moveX:Y,moveY:Z,moving:le,zooming:he,initializing:te}=n,ie={transitionDuration:he||le||te?"0s":".3s"};return(K!==1||l.value)&&(ie.transform=`matrix(${K}, 0, 0, ${K}, ${Y}, ${Z})`),ie}),d=re(()=>{if(n.imageRatio){const{rootWidth:K,rootHeight:Y}=t,Z=o.value?Y/n.imageRatio:K;return Math.max(0,(n.scale*Z-K)/2)}return 0}),f=re(()=>{if(n.imageRatio){const{rootWidth:K,rootHeight:Y}=t,Z=o.value?Y:K*n.imageRatio;return Math.max(0,(n.scale*Z-Y)/2)}return 0}),p=(K,Y)=>{var Z;if(K=si(K,+t.minZoom,+t.maxZoom+1),K!==n.scale){const le=K/n.scale;if(n.scale=K,Y){const he=ft((Z=r.value)==null?void 0:Z.$el),te={x:he.width*.5,y:he.height*.5},ie=n.moveX-(Y.x-he.left-te.x)*(le-1),fe=n.moveY-(Y.y-he.top-te.y)*(le-1);n.moveX=si(ie,-d.value,d.value),n.moveY=si(fe,-f.value,f.value)}else n.moveX=0,n.moveY=l.value?u:0;e("scale",{scale:K,index:t.active})}},b=()=>{p(1)},g=()=>{const K=n.scale>1?1:2;p(K,K===2||l.value?{x:s.startX.value,y:s.startY.value}:void 0)};let _,w,x,C,k,D,R,M,P=!1;const E=K=>{const{touches:Y}=K;if(_=Y.length,_===2&&t.disableZoom)return;const{offsetX:Z}=s;s.start(K),w=n.moveX,x=n.moveY,M=Date.now(),P=!1,n.moving=_===1&&(n.scale!==1||l.value),n.zooming=_===2&&!Z.value,n.zooming&&(C=n.scale,k=ub(Y))},I=K=>{const{touches:Y}=K;if(s.move(K),n.moving){const{deltaX:Z,deltaY:le}=s,he=Z.value+w,te=le.value+x;if((t.vertical?s.isVertical()&&Math.abs(te)>f.value:s.isHorizontal()&&Math.abs(he)>d.value)&&!P){n.moving=!1;return}P=!0,wt(K,!0),n.moveX=si(he,-d.value,d.value),n.moveY=si(te,-f.value,f.value)}if(n.zooming&&(wt(K,!0),Y.length===2)){const Z=ub(Y),le=C*Z/k;D=v8(Y),p(le,D)}},O=K=>{var Y;const Z=(Y=a.value)==null?void 0:Y.$el;if(!Z)return;const le=Z.firstElementChild,he=K.target===Z,te=le==null?void 0:le.contains(K.target);!t.closeOnClickImage&&te||!t.closeOnClickOverlay&&he||e("close")},L=K=>{if(_>1)return;const Y=Date.now()-M,Z=250;s.isTap.value&&(Y<Z?t.doubleScale?R?(clearTimeout(R),R=null,g()):R=setTimeout(()=>{O(K),R=null},Z):O(K):Y>b1&&e("longPress"))},F=K=>{let Y=!1;if((n.moving||n.zooming)&&(Y=!0,n.moving&&w===n.moveX&&x===n.moveY&&(Y=!1),!K.touches.length)){n.zooming&&(n.moveX=si(n.moveX,-d.value,d.value),n.moveY=si(n.moveY,-f.value,f.value),n.zooming=!1),n.moving=!1,w=0,x=0,C=1,n.scale<1&&b();const Z=+t.maxZoom;n.scale>Z&&p(Z,D)}wt(K,Y),L(K),s.reset()},X=()=>{const{rootWidth:K,rootHeight:Y}=t,Z=Y/K,{imageRatio:le}=n;o.value=n.imageRatio>Z&&le<cb,l.value=n.imageRatio>Z&&le>=cb,l.value&&(u=(le*K-Y)/2,n.moveY=u,n.initializing=!0,Ci(()=>{n.initializing=!1})),b()},ee=K=>{const{naturalWidth:Y,naturalHeight:Z}=K.target;n.imageRatio=Z/Y,X()};return Re(()=>t.active,b),Re(()=>t.show,K=>{K||b()}),Re(()=>[t.rootWidth,t.rootHeight],X),qt("touchmove",I,{target:re(()=>{var K;return(K=a.value)==null?void 0:K.$el})}),ot({resetScale:b}),()=>{const K={loading:()=>T(Jn,{type:"spinner"},null)};return T(gg,{ref:a,class:Lf("swipe-item"),onTouchstartPassive:E,onTouchend:F,onTouchcancel:F},{default:()=>[i.image?T("div",{class:Lf("image-wrap")},[i.image({src:t.src,onLoad:ee,style:c.value})]):T(ah,{ref:r,src:t.src,fit:"contain",class:Lf("image",{vertical:o.value}),style:c.value,onLoad:ee},K)]})}}});const[T8,Fa]=we("image-preview"),x8=["show","teleport","transition","overlayStyle","closeOnPopstate"],S8={show:Boolean,loop:be,images:At(),minZoom:Ne(1/3),maxZoom:Ne(3),overlay:be,vertical:Boolean,closeable:Boolean,showIndex:be,className:Rt,closeIcon:De("clear"),transition:String,beforeClose:Function,doubleScale:be,overlayClass:Rt,overlayStyle:Object,swipeDuration:Ne(300),startPosition:Ne(0),showIndicators:Boolean,closeOnPopstate:be,closeOnClickImage:be,closeOnClickOverlay:be,closeIconPosition:De("top-right"),teleport:[String,Object]};var yS=Te({name:T8,props:S8,emits:["scale","close","closed","change","longPress","update:show"],setup(t,{emit:e,slots:i}){const n=oe(),s=oe(),r=Mt({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),a=()=>{if(n.value){const C=ft(n.value.$el);r.rootWidth=C.width,r.rootHeight=C.height,n.value.resize()}},o=C=>e("scale",C),l=C=>e("update:show",C),u=()=>{$r(t.beforeClose,{args:[r.active],done:()=>l(!1)})},c=C=>{C!==r.active&&(r.active=C,e("change",C))},d=()=>{if(t.showIndex)return T("div",{class:Fa("index")},[i.index?i.index({index:r.active}):`${r.active+1} / ${t.images.length}`])},f=()=>{if(i.cover)return T("div",{class:Fa("cover")},[i.cover()])},p=()=>{r.disableZoom=!0},b=()=>{r.disableZoom=!1},g=()=>T(mg,{ref:n,lazyRender:!0,loop:t.loop,class:Fa("swipe"),vertical:t.vertical,duration:t.swipeDuration,initialSwipe:t.startPosition,showIndicators:t.showIndicators,indicatorColor:"white",onChange:c,onDragEnd:b,onDragStart:p},{default:()=>[t.images.map((C,k)=>T(_8,{ref:D=>{k===r.active&&(s.value=D)},src:C,show:t.show,active:r.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:r.rootWidth,rootHeight:r.rootHeight,disableZoom:r.disableZoom,doubleScale:t.doubleScale,closeOnClickImage:t.closeOnClickImage,closeOnClickOverlay:t.closeOnClickOverlay,vertical:t.vertical,onScale:o,onClose:u,onLongPress:()=>e("longPress",{index:k})},{image:i.image}))]}),_=()=>{if(t.closeable)return T(Qe,{role:"button",name:t.closeIcon,class:[Fa("close-icon",t.closeIconPosition),Ai],onClick:u},null)},w=()=>e("closed"),x=(C,k)=>{var D;return(D=n.value)==null?void 0:D.swipeTo(C,k)};return ot({resetScale:()=>{var C;(C=s.value)==null||C.resetScale()},swipeTo:x}),Lt(a),Re([Vn,gn],a),Re(()=>t.startPosition,C=>c(+C)),Re(()=>t.show,C=>{const{images:k,startPosition:D}=t;C?(c(+D),et(()=>{a(),x(+D,{immediate:!0})})):e("close",{index:r.active,url:k[r.active]})}),()=>T(es,nt({class:[Fa(),t.className],overlayClass:[Fa("overlay"),t.overlayClass],onClosed:w,"onUpdate:show":l},dt(t,x8)),{default:()=>[_(),g(),d(),f()]})}});let Vc;const w8={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function C8(){({instance:Vc}=K1({setup(){const{state:t,toggle:e}=X1(),i=()=>{t.images=[]};return()=>T(yS,nt(t,{onClosed:i,"onUpdate:show":e}),null)}}))}const E8=(t,e=0)=>{if(_n)return Vc||C8(),t=Array.isArray(t)?{images:t,startPosition:e}:t,Vc.open(He({},w8,t)),Vc},D8=Ee(yS);function k8(){return Array(26).fill("").map((i,n)=>String.fromCharCode(65+n))}const[vS,Bf]=we("index-bar"),A8={sticky:be,zIndex:Ce,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Jt(0),indexList:{type:Array,default:k8}},bS=Symbol(vS);var I8=Te({name:vS,props:A8,emits:["select","change"],setup(t,{emit:e,slots:i}){const n=oe(),s=oe(),r=oe(""),a=Sn(),o=Bo(n),{children:l,linkChildren:u}=Pi(bS);let c;u({props:t});const d=re(()=>{if(ct(t.zIndex))return{zIndex:+t.zIndex+1}}),f=re(()=>{if(t.highlightColor)return{color:t.highlightColor}}),p=(P,E)=>{for(let I=l.length-1;I>=0;I--){const O=I>0?E[I-1].height:0,L=t.sticky?O+t.stickyOffsetTop:0;if(P+L>=E[I].top)return I}return-1},b=P=>l.find(E=>String(E.index)===P),g=()=>{if(ba(n))return;const{sticky:P,indexList:E}=t,I=Qs(o.value),O=ft(o),L=l.map(X=>X.getRect(o.value,O));let F=-1;if(c){const X=b(c);if(X){const ee=X.getRect(o.value,O);t.sticky&&t.stickyOffsetTop?F=p(ee.top-t.stickyOffsetTop,L):F=p(ee.top,L)}}else F=p(I,L);r.value=E[F],P&&l.forEach((X,ee)=>{const{state:K,$el:Y}=X;if(ee===F||ee===F-1){const Z=Y.getBoundingClientRect();K.left=Z.left,K.width=Z.width}else K.left=null,K.width=null;if(ee===F)K.active=!0,K.top=Math.max(t.stickyOffsetTop,L[ee].top-I)+O.top;else if(ee===F-1&&c===""){const Z=L[F].top-I;K.active=Z>0,K.top=Z+O.top-L[ee].height}else K.active=!1}),c=""},_=()=>{et(g)};qt("scroll",g,{target:o,passive:!0}),Lt(_),Re(()=>t.indexList,_),Re(r,P=>{P&&e("change",P)});const w=()=>t.indexList.map(P=>{const E=P===r.value;return T("span",{class:Bf("index",{active:E}),style:E?f.value:void 0,"data-index":P},[P])}),x=P=>{c=String(P);const E=b(c);if(E){const I=Qs(o.value),O=ft(o),{offsetHeight:L}=document.documentElement;if(E.$el.scrollIntoView(),I===L-O.height){g();return}t.sticky&&t.stickyOffsetTop&&(la()===L-O.height?hu(la()):hu(la()-t.stickyOffsetTop)),e("select",E.index)}},C=P=>{const{index:E}=P.dataset;E&&x(E)},k=P=>{C(P.target)};let D;const R=P=>{if(a.move(P),a.isVertical()){wt(P);const{clientX:E,clientY:I}=P.touches[0],O=document.elementFromPoint(E,I);if(O){const{index:L}=O.dataset;L&&D!==L&&(D=L,C(O))}}},M=()=>T("div",{ref:s,class:Bf("sidebar"),style:d.value,onClick:k,onTouchstartPassive:a.start},[w()]);return ot({scrollTo:x}),qt("touchmove",R,{target:s}),()=>{var P;return T("div",{ref:n,class:Bf()},[t.teleport?T(xa,{to:t.teleport},{default:()=>[M()]}):M(),(P=i.default)==null?void 0:P.call(i)])}}});const[P8,O8]=we("index-anchor"),R8={index:Ce};var M8=Te({name:P8,props:R8,setup(t,{slots:e}){const i=Mt({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),n=oe(),{parent:s}=bi(bS);if(!s)return;const r=()=>i.active&&s.props.sticky,a=re(()=>{const{zIndex:l,highlightColor:u}=s.props;if(r())return He(sr(l),{left:i.left?`${i.left}px`:void 0,width:i.width?`${i.width}px`:void 0,transform:i.top?`translate3d(0, ${i.top}px, 0)`:void 0,color:u})});return ot({state:i,getRect:(l,u)=>{const c=ft(n);return i.rect.height=c.height,l===window||l===document.body?i.rect.top=c.top+la():i.rect.top=c.top+Qs(l)-u.top,i.rect}}),()=>{const l=r();return T("div",{ref:n,style:{height:l?`${i.rect.height}px`:void 0}},[T("div",{style:a.value,class:[O8({sticky:l}),{[cg]:l}]},[e.default?e.default():t.index])])}}});const L8=Ee(M8),B8=Ee(I8),[N8,$a,F8]=we("list"),$8={error:Boolean,offset:Ne(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:De("down"),loadingText:String,finishedText:String,immediateCheck:be};var U8=Te({name:N8,props:$8,emits:["load","update:error","update:loading"],setup(t,{emit:e,slots:i}){const n=oe(t.loading),s=oe(),r=oe(),a=mB(),o=Bo(s),l=re(()=>t.scroller||o.value),u=()=>{et(()=>{if(n.value||t.finished||t.disabled||t.error||(a==null?void 0:a.value)===!1)return;const{direction:b}=t,g=+t.offset,_=ft(l);if(!_.height||ba(s))return;let w=!1;const x=ft(r);b==="up"?w=_.top-x.top<=g:w=x.bottom-_.bottom<=g,w&&(n.value=!0,e("update:loading",!0),e("load"))})},c=()=>{if(t.finished){const b=i.finished?i.finished():t.finishedText;if(b)return T("div",{class:$a("finished-text")},[b])}},d=()=>{e("update:error",!1),u()},f=()=>{if(t.error){const b=i.error?i.error():t.errorText;if(b)return T("div",{role:"button",class:$a("error-text"),tabindex:0,onClick:d},[b])}},p=()=>{if(n.value&&!t.finished&&!t.disabled)return T("div",{class:$a("loading")},[i.loading?i.loading():T(Jn,{class:$a("loading-icon")},{default:()=>[t.loadingText||F8("loading")]})])};return Re(()=>[t.loading,t.finished,t.error],u),a&&Re(a,b=>{b&&u()}),WT(()=>{n.value=t.loading}),Lt(()=>{t.immediateCheck&&u()}),ot({check:u}),qt("scroll",u,{target:l,passive:!0}),()=>{var b;const g=(b=i.default)==null?void 0:b.call(i),_=T("div",{ref:r,class:$a("placeholder")},null);return T("div",{ref:s,role:"feed",class:$a(),"aria-busy":n.value},[t.direction==="down"?g:_,p(),c(),f(),t.direction==="up"?g:_])}}});const z8=Ee(U8),[V8,Fs]=we("nav-bar"),H8={title:String,fixed:Boolean,zIndex:Ce,border:be,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:be};var q8=Te({name:V8,props:H8,emits:["clickLeft","clickRight"],setup(t,{emit:e,slots:i}){const n=oe(),s=Jd(n,Fs),r=c=>{t.leftDisabled||e("clickLeft",c)},a=c=>{t.rightDisabled||e("clickRight",c)},o=()=>i.left?i.left():[t.leftArrow&&T(Qe,{class:Fs("arrow"),name:"arrow-left"},null),t.leftText&&T("span",{class:Fs("text")},[t.leftText])],l=()=>i.right?i.right():T("span",{class:Fs("text")},[t.rightText]),u=()=>{const{title:c,fixed:d,border:f,zIndex:p}=t,b=sr(p),g=t.leftArrow||t.leftText||i.left,_=t.rightText||i.right;return T("div",{ref:n,style:b,class:[Fs({fixed:d}),{[cg]:f,"van-safe-area-top":t.safeAreaInsetTop}]},[T("div",{class:Fs("content")},[g&&T("div",{class:[Fs("left",{disabled:t.leftDisabled}),t.clickable&&!t.leftDisabled?Ai:""],onClick:r},[o()]),T("div",{class:[Fs("title"),"van-ellipsis"]},[i.title?i.title():c]),_&&T("div",{class:[Fs("right",{disabled:t.rightDisabled}),t.clickable&&!t.rightDisabled?Ai:""],onClick:a},[l()])])])};return()=>t.fixed&&t.placeholder?s(u):u()}});const j8=Ee(q8),[W8,gl]=we("notice-bar"),G8={text:String,mode:String,color:String,delay:Ne(1),speed:Ne(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var X8=Te({name:W8,props:G8,emits:["close","replay"],setup(t,{emit:e,slots:i}){let n=0,s=0,r;const a=oe(),o=oe(),l=Mt({show:!0,offset:0,duration:0}),u=()=>{if(i["left-icon"])return i["left-icon"]();if(t.leftIcon)return T(Qe,{class:gl("left-icon"),name:t.leftIcon},null)},c=()=>{if(t.mode==="closeable")return"cross";if(t.mode==="link")return"arrow"},d=_=>{t.mode==="closeable"&&(l.show=!1,e("close",_))},f=()=>{if(i["right-icon"])return i["right-icon"]();const _=c();if(_)return T(Qe,{name:_,class:gl("right-icon"),onClick:d},null)},p=()=>{l.offset=n,l.duration=0,Ci(()=>{Dr(()=>{l.offset=-s,l.duration=(s+n)/+t.speed,e("replay")})})},b=()=>{const _=t.scrollable===!1&&!t.wrapable,w={transform:l.offset?`translateX(${l.offset}px)`:"",transitionDuration:`${l.duration}s`};return T("div",{ref:a,role:"marquee",class:gl("wrap")},[T("div",{ref:o,style:w,class:[gl("content"),{"van-ellipsis":_}],onTransitionend:p},[i.default?i.default():t.text])])},g=()=>{const{delay:_,speed:w,scrollable:x}=t,C=ct(_)?+_*1e3:0;n=0,s=0,l.offset=0,l.duration=0,clearTimeout(r),r=setTimeout(()=>{if(!a.value||!o.value||x===!1)return;const k=ft(a).width,D=ft(o).width;(x||D>k)&&Dr(()=>{n=k,s=D,l.offset=-s,l.duration=s/+w})},C)};return Zd(g),Lo(g),qt("pageshow",g),ot({reset:g}),Re(()=>[t.text,t.scrollable],g),()=>{const{color:_,wrapable:w,background:x}=t;return ui(T("div",{role:"alert",class:gl({wrapable:w}),style:{color:_,background:x}},[u(),b(),f()]),[[yi,l.show]])}}});const K8=Ee(X8),[Y8,Q8]=we("notify"),Z8=["lockScroll","position","show","teleport","zIndex"],J8=He({},No,{type:De("danger"),color:String,message:Ce,position:De("top"),className:Rt,background:String,lockScroll:Boolean});var eF=Te({name:Y8,props:J8,emits:["update:show"],setup(t,{emit:e,slots:i}){const n=s=>e("update:show",s);return()=>T(es,nt({class:[Q8([t.type]),t.className],style:{color:t.color,background:t.background},overlay:!1,duration:.2,"onUpdate:show":n},dt(t,Z8)),{default:()=>[i.default?i.default():t.message]})}});const tF=Ee(eF),[iF,jl]=we("key"),nF=T("svg",{class:jl("collapse-icon"),viewBox:"0 0 30 24"},[T("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),sF=T("svg",{class:jl("delete-icon"),viewBox:"0 0 32 22"},[T("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var Nf=Te({name:iF,props:{type:String,text:Ce,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(t,{emit:e,slots:i}){const n=oe(!1),s=Sn(),r=u=>{s.start(u),n.value=!0},a=u=>{s.move(u),s.direction.value&&(n.value=!1)},o=u=>{n.value&&(i.default||wt(u),n.value=!1,e("press",t.text,t.type))},l=()=>{if(t.loading)return T(Jn,{class:jl("loading-icon")},null);const u=i.default?i.default():t.text;switch(t.type){case"delete":return u||sF;case"extra":return u||nF;default:return u}};return()=>T("div",{class:jl("wrapper",{wider:t.wider}),onTouchstartPassive:r,onTouchmovePassive:a,onTouchend:o,onTouchcancel:o},[T("div",{role:"button",tabindex:0,class:jl([t.color,{large:t.large,active:n.value,delete:t.type==="delete"}])},[l()])])}});const[rF,fr]=we("number-keyboard"),aF={show:Boolean,title:String,theme:De("default"),zIndex:Ce,teleport:[String,Object],maxlength:Ne(1/0),modelValue:De(""),transition:be,blurOnClose:be,showDeleteKey:be,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:be,safeAreaInsetBottom:be,extraKey:{type:[String,Array],default:""}};function oF(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}var lF=Te({name:rF,inheritAttrs:!1,props:aF,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(t,{emit:e,slots:i,attrs:n}){const s=oe(),r=()=>{const _=Array(9).fill("").map((w,x)=>({text:x+1}));return t.randomKeyOrder&&oF(_),_},a=()=>[...r(),{text:t.extraKey,type:"extra"},{text:0},{text:t.showDeleteKey?t.deleteButtonText:"",type:t.showDeleteKey?"delete":""}],o=()=>{const _=r(),{extraKey:w}=t,x=Array.isArray(w)?w:[w];return x.length===0?_.push({text:0,wider:!0}):x.length===1?_.push({text:0,wider:!0},{text:x[0],type:"extra"}):x.length===2&&_.push({text:x[0],type:"extra"},{text:0},{text:x[1],type:"extra"}),_},l=re(()=>t.theme==="custom"?o():a()),u=()=>{t.show&&e("blur")},c=()=>{e("close"),t.blurOnClose&&u()},d=()=>e(t.show?"show":"hide"),f=(_,w)=>{if(_===""){w==="extra"&&u();return}const x=t.modelValue;w==="delete"?(e("delete"),e("update:modelValue",x.slice(0,x.length-1))):w==="close"?c():x.length<+t.maxlength&&(e("input",_),e("update:modelValue",x+_))},p=()=>{const{title:_,theme:w,closeButtonText:x}=t,C=i["title-left"],k=x&&w==="default";if(_||k||C)return T("div",{class:fr("header")},[C&&T("span",{class:fr("title-left")},[C()]),_&&T("h2",{class:fr("title")},[_]),k&&T("button",{type:"button",class:[fr("close"),Ai],onClick:c},[x])])},b=()=>l.value.map(_=>{const w={};return _.type==="delete"&&(w.default=i.delete),_.type==="extra"&&(w.default=i["extra-key"]),T(Nf,{key:_.text,text:_.text,type:_.type,wider:_.wider,color:_.color,onPress:f},w)}),g=()=>{if(t.theme==="custom")return T("div",{class:fr("sidebar")},[t.showDeleteKey&&T(Nf,{large:!0,text:t.deleteButtonText,type:"delete",onPress:f},{default:i.delete}),T(Nf,{large:!0,text:t.closeButtonText,type:"close",color:"blue",loading:t.closeButtonLoading,onPress:f},null)])};return Re(()=>t.show,_=>{t.transition||e(_?"show":"hide")}),t.hideOnClickOutside&&Yd(s,u,{eventName:"touchstart"}),()=>{const _=p(),w=T(Hd,{name:t.transition?"van-slide-up":""},{default:()=>[ui(T("div",nt({ref:s,style:sr(t.zIndex),class:fr({unfit:!t.safeAreaInsetBottom,"with-title":!!_}),onAnimationend:d,onTouchstartPassive:lg},n),[_,T("div",{class:fr("body")},[T("div",{class:fr("keys")},[b()]),g()])]),[[yi,t.show]])]});return t.teleport?T(xa,{to:t.teleport},{default:()=>[w]}):w}}});const uF=Ee(lF),[cF,Ua,db]=we("pagination"),Ff=(t,e,i)=>({number:t,text:e,active:i}),dF={mode:De("multi"),prevText:String,nextText:String,pageCount:Ne(0),modelValue:Jt(0),totalItems:Ne(0),showPageSize:Ne(5),itemsPerPage:Ne(10),forceEllipses:Boolean,showPrevButton:be,showNextButton:be};var hF=Te({name:cF,props:dF,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const n=re(()=>{const{pageCount:c,totalItems:d,itemsPerPage:f}=t,p=+c||Math.ceil(+d/+f);return Math.max(1,p)}),s=re(()=>{const c=[],d=n.value,f=+t.showPageSize,{modelValue:p,forceEllipses:b}=t;let g=1,_=d;const w=f<d;w&&(g=Math.max(p-Math.floor(f/2),1),_=g+f-1,_>d&&(_=d,g=_-f+1));for(let x=g;x<=_;x++){const C=Ff(x,x,x===p);c.push(C)}if(w&&f>0&&b){if(g>1){const x=Ff(g-1,"...");c.unshift(x)}if(_<d){const x=Ff(_+1,"...");c.push(x)}}return c}),r=(c,d)=>{c=si(c,1,n.value),t.modelValue!==c&&(e("update:modelValue",c),d&&e("change",c))};Mo(()=>r(t.modelValue));const a=()=>T("li",{class:Ua("page-desc")},[i.pageDesc?i.pageDesc():`${t.modelValue}/${n.value}`]),o=()=>{const{mode:c,modelValue:d,showPrevButton:f}=t;if(!f)return;const p=i["prev-text"],b=d===1;return T("li",{class:[Ua("item",{disabled:b,border:c==="simple",prev:!0}),Hl]},[T("button",{type:"button",disabled:b,onClick:()=>r(d-1,!0)},[p?p():t.prevText||db("prev")])])},l=()=>{const{mode:c,modelValue:d,showNextButton:f}=t;if(!f)return;const p=i["next-text"],b=d===n.value;return T("li",{class:[Ua("item",{disabled:b,border:c==="simple",next:!0}),Hl]},[T("button",{type:"button",disabled:b,onClick:()=>r(d+1,!0)},[p?p():t.nextText||db("next")])])},u=()=>s.value.map(c=>T("li",{class:[Ua("item",{active:c.active,page:!0}),Hl]},[T("button",{type:"button","aria-current":c.active||void 0,onClick:()=>r(c.number,!0)},[i.page?i.page(c):c.text])]));return()=>T("nav",{role:"navigation",class:Ua()},[T("ul",{class:Ua("items")},[o(),t.mode==="simple"?a():u(),l()])])}});const fF=Ee(hF),[pF,yl]=we("password-input"),mF={info:String,mask:be,value:De(""),gutter:Ce,length:Ne(6),focused:Boolean,errorInfo:String};var gF=Te({name:pF,props:mF,emits:["focus"],setup(t,{emit:e}){const i=s=>{s.stopPropagation(),e("focus",s)},n=()=>{const s=[],{mask:r,value:a,gutter:o,focused:l}=t,u=+t.length;for(let c=0;c<u;c++){const d=a[c],f=c!==0&&!o,p=l&&c===a.length;let b;c!==0&&o&&(b={marginLeft:Ye(o)}),s.push(T("li",{class:[{[y1]:f},yl("item",{focus:p})],style:b},[r?T("i",{style:{visibility:d?"visible":"hidden"}},null):d,p&&T("div",{class:yl("cursor")},null)]))}return s};return()=>{const s=t.errorInfo||t.info;return T("div",{class:yl()},[T("ul",{class:[yl("security"),{[Hl]:!t.gutter}],onTouchstartPassive:i},[n()]),s&&T("div",{class:yl(t.errorInfo?"error-info":"info")},[s])])}}});const yF=Ee(gF),vF=Ee(CB);function is(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Eg(t){var e=is(t).Element;return t instanceof e||t instanceof Element}function Hn(t){var e=is(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function _S(t){if(typeof ShadowRoot>"u")return!1;var e=is(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var xo=Math.round;function sm(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function bF(){return!/^((?!chrome|android).)*safari/i.test(sm())}function ld(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var n=t.getBoundingClientRect(),s=1,r=1;e&&Hn(t)&&(s=t.offsetWidth>0&&xo(n.width)/t.offsetWidth||1,r=t.offsetHeight>0&&xo(n.height)/t.offsetHeight||1);var a=Eg(t)?is(t):window,o=a.visualViewport,l=!bF()&&i,u=(n.left+(l&&o?o.offsetLeft:0))/s,c=(n.top+(l&&o?o.offsetTop:0))/r,d=n.width/s,f=n.height/r;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function TS(t){var e=is(t),i=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:i,scrollTop:n}}function _F(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function TF(t){return t===is(t)||!Hn(t)?TS(t):_F(t)}function Zs(t){return t?(t.nodeName||"").toLowerCase():null}function oh(t){return((Eg(t)?t.ownerDocument:t.document)||window.document).documentElement}function xF(t){return ld(oh(t)).left+TS(t).scrollLeft}function Js(t){return is(t).getComputedStyle(t)}function Dg(t){var e=Js(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function SF(t){var e=t.getBoundingClientRect(),i=xo(e.width)/t.offsetWidth||1,n=xo(e.height)/t.offsetHeight||1;return i!==1||n!==1}function wF(t,e,i){i===void 0&&(i=!1);var n=Hn(e),s=Hn(e)&&SF(e),r=oh(e),a=ld(t,s,i),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!i)&&((Zs(e)!=="body"||Dg(r))&&(o=TF(e)),Hn(e)?(l=ld(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=xF(r))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function CF(t){var e=ld(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function kg(t){return Zs(t)==="html"?t:t.assignedSlot||t.parentNode||(_S(t)?t.host:null)||oh(t)}function xS(t){return["html","body","#document"].indexOf(Zs(t))>=0?t.ownerDocument.body:Hn(t)&&Dg(t)?t:xS(kg(t))}function Hc(t,e){var i;e===void 0&&(e=[]);var n=xS(t),s=n===((i=t.ownerDocument)==null?void 0:i.body),r=is(n),a=s?[r].concat(r.visualViewport||[],Dg(n)?n:[]):n,o=e.concat(a);return s?o:o.concat(Hc(kg(a)))}function EF(t){return["table","td","th"].indexOf(Zs(t))>=0}function hb(t){return!Hn(t)||Js(t).position==="fixed"?null:t.offsetParent}function DF(t){var e=/firefox/i.test(sm()),i=/Trident/i.test(sm());if(i&&Hn(t)){var n=Js(t);if(n.position==="fixed")return null}var s=kg(t);for(_S(s)&&(s=s.host);Hn(s)&&["html","body"].indexOf(Zs(s))<0;){var r=Js(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function SS(t){for(var e=is(t),i=hb(t);i&&EF(i)&&Js(i).position==="static";)i=hb(i);return i&&(Zs(i)==="html"||Zs(i)==="body"&&Js(i).position==="static")?e:i||DF(t)||e}var so="top",ud="bottom",pu="right",ua="left",wS="auto",kF=[so,ud,pu,ua],CS="start",cd="end",AF=[].concat(kF,[wS]).reduce(function(t,e){return t.concat([e,e+"-"+CS,e+"-"+cd])},[]),IF="beforeRead",PF="read",OF="afterRead",RF="beforeMain",MF="main",LF="afterMain",BF="beforeWrite",NF="write",FF="afterWrite",rm=[IF,PF,OF,RF,MF,LF,BF,NF,FF];function $F(t){var e=new Map,i=new Set,n=[];t.forEach(function(r){e.set(r.name,r)});function s(r){i.add(r.name);var a=[].concat(r.requires||[],r.requiresIfExists||[]);a.forEach(function(o){if(!i.has(o)){var l=e.get(o);l&&s(l)}}),n.push(r)}return t.forEach(function(r){i.has(r.name)||s(r)}),n}function UF(t){var e=$F(t);return rm.reduce(function(i,n){return i.concat(e.filter(function(s){return s.phase===n}))},[])}function zF(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function pr(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return[].concat(i).reduce(function(s,r){return s.replace(/%s/,r)},t)}var Yr='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',VF='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',fb=["name","enabled","phase","fn","effect","requires","options"];function HF(t){t.forEach(function(e){[].concat(Object.keys(e),fb).filter(function(i,n,s){return s.indexOf(i)===n}).forEach(function(i){switch(i){case"name":typeof e.name!="string"&&console.error(pr(Yr,String(e.name),'"name"','"string"','"'+String(e.name)+'"'));break;case"enabled":typeof e.enabled!="boolean"&&console.error(pr(Yr,e.name,'"enabled"','"boolean"','"'+String(e.enabled)+'"'));break;case"phase":rm.indexOf(e.phase)<0&&console.error(pr(Yr,e.name,'"phase"',"either "+rm.join(", "),'"'+String(e.phase)+'"'));break;case"fn":typeof e.fn!="function"&&console.error(pr(Yr,e.name,'"fn"','"function"','"'+String(e.fn)+'"'));break;case"effect":e.effect!=null&&typeof e.effect!="function"&&console.error(pr(Yr,e.name,'"effect"','"function"','"'+String(e.fn)+'"'));break;case"requires":e.requires!=null&&!Array.isArray(e.requires)&&console.error(pr(Yr,e.name,'"requires"','"array"','"'+String(e.requires)+'"'));break;case"requiresIfExists":Array.isArray(e.requiresIfExists)||console.error(pr(Yr,e.name,'"requiresIfExists"','"array"','"'+String(e.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+e.name+'" modifier, valid properties are '+fb.map(function(n){return'"'+n+'"'}).join(", ")+'; but "'+i+'" was provided.')}e.requires&&e.requires.forEach(function(n){t.find(function(s){return s.name===n})==null&&console.error(pr(VF,String(e.name),n,n))})})})}function qF(t,e){var i=new Set;return t.filter(function(n){var s=e(n);if(!i.has(s))return i.add(s),!0})}function lh(t){return t.split("-")[0]}function jF(t){var e=t.reduce(function(i,n){var s=i[n.name];return i[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,i},{});return Object.keys(e).map(function(i){return e[i]})}function ES(t){return t.split("-")[1]}function WF(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function GF(t){var e=t.reference,i=t.element,n=t.placement,s=n?lh(n):null,r=n?ES(n):null,a=e.x+e.width/2-i.width/2,o=e.y+e.height/2-i.height/2,l;switch(s){case so:l={x:a,y:e.y-i.height};break;case ud:l={x:a,y:e.y+e.height};break;case pu:l={x:e.x+e.width,y:o};break;case ua:l={x:e.x-i.width,y:o};break;default:l={x:e.x,y:e.y}}var u=s?WF(s):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case CS:l[u]=l[u]-(e[c]/2-i[c]/2);break;case cd:l[u]=l[u]+(e[c]/2-i[c]/2);break}}return l}var pb="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",XF="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",mb={placement:"bottom",modifiers:[],strategy:"absolute"};function gb(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function KF(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,n=i===void 0?[]:i,s=e.defaultOptions,r=s===void 0?mb:s;return function(o,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},mb,r),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:c,setOptions:function(w){var x=typeof w=="function"?w(c.options):w;g(),c.options=Object.assign({},r,c.options,x),c.scrollParents={reference:Eg(o)?Hc(o):o.contextElement?Hc(o.contextElement):[],popper:Hc(l)};var C=UF(jF([].concat(n,c.options.modifiers)));c.orderedModifiers=C.filter(function(O){return O.enabled});{var k=qF([].concat(C,c.options.modifiers),function(O){var L=O.name;return L});if(HF(k),lh(c.options.placement)===wS){var D=c.orderedModifiers.find(function(O){var L=O.name;return L==="flip"});D||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var R=Js(l),M=R.marginTop,P=R.marginRight,E=R.marginBottom,I=R.marginLeft;[M,P,E,I].some(function(O){return parseFloat(O)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return b(),p.update()},forceUpdate:function(){if(!f){var w=c.elements,x=w.reference,C=w.popper;if(!gb(x,C)){console.error(pb);return}c.rects={reference:wF(x,SS(C),c.options.strategy==="fixed"),popper:CF(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var k=0,D=0;D<c.orderedModifiers.length;D++){if(k+=1,k>100){console.error(XF);break}if(c.reset===!0){c.reset=!1,D=-1;continue}var R=c.orderedModifiers[D],M=R.fn,P=R.options,E=P===void 0?{}:P,I=R.name;typeof M=="function"&&(c=M({state:c,options:E,name:I,instance:p})||c)}}},update:zF(function(){return new Promise(function(_){p.forceUpdate(),_(c)})}),destroy:function(){g(),f=!0}};if(!gb(o,l))return console.error(pb),p;p.setOptions(u).then(function(_){!f&&u.onFirstUpdate&&u.onFirstUpdate(_)});function b(){c.orderedModifiers.forEach(function(_){var w=_.name,x=_.options,C=x===void 0?{}:x,k=_.effect;if(typeof k=="function"){var D=k({state:c,name:w,instance:p,options:C}),R=function(){};d.push(D||R)}})}function g(){d.forEach(function(_){return _()}),d=[]}return p}}var Cc={passive:!0};function YF(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,r=s===void 0?!0:s,a=n.resize,o=a===void 0?!0:a,l=is(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",i.update,Cc)}),o&&l.addEventListener("resize",i.update,Cc),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",i.update,Cc)}),o&&l.removeEventListener("resize",i.update,Cc)}}var QF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:YF,data:{}};function ZF(t){var e=t.state,i=t.name;e.modifiersData[i]=GF({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var JF={name:"popperOffsets",enabled:!0,phase:"read",fn:ZF,data:{}},e6={top:"auto",right:"auto",bottom:"auto",left:"auto"};function t6(t){var e=t.x,i=t.y,n=window,s=n.devicePixelRatio||1;return{x:xo(e*s)/s||0,y:xo(i*s)/s||0}}function yb(t){var e,i=t.popper,n=t.popperRect,s=t.placement,r=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=a.x,p=f===void 0?0:f,b=a.y,g=b===void 0?0:b,_=typeof c=="function"?c({x:p,y:g}):{x:p,y:g};p=_.x,g=_.y;var w=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),C=ua,k=so,D=window;if(u){var R=SS(i),M="clientHeight",P="clientWidth";if(R===is(i)&&(R=oh(i),Js(R).position!=="static"&&o==="absolute"&&(M="scrollHeight",P="scrollWidth")),R=R,s===so||(s===ua||s===pu)&&r===cd){k=ud;var E=d&&R===D&&D.visualViewport?D.visualViewport.height:R[M];g-=E-n.height,g*=l?1:-1}if(s===ua||(s===so||s===ud)&&r===cd){C=pu;var I=d&&R===D&&D.visualViewport?D.visualViewport.width:R[P];p-=I-n.width,p*=l?1:-1}}var O=Object.assign({position:o},u&&e6),L=c===!0?t6({x:p,y:g}):{x:p,y:g};if(p=L.x,g=L.y,l){var F;return Object.assign({},O,(F={},F[k]=x?"0":"",F[C]=w?"0":"",F.transform=(D.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",F))}return Object.assign({},O,(e={},e[k]=x?g+"px":"",e[C]=w?p+"px":"",e.transform="",e))}function i6(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=n===void 0?!0:n,r=i.adaptive,a=r===void 0?!0:r,o=i.roundOffsets,l=o===void 0?!0:o;{var u=Js(e.elements.popper).transitionProperty||"";a&&["transform","top","right","bottom","left"].some(function(d){return u.indexOf(d)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var c={placement:lh(e.placement),variation:ES(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yb(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yb(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var n6={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:i6,data:{}};function s6(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var n=e.styles[i]||{},s=e.attributes[i]||{},r=e.elements[i];!Hn(r)||!Zs(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(a){var o=s[a];o===!1?r.removeAttribute(a):r.setAttribute(a,o===!0?"":o)}))})}function r6(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(n){var s=e.elements[n],r=e.attributes[n]||{},a=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:i[n]),o=a.reduce(function(l,u){return l[u]="",l},{});!Hn(s)||!Zs(s)||(Object.assign(s.style,o),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var a6={name:"applyStyles",enabled:!0,phase:"write",fn:s6,effect:r6,requires:["computeStyles"]},o6=[QF,JF,n6,a6],l6=KF({defaultModifiers:o6});function u6(t,e,i){var n=lh(t),s=[ua,so].indexOf(n)>=0?-1:1,r=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,a=r[0],o=r[1];return a=a||0,o=(o||0)*s,[ua,pu].indexOf(n)>=0?{x:o,y:a}:{x:a,y:o}}function c6(t){var e=t.state,i=t.options,n=t.name,s=i.offset,r=s===void 0?[0,0]:s,a=AF.reduce(function(c,d){return c[d]=u6(d,e.rects,r),c},{}),o=a[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=a}var d6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:c6};const[h6,Qr]=we("popover"),f6=["overlay","duration","teleport","overlayStyle","overlayClass","closeOnClickOverlay"],p6={show:Boolean,theme:De("light"),overlay:Boolean,actions:At(),actionsDirection:De("vertical"),trigger:De("click"),duration:Ce,showArrow:be,placement:De("bottom"),iconPrefix:String,overlayClass:Rt,overlayStyle:Object,closeOnClickAction:be,closeOnClickOverlay:be,closeOnClickOutside:be,offset:{type:Array,default:()=>[0,8]},teleport:{type:[String,Object],default:"body"}};var m6=Te({name:h6,props:p6,emits:["select","touchstart","update:show"],setup(t,{emit:e,slots:i,attrs:n}){let s;const r=oe(),a=oe(),o=oe(),l=pg(()=>t.show,x=>e("update:show",x)),u=()=>({placement:t.placement,modifiers:[{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},He({},d6,{options:{offset:t.offset}})]}),c=()=>a.value&&o.value?l6(a.value,o.value.popupRef.value,u()):null,d=()=>{et(()=>{l.value&&(s?s.setOptions(u()):(s=c(),_n&&(window.addEventListener("animationend",d),window.addEventListener("transitionend",d))))})},f=x=>{l.value=x},p=()=>{t.trigger==="click"&&(l.value=!l.value)},b=(x,C)=>{x.disabled||(e("select",x,C),t.closeOnClickAction&&(l.value=!1))},g=()=>{l.value&&t.closeOnClickOutside&&(!t.overlay||t.closeOnClickOverlay)&&(l.value=!1)},_=(x,C)=>i.action?i.action({action:x,index:C}):[x.icon&&T(Qe,{name:x.icon,classPrefix:t.iconPrefix,class:Qr("action-icon")},null),T("div",{class:[Qr("action-text"),{[cg]:t.actionsDirection==="vertical"}]},[x.text])],w=(x,C)=>{const{icon:k,color:D,disabled:R,className:M}=x;return T("div",{role:"menuitem",class:[Qr("action",{disabled:R,"with-icon":k}),{[JL]:t.actionsDirection==="horizontal"},M],style:{color:D},tabindex:R?void 0:0,"aria-disabled":R||void 0,onClick:()=>b(x,C)},[_(x,C)])};return Lt(()=>{d(),Mo(()=>{var x;r.value=(x=o.value)==null?void 0:x.popupRef.value})}),Qn(()=>{s&&(_n&&(window.removeEventListener("animationend",d),window.removeEventListener("transitionend",d)),s.destroy(),s=null)}),Re(()=>[l.value,t.offset,t.placement],d),Yd([a,r],g,{eventName:"touchstart"}),()=>{var x;return T(zt,null,[T("span",{ref:a,class:Qr("wrapper"),onClick:p},[(x=i.reference)==null?void 0:x.call(i)]),T(es,nt({ref:o,show:l.value,class:Qr([t.theme]),position:"",transition:"van-popover-zoom",lockScroll:!1,"onUpdate:show":f},n,od(),dt(t,f6)),{default:()=>[t.showArrow&&T("div",{class:Qr("arrow")},null),T("div",{role:"menu",class:Qr("content",t.actionsDirection)},[i.default?i.default():t.actions.map(w)])]})])}}});const g6=Ee(m6),[y6,$f]=we("progress"),v6={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:be,pivotColor:String,trackColor:String,strokeWidth:Ce,percentage:{type:Ce,default:0,validator:t=>+t>=0&&+t<=100}};var b6=Te({name:y6,props:v6,setup(t){const e=re(()=>t.inactive?void 0:t.color),i=()=>{const{textColor:n,pivotText:s,pivotColor:r,percentage:a}=t,o=s??`${a}%`;if(t.showPivot&&o){const l={color:n,left:`${+a}%`,transform:`translate(-${+a}%,-50%)`,background:r||e.value};return T("span",{style:l,class:$f("pivot",{inactive:t.inactive})},[o])}};return()=>{const{trackColor:n,percentage:s,strokeWidth:r}=t,a={background:n,height:Ye(r)},o={width:`${s}%`,background:e.value};return T("div",{class:$f(),style:a},[T("span",{class:$f("portion",{inactive:t.inactive}),style:o},null),i()])}}});const _6=Ee(b6),[T6,vl,x6]=we("pull-refresh"),DS=50,S6=["pulling","loosing","success"],w6={disabled:Boolean,modelValue:Boolean,headHeight:Ne(DS),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:Ce,successDuration:Ne(500),animationDuration:Ne(300)};var C6=Te({name:T6,props:w6,emits:["change","refresh","update:modelValue"],setup(t,{emit:e,slots:i}){let n;const s=oe(),r=oe(),a=Bo(s),o=Mt({status:"normal",distance:0,duration:0}),l=Sn(),u=()=>{if(t.headHeight!==DS)return{height:`${t.headHeight}px`}},c=()=>o.status!=="loading"&&o.status!=="success"&&!t.disabled,d=k=>{const D=+(t.pullDistance||t.headHeight);return k>D&&(k<D*2?k=D+(k-D)/2:k=D*1.5+(k-D*2)/4),Math.round(k)},f=(k,D)=>{const R=+(t.pullDistance||t.headHeight);o.distance=k,D?o.status="loading":k===0?o.status="normal":k<R?o.status="pulling":o.status="loosing",e("change",{status:o.status,distance:k})},p=()=>{const{status:k}=o;return k==="normal"?"":t[`${k}Text`]||x6(k)},b=()=>{const{status:k,distance:D}=o;if(i[k])return i[k]({distance:D});const R=[];return S6.includes(k)&&R.push(T("div",{class:vl("text")},[p()])),k==="loading"&&R.push(T(Jn,{class:vl("loading")},{default:p})),R},g=()=>{o.status="success",setTimeout(()=>{f(0)},+t.successDuration)},_=k=>{n=Qs(a.value)===0,n&&(o.duration=0,l.start(k))},w=k=>{c()&&_(k)},x=k=>{if(c()){n||_(k);const{deltaY:D}=l;l.move(k),n&&D.value>=0&&l.isVertical()&&(wt(k),f(d(D.value)))}},C=()=>{n&&l.deltaY.value&&c()&&(o.duration=+t.animationDuration,o.status==="loosing"?(f(+t.headHeight,!0),e("update:modelValue",!0),et(()=>e("refresh"))):f(0))};return Re(()=>t.modelValue,k=>{o.duration=+t.animationDuration,k?f(+t.headHeight,!0):i.success||t.successText?g():f(0,!1)}),qt("touchmove",x,{target:r}),()=>{var k;const D={transitionDuration:`${o.duration}ms`,transform:o.distance?`translate3d(0,${o.distance}px, 0)`:""};return T("div",{ref:s,class:vl()},[T("div",{ref:r,class:vl("track"),style:D,onTouchstartPassive:w,onTouchend:C,onTouchcancel:C},[T("div",{class:vl("head"),style:u()},[b()]),(k=i.default)==null?void 0:k.call(i)])])}}});const E6=Ee(C6),[D6,Ec]=we("rate");function k6(t,e,i,n){return t>=e?{status:"full",value:1}:t+.5>=e&&i&&!n?{status:"half",value:.5}:t+1>=e&&i&&n?{status:"half",value:Math.round((t-e+1)*1e10)/1e10}:{status:"void",value:0}}const A6={size:Ce,icon:De("star"),color:String,count:Ne(5),gutter:Ce,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:De("star-o"),allowHalf:Boolean,voidColor:String,touchable:be,iconPrefix:String,modelValue:Jt(0),disabledColor:String};var I6=Te({name:D6,props:A6,emits:["change","update:modelValue"],setup(t,{emit:e}){const i=Sn(),[n,s]=Cu(),r=oe(),a=re(()=>t.readonly||t.disabled),o=re(()=>a.value||!t.touchable),l=re(()=>Array(+t.count).fill("").map((C,k)=>k6(t.modelValue,k+1,t.allowHalf,t.readonly)));let u,c,d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;const p=()=>{c=ft(r);const C=n.value.map(ft);u=[],C.forEach((k,D)=>{d=Math.min(k.top,d),f=Math.max(k.top,f),t.allowHalf?u.push({score:D+.5,left:k.left,top:k.top,height:k.height},{score:D+1,left:k.left+k.width/2,top:k.top,height:k.height}):u.push({score:D+1,left:k.left,top:k.top,height:k.height})})},b=(C,k)=>{for(let D=u.length-1;D>0;D--)if(k>=c.top&&k<=c.bottom){if(C>u[D].left&&k>=u[D].top&&k<=u[D].top+u[D].height)return u[D].score}else{const R=k<c.top?d:f;if(C>u[D].left&&u[D].top===R)return u[D].score}return t.allowHalf?.5:1},g=C=>{a.value||C===t.modelValue||(e("update:modelValue",C),e("change",C))},_=C=>{o.value||(i.start(C),p())},w=C=>{if(!o.value&&(i.move(C),i.isHorizontal()&&!i.isTap.value)){const{clientX:k,clientY:D}=C.touches[0];wt(C),g(b(k,D))}},x=(C,k)=>{const{icon:D,size:R,color:M,count:P,gutter:E,voidIcon:I,disabled:O,voidColor:L,allowHalf:F,iconPrefix:X,disabledColor:ee}=t,K=k+1,Y=C.status==="full",Z=C.status==="void",le=F&&C.value>0&&C.value<1;let he;E&&K!==+P&&(he={paddingRight:Ye(E)});const te=ie=>{p();let fe=F?b(ie.clientX,ie.clientY):K;t.clearable&&i.isTap.value&&fe===t.modelValue&&(fe=0),g(fe)};return T("div",{key:k,ref:s(k),role:"radio",style:he,class:Ec("item"),tabindex:O?void 0:0,"aria-setsize":P,"aria-posinset":K,"aria-checked":!Z,onClick:te},[T(Qe,{size:R,name:Y?D:I,class:Ec("icon",{disabled:O,full:Y}),color:O?ee:Y?M:L,classPrefix:X},null),le&&T(Qe,{size:R,style:{width:C.value+"em"},name:Z?I:D,class:Ec("icon",["half",{disabled:O,full:!Z}]),color:O?ee:Z?L:M,classPrefix:X},null)])};return Fr(()=>t.modelValue),qt("touchmove",w,{target:r}),()=>T("div",{ref:r,role:"radiogroup",class:Ec({readonly:t.readonly,disabled:t.disabled}),tabindex:t.disabled?void 0:0,"aria-disabled":t.disabled,"aria-readonly":t.readonly,onTouchstartPassive:_},[l.value.map(x)])}});const P6=Ee(I6),O6={figureArr:At(),delay:Number,duration:Jt(2),isStart:Boolean,direction:De("down"),height:Jt(40)},[R6,Uf]=we("rolling-text-item");var M6=Te({name:R6,props:O6,setup(t){const e=re(()=>t.direction==="down"?t.figureArr.slice().reverse():t.figureArr),i=re(()=>`-${t.height*(t.figureArr.length-1)}px`),n=re(()=>({lineHeight:Ye(t.height)})),s=re(()=>({height:Ye(t.height),"--van-translate":i.value,"--van-duration":t.duration+"s","--van-delay":t.delay+"s"}));return()=>T("div",{class:Uf([t.direction]),style:s.value},[T("div",{class:Uf("box",{animate:t.isStart})},[Array.isArray(e.value)&&e.value.map(r=>T("div",{class:Uf("item"),style:n.value},[r]))])])}});const[L6,B6]=we("rolling-text"),N6={startNum:Jt(0),targetNum:Number,textList:At(),duration:Jt(2),autoStart:be,direction:De("down"),stopOrder:De("ltr"),height:Jt(40)},F6=2;var $6=Te({name:L6,props:N6,setup(t){const e=re(()=>Array.isArray(t.textList)&&t.textList.length),i=re(()=>e.value?t.textList[0].length:`${Math.max(t.startNum,t.targetNum)}`.length),n=d=>{const f=[];for(let p=0;p<t.textList.length;p++)f.push(t.textList[p][d]);return f},s=re(()=>e.value?new Array(i.value).fill(""):Bn(t.targetNum,i.value).split("")),r=re(()=>Bn(t.startNum,i.value).split("")),a=d=>{const f=+r.value[d],p=+s.value[d],b=[];for(let g=f;g<=9;g++)b.push(g);for(let g=0;g<=F6;g++)for(let _=0;_<=9;_++)b.push(_);for(let g=0;g<=p;g++)b.push(g);return b},o=(d,f)=>t.stopOrder==="ltr"?.2*d:.2*(f-1-d),l=oe(t.autoStart),u=()=>{l.value=!0},c=()=>{l.value=!1,t.autoStart&&Ci(()=>u())};return Re(()=>t.autoStart,d=>{d&&u()}),ot({start:u,reset:c}),()=>T("div",{class:B6()},[s.value.map((d,f)=>T(M6,{figureArr:e.value?n(f):a(f),duration:t.duration,direction:t.direction,isStart:l.value,height:t.height,delay:o(f,i.value)},null))])}});const U6=Ee($6),z6=Ee(M5),[V6,bl,H6]=we("search"),q6=He({},vg,{label:String,shape:De("square"),leftIcon:De("search"),clearable:be,actionText:String,background:String,showAction:Boolean});var j6=Te({name:V6,props:q6,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:i,attrs:n}){const s=Fo(),r=oe(),a=()=>{i.action||(e("update:modelValue",""),e("cancel"))},o=D=>{D.keyCode===13&&(wt(D),e("search",t.modelValue))},l=()=>t.id||`${s}-input`,u=()=>{if(i.label||t.label)return T("label",{class:bl("label"),for:l(),"data-allow-mismatch":"attribute"},[i.label?i.label():t.label])},c=()=>{if(t.showAction){const D=t.actionText||H6("cancel");return T("div",{class:bl("action"),role:"button",tabindex:0,onClick:a},[i.action?i.action():D])}},d=()=>{var D;return(D=r.value)==null?void 0:D.blur()},f=()=>{var D;return(D=r.value)==null?void 0:D.focus()},p=D=>e("blur",D),b=D=>e("focus",D),g=D=>e("clear",D),_=D=>e("clickInput",D),w=D=>e("clickLeftIcon",D),x=D=>e("clickRightIcon",D),C=Object.keys(vg),k=()=>{const D=He({},n,dt(t,C),{id:l()}),R=M=>e("update:modelValue",M);return T(Xs,nt({ref:r,type:"search",class:bl("field",{"with-message":D.errorMessage}),border:!1,onBlur:p,onFocus:b,onClear:g,onKeypress:o,onClickInput:_,onClickLeftIcon:w,onClickRightIcon:x,"onUpdate:modelValue":R},D),dt(i,["left-icon","right-icon"]))};return ot({focus:f,blur:d}),()=>{var D;return T("div",{class:bl({"show-action":t.showAction}),style:{background:t.background}},[(D=i.left)==null?void 0:D.call(i),T("div",{class:bl("content",t.shape)},[u(),k()]),c()])}}});const W6=Ee(j6),G6=t=>t==null?void 0:t.includes("/"),X6=[...hg,"round","closeOnPopstate","safeAreaInsetBottom"],K6={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[Y6,Mn,Q6]=we("share-sheet"),Z6=He({},No,{title:String,round:be,options:At(),cancelText:String,description:String,closeOnPopstate:be,safeAreaInsetBottom:be});var J6=Te({name:Y6,props:Z6,emits:["cancel","select","update:show"],setup(t,{emit:e,slots:i}){const n=f=>e("update:show",f),s=()=>{n(!1),e("cancel")},r=(f,p)=>e("select",f,p),a=()=>{const f=i.title?i.title():t.title,p=i.description?i.description():t.description;if(f||p)return T("div",{class:Mn("header")},[f&&T("h2",{class:Mn("title")},[f]),p&&T("span",{class:Mn("description")},[p])])},o=f=>G6(f)?T("img",{src:f,class:Mn("image-icon")},null):T("div",{class:Mn("icon",[f])},[T(Qe,{name:K6[f]||f},null)]),l=(f,p)=>{const{name:b,icon:g,className:_,description:w}=f;return T("div",{role:"button",tabindex:0,class:[Mn("option"),_,Ai],onClick:()=>r(f,p)},[o(g),b&&T("span",{class:Mn("name")},[b]),w&&T("span",{class:Mn("option-description")},[w])])},u=(f,p)=>T("div",{class:Mn("options",{border:p})},[f.map(l)]),c=()=>{const{options:f}=t;return Array.isArray(f[0])?f.map((p,b)=>u(p,b!==0)):u(f)},d=()=>{var f;const p=(f=t.cancelText)!=null?f:Q6("cancel");if(i.cancel||p)return T("button",{type:"button",class:Mn("cancel"),onClick:s},[i.cancel?i.cancel():p])};return()=>T(es,nt({class:Mn(),position:"bottom","onUpdate:show":n},dt(t,X6)),{default:()=>[a(),c(),d()]})}});const e$=Ee(J6),[kS,t$]=we("sidebar"),AS=Symbol(kS),i$={modelValue:Ne(0)};var n$=Te({name:kS,props:i$,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const{linkChildren:n}=Pi(AS),s=()=>+t.modelValue;return n({getActive:s,setActive:a=>{a!==s()&&(e("update:modelValue",a),e("change",a))}}),()=>{var a;return T("div",{role:"tablist",class:t$()},[(a=i.default)==null?void 0:a.call(i)])}}});const IS=Ee(n$),[s$,vb]=we("sidebar-item"),r$=He({},Ur,{dot:Boolean,title:String,badge:Ce,disabled:Boolean,badgeProps:Object});var a$=Te({name:s$,props:r$,emits:["click"],setup(t,{emit:e,slots:i}){const n=Sa(),{parent:s,index:r}=bi(AS);if(!s)return;const a=()=>{t.disabled||(e("click",r.value),s.setActive(r.value),n())};return()=>{const{dot:o,badge:l,title:u,disabled:c}=t,d=r.value===s.getActive();return T("div",{role:"tab",class:vb({select:d,disabled:c}),tabindex:c?void 0:0,"aria-selected":d,onClick:a},[T(wa,nt({dot:o,class:vb("text"),content:l},t.badgeProps),{default:()=>[i.title?i.title():u]})])}}});const PS=Ee(a$),[o$,zf,bb]=we("signature"),l$={tips:String,type:De("png"),penColor:De("#000"),lineWidth:Jt(3),clearButtonText:String,backgroundColor:De(""),confirmButtonText:String},u$=()=>{var t;const e=document.createElement("canvas");return!!((t=e.getContext)!=null&&t.call(e,"2d"))};var c$=Te({name:o$,props:l$,emits:["submit","clear","start","end","signing"],setup(t,{emit:e,slots:i}){const n=oe(),s=oe(),r=re(()=>n.value?n.value.getContext("2d"):null),a=_n?u$():!0;let o=0,l=0,u;const c=()=>{if(!r.value)return!1;r.value.beginPath(),r.value.lineWidth=t.lineWidth,r.value.strokeStyle=t.penColor,u=ft(n),e("start")},d=C=>{if(!r.value)return!1;wt(C);const k=C.touches[0],D=k.clientX-((u==null?void 0:u.left)||0),R=k.clientY-((u==null?void 0:u.top)||0);r.value.lineCap="round",r.value.lineJoin="round",r.value.lineTo(D,R),r.value.stroke(),e("signing",C)},f=C=>{wt(C),e("end")},p=C=>{const k=document.createElement("canvas");if(k.width=C.width,k.height=C.height,t.backgroundColor){const D=k.getContext("2d");b(D)}return C.toDataURL()===k.toDataURL()},b=C=>{C&&t.backgroundColor&&(C.fillStyle=t.backgroundColor,C.fillRect(0,0,o,l))},g=()=>{var C,k;const D=n.value;if(!D)return;const M=p(D)?"":((k=(C={jpg:()=>D.toDataURL("image/jpeg",.8),jpeg:()=>D.toDataURL("image/jpeg",.8)})[t.type])==null?void 0:k.call(C))||D.toDataURL(`image/${t.type}`);e("submit",{image:M,canvas:D})},_=()=>{r.value&&(r.value.clearRect(0,0,o,l),r.value.closePath(),b(r.value)),e("clear")},w=()=>{var C,k,D;if(a&&n.value){const R=n.value,M=_n?window.devicePixelRatio:1;o=R.width=(((C=s.value)==null?void 0:C.offsetWidth)||0)*M,l=R.height=(((k=s.value)==null?void 0:k.offsetHeight)||0)*M,(D=r.value)==null||D.scale(M,M),b(r.value)}},x=()=>{if(r.value){const C=r.value.getImageData(0,0,o,l);w(),r.value.putImageData(C,0,0)}};return Re(Vn,x),Lt(w),ot({resize:x,clear:_,submit:g}),()=>T("div",{class:zf()},[T("div",{class:zf("content"),ref:s},[a?T("canvas",{ref:n,onTouchstartPassive:c,onTouchmove:d,onTouchend:f},null):i.tips?i.tips():T("p",null,[t.tips])]),T("div",{class:zf("footer")},[T(Ii,{size:"small",onClick:_},{default:()=>[t.clearButtonText||bb("clear")]}),T(Ii,{type:"primary",size:"small",onClick:g},{default:()=>[t.confirmButtonText||bb("confirm")]})])])}});const d$=Ee(c$),[h$,f$]=we("skeleton-title"),p$={round:Boolean,titleWidth:Ce};var m$=Te({name:h$,props:p$,setup(t){return()=>T("h3",{class:f$([{round:t.round}]),style:{width:Ye(t.titleWidth)}},null)}});const OS=Ee(m$);var g$=OS;const[y$,v$]=we("skeleton-avatar"),b$={avatarSize:Ce,avatarShape:De("round")};var _$=Te({name:y$,props:b$,setup(t){return()=>T("div",{class:v$([t.avatarShape]),style:nr(t.avatarSize)},null)}});const RS=Ee(_$);var T$=RS;const Ag="100%",x$={round:Boolean,rowWidth:{type:Ce,default:Ag}},[S$,w$]=we("skeleton-paragraph");var C$=Te({name:S$,props:x$,setup(t){return()=>T("div",{class:w$([{round:t.round}]),style:{width:t.rowWidth}},null)}});const MS=Ee(C$);var E$=MS;const[D$,_b]=we("skeleton"),k$="60%",A$={row:Ne(0),round:Boolean,title:Boolean,titleWidth:Ce,avatar:Boolean,avatarSize:Ce,avatarShape:De("round"),loading:be,animate:be,rowWidth:{type:[Number,String,Array],default:Ag}};var I$=Te({name:D$,inheritAttrs:!1,props:A$,setup(t,{slots:e,attrs:i}){const n=()=>{if(t.avatar)return T(T$,{avatarShape:t.avatarShape,avatarSize:t.avatarSize},null)},s=()=>{if(t.title)return T(g$,{round:t.round,titleWidth:t.titleWidth},null)},r=l=>{const{rowWidth:u}=t;return u===Ag&&l===+t.row-1?k$:Array.isArray(u)?u[l]:u},a=()=>Array(+t.row).fill("").map((l,u)=>T(E$,{key:u,round:t.round,rowWidth:Ye(r(u))},null)),o=()=>e.template?e.template():T(zt,null,[n(),T("div",{class:_b("content")},[s(),a()])]);return()=>{var l;return t.loading?T("div",nt({class:_b({animate:t.animate,round:t.round})},i),[o()]):(l=e.default)==null?void 0:l.call(e)}}});const P$=Ee(I$),[O$,Tb]=we("skeleton-image"),R$={imageSize:Ce,imageShape:De("square")};var M$=Te({name:O$,props:R$,setup(t){return()=>T("div",{class:Tb([t.imageShape]),style:nr(t.imageSize)},[T(Qe,{name:"photo",class:Tb("icon")},null)])}});const L$=Ee(M$),[B$,_l]=we("slider"),N$={min:Ne(0),max:Ne(100),step:Ne(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:Ce,buttonSize:Ce,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var F$=Te({name:B$,props:N$,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:e,slots:i}){let n,s,r;const a=oe(),o=[oe(),oe()],l=oe(),u=Sn(),c=re(()=>Number(t.max)-Number(t.min)),d=re(()=>{const O=t.vertical?"width":"height";return{background:t.inactiveColor,[O]:Ye(t.barHeight)}}),f=O=>t.range&&Array.isArray(O),p=()=>{const{modelValue:O,min:L}=t;return f(O)?`${(O[1]-O[0])*100/c.value}%`:`${(O-Number(L))*100/c.value}%`},b=()=>{const{modelValue:O,min:L}=t;return f(O)?`${(O[0]-Number(L))*100/c.value}%`:"0%"},g=re(()=>{const L={[t.vertical?"height":"width"]:p(),background:t.activeColor};l.value&&(L.transition="none");const F=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return L[F()]=b(),L}),_=O=>{const L=+t.min,F=+t.max,X=+t.step;O=si(O,L,F);const ee=Math.round((O-L)/X)*X;return f1(L,ee)},w=()=>{const O=t.modelValue;f(O)?r=O.map(_):r=_(O)},x=O=>{var L,F;const X=(L=O[0])!=null?L:Number(t.min),ee=(F=O[1])!=null?F:Number(t.max);return X>ee?[ee,X]:[X,ee]},C=(O,L)=>{f(O)?O=x(O).map(_):O=_(O),Ss(O,t.modelValue)||e("update:modelValue",O),L&&!Ss(O,r)&&e("change",O)},k=O=>{if(O.stopPropagation(),t.disabled||t.readonly)return;w();const{min:L,reverse:F,vertical:X,modelValue:ee}=t,K=ft(a),Y=()=>X?F?K.bottom-O.clientY:O.clientY-K.top:F?K.right-O.clientX:O.clientX-K.left,Z=X?K.height:K.width,le=Number(L)+Y()/Z*c.value;if(f(ee)){const[he,te]=ee,ie=(he+te)/2;le<=ie?C([le,te],!0):C([he,le],!0)}else C(le,!0)},D=O=>{t.disabled||t.readonly||(u.start(O),s=t.modelValue,w(),l.value="start")},R=O=>{if(t.disabled||t.readonly)return;l.value==="start"&&e("dragStart",O),wt(O,!0),u.move(O),l.value="dragging";const L=ft(a),F=t.vertical?u.deltaY.value:u.deltaX.value,X=t.vertical?L.height:L.width;let ee=F/X*c.value;if(t.reverse&&(ee=-ee),f(r)){const K=t.reverse?1-n:n;s[K]=r[K]+ee}else s=r+ee;C(s)},M=O=>{t.disabled||t.readonly||(l.value==="dragging"&&(C(s,!0),e("dragEnd",O)),l.value="")},P=O=>typeof O=="number"?_l("button-wrapper",["left","right"][O]):_l("button-wrapper",t.reverse?"left":"right"),E=(O,L)=>{const F=l.value==="dragging";if(typeof L=="number"){const X=i[L===0?"left-button":"right-button"];let ee;if(F&&Array.isArray(s)&&(ee=s[0]>s[1]?n^1:n),X)return X({value:O,dragging:F,dragIndex:ee})}return i.button?i.button({value:O,dragging:F}):T("div",{class:_l("button"),style:nr(t.buttonSize)},null)},I=O=>{const L=typeof O=="number"?t.modelValue[O]:t.modelValue;return T("div",{ref:o[O??0],role:"slider",class:P(O),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":L,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:F=>{typeof O=="number"&&(n=O),D(F)},onTouchend:M,onTouchcancel:M,onClick:lg},[E(L,O)])};return C(t.modelValue),Fr(()=>t.modelValue),o.forEach(O=>{qt("touchmove",R,{target:O})}),()=>T("div",{ref:a,style:d.value,class:_l({vertical:t.vertical,disabled:t.disabled}),onClick:k},[T("div",{class:_l("bar"),style:g.value},[t.range?[I(0),I(1)]:I()])])}});const $$=Ee(F$),[xb,U$]=we("space"),z$={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function LS(t=[]){const e=[];return t.forEach(i=>{Array.isArray(i)?e.push(...i):i.type===zt?e.push(...LS(i.children)):e.push(i)}),e.filter(i=>{var n;return!(i&&(i.type===pi||i.type===zt&&((n=i.children)==null?void 0:n.length)===0||i.type===xu&&i.children.trim()===""))})}var V$=Te({name:xb,props:z$,setup(t,{slots:e}){const i=re(()=>{var r;return(r=t.align)!=null?r:t.direction==="horizontal"?"center":""}),n=r=>typeof r=="number"?r+"px":r,s=r=>{const a={},o=`${n(Array.isArray(t.size)?t.size[0]:t.size)}`,l=`${n(Array.isArray(t.size)?t.size[1]:t.size)}`;return r?t.wrap?{marginBottom:l}:{}:(t.direction==="horizontal"&&(a.marginRight=o),(t.direction==="vertical"||t.wrap)&&(a.marginBottom=l),a)};return()=>{var r;const a=LS((r=e.default)==null?void 0:r.call(e));return T("div",{class:[U$({[t.direction]:t.direction,[`align-${i.value}`]:i.value,wrap:t.wrap,fill:t.fill})]},[a.map((o,l)=>T("div",{key:`item-${l}`,class:`${xb}-item`,style:s(l===a.length-1)},[o]))])}}});const H$=Ee(V$),[BS,Sb]=we("steps"),q$={active:Ne(0),direction:De("horizontal"),activeIcon:De("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},NS=Symbol(BS);var j$=Te({name:BS,props:q$,emits:["clickStep"],setup(t,{emit:e,slots:i}){const{linkChildren:n}=Pi(NS);return n({props:t,onClickStep:r=>e("clickStep",r)}),()=>{var r;return T("div",{class:Sb([t.direction])},[T("div",{class:Sb("items")},[(r=i.default)==null?void 0:r.call(i)])])}}});const[W$,mr]=we("step");var G$=Te({name:W$,setup(t,{slots:e}){const{parent:i,index:n}=bi(NS);if(!i)return;const s=i.props,r=()=>{const d=+s.active;return n.value<d?"finish":n.value===d?"process":"waiting"},a=()=>r()==="process",o=re(()=>({background:r()==="finish"?s.activeColor:s.inactiveColor})),l=re(()=>{if(a())return{color:s.activeColor};if(r()==="waiting")return{color:s.inactiveColor}}),u=()=>i.onClickStep(n.value),c=()=>{const{iconPrefix:d,finishIcon:f,activeIcon:p,activeColor:b,inactiveIcon:g}=s;return a()?e["active-icon"]?e["active-icon"]():T(Qe,{class:mr("icon","active"),name:p,color:b,classPrefix:d},null):r()==="finish"&&(f||e["finish-icon"])?e["finish-icon"]?e["finish-icon"]():T(Qe,{class:mr("icon","finish"),name:f,color:b,classPrefix:d},null):e["inactive-icon"]?e["inactive-icon"]():g?T(Qe,{class:mr("icon"),name:g,classPrefix:d},null):T("i",{class:mr("circle"),style:o.value},null)};return()=>{var d;const f=r();return T("div",{class:[rr,mr([s.direction,{[f]:f}])]},[T("div",{class:mr("title",{active:a()}),style:l.value,onClick:u},[(d=e.default)==null?void 0:d.call(e)]),T("div",{class:mr("circle-container"),onClick:u},[c()]),T("div",{class:mr("line"),style:o.value},null)])}}});const X$=Ee(G$),[K$,Dc]=we("stepper"),Y$=200,kc=(t,e)=>String(t)===String(e),Q$={min:Ne(1),max:Ne(1/0),name:Ne(""),step:Ne(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:be,showMinus:be,showInput:be,longPress:be,autoFixed:be,allowEmpty:Boolean,modelValue:Ce,inputWidth:Ce,buttonSize:Ce,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:Ne(1),decimalLength:Ce};var Z$=Te({name:K$,props:Q$,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:e}){const i=(P,E=!0)=>{const{min:I,max:O,allowEmpty:L,decimalLength:F}=t;return L&&P===""||(P=Xp(String(P),!t.integer),P=P===""?0:+P,P=Number.isNaN(P)?+I:P,P=E?Math.max(Math.min(+O,P),+I):P,ct(F)&&(P=P.toFixed(+F))),P},n=()=>{var P;const E=(P=t.modelValue)!=null?P:t.defaultValue,I=i(E);return kc(I,t.modelValue)||e("update:modelValue",I),I};let s;const r=oe(),a=oe(n()),o=re(()=>t.disabled||t.disableMinus||+a.value<=+t.min),l=re(()=>t.disabled||t.disablePlus||+a.value>=+t.max),u=re(()=>({width:Ye(t.inputWidth),height:Ye(t.buttonSize)})),c=re(()=>nr(t.buttonSize)),d=()=>{const P=i(a.value);kc(P,a.value)||(a.value=P)},f=P=>{t.beforeChange?$r(t.beforeChange,{args:[P],done(){a.value=P}}):a.value=P},p=()=>{if(s==="plus"&&l.value||s==="minus"&&o.value){e("overlimit",s);return}const P=s==="minus"?-t.step:+t.step,E=i(f1(+a.value,P));f(E),e(s)},b=P=>{const E=P.target,{value:I}=E,{decimalLength:O}=t;let L=Xp(String(I),!t.integer);if(ct(O)&&L.includes(".")){const X=L.split(".");L=`${X[0]}.${X[1].slice(0,+O)}`}t.beforeChange?E.value=String(a.value):kc(I,L)||(E.value=L);const F=L===String(+L);f(F?+L:L)},g=P=>{var E;t.disableInput?(E=r.value)==null||E.blur():e("focus",P)},_=P=>{const E=P.target,I=i(E.value,t.autoFixed);E.value=String(I),a.value=I,et(()=>{e("blur",P),d1()})};let w,x;const C=()=>{x=setTimeout(()=>{p(),C()},Y$)},k=()=>{t.longPress&&(w=!1,clearTimeout(x),x=setTimeout(()=>{w=!0,p(),C()},b1))},D=P=>{t.longPress&&(clearTimeout(x),w&&wt(P))},R=P=>{t.disableInput&&wt(P)},M=P=>({onClick:E=>{wt(E),s=P,p()},onTouchstartPassive:()=>{s=P,k()},onTouchend:D,onTouchcancel:D});return Re(()=>[t.max,t.min,t.integer,t.decimalLength],d),Re(()=>t.modelValue,P=>{kc(P,a.value)||(a.value=i(P))}),Re(a,P=>{e("update:modelValue",P),e("change",P,{name:t.name})}),Fr(()=>t.modelValue),()=>T("div",{role:"group",class:Dc([t.theme])},[ui(T("button",nt({type:"button",style:c.value,class:[Dc("minus",{disabled:o.value}),{[Ai]:!o.value}],"aria-disabled":o.value||void 0},M("minus")),null),[[yi,t.showMinus]]),ui(T("input",{ref:r,type:t.integer?"tel":"text",role:"spinbutton",class:Dc("input"),value:a.value,style:u.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,autocomplete:"off","aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":a.value,onBlur:_,onInput:b,onFocus:g,onMousedown:R},null),[[yi,t.showInput]]),ui(T("button",nt({type:"button",style:c.value,class:[Dc("plus",{disabled:l.value}),{[Ai]:!l.value}],"aria-disabled":l.value||void 0},M("plus")),null),[[yi,t.showPlus]])])}});const J$=Ee(Z$),eU=Ee(j$),[tU,Ln,iU]=we("submit-bar"),nU={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:De(""),disabled:Boolean,textAlign:String,buttonText:String,buttonType:De("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:Ne(2),safeAreaInsetBottom:be};var sU=Te({name:tU,props:nU,emits:["submit"],setup(t,{emit:e,slots:i}){const n=oe(),s=Jd(n,Ln),r=()=>{const{price:c,label:d,currency:f,textAlign:p,suffixLabel:b,decimalLength:g}=t;if(typeof c=="number"){const _=(c/100).toFixed(+g).split("."),w=g?`.${_[1]}`:"";return T("div",{class:Ln("text"),style:{textAlign:p}},[T("span",null,[d||iU("label")]),T("span",{class:Ln("price")},[f,T("span",{class:Ln("price-integer")},[_[0]]),w]),b&&T("span",{class:Ln("suffix-label")},[b])])}},a=()=>{var c;const{tip:d,tipIcon:f}=t;if(i.tip||d)return T("div",{class:Ln("tip")},[f&&T(Qe,{class:Ln("tip-icon"),name:f},null),d&&T("span",{class:Ln("tip-text")},[d]),(c=i.tip)==null?void 0:c.call(i)])},o=()=>e("submit"),l=()=>i.button?i.button():T(Ii,{round:!0,type:t.buttonType,text:t.buttonText,class:Ln("button",t.buttonType),color:t.buttonColor,loading:t.loading,disabled:t.disabled,onClick:o},null),u=()=>{var c,d;return T("div",{ref:n,class:[Ln(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(c=i.top)==null?void 0:c.call(i),a(),T("div",{class:Ln("bar")},[(d=i.default)==null?void 0:d.call(i),r(),l()])])};return()=>t.placeholder?s(u):u()}});const rU=Ee(sU),[aU,Vf]=we("swipe-cell"),oU={name:Ne(""),disabled:Boolean,leftWidth:Ce,rightWidth:Ce,beforeClose:Function,stopPropagation:Boolean};var lU=Te({name:aU,props:oU,emits:["open","close","click"],setup(t,{emit:e,slots:i}){let n,s,r,a;const o=oe(),l=oe(),u=oe(),c=Mt({offset:0,dragging:!1}),d=Sn(),f=P=>P.value?ft(P).width:0,p=re(()=>ct(t.leftWidth)?+t.leftWidth:f(l)),b=re(()=>ct(t.rightWidth)?+t.rightWidth:f(u)),g=P=>{c.offset=P==="left"?p.value:-b.value,n||(n=!0,e("open",{name:t.name,position:P}))},_=P=>{c.offset=0,n&&(n=!1,e("close",{name:t.name,position:P}))},w=P=>{const E=Math.abs(c.offset),I=.15,O=n?1-I:I,L=P==="left"?p.value:b.value;L&&E>L*O?g(P):_(P)},x=P=>{t.disabled||(r=c.offset,d.start(P))},C=P=>{if(t.disabled)return;const{deltaX:E}=d;d.move(P),d.isHorizontal()&&(s=!0,c.dragging=!0,(!n||E.value*r<0)&&wt(P,t.stopPropagation),c.offset=si(E.value+r,-b.value,p.value))},k=()=>{c.dragging&&(c.dragging=!1,w(c.offset>0?"left":"right"),setTimeout(()=>{s=!1},0))},D=(P="outside",E)=>{a||(e("click",P),n&&!s&&(a=!0,$r(t.beforeClose,{args:[{event:E,name:t.name,position:P}],done:()=>{a=!1,_(P)},canceled:()=>a=!1,error:()=>a=!1})))},R=P=>E=>{(s||n)&&E.stopPropagation(),!s&&D(P,E)},M=(P,E)=>{const I=i[P];if(I)return T("div",{ref:E,class:Vf(P),onClick:R(P)},[I()])};return ot({open:g,close:_}),Yd(o,P=>D("outside",P),{eventName:"touchstart"}),qt("touchmove",C,{target:o}),()=>{var P;const E={transform:`translate3d(${c.offset}px, 0, 0)`,transitionDuration:c.dragging?"0s":".6s"};return T("div",{ref:o,class:Vf(),onClick:R("cell"),onTouchstartPassive:x,onTouchend:k,onTouchcancel:k},[T("div",{class:Vf("wrapper"),style:E},[M("left",l),(P=i.default)==null?void 0:P.call(i),M("right",u)])])}}});const uU=Ee(lU),[FS,wb]=we("tabbar"),cU={route:Boolean,fixed:be,border:be,zIndex:Ce,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:Ne(0),safeAreaInsetBottom:{type:Boolean,default:null}},$S=Symbol(FS);var dU=Te({name:FS,props:cU,emits:["change","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(),{linkChildren:s}=Pi($S),r=Jd(n,wb),a=()=>{var u;return(u=t.safeAreaInsetBottom)!=null?u:t.fixed},o=()=>{var u;const{fixed:c,zIndex:d,border:f}=t;return T("div",{ref:n,role:"tablist",style:sr(d),class:[wb({fixed:c}),{[Qd]:f,"van-safe-area-bottom":a()}]},[(u=i.default)==null?void 0:u.call(i)])};return s({props:t,setActive:(u,c)=>{$r(t.beforeChange,{args:[u],done(){e("update:modelValue",u),e("change",u),c()}})}}),()=>t.fixed&&t.placeholder?r(o):o()}});const hU=Ee(dU),[fU,Hf]=we("tabbar-item"),pU=He({},Ur,{dot:Boolean,icon:String,name:Ce,badge:Ce,badgeProps:Object,iconPrefix:String});var mU=Te({name:fU,props:pU,emits:["click"],setup(t,{emit:e,slots:i}){const n=Sa(),s=Zn().proxy,{parent:r,index:a}=bi($S);if(!r)return;const o=re(()=>{var c;const{route:d,modelValue:f}=r.props;if(d&&"$route"in s){const{$route:p}=s,{to:b}=t,g=Kn(b)?b:{path:b};return p.matched.some(_=>{const w="path"in g&&g.path===_.path,x="name"in g&&g.name===_.name;return w||x})}return((c=t.name)!=null?c:a.value)===f}),l=c=>{var d;o.value||r.setActive((d=t.name)!=null?d:a.value,n),e("click",c)},u=()=>{if(i.icon)return i.icon({active:o.value});if(t.icon)return T(Qe,{name:t.icon,classPrefix:t.iconPrefix},null)};return()=>{var c;const{dot:d,badge:f}=t,{activeColor:p,inactiveColor:b}=r.props,g=o.value?p:b;return T("div",{role:"tab",class:Hf({active:o.value}),style:{color:g},tabindex:0,"aria-selected":o.value,onClick:l},[T(wa,nt({dot:d,class:Hf("icon"),content:f},t.badgeProps),{default:u}),T("div",{class:Hf("text")},[(c=i.default)==null?void 0:c.call(i,{active:o.value})])])}}});const gU=Ee(mU),[yU,Cb]=we("text-ellipsis"),vU={rows:Ne(1),dots:De("..."),content:De(""),expandText:De(""),collapseText:De(""),position:De("end")};var bU=Te({name:yU,props:vU,emits:["clickAction"],setup(t,{emit:e,slots:i}){const n=oe(t.content),s=oe(!1),r=oe(!1),a=oe(),o=oe();let l=!1;const u=re(()=>s.value?t.collapseText:t.expandText),c=w=>{if(!w)return 0;const x=w.match(/^\d*(\.\d*)?/);return x?Number(x[0]):0},d=()=>{if(!a.value||!a.value.isConnected)return;const w=window.getComputedStyle(a.value),x=document.createElement("div");return Array.prototype.slice.apply(w).forEach(k=>{x.style.setProperty(k,w.getPropertyValue(k))}),x.style.position="fixed",x.style.zIndex="-9999",x.style.top="-9999px",x.style.height="auto",x.style.minHeight="auto",x.style.maxHeight="auto",x.innerText=t.content,document.body.appendChild(x),x},f=(w,x)=>{var C,k;const{content:D,position:R,dots:M}=t,P=D.length,E=0+P>>1,I=i.action?(k=(C=o.value)==null?void 0:C.outerHTML)!=null?k:"":t.expandText,O=()=>{const F=(X,ee)=>{if(ee-X<=1)return R==="end"?D.slice(0,X)+M:M+D.slice(ee,P);const K=Math.round((X+ee)/2);return R==="end"?w.innerText=D.slice(0,K)+M:w.innerText=M+D.slice(K,P),w.innerHTML+=I,w.offsetHeight>x?R==="end"?F(X,K):F(K,ee):R==="end"?F(K,ee):F(X,K)};return F(0,P)},L=(F,X)=>{if(F[1]-F[0]<=1&&X[1]-X[0]<=1)return D.slice(0,F[0])+M+D.slice(X[1],P);const ee=Math.floor((F[0]+F[1])/2),K=Math.ceil((X[0]+X[1])/2);return w.innerText=t.content.slice(0,ee)+t.dots+t.content.slice(K,P),w.innerHTML+=I,w.offsetHeight>=x?L([F[0],ee],[K,X[1]]):L([ee,F[1]],[X[0],K])};return t.position==="middle"?L([0,E],[E,P]):O()},p=()=>{const w=d();if(!w){l=!0;return}const{paddingBottom:x,paddingTop:C,lineHeight:k}=w.style,D=Math.ceil((Number(t.rows)+.5)*c(k)+c(C)+c(x));D<w.offsetHeight?(r.value=!0,n.value=f(w,D)):(r.value=!1,n.value=t.content),document.body.removeChild(w)},b=(w=!s.value)=>{s.value=w},g=w=>{b(),e("clickAction",w)},_=()=>{const w=i.action?i.action({expanded:s.value}):u.value;return T("span",{ref:o,class:Cb("action"),onClick:g},[w])};return Lt(()=>{p(),i.action&&et(p)}),Ds(()=>{l&&(l=!1,p())}),Re([Vn,()=>[t.content,t.rows,t.position]],p),ot({toggle:b}),()=>T("div",{ref:a,class:Cb()},[s.value?t.content:n.value,r.value?_():null])}});const _U=Ee(bU),[TU]=we("time-picker"),Eb=t=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(t),xU=["hour","minute","second"],SU=He({},sS,{minHour:Ne(0),maxHour:Ne(23),minMinute:Ne(0),maxMinute:Ne(59),minSecond:Ne(0),maxSecond:Ne(59),minTime:{type:String,validator:Eb},maxTime:{type:String,validator:Eb},columnsType:{type:Array,default:()=>["hour","minute"]}});var wU=Te({name:TU,props:SU,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(t.modelValue),s=oe(),r=f=>{const p=f.split(":");return xU.map((b,g)=>t.columnsType.includes(b)?p[g]:"00")},a=()=>{var f;return(f=s.value)==null?void 0:f.confirm()},o=()=>n.value,l=re(()=>{let{minHour:f,maxHour:p,minMinute:b,maxMinute:g,minSecond:_,maxSecond:w}=t;if(t.minTime||t.maxTime){const x={hour:0,minute:0,second:0};t.columnsType.forEach((D,R)=>{var M;x[D]=(M=n.value[R])!=null?M:0});const{hour:C,minute:k}=x;if(t.minTime){const[D,R,M]=r(t.minTime);f=D,b=+C<=+f?R:"00",_=+C<=+f&&+k<=+b?M:"00"}if(t.maxTime){const[D,R,M]=r(t.maxTime);p=D,g=+C>=+p?R:"59",w=+C>=+p&&+k>=+g?M:"59"}}return t.columnsType.map(x=>{const{filter:C,formatter:k}=t;switch(x){case"hour":return no(+f,+p,x,k,C,n.value);case"minute":return no(+b,+g,x,k,C,n.value);case"second":return no(+_,+w,x,k,C,n.value);default:return[]}})});Re(n,f=>{Ss(f,t.modelValue)||e("update:modelValue",f)}),Re(()=>t.modelValue,f=>{f=oS(f,l.value),Ss(f,n.value)||(n.value=f)},{immediate:!0});const u=(...f)=>e("change",...f),c=(...f)=>e("cancel",...f),d=(...f)=>e("confirm",...f);return ot({confirm:a,getSelectedTime:o}),()=>T(nh,nt({ref:s,modelValue:n.value,"onUpdate:modelValue":f=>n.value=f,columns:l.value,onChange:u,onCancel:c,onConfirm:d},dt(t,rS)),i)}});const CU=Ee(wU),[EU,za]=we("tree-select"),DU={max:Ne(1/0),items:At(),height:Ne(300),selectedIcon:De("success"),mainActiveIndex:Ne(0),activeId:{type:[Number,String,Array],default:0}};var kU=Te({name:EU,props:DU,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(t,{emit:e,slots:i}){const n=u=>Array.isArray(t.activeId)?t.activeId.includes(u):t.activeId===u,s=u=>{const c=()=>{if(u.disabled)return;let d;if(Array.isArray(t.activeId)){d=t.activeId.slice();const f=d.indexOf(u.id);f!==-1?d.splice(f,1):d.length<+t.max&&d.push(u.id)}else d=u.id;e("update:activeId",d),e("clickItem",u)};return T("div",{key:u.id,class:["van-ellipsis",za("item",{active:n(u.id),disabled:u.disabled})],onClick:c},[u.text,n(u.id)&&T(Qe,{name:t.selectedIcon,class:za("selected")},null)])},r=u=>{e("update:mainActiveIndex",u)},a=u=>e("clickNav",u),o=()=>{const u=t.items.map(c=>T(PS,{dot:c.dot,badge:c.badge,class:[za("nav-item"),c.className],disabled:c.disabled,onClick:a},{title:()=>i["nav-text"]?i["nav-text"](c):c.text}));return T(IS,{class:za("nav"),modelValue:t.mainActiveIndex,onChange:r},{default:()=>[u]})},l=()=>{if(i.content)return i.content();const u=t.items[+t.mainActiveIndex]||{};if(u.children)return u.children.map(s)};return()=>T("div",{class:za(),style:{height:Ye(t.height)}},[o(),T("div",{class:za("content")},[l()])])}});const AU=Ee(kU),[IU,Zt,PU]=we("uploader");function Db(t,e){return new Promise(i=>{if(e==="file"){i();return}const n=new FileReader;n.onload=s=>{i(s.target.result)},e==="dataUrl"?n.readAsDataURL(t):e==="text"&&n.readAsText(t)})}function US(t,e){return sd(t).some(i=>i.file?_o(e)?e(i.file):i.file.size>+e:!1)}function OU(t,e){const i=[],n=[];return t.forEach(s=>{US(s,e)?n.push(s):i.push(s)}),{valid:i,invalid:n}}const RU=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,MU=t=>RU.test(t);function zS(t){return t.isImage?!0:t.file&&t.file.type?t.file.type.indexOf("image")===0:t.url?MU(t.url):typeof t.content=="string"?t.content.indexOf("data:image")===0:!1}var LU=Te({props:{name:Ce,item:oi(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(t,{emit:e,slots:i}){const n=()=>{const{status:c,message:d}=t.item;if(c==="uploading"||c==="failed"){const f=c==="failed"?T(Qe,{name:"close",class:Zt("mask-icon")},null):T(Jn,{class:Zt("loading")},null),p=ct(d)&&d!=="";return T("div",{class:Zt("mask")},[f,p&&T("div",{class:Zt("mask-message")},[d])])}},s=c=>{const{name:d,item:f,index:p,beforeDelete:b}=t;c.stopPropagation(),$r(b,{args:[f,{name:d,index:p}],done:()=>e("delete")})},r=()=>e("preview"),a=()=>e("reupload"),o=()=>{if(t.deletable&&t.item.status!=="uploading"){const c=i["preview-delete"];return T("div",{role:"button",class:Zt("preview-delete",{shadow:!c}),tabindex:0,"aria-label":PU("delete"),onClick:s},[c?c():T(Qe,{name:"cross",class:Zt("preview-delete-icon")},null)])}},l=()=>{if(i["preview-cover"]){const{index:c,item:d}=t;return T("div",{class:Zt("preview-cover")},[i["preview-cover"](He({index:c},d))])}},u=()=>{const{item:c,lazyLoad:d,imageFit:f,previewSize:p,reupload:b}=t;return zS(c)?T(ah,{fit:f,src:c.objectUrl||c.content||c.url,class:Zt("preview-image"),width:Array.isArray(p)?p[0]:p,height:Array.isArray(p)?p[1]:p,lazyLoad:d,onClick:b?a:r},{default:l}):T("div",{class:Zt("file"),style:nr(t.previewSize)},[T(Qe,{class:Zt("file-icon"),name:"description"},null),T("div",{class:[Zt("file-name"),"van-ellipsis"]},[c.file?c.file.name:c.url]),l()])};return()=>T("div",{class:Zt("preview")},[u(),n(),o()])}});const BU={name:Ne(""),accept:De("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:Ne(1/0),imageFit:De("cover"),resultType:De("dataUrl"),uploadIcon:De("photograph"),uploadText:String,deletable:be,reupload:Boolean,afterRead:Function,showUpload:be,modelValue:At(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:be,previewOptions:Object,previewFullImage:be,maxSize:{type:[Number,String,Function],default:1/0}};var NU=Te({name:IU,props:BU,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(t,{emit:e,slots:i}){const n=oe(),s=[],r=oe(-1),a=oe(!1),o=(P=t.modelValue.length)=>({name:t.name,index:P}),l=()=>{n.value&&(n.value.value="")},u=P=>{if(l(),US(P,t.maxSize))if(Array.isArray(P)){const E=OU(P,t.maxSize);if(P=E.valid,e("oversize",E.invalid,o()),!P.length)return}else{e("oversize",P,o());return}if(P=Mt(P),r.value>-1){const E=[...t.modelValue];E.splice(r.value,1,P),e("update:modelValue",E),r.value=-1}else e("update:modelValue",[...t.modelValue,...sd(P)]);t.afterRead&&t.afterRead(P,o())},c=P=>{const{maxCount:E,modelValue:I,resultType:O}=t;if(Array.isArray(P)){const L=+E-I.length;P.length>L&&(P=P.slice(0,L)),Promise.all(P.map(F=>Db(F,O))).then(F=>{const X=P.map((ee,K)=>{const Y={file:ee,status:"",message:"",objectUrl:URL.createObjectURL(ee)};return F[K]&&(Y.content=F[K]),Y});u(X)})}else Db(P,O).then(L=>{const F={file:P,status:"",message:"",objectUrl:URL.createObjectURL(P)};L&&(F.content=L),u(F)})},d=P=>{const{files:E}=P.target;if(t.disabled||!E||!E.length)return;const I=E.length===1?E[0]:[].slice.call(E);if(t.beforeRead){const O=t.beforeRead(I,o());if(!O){l();return}if(ag(O)){O.then(L=>{c(L||I)}).catch(l);return}}c(I)};let f;const p=()=>e("closePreview"),b=P=>{if(t.previewFullImage){const E=t.modelValue.filter(zS),I=E.map(O=>(O.objectUrl&&!O.url&&O.status!=="failed"&&(O.url=O.objectUrl,s.push(O.url)),O.url)).filter(Boolean);f=E8(He({images:I,startPosition:E.indexOf(P),onClose:p},t.previewOptions))}},g=()=>{f&&f.close()},_=(P,E)=>{const I=t.modelValue.slice(0);I.splice(E,1),e("update:modelValue",I),e("delete",P,o(E))},w=P=>{a.value=!0,r.value=P,et(()=>M())},x=()=>{a.value||(r.value=-1),a.value=!1},C=(P,E)=>{const I=["imageFit","deletable","reupload","previewSize","beforeDelete"],O=He(dt(t,I),dt(P,I,!0));return T(LU,nt({item:P,index:E,onClick:()=>e(t.reupload?"clickReupload":"clickPreview",P,o(E)),onDelete:()=>_(P,E),onPreview:()=>b(P),onReupload:()=>w(E)},dt(t,["name","lazyLoad"]),O),dt(i,["preview-cover","preview-delete"]))},k=()=>{if(t.previewImage)return t.modelValue.map(C)},D=P=>e("clickUpload",P),R=()=>{const P=t.modelValue.length<+t.maxCount,E=t.readonly?null:T("input",{ref:n,type:"file",class:Zt("input"),accept:t.accept,capture:t.capture,multiple:t.multiple&&r.value===-1,disabled:t.disabled,onChange:d,onClick:x},null);return i.default?ui(T("div",{class:Zt("input-wrapper"),onClick:D},[i.default(),E]),[[yi,P]]):ui(T("div",{class:Zt("upload",{readonly:t.readonly}),style:nr(t.previewSize),onClick:D},[T(Qe,{name:t.uploadIcon,class:Zt("upload-icon")},null),t.uploadText&&T("span",{class:Zt("upload-text")},[t.uploadText]),E]),[[yi,t.showUpload&&P]])},M=()=>{n.value&&!t.disabled&&n.value.click()};return Qn(()=>{s.forEach(P=>URL.revokeObjectURL(P))}),ot({chooseFile:M,reuploadFile:w,closeImagePreview:g}),Fr(()=>t.modelValue),()=>T("div",{class:Zt()},[T("div",{class:Zt("wrapper",{disabled:t.disabled})},[k(),R()])])}});const FU=Ee(NU),[$U,kb]=we("watermark"),UU={gapX:Jt(0),gapY:Jt(0),image:String,width:Jt(100),height:Jt(100),rotate:Ne(-22),zIndex:Ce,content:String,opacity:Ce,fullPage:be,textColor:De("#dcdee0")};var zU=Te({name:$U,props:UU,setup(t,{slots:e}){const i=oe(),n=oe(""),s=oe(""),r=()=>{const c={transformOrigin:"center",transform:`rotate(${t.rotate}deg)`},d=()=>t.image&&!e.content?T("image",{href:s.value,"xlink:href":s.value,x:"0",y:"0",width:t.width,height:t.height,style:c},null):T("foreignObject",{x:"0",y:"0",width:t.width,height:t.height},[T("div",{xmlns:"http://www.w3.org/1999/xhtml",style:c},[e.content?e.content():T("span",{style:{color:t.textColor}},[t.content])])]),f=t.width+t.gapX,p=t.height+t.gapY;return T("svg",{viewBox:`0 0 ${f} ${p}`,width:f,height:p,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{padding:`0 ${t.gapX}px ${t.gapY}px 0`,opacity:t.opacity}},[d()])},a=c=>{const d=document.createElement("canvas"),f=new Image;f.crossOrigin="anonymous",f.referrerPolicy="no-referrer",f.onload=()=>{d.width=f.naturalWidth,d.height=f.naturalHeight;const p=d.getContext("2d");p==null||p.drawImage(f,0,0),s.value=d.toDataURL()},f.src=c},o=c=>{const d=new Blob([c],{type:"image/svg+xml"});return URL.createObjectURL(d)},l=()=>{n.value&&URL.revokeObjectURL(n.value)},u=()=>{i.value&&(l(),n.value=o(i.value.innerHTML))};return Mo(()=>{t.image&&a(t.image)}),Re(()=>[s.value,t.content,t.textColor,t.height,t.width,t.rotate,t.gapX,t.gapY],u),Lt(u),Ro(l),()=>{const c=He({backgroundImage:`url(${n.value})`},sr(t.zIndex));return T("div",{class:kb({full:t.fullPage}),style:c},[T("div",{class:kb("wrapper"),ref:i},[r()])])}}});const VU=Ee(zU),HU="4.9.19";function qU(t){[S1,Yp,R3,W3,p4,F4,j1,H4,wa,X4,Ii,u5,g5,T5,ts,C5,Sg,tS,P5,$5,H5,X5,K5,J5,nN,lN,pN,im,SN,IN,MN,$N,qN,YN,QN,hS,Xs,t8,r8,yg,u8,f8,y8,Qe,ah,D8,L8,B8,z8,Jn,m1,j8,K8,tF,uF,A1,fF,yF,nh,vF,g6,es,_6,E6,xg,_g,P6,U6,z6,W6,e$,IS,PS,d$,P$,RS,L$,MS,OS,$$,H$,X$,J$,eU,B1,rU,mg,uU,gg,bg,fu,hU,gU,th,rh,_U,CU,r4,AU,FU,VU].forEach(i=>{i.install?t.use(i):i.name&&t.component(i.name,i)})}var jU={install:qU,version:HU};const WU=37.5;function VS(){const t=document.documentElement.clientWidth/375;document.documentElement.style.fontSize=WU*Math.min(t,2)+"px"}VS();window.onresize=function(){VS()};var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GU(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var qf,Ab;function uh(){if(Ab)return qf;Ab=1;var t;return typeof window<"u"?t=window:typeof dd<"u"?t=dd:typeof self<"u"?t=self:t={},qf=t,qf}var XU=uh();const q=Eu(XU),KU={},YU=Object.freeze(Object.defineProperty({__proto__:null,default:KU},Symbol.toStringTag,{value:"Module"})),QU=GU(YU);var jf,Ib;function HS(){if(Ib)return jf;Ib=1;var t=typeof dd<"u"?dd:typeof window<"u"?window:{},e=QU,i;return typeof document<"u"?i=document:(i=t["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=t["__GLOBAL_DOCUMENT_CACHE@4"]=e)),jf=i,jf}var ZU=HS();const Ae=Eu(ZU);var Ac={exports:{}},Wf={exports:{}},Pb;function JU(){return Pb||(Pb=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)({}).hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Wf)),Wf.exports}var Gf,Ob;function e7(){if(Ob)return Gf;Ob=1,Gf=e;var t=Object.prototype.toString;function e(i){if(!i)return!1;var n=t.call(i);return n==="[object Function]"||typeof i=="function"&&n!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}return Gf}var Xf,Rb;function t7(){if(Rb)return Xf;Rb=1;function t(s,r){var a=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a)return(a=a.call(s)).next.bind(a);if(Array.isArray(s)||(a=e(s))||r){a&&(s=a);var o=0;return function(){return o>=s.length?{done:!0}:{done:!1,value:s[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(s,r){if(s){if(typeof s=="string")return i(s,r);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(s,r)}}function i(s,r){(r==null||r>s.length)&&(r=s.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=s[a];return o}var n=function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=s.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},r.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},r.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},r.execute=function(o,l){for(var u=this.getForType(o),c=t(u),d;!(d=c()).done;){var f=d.value;try{l=f(l)}catch{}}return l},s}();return Xf=n,Xf}var Kf,Mb;function i7(){if(Mb)return Kf;Mb=1;var t=function(){function i(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var n=i.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},n.getMaxAttempts=function(){return this.maxAttempts_},n.setMaxAttempts=function(r){this.maxAttempts_=r},n.getDelayFactor=function(){return this.delayFactor_},n.setDelayFactor=function(r){this.delayFactor_=r},n.getFuzzFactor=function(){return this.fuzzFactor_},n.setFuzzFactor=function(r){this.fuzzFactor_=r},n.getInitialDelay=function(){return this.initialDelay_},n.setInitialDelay=function(r){this.initialDelay_=r},n.createRetry=function(r){var a=r===void 0?{}:r,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},i}(),e=function(){function i(s){this.maxAttempts_=s.maxAttempts,this.delayFactor_=s.delayFactor,this.fuzzFactor_=s.fuzzFactor,this.currentDelay_=s.initialDelay,this.currentAttempt_=1}var n=i.prototype;return n.moveToNextAttempt=function(){this.currentAttempt_++;var r=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+r},n.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},n.getCurrentDelay=function(){return this.currentDelay_},n.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},n.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},n.getCurrentFuzzedDelay=function(){var r=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return r+Math.random()*(a-r)},i}();return Kf=t,Kf}var Yf,Lb;function n7(){if(Lb)return Yf;Lb=1;var t=uh(),e=function(s,r){return r===void 0&&(r=!1),function(a,o,l){if(a){s(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(r)if(t.TextDecoder){var c=i(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));s({cause:u});return}s(null,l)}};function i(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(s,r){var a=r.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():s},"utf-8")}return Yf=e,Yf}var Bb;function s7(){if(Bb)return Ac.exports;Bb=1;var t=uh(),e=JU(),i=e7(),n=t7(),s=i7();u.httpHandler=n7(),u.requestInterceptorsStorage=new n,u.responseInterceptorsStorage=new n,u.retryManager=new s;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var r=function(b){var g={};return b&&b.trim().split(`
`).forEach(function(_){var w=_.indexOf(":"),x=_.slice(0,w).trim().toLowerCase(),C=_.slice(w+1).trim();typeof g[x]>"u"?g[x]=C:Array.isArray(g[x])?g[x].push(C):g[x]=[g[x],C]}),g};Ac.exports=u,Ac.exports.default=u,u.XMLHttpRequest=t.XMLHttpRequest||f,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:t.XDomainRequest,a(["get","put","post","patch","head","delete"],function(p){u[p==="delete"?"del":p]=function(b,g,_){return g=l(b,g,_),g.method=p.toUpperCase(),c(g)}});function a(p,b){for(var g=0;g<p.length;g++)b(p[g])}function o(p){for(var b in p)if(p.hasOwnProperty(b))return!1;return!0}function l(p,b,g){var _=p;return i(b)?(g=b,typeof p=="string"&&(_={uri:p})):_=e({},b,{uri:p}),_.callback=g,_}function u(p,b,g){return b=l(p,b,g),c(b)}function c(p){if(typeof p.callback>"u")throw new Error("callback argument missing");if(p.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var b={uri:p.uri||p.url,headers:p.headers||{},body:p.body,metadata:p.metadata||{},retry:p.retry,timeout:p.timeout},g=u.requestInterceptorsStorage.execute(p.requestType,b);p.uri=g.uri,p.headers=g.headers,p.body=g.body,p.metadata=g.metadata,p.retry=g.retry,p.timeout=g.timeout}var _=!1,w=function(Z,le,he){_||(_=!0,p.callback(Z,le,he))};function x(){R.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(D,0)}function C(){var Y=void 0;if(R.response?Y=R.response:Y=R.responseText||d(R),X)try{Y=JSON.parse(Y)}catch{}return Y}function k(Y){if(clearTimeout(ee),clearTimeout(p.retryTimeout),Y instanceof Error||(Y=new Error(""+(Y||"Unknown XMLHttpRequest Error"))),Y.statusCode=0,!P&&u.retryManager.getIsEnabled()&&p.retry&&p.retry.shouldRetry()){p.retryTimeout=setTimeout(function(){p.retry.moveToNextAttempt(),p.xhr=R,c(p)},p.retry.getCurrentFuzzedDelay());return}if(p.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var Z={headers:K.headers||{},body:K.body,responseUrl:R.responseURL,responseType:R.responseType},le=u.responseInterceptorsStorage.execute(p.requestType,Z);K.body=le.body,K.headers=le.headers}return w(Y,K)}function D(){if(!P){var Y;clearTimeout(ee),clearTimeout(p.retryTimeout),p.useXDR&&R.status===void 0?Y=200:Y=R.status===1223?204:R.status;var Z=K,le=null;if(Y!==0?(Z={body:C(),statusCode:Y,method:I,headers:{},url:E,rawRequest:R},R.getAllResponseHeaders&&(Z.headers=r(R.getAllResponseHeaders()))):le=new Error("Internal XMLHttpRequest Error"),p.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var he={headers:Z.headers||{},body:Z.body,responseUrl:R.responseURL,responseType:R.responseType},te=u.responseInterceptorsStorage.execute(p.requestType,he);Z.body=te.body,Z.headers=te.headers}return w(le,Z,Z.body)}}var R=p.xhr||null;R||(p.cors||p.useXDR?R=new u.XDomainRequest:R=new u.XMLHttpRequest);var M,P,E=R.url=p.uri||p.url,I=R.method=p.method||"GET",O=p.body||p.data,L=R.headers=p.headers||{},F=!!p.sync,X=!1,ee,K={body:void 0,headers:{},statusCode:0,method:I,url:E,rawRequest:R};if("json"in p&&p.json!==!1&&(X=!0,L.accept||L.Accept||(L.Accept="application/json"),I!=="GET"&&I!=="HEAD"&&(L["content-type"]||L["Content-Type"]||(L["Content-Type"]="application/json"),O=JSON.stringify(p.json===!0?O:p.json))),R.onreadystatechange=x,R.onload=D,R.onerror=k,R.onprogress=function(){},R.onabort=function(){P=!0,clearTimeout(p.retryTimeout)},R.ontimeout=k,R.open(I,E,!F,p.username,p.password),F||(R.withCredentials=!!p.withCredentials),!F&&p.timeout>0&&(ee=setTimeout(function(){if(!P){P=!0,R.abort("timeout");var Y=new Error("XMLHttpRequest timeout");Y.code="ETIMEDOUT",k(Y)}},p.timeout)),R.setRequestHeader)for(M in L)L.hasOwnProperty(M)&&R.setRequestHeader(M,L[M]);else if(p.headers&&!o(p.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in p&&(R.responseType=p.responseType),"beforeSend"in p&&typeof p.beforeSend=="function"&&p.beforeSend(R),R.send(O||null),R}function d(p){try{if(p.responseType==="document")return p.responseXML;var b=p.responseXML&&p.responseXML.documentElement.nodeName==="parsererror";if(p.responseType===""&&!b)return p.responseXML}catch{}return null}function f(){}return Ac.exports}var r7=s7();const qS=Eu(r7);var Qf={exports:{}},Zf,Nb;function a7(){if(Nb)return Zf;Nb=1;var t=HS(),e=Object.create||function(){function E(){}return function(I){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return E.prototype=I,new E}}();function i(E,I){this.name="ParsingError",this.code=E.code,this.message=I||E.message}i.prototype=e(Error.prototype),i.prototype.constructor=i,i.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(E){function I(L,F,X,ee){return(L|0)*3600+(F|0)*60+(X|0)+(ee|0)/1e3}var O=E.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return O?O[3]?I(O[1],O[2],O[3].replace(":",""),O[4]):O[1]>59?I(O[1],O[2],0,O[4]):I(0,O[1],O[2],O[4]):null}function s(){this.values=e(null)}s.prototype={set:function(E,I){!this.get(E)&&I!==""&&(this.values[E]=I)},get:function(E,I,O){return O?this.has(E)?this.values[E]:I[O]:this.has(E)?this.values[E]:I},has:function(E){return E in this.values},alt:function(E,I,O){for(var L=0;L<O.length;++L)if(I===O[L]){this.set(E,I);break}},integer:function(E,I){/^-?\d+$/.test(I)&&this.set(E,parseInt(I,10))},percent:function(E,I){return I.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(I=parseFloat(I),I>=0&&I<=100)?(this.set(E,I),!0):!1}};function r(E,I,O,L){var F=L?E.split(L):[E];for(var X in F)if(typeof F[X]=="string"){var ee=F[X].split(O);if(ee.length===2){var K=ee[0].trim(),Y=ee[1].trim();I(K,Y)}}}function a(E,I,O){var L=E;function F(){var K=n(E);if(K===null)throw new i(i.Errors.BadTimeStamp,"Malformed timestamp: "+L);return E=E.replace(/^[^\sa-zA-Z-]+/,""),K}function X(K,Y){var Z=new s;r(K,function(le,he){switch(le){case"region":for(var te=O.length-1;te>=0;te--)if(O[te].id===he){Z.set(le,O[te].region);break}break;case"vertical":Z.alt(le,he,["rl","lr"]);break;case"line":var ie=he.split(","),fe=ie[0];Z.integer(le,fe),Z.percent(le,fe)&&Z.set("snapToLines",!1),Z.alt(le,fe,["auto"]),ie.length===2&&Z.alt("lineAlign",ie[1],["start","center","end"]);break;case"position":ie=he.split(","),Z.percent(le,ie[0]),ie.length===2&&Z.alt("positionAlign",ie[1],["start","center","end"]);break;case"size":Z.percent(le,he);break;case"align":Z.alt(le,he,["start","center","end","left","right"]);break}},/:/,/\s/),Y.region=Z.get("region",null),Y.vertical=Z.get("vertical","");try{Y.line=Z.get("line","auto")}catch{}Y.lineAlign=Z.get("lineAlign","start"),Y.snapToLines=Z.get("snapToLines",!0),Y.size=Z.get("size",100);try{Y.align=Z.get("align","center")}catch{Y.align=Z.get("align","middle")}try{Y.position=Z.get("position","auto")}catch{Y.position=Z.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Y.align)}Y.positionAlign=Z.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Y.align)}function ee(){E=E.replace(/^\s+/,"")}if(ee(),I.startTime=F(),ee(),E.substr(0,3)!=="-->")throw new i(i.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+L);E=E.substr(3),ee(),I.endTime=F(),ee(),X(E,I)}var o=t.createElement&&t.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},d={rt:"ruby"};function f(E,I){function O(){if(!I)return null;function fe(ae){return I=I.substr(ae.length),ae}var ke=I.match(/^([^<]*)(<[^>]*>?)?/);return fe(ke[1]?ke[1]:ke[2])}function L(fe){return o.innerHTML=fe,fe=o.textContent,o.textContent="",fe}function F(fe,ke){return!d[ke.localName]||d[ke.localName]===fe.localName}function X(fe,ke){var ae=l[fe];if(!ae)return null;var Ie=E.document.createElement(ae),z=c[fe];return z&&ke&&(Ie[z]=ke.trim()),Ie}for(var ee=E.document.createElement("div"),K=ee,Y,Z=[];(Y=O())!==null;){if(Y[0]==="<"){if(Y[1]==="/"){Z.length&&Z[Z.length-1]===Y.substr(2).replace(">","")&&(Z.pop(),K=K.parentNode);continue}var le=n(Y.substr(1,Y.length-2)),he;if(le){he=E.document.createProcessingInstruction("timestamp",le),K.appendChild(he);continue}var te=Y.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!te||(he=X(te[1],te[3]),!he)||!F(K,he))continue;if(te[2]){var ie=te[2].split(".");ie.forEach(function(fe){var ke=/^bg_/.test(fe),ae=ke?fe.slice(3):fe;if(u.hasOwnProperty(ae)){var Ie=ke?"background-color":"color",z=u[ae];he.style[Ie]=z}}),he.className=ie.join(" ")}Z.push(te[1]),K.appendChild(he),K=he;continue}K.appendChild(E.document.createTextNode(L(Y)))}return ee}var p=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function b(E){for(var I=0;I<p.length;I++){var O=p[I];if(E>=O[0]&&E<=O[1])return!0}return!1}function g(E){var I=[],O="",L;if(!E||!E.childNodes)return"ltr";function F(K,Y){for(var Z=Y.childNodes.length-1;Z>=0;Z--)K.push(Y.childNodes[Z])}function X(K){if(!K||!K.length)return null;var Y=K.pop(),Z=Y.textContent||Y.innerText;if(Z){var le=Z.match(/^.*(\n|\r)/);return le?(K.length=0,le[0]):Z}if(Y.tagName==="ruby")return X(K);if(Y.childNodes)return F(K,Y),X(K)}for(F(I,E);O=X(I);)for(var ee=0;ee<O.length;ee++)if(L=O.charCodeAt(ee),b(L))return"rtl";return"ltr"}function _(E){if(typeof E.line=="number"&&(E.snapToLines||E.line>=0&&E.line<=100))return E.line;if(!E.track||!E.track.textTrackList||!E.track.textTrackList.mediaElement)return-1;for(var I=E.track,O=I.textTrackList,L=0,F=0;F<O.length&&O[F]!==I;F++)O[F].mode==="showing"&&L++;return++L*-1}function w(){}w.prototype.applyStyles=function(E,I){I=I||this.div;for(var O in E)E.hasOwnProperty(O)&&(I.style[O]=E[O])},w.prototype.formatStyle=function(E,I){return E===0?0:E+I};function x(E,I,O){w.call(this),this.cue=I,this.cueDiv=f(E,I.text);var L={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:I.vertical===""?"horizontal-tb":I.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(L,this.cueDiv),this.div=E.document.createElement("div"),L={direction:g(this.cueDiv),writingMode:I.vertical===""?"horizontal-tb":I.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:I.align==="middle"?"center":I.align,font:O.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(L),this.div.appendChild(this.cueDiv);var F=0;switch(I.positionAlign){case"start":case"line-left":F=I.position;break;case"center":F=I.position-I.size/2;break;case"end":case"line-right":F=I.position-I.size;break}I.vertical===""?this.applyStyles({left:this.formatStyle(F,"%"),width:this.formatStyle(I.size,"%")}):this.applyStyles({top:this.formatStyle(F,"%"),height:this.formatStyle(I.size,"%")}),this.move=function(X){this.applyStyles({top:this.formatStyle(X.top,"px"),bottom:this.formatStyle(X.bottom,"px"),left:this.formatStyle(X.left,"px"),right:this.formatStyle(X.right,"px"),height:this.formatStyle(X.height,"px"),width:this.formatStyle(X.width,"px")})}}x.prototype=e(w.prototype),x.prototype.constructor=x;function C(E){var I,O,L,F;if(E.div){O=E.div.offsetHeight,L=E.div.offsetWidth,F=E.div.offsetTop;var X=(X=E.div.childNodes)&&(X=X[0])&&X.getClientRects&&X.getClientRects();E=E.div.getBoundingClientRect(),I=X?Math.max(X[0]&&X[0].height||0,E.height/X.length):0}this.left=E.left,this.right=E.right,this.top=E.top||F,this.height=E.height||O,this.bottom=E.bottom||F+(E.height||O),this.width=E.width||L,this.lineHeight=I!==void 0?I:E.lineHeight}C.prototype.move=function(E,I){switch(I=I!==void 0?I:this.lineHeight,E){case"+x":this.left+=I,this.right+=I;break;case"-x":this.left-=I,this.right-=I;break;case"+y":this.top+=I,this.bottom+=I;break;case"-y":this.top-=I,this.bottom-=I;break}},C.prototype.overlaps=function(E){return this.left<E.right&&this.right>E.left&&this.top<E.bottom&&this.bottom>E.top},C.prototype.overlapsAny=function(E){for(var I=0;I<E.length;I++)if(this.overlaps(E[I]))return!0;return!1},C.prototype.within=function(E){return this.top>=E.top&&this.bottom<=E.bottom&&this.left>=E.left&&this.right<=E.right},C.prototype.overlapsOppositeAxis=function(E,I){switch(I){case"+x":return this.left<E.left;case"-x":return this.right>E.right;case"+y":return this.top<E.top;case"-y":return this.bottom>E.bottom}},C.prototype.intersectPercentage=function(E){var I=Math.max(0,Math.min(this.right,E.right)-Math.max(this.left,E.left)),O=Math.max(0,Math.min(this.bottom,E.bottom)-Math.max(this.top,E.top)),L=I*O;return L/(this.height*this.width)},C.prototype.toCSSCompatValues=function(E){return{top:this.top-E.top,bottom:E.bottom-this.bottom,left:this.left-E.left,right:E.right-this.right,height:this.height,width:this.width}},C.getSimpleBoxPosition=function(E){var I=E.div?E.div.offsetHeight:E.tagName?E.offsetHeight:0,O=E.div?E.div.offsetWidth:E.tagName?E.offsetWidth:0,L=E.div?E.div.offsetTop:E.tagName?E.offsetTop:0;E=E.div?E.div.getBoundingClientRect():E.tagName?E.getBoundingClientRect():E;var F={left:E.left,right:E.right,top:E.top||L,height:E.height||I,bottom:E.bottom||L+(E.height||I),width:E.width||O};return F};function k(E,I,O,L){function F(ae,Ie){for(var z,ue=new C(ae),se=1,Se=0;Se<Ie.length;Se++){for(;ae.overlapsOppositeAxis(O,Ie[Se])||ae.within(O)&&ae.overlapsAny(L);)ae.move(Ie[Se]);if(ae.within(O))return ae;var Fe=ae.intersectPercentage(O);se>Fe&&(z=new C(ae),se=Fe),ae=new C(ue)}return z||ue}var X=new C(I),ee=I.cue,K=_(ee),Y=[];if(ee.snapToLines){var Z;switch(ee.vertical){case"":Y=["+y","-y"],Z="height";break;case"rl":Y=["+x","-x"],Z="width";break;case"lr":Y=["-x","+x"],Z="width";break}var le=X.lineHeight,he=le*Math.round(K),te=O[Z]+le,ie=Y[0];Math.abs(he)>te&&(he=he<0?-1:1,he*=Math.ceil(te/le)*le),K<0&&(he+=ee.vertical===""?O.height:O.width,Y=Y.reverse()),X.move(ie,he)}else{var fe=X.lineHeight/O.height*100;switch(ee.lineAlign){case"center":K-=fe/2;break;case"end":K-=fe;break}switch(ee.vertical){case"":I.applyStyles({top:I.formatStyle(K,"%")});break;case"rl":I.applyStyles({left:I.formatStyle(K,"%")});break;case"lr":I.applyStyles({right:I.formatStyle(K,"%")});break}Y=["+y","-x","+x","-y"],X=new C(I)}var ke=F(X,Y);I.move(ke.toCSSCompatValues(O))}function D(){}D.StringDecoder=function(){return{decode:function(E){if(!E)return"";if(typeof E!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(E))}}},D.convertCueToDOMTree=function(E,I){return!E||!I?null:f(E,I)};var R=.05,M="sans-serif",P="1.5%";return D.processCues=function(E,I,O){if(!E||!I||!O)return null;for(;O.firstChild;)O.removeChild(O.firstChild);var L=E.document.createElement("div");L.style.position="absolute",L.style.left="0",L.style.right="0",L.style.top="0",L.style.bottom="0",L.style.margin=P,O.appendChild(L);function F(le){for(var he=0;he<le.length;he++)if(le[he].hasBeenReset||!le[he].displayState)return!0;return!1}if(!F(I)){for(var X=0;X<I.length;X++)L.appendChild(I[X].displayState);return}var ee=[],K=C.getSimpleBoxPosition(L),Y=Math.round(K.height*R*100)/100,Z={font:Y+"px "+M};(function(){for(var le,he,te=0;te<I.length;te++)he=I[te],le=new x(E,he,Z),L.appendChild(le.div),k(E,le,K,ee),he.displayState=le.div,ee.push(C.getSimpleBoxPosition(le))})()},D.Parser=function(E,I,O){O||(O=I,I={}),I||(I={}),this.window=E,this.vttjs=I,this.state="INITIAL",this.buffer="",this.decoder=O||new TextDecoder("utf8"),this.regionList=[]},D.Parser.prototype={reportOrThrowError:function(E){if(E instanceof i)this.onparsingerror&&this.onparsingerror(E);else throw E},parse:function(E){var I=this;E&&(I.buffer+=I.decoder.decode(E,{stream:!0}));function O(){for(var le=I.buffer,he=0;he<le.length&&le[he]!=="\r"&&le[he]!==`
`;)++he;var te=le.substr(0,he);return le[he]==="\r"&&++he,le[he]===`
`&&++he,I.buffer=le.substr(he),te}function L(le){var he=new s;if(r(le,function(ie,fe){switch(ie){case"id":he.set(ie,fe);break;case"width":he.percent(ie,fe);break;case"lines":he.integer(ie,fe);break;case"regionanchor":case"viewportanchor":var ke=fe.split(",");if(ke.length!==2)break;var ae=new s;if(ae.percent("x",ke[0]),ae.percent("y",ke[1]),!ae.has("x")||!ae.has("y"))break;he.set(ie+"X",ae.get("x")),he.set(ie+"Y",ae.get("y"));break;case"scroll":he.alt(ie,fe,["up"]);break}},/=/,/\s/),he.has("id")){var te=new(I.vttjs.VTTRegion||I.window.VTTRegion);te.width=he.get("width",100),te.lines=he.get("lines",3),te.regionAnchorX=he.get("regionanchorX",0),te.regionAnchorY=he.get("regionanchorY",100),te.viewportAnchorX=he.get("viewportanchorX",0),te.viewportAnchorY=he.get("viewportanchorY",100),te.scroll=he.get("scroll",""),I.onregion&&I.onregion(te),I.regionList.push({id:he.get("id"),region:te})}}function F(le){var he=new s;r(le,function(te,ie){switch(te){case"MPEGT":he.integer(te+"S",ie);break;case"LOCA":he.set(te+"L",n(ie));break}},/[^\d]:/,/,/),I.ontimestampmap&&I.ontimestampmap({MPEGTS:he.get("MPEGTS"),LOCAL:he.get("LOCAL")})}function X(le){le.match(/X-TIMESTAMP-MAP/)?r(le,function(he,te){switch(he){case"X-TIMESTAMP-MAP":F(te);break}},/=/):r(le,function(he,te){switch(he){case"Region":L(te);break}},/:/)}try{var ee;if(I.state==="INITIAL"){if(!/\r\n|\n/.test(I.buffer))return this;ee=O();var K=ee.match(/^WEBVTT([ \t].*)?$/);if(!K||!K[0])throw new i(i.Errors.BadSignature);I.state="HEADER"}for(var Y=!1;I.buffer;){if(!/\r\n|\n/.test(I.buffer))return this;switch(Y?Y=!1:ee=O(),I.state){case"HEADER":/:/.test(ee)?X(ee):ee||(I.state="ID");continue;case"NOTE":ee||(I.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ee)){I.state="NOTE";break}if(!ee)continue;I.cue=new(I.vttjs.VTTCue||I.window.VTTCue)(0,0,"");try{I.cue.align="center"}catch{I.cue.align="middle"}if(I.state="CUE",ee.indexOf("-->")===-1){I.cue.id=ee;continue}case"CUE":try{a(ee,I.cue,I.regionList)}catch(le){I.reportOrThrowError(le),I.cue=null,I.state="BADCUE";continue}I.state="CUETEXT";continue;case"CUETEXT":var Z=ee.indexOf("-->")!==-1;if(!ee||Z&&(Y=!0)){I.oncue&&I.oncue(I.cue),I.cue=null,I.state="ID";continue}I.cue.text&&(I.cue.text+=`
`),I.cue.text+=ee.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":ee||(I.state="ID");continue}}}catch(le){I.reportOrThrowError(le),I.state==="CUETEXT"&&I.cue&&I.oncue&&I.oncue(I.cue),I.cue=null,I.state=I.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var E=this;try{if(E.buffer+=E.decoder.decode(),(E.cue||E.state==="HEADER")&&(E.buffer+=`

`,E.parse()),E.state==="INITIAL")throw new i(i.Errors.BadSignature)}catch(I){E.reportOrThrowError(I)}return E.onflush&&E.onflush(),this}},Zf=D,Zf}var Jf,Fb;function o7(){if(Fb)return Jf;Fb=1;var t="auto",e={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a){if(typeof a!="string")return!1;var o=i[a.toLowerCase()];return o?a.toLowerCase():!1}function r(a,o,l){this.hasBeenReset=!1;var u="",c=!1,d=a,f=o,p=l,b=null,g="",_=!0,w="auto",x="start",C="auto",k="auto",D=100,R="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(M){u=""+M}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(M){c=!!M}},startTime:{enumerable:!0,get:function(){return d},set:function(M){if(typeof M!="number")throw new TypeError("Start time must be set to a number.");d=M,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return f},set:function(M){if(typeof M!="number")throw new TypeError("End time must be set to a number.");f=M,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return p},set:function(M){p=""+M,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return b},set:function(M){b=M,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return g},set:function(M){var P=n(M);if(P===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");g=P,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return _},set:function(M){_=!!M,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return w},set:function(M){if(typeof M!="number"&&M!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");w=M,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return x},set:function(M){var P=s(M);P?(x=P,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return C},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");C=M,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return k},set:function(M){var P=s(M);P?(k=P,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return D},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");D=M,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return R},set:function(M){var P=s(M);if(!P)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");R=P,this.hasBeenReset=!0}}}),this.displayState=void 0}return r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Jf=r,Jf}var ep,$b;function l7(){if($b)return ep;$b=1;var t={"":!0,up:!0};function e(s){if(typeof s!="string")return!1;var r=t[s.toLowerCase()];return r?s.toLowerCase():!1}function i(s){return typeof s=="number"&&s>=0&&s<=100}function n(){var s=100,r=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(d){if(!i(d))throw new Error("Width must be between 0 and 100.");s=d}},lines:{enumerable:!0,get:function(){return r},set:function(d){if(typeof d!="number")throw new TypeError("Lines must be set to a number.");r=d}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(d){if(!i(d))throw new Error("RegionAnchorX must be between 0 and 100.");o=d}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(d){if(!i(d))throw new Error("RegionAnchorY must be between 0 and 100.");a=d}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(d){if(!i(d))throw new Error("ViewportAnchorY must be between 0 and 100.");u=d}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(d){if(!i(d))throw new Error("ViewportAnchorX must be between 0 and 100.");l=d}},scroll:{enumerable:!0,get:function(){return c},set:function(d){var f=e(d);f===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=f}}})}return ep=n,ep}var Ub;function u7(){if(Ub)return Qf.exports;Ub=1;var t=uh(),e=Qf.exports={WebVTT:a7(),VTTCue:o7(),VTTRegion:l7()};t.vttjs=e,t.WebVTT=e.WebVTT;var i=e.VTTCue,n=e.VTTRegion,s=t.VTTCue,r=t.VTTRegion;return e.shim=function(){t.VTTCue=i,t.VTTRegion=n},e.restore=function(){t.VTTCue=s,t.VTTRegion=r},t.VTTCue||e.shim(),Qf.exports}var c7=u7();const zb=Eu(c7);function Xt(){return Xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Xt.apply(null,arguments)}var Vb="https://example.com",ch=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=q.location&&q.location.href||"");var n=/^\/\//.test(e),s=!q.location&&!/\/\//i.test(e);e=new q.URL(e,q.location||Vb);var r=new URL(i,e);return s?r.href.slice(Vb.length):n?r.href.slice(r.protocol.length):r.href},Ig=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,s){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(s)},e.off=function(n,s){if(!this.listeners[n])return!1;var r=this.listeners[n].indexOf(s);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(r,1),r>-1},e.trigger=function(n){var s=this.listeners[n];if(s)if(arguments.length===2)for(var r=s.length,a=0;a<r;++a)s[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=s.length,u=0;u<l;++u)s[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(s){n.push(s)})},t}(),d7=function(e){return q.atob?q.atob(e):Buffer.from(e,"base64").toString("binary")};function jS(t){for(var e=d7(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class h7 extends Ig{constructor(){super(),this.buffer=""}push(e){let i;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const f7="	",tp=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},p7=function(){const i="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+i+")")},Li=function(t){const e={};if(!t)return e;const i=t.split(p7());let n=i.length,s;for(;n--;)i[n]!==""&&(s=/([^=]*)=(.*)/.exec(i[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e},Hb=t=>{const e=t.split("x"),i={};return e[0]&&(i.width=parseInt(e[0],10)),e[1]&&(i.height=parseInt(e[1],10)),i};class m7 extends Ig{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let i,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,a)=>{const o=a(e);return o===e?r:r.concat([o])},[e]).forEach(r=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),i=/^#EXTM3U/.exec(r),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),i){n={type:"tag",tagType:"inf"},i[1]&&(n.duration=parseFloat(i[1])),i[2]&&(n.title=i[2]),this.trigger("data",n);return}if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),i){n={type:"tag",tagType:"targetduration"},i[1]&&(n.duration=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),i){n={type:"tag",tagType:"version"},i[1]&&(n.version=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),i){n={type:"tag",tagType:"media-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),i){n={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),i){n={type:"tag",tagType:"playlist-type"},i[1]&&(n.playlistType=i[1]),this.trigger("data",n);return}if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),i){n=Xt(tp(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),i){n={type:"tag",tagType:"allow-cache"},i[1]&&(n.allowed=!/NO/.test(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-MAP:(.*)$/.exec(r),i){if(n={type:"tag",tagType:"map"},i[1]){const a=Li(i[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=tp(a.BYTERANGE))}this.trigger("data",n);return}if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),i){n={type:"tag",tagType:"stream-inf"},i[1]&&(n.attributes=Li(i[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=Hb(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA:(.*)$/.exec(r),i){n={type:"tag",tagType:"media"},i[1]&&(n.attributes=Li(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-ENDLIST/.exec(r),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(r),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),i){n={type:"tag",tagType:"program-date-time"},i[1]&&(n.dateTimeString=i[1],n.dateTimeObject=new Date(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-KEY:(.*)$/.exec(r),i){n={type:"tag",tagType:"key"},i[1]&&(n.attributes=Li(i[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(i=/^#EXT-X-START:(.*)$/.exec(r),i){n={type:"tag",tagType:"start"},i[1]&&(n.attributes=Li(i[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),i){n={type:"tag",tagType:"cue-out-cont"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),i){n={type:"tag",tagType:"cue-out"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),i){n={type:"tag",tagType:"cue-in"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-SKIP:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"skip"},n.attributes=Li(i[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(f7)),this.trigger("data",n);return}if(i=/^#EXT-X-PART:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"part"},n.attributes=Li(i[1]),["DURATION"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=tp(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"server-control"},n.attributes=Li(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PART-INF:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"part-inf"},n.attributes=Li(i[1]),["PART-TARGET"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=Li(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(n.attributes.hasOwnProperty(a)){n.attributes[a]=parseInt(n.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[o]=n.attributes[a],delete n.attributes[a]}}),this.trigger("data",n);return}if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=Li(i[1]),["LAST-MSN","LAST-PART"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseInt(n.attributes[a],10))}),this.trigger("data",n);return}if(i=/^#EXT-X-DATERANGE:(.*)$/.exec(r),i&&i[1]){n={type:"tag",tagType:"daterange"},n.attributes=Li(i[1]),["ID","CLASS"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=String(n.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=new Date(n.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/i.test(n.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=n.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in n.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(n.attributes[o]),u=/^\d+(\.\d+)?$/.test(n.attributes[o]);n.attributes[o]=l?n.attributes[o].toString(16):u?parseFloat(n.attributes[o]):String(n.attributes[o])}this.trigger("data",n);return}if(i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),i){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(i=/^#EXT-X-I-FRAMES-ONLY/.exec(r),i){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(i=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),i){n={type:"tag",tagType:"content-steering"},n.attributes=Li(i[1]),this.trigger("data",n);return}if(i=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),i){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=Li(i[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=Hb(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(i=/^#EXT-X-DEFINE:(.*)$/.exec(r),i){n={type:"tag",tagType:"define"},n.attributes=Li(i[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:i,dataParser:n,segment:s}){typeof n!="function"&&(n=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:n(r),customType:i,segment:s}),!0})}addTagMapper({expression:e,map:i}){const n=s=>e.test(s)?i(s):s;this.tagMappers.push(n)}}const g7=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),gr=function(t){const e={};return Object.keys(t).forEach(function(i){e[g7(i)]=t[i]}),e},ip=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:n}=t;if(!e)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",o=i&&i*3,l=n&&n*2;i&&!e.hasOwnProperty(r)&&(e[r]=o,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[r]<o&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${o})`}),e[r]=o),n&&!e.hasOwnProperty(a)&&(e[a]=n*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class y7 extends Ig{constructor(e={}){super(),this.lineStream=new h7,this.parseStream=new m7,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const i=this,n=[];let s={},r,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,p=0;const b={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&a&&(s.key=a),!s.timeline&&typeof d=="number"&&(s.timeline=d),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(g){let _,w;if(i.manifest.definitions){for(const x in i.manifest.definitions)if(g.uri&&(g.uri=g.uri.replace(`{$${x}}`,i.manifest.definitions[x])),g.attributes)for(const C in g.attributes)typeof g.attributes[C]=="string"&&(g.attributes[C]=g.attributes[C].replace(`{$${x}}`,i.manifest.definitions[x]))}({tag(){({version(){g.version&&(this.manifest.version=g.version)},"allow-cache"(){this.manifest.allowCache=g.allowed,"allowed"in g||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const x={};"length"in g&&(s.byterange=x,x.length=g.length,"offset"in g||(g.offset=f)),"offset"in g&&(s.byterange=x,x.offset=g.offset),f=x.offset+x.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),g.title&&(s.title=g.title),g.duration>0&&(s.duration=g.duration),g.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!g.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(g.attributes.METHOD==="NONE"){a=null;return}if(!g.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(g.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:g.attributes};return}if(g.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:g.attributes.URI};return}if(g.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(g.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(g.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),g.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(g.attributes.KEYID&&g.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:g.attributes.KEYFORMAT,keyId:g.attributes.KEYID.substring(2)},pssh:jS(g.attributes.URI.split(",")[1])};return}g.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:g.attributes.METHOD||"AES-128",uri:g.attributes.URI},typeof g.attributes.IV<"u"&&(a.iv=g.attributes.IV)},"media-sequence"(){if(!isFinite(g.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+g.number});return}this.manifest.mediaSequence=g.number},"discontinuity-sequence"(){if(!isFinite(g.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+g.number});return}this.manifest.discontinuitySequence=g.number,d=g.number},"playlist-type"(){if(!/VOD|EVENT/.test(g.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+g.playlist});return}this.manifest.playlistType=g.playlistType},map(){r={},g.uri&&(r.uri=g.uri),g.byterange&&(r.byterange=g.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!g.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Xt(s.attributes,g.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(g.attributes&&g.attributes.TYPE&&g.attributes["GROUP-ID"]&&g.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const x=this.manifest.mediaGroups[g.attributes.TYPE];x[g.attributes["GROUP-ID"]]=x[g.attributes["GROUP-ID"]]||{},_=x[g.attributes["GROUP-ID"]],w={default:/yes/i.test(g.attributes.DEFAULT)},w.default?w.autoselect=!0:w.autoselect=/yes/i.test(g.attributes.AUTOSELECT),g.attributes.LANGUAGE&&(w.language=g.attributes.LANGUAGE),g.attributes.URI&&(w.uri=g.attributes.URI),g.attributes["INSTREAM-ID"]&&(w.instreamId=g.attributes["INSTREAM-ID"]),g.attributes.CHARACTERISTICS&&(w.characteristics=g.attributes.CHARACTERISTICS),g.attributes.FORCED&&(w.forced=/yes/i.test(g.attributes.FORCED)),_[g.attributes.NAME]=w},discontinuity(){d+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=g.dateTimeString,this.manifest.dateTimeObject=g.dateTimeObject),s.dateTimeString=g.dateTimeString,s.dateTimeObject=g.dateTimeObject;const{lastProgramDateTime:x}=this;this.lastProgramDateTime=new Date(g.dateTimeString).getTime(),x===null&&this.manifest.segments.reduceRight((C,k)=>(k.programDateTime=C-k.duration*1e3,k.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(g.duration)||g.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+g.duration});return}this.manifest.targetDuration=g.duration,ip.call(this,this.manifest)},start(){if(!g.attributes||isNaN(g.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:g.attributes["TIME-OFFSET"],precise:g.attributes.PRECISE}},"cue-out"(){s.cueOut=g.data},"cue-out-cont"(){s.cueOutCont=g.data},"cue-in"(){s.cueIn=g.data},skip(){this.manifest.skip=gr(g.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",g.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const x=this.manifest.segments.length,C=gr(g.attributes);s.parts=s.parts||[],s.parts.push(C),C.byterange&&(C.byterange.hasOwnProperty("offset")||(C.byterange.offset=p),p=C.byterange.offset+C.byterange.length);const k=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${k} for segment #${x}`,g.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((D,R)=>{D.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${R} lacks required attribute(s): LAST-PART`})})},"server-control"(){const x=this.manifest.serverControl=gr(g.attributes);x.hasOwnProperty("canBlockReload")||(x.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ip.call(this,this.manifest),x.canSkipDateranges&&!x.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const x=this.manifest.segments.length,C=gr(g.attributes),k=C.type&&C.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(C),C.byterange&&(C.byterange.hasOwnProperty("offset")||(C.byterange.offset=k?p:0,k&&(p=C.byterange.offset+C.byterange.length)));const D=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${D} for segment #${x}`,g.attributes,["TYPE","URI"]),!!C.type)for(let R=0;R<s.preloadHints.length-1;R++){const M=s.preloadHints[R];M.type&&M.type===C.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${D} for segment #${x} has the same TYPE ${C.type} as preload hint #${R}`})}},"rendition-report"(){const x=gr(g.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(x);const C=this.manifest.renditionReports.length-1,k=["LAST-MSN","URI"];o&&k.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${C}`,g.attributes,k)},"part-inf"(){this.manifest.partInf=gr(g.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",g.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ip.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(gr(g.attributes));const x=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${x}`,g.attributes,["ID","START-DATE"]);const C=this.manifest.dateRanges[x];C.endDate&&C.startDate&&new Date(C.endDate)<new Date(C.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),C.duration&&C.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),C.plannedDuration&&C.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const k=!!C.endOnNext;if(k&&!C.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),k&&(C.duration||C.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),C.duration&&C.endDate){const R=C.startDate.getTime()+C.duration*1e3;this.manifest.dateRanges[x].endDate=new Date(R)}if(!b[C.id])b[C.id]=C;else{for(const R in b[C.id])if(C[R]&&JSON.stringify(b[C.id][R])!==JSON.stringify(C[R])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const D=this.manifest.dateRanges.findIndex(R=>R.id===C.id);this.manifest.dateRanges[D]=Xt(this.manifest.dateRanges[D],C),b[C.id]=Xt(b[C.id],C),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=gr(g.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",g.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const x=(C,k)=>{if(C in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${C}`});return}this.manifest.definitions[C]=k};if("QUERYPARAM"in g.attributes){if("NAME"in g.attributes||"IMPORT"in g.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const C=this.params.get(g.attributes.QUERYPARAM);if(!C){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${g.attributes.QUERYPARAM}`});return}x(g.attributes.QUERYPARAM,decodeURIComponent(C));return}if("NAME"in g.attributes){if("IMPORT"in g.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in g.attributes)||typeof g.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${g.attributes.NAME}`});return}x(g.attributes.NAME,g.attributes.VALUE);return}if("IMPORT"in g.attributes){if(!this.mainDefinitions[g.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${g.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}x(g.attributes.IMPORT,this.mainDefinitions[g.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:g.attributes,uri:g.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",g.attributes,["BANDWIDTH","URI"])}}[g.tagType]||l).call(i)},uri(){s.uri=g.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),a&&(s.key=a),s.timeline=d,r&&(s.map=r),p=0,this.lastProgramDateTime!==null&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=s.duration*1e3),s={}},comment(){},custom(){g.segment?(s.custom=s.custom||{},s.custom[g.customType]=g.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[g.customType]=g.data)}})[g.type].call(i)})}requiredCompatibilityversion(e,i){(e<i||!e)&&this.trigger("warn",{message:`manifest must be at least version ${i}`})}warnOnMissingAttributes_(e,i,n){const s=[];n.forEach(function(r){i.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var ca={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},v7=["video","audio","text"],qb=["Video","Audio","Text"],WS=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,n,s){var r=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(s).toString(16)).slice(-2);return"avc1."+r+"00"+a})},ps=function(e){e===void 0&&(e="");var i=e.split(","),n=[];return i.forEach(function(s){s=s.trim();var r;v7.forEach(function(a){var o=ca[a].exec(s.toLowerCase());if(!(!o||o.length<=1)){r=a;var l=s.substring(0,o[1].length),u=s.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),r||n.push({type:s,details:"",mediaType:"unknown"})}),n},b7=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var n=e.mediaGroups.AUDIO[i];if(!n)return null;for(var s in n){var r=n[s];if(r.default&&r.playlists)return ps(r.playlists[0].attributes.CODECS)}return null},GS=function(e){return e===void 0&&(e=""),ca.audio.test(e.trim().toLowerCase())},_7=function(e){return e===void 0&&(e=""),ca.text.test(e.trim().toLowerCase())},So=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(r){return WS(r.trim())}),n="video";i.length===1&&GS(i[0])?n="audio":i.length===1&&_7(i[0])&&(n="application");var s="mp4";return i.every(function(r){return ca.mp4.test(r)})?s="mp4":i.every(function(r){return ca.webm.test(r)})?s="webm":i.every(function(r){return ca.ogg.test(r)})&&(s="ogg"),n+"/"+s+';codecs="'+e+'"'}},Wl=function(e,i){return e===void 0&&(e=""),i===void 0&&(i=!1),q.MediaSource&&q.MediaSource.isTypeSupported&&q.MediaSource.isTypeSupported(So(e))||i&&q.ManagedMediaSource&&q.ManagedMediaSource.isTypeSupported&&q.ManagedMediaSource.isTypeSupported(So(e))||!1},np=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var n=0;n<qb.length;n++){var s=qb[n];if(ca["muxer"+s].test(i))return!0}return!1})},jb="mp4a.40.2",T7="avc1.4d400d",x7=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,S7=/^application\/dash\+xml/i,XS=function(e){return x7.test(e)?"hls":S7.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},w7=function(e){return e.toString(2).length},C7=function(e){return Math.ceil(w7(e)/8)},KS=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},E7=function(e){return KS(e)},je=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!E7(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},fi=q.BigInt||Number,am=[fi("0x1"),fi("0x100"),fi("0x10000"),fi("0x1000000"),fi("0x100000000"),fi("0x10000000000"),fi("0x1000000000000"),fi("0x100000000000000"),fi("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var D7=function(e,i){var n=i===void 0?{}:i,s=n.signed,r=s===void 0?!1:s,a=n.le,o=a===void 0?!1:a;e=je(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,p,b){var g=o?b:Math.abs(b+1-e.length);return f+fi(p)*am[g]},fi(0));if(r){var d=am[e.length]/fi(2)-fi(1);c=fi(c),c>d&&(c-=d,c-=d,c-=fi(2))}return Number(c)},k7=function(e,i){var n={},s=n.le,r=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=fi(e);for(var a=C7(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=r?l:Math.abs(l+1-o.length);o[u]=Number(e/am[l]&fi(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},YS=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n},A7=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return je(i[0]);var s=i.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),r=new Uint8Array(s),a=0;return i.forEach(function(o){o=je(o),r.set(o,a),a+=o.byteLength}),r},Pt=function(e,i,n){var s=n===void 0?{}:n,r=s.offset,a=r===void 0?0:r,o=s.mask,l=o===void 0?[]:o;e=je(e),i=je(i);var u=i.every?i.every:Array.prototype.every;return i.length&&e.length-a>=i.length&&u.call(i,function(c,d){var f=l[d]?l[d]&e[a+d]:e[a+d];return c===f})},I7=function(e,i,n){i.forEach(function(s){for(var r in e.mediaGroups[s])for(var a in e.mediaGroups[s][r]){var o=e.mediaGroups[s][r][a];n(o,s,r,a)}})},Tl={},$s={},Zr={},Wb;function dh(){if(Wb)return Zr;Wb=1;function t(r,a,o){if(o===void 0&&(o=Array.prototype),r&&typeof o.find=="function")return o.find.call(r,a);for(var l=0;l<r.length;l++)if(Object.prototype.hasOwnProperty.call(r,l)){var u=r[l];if(a.call(void 0,u,l,r))return u}}function e(r,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(r):r}function i(r,a){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o]);return r}var n=e({HTML:"text/html",isHTML:function(r){return r===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Zr.assign=i,Zr.find=t,Zr.freeze=e,Zr.MIME_TYPE=n,Zr.NAMESPACE=s,Zr}var Gb;function QS(){if(Gb)return $s;Gb=1;var t=dh(),e=t.find,i=t.NAMESPACE;function n(B){return B!==""}function s(B){return B?B.split(/[\t\n\f\r ]+/).filter(n):[]}function r(B,N){return B.hasOwnProperty(N)||(B[N]=!0),B}function a(B){if(!B)return[];var N=s(B);return Object.keys(N.reduce(r,{}))}function o(B){return function(N){return B&&B.indexOf(N)!==-1}}function l(B,N){for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(N[G]=B[G])}function u(B,N){var G=B.prototype;if(!(G instanceof N)){let ce=function(){};ce.prototype=N.prototype,ce=new ce,l(G,ce),B.prototype=G=ce}G.constructor!=B&&(typeof B!="function"&&console.error("unknown Class:"+B),G.constructor=B)}var c={},d=c.ELEMENT_NODE=1,f=c.ATTRIBUTE_NODE=2,p=c.TEXT_NODE=3,b=c.CDATA_SECTION_NODE=4,g=c.ENTITY_REFERENCE_NODE=5,_=c.ENTITY_NODE=6,w=c.PROCESSING_INSTRUCTION_NODE=7,x=c.COMMENT_NODE=8,C=c.DOCUMENT_NODE=9,k=c.DOCUMENT_TYPE_NODE=10,D=c.DOCUMENT_FRAGMENT_NODE=11,R=c.NOTATION_NODE=12,M={},P={};M.INDEX_SIZE_ERR=(P[1]="Index size error",1),M.DOMSTRING_SIZE_ERR=(P[2]="DOMString size error",2);var E=M.HIERARCHY_REQUEST_ERR=(P[3]="Hierarchy request error",3);M.WRONG_DOCUMENT_ERR=(P[4]="Wrong document",4),M.INVALID_CHARACTER_ERR=(P[5]="Invalid character",5),M.NO_DATA_ALLOWED_ERR=(P[6]="No data allowed",6),M.NO_MODIFICATION_ALLOWED_ERR=(P[7]="No modification allowed",7);var I=M.NOT_FOUND_ERR=(P[8]="Not found",8);M.NOT_SUPPORTED_ERR=(P[9]="Not supported",9);var O=M.INUSE_ATTRIBUTE_ERR=(P[10]="Attribute in use",10);M.INVALID_STATE_ERR=(P[11]="Invalid state",11),M.SYNTAX_ERR=(P[12]="Syntax error",12),M.INVALID_MODIFICATION_ERR=(P[13]="Invalid modification",13),M.NAMESPACE_ERR=(P[14]="Invalid namespace",14),M.INVALID_ACCESS_ERR=(P[15]="Invalid access",15);function L(B,N){if(N instanceof Error)var G=N;else G=this,Error.call(this,P[B]),this.message=P[B],Error.captureStackTrace&&Error.captureStackTrace(this,L);return G.code=B,N&&(this.message=this.message+": "+N),G}L.prototype=Error.prototype,l(M,L);function F(){}F.prototype={length:0,item:function(B){return B>=0&&B<this.length?this[B]:null},toString:function(B,N){for(var G=[],ce=0;ce<this.length;ce++)Cn(this[ce],G,B,N);return G.join("")},filter:function(B){return Array.prototype.filter.call(this,B)},indexOf:function(B){return Array.prototype.indexOf.call(this,B)}};function X(B,N){this._node=B,this._refresh=N,ee(this)}function ee(B){var N=B._node._inc||B._node.ownerDocument._inc;if(B._inc!==N){var G=B._refresh(B._node);if(Mu(B,"length",G.length),!B.$$length||G.length<B.$$length)for(var ce=G.length;ce in B;ce++)Object.prototype.hasOwnProperty.call(B,ce)&&delete B[ce];l(G,B),B._inc=N}}X.prototype.item=function(B){return ee(this),this[B]||null},u(X,F);function K(){}function Y(B,N){for(var G=B.length;G--;)if(B[G]===N)return G}function Z(B,N,G,ce){if(ce?N[Y(N,ce)]=G:N[N.length++]=G,B){G.ownerElement=B;var Me=B.ownerDocument;Me&&(ce&&Ie(Me,B,ce),ae(Me,B,G))}}function le(B,N,G){var ce=Y(N,G);if(ce>=0){for(var Me=N.length-1;ce<Me;)N[ce]=N[++ce];if(N.length=Me,B){var Xe=B.ownerDocument;Xe&&(Ie(Xe,B,G),G.ownerElement=null)}}else throw new L(I,new Error(B.tagName+"@"+G))}K.prototype={length:0,item:F.prototype.item,getNamedItem:function(B){for(var N=this.length;N--;){var G=this[N];if(G.nodeName==B)return G}},setNamedItem:function(B){var N=B.ownerElement;if(N&&N!=this._ownerElement)throw new L(O);var G=this.getNamedItem(B.nodeName);return Z(this._ownerElement,this,B,G),G},setNamedItemNS:function(B){var N=B.ownerElement,G;if(N&&N!=this._ownerElement)throw new L(O);return G=this.getNamedItemNS(B.namespaceURI,B.localName),Z(this._ownerElement,this,B,G),G},removeNamedItem:function(B){var N=this.getNamedItem(B);return le(this._ownerElement,this,N),N},removeNamedItemNS:function(B,N){var G=this.getNamedItemNS(B,N);return le(this._ownerElement,this,G),G},getNamedItemNS:function(B,N){for(var G=this.length;G--;){var ce=this[G];if(ce.localName==N&&ce.namespaceURI==B)return ce}return null}};function he(){}he.prototype={hasFeature:function(B,N){return!0},createDocument:function(B,N,G){var ce=new ke;if(ce.implementation=this,ce.childNodes=new F,ce.doctype=G||null,G&&ce.appendChild(G),N){var Me=ce.createElementNS(B,N);ce.appendChild(Me)}return ce},createDocumentType:function(B,N,G){var ce=new lt;return ce.name=B,ce.nodeName=B,ce.publicId=N||"",ce.systemId=G||"",ce}};function te(){}te.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(B,N){return Pe(this,B,N)},replaceChild:function(B,N){Pe(this,B,N,Oe),N&&this.removeChild(N)},removeChild:function(B){return ue(this,B)},appendChild:function(B){return this.insertBefore(B,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(B){return Go(this.ownerDocument||this,this,B)},normalize:function(){for(var B=this.firstChild;B;){var N=B.nextSibling;N&&N.nodeType==p&&B.nodeType==p?(this.removeChild(N),B.appendData(N.data)):(B.normalize(),B=N)}},isSupported:function(B,N){return this.ownerDocument.implementation.hasFeature(B,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(B){for(var N=this;N;){var G=N._nsMap;if(G){for(var ce in G)if(Object.prototype.hasOwnProperty.call(G,ce)&&G[ce]===B)return ce}N=N.nodeType==f?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(B){for(var N=this;N;){var G=N._nsMap;if(G&&Object.prototype.hasOwnProperty.call(G,B))return G[B];N=N.nodeType==f?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(B){var N=this.lookupPrefix(B);return N==null}};function ie(B){return B=="<"&&"&lt;"||B==">"&&"&gt;"||B=="&"&&"&amp;"||B=='"'&&"&quot;"||"&#"+B.charCodeAt()+";"}l(c,te),l(c,te.prototype);function fe(B,N){if(N(B))return!0;if(B=B.firstChild)do if(fe(B,N))return!0;while(B=B.nextSibling)}function ke(){this.ownerDocument=this}function ae(B,N,G){B&&B._inc++;var ce=G.namespaceURI;ce===i.XMLNS&&(N._nsMap[G.prefix?G.localName:""]=G.value)}function Ie(B,N,G,ce){B&&B._inc++;var Me=G.namespaceURI;Me===i.XMLNS&&delete N._nsMap[G.prefix?G.localName:""]}function z(B,N,G){if(B&&B._inc){B._inc++;var ce=N.childNodes;if(G)ce[ce.length++]=G;else{for(var Me=N.firstChild,Xe=0;Me;)ce[Xe++]=Me,Me=Me.nextSibling;ce.length=Xe,delete ce[ce.length]}}}function ue(B,N){var G=N.previousSibling,ce=N.nextSibling;return G?G.nextSibling=ce:B.firstChild=ce,ce?ce.previousSibling=G:B.lastChild=G,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,z(B.ownerDocument,B),N}function se(B){return B&&(B.nodeType===te.DOCUMENT_NODE||B.nodeType===te.DOCUMENT_FRAGMENT_NODE||B.nodeType===te.ELEMENT_NODE)}function Se(B){return B&&(V(B)||W(B)||Fe(B)||B.nodeType===te.DOCUMENT_FRAGMENT_NODE||B.nodeType===te.COMMENT_NODE||B.nodeType===te.PROCESSING_INSTRUCTION_NODE)}function Fe(B){return B&&B.nodeType===te.DOCUMENT_TYPE_NODE}function V(B){return B&&B.nodeType===te.ELEMENT_NODE}function W(B){return B&&B.nodeType===te.TEXT_NODE}function Q(B,N){var G=B.childNodes||[];if(e(G,V)||Fe(N))return!1;var ce=e(G,Fe);return!(N&&ce&&G.indexOf(ce)>G.indexOf(N))}function pe(B,N){var G=B.childNodes||[];function ce(Xe){return V(Xe)&&Xe!==N}if(e(G,ce))return!1;var Me=e(G,Fe);return!(N&&Me&&G.indexOf(Me)>G.indexOf(N))}function ge(B,N,G){if(!se(B))throw new L(E,"Unexpected parent node type "+B.nodeType);if(G&&G.parentNode!==B)throw new L(I,"child not in parent");if(!Se(N)||Fe(N)&&B.nodeType!==te.DOCUMENT_NODE)throw new L(E,"Unexpected node type "+N.nodeType+" for parent node type "+B.nodeType)}function _e(B,N,G){var ce=B.childNodes||[],Me=N.childNodes||[];if(N.nodeType===te.DOCUMENT_FRAGMENT_NODE){var Xe=Me.filter(V);if(Xe.length>1||e(Me,W))throw new L(E,"More than one element or text in fragment");if(Xe.length===1&&!Q(B,G))throw new L(E,"Element in fragment can not be inserted before doctype")}if(V(N)&&!Q(B,G))throw new L(E,"Only one element can be added and only after doctype");if(Fe(N)){if(e(ce,Fe))throw new L(E,"Only one doctype is allowed");var _t=e(ce,V);if(G&&ce.indexOf(_t)<ce.indexOf(G))throw new L(E,"Doctype can only be inserted before an element");if(!G&&_t)throw new L(E,"Doctype can not be appended since element is present")}}function Oe(B,N,G){var ce=B.childNodes||[],Me=N.childNodes||[];if(N.nodeType===te.DOCUMENT_FRAGMENT_NODE){var Xe=Me.filter(V);if(Xe.length>1||e(Me,W))throw new L(E,"More than one element or text in fragment");if(Xe.length===1&&!pe(B,G))throw new L(E,"Element in fragment can not be inserted before doctype")}if(V(N)&&!pe(B,G))throw new L(E,"Only one element can be added and only after doctype");if(Fe(N)){if(e(ce,function(En){return Fe(En)&&En!==G}))throw new L(E,"Only one doctype is allowed");var _t=e(ce,V);if(G&&ce.indexOf(_t)<ce.indexOf(G))throw new L(E,"Doctype can only be inserted before an element")}}function Pe(B,N,G,ce){ge(B,N,G),B.nodeType===te.DOCUMENT_NODE&&(ce||_e)(B,N,G);var Me=N.parentNode;if(Me&&Me.removeChild(N),N.nodeType===D){var Xe=N.firstChild;if(Xe==null)return N;var _t=N.lastChild}else Xe=_t=N;var Ti=G?G.previousSibling:B.lastChild;Xe.previousSibling=Ti,_t.nextSibling=G,Ti?Ti.nextSibling=Xe:B.firstChild=Xe,G==null?B.lastChild=_t:G.previousSibling=_t;do Xe.parentNode=B;while(Xe!==_t&&(Xe=Xe.nextSibling));return z(B.ownerDocument||B,B),N.nodeType==D&&(N.firstChild=N.lastChild=null),N}function xe(B,N){return N.parentNode&&N.parentNode.removeChild(N),N.parentNode=B,N.previousSibling=B.lastChild,N.nextSibling=null,N.previousSibling?N.previousSibling.nextSibling=N:B.firstChild=N,B.lastChild=N,z(B.ownerDocument,B,N),N}ke.prototype={nodeName:"#document",nodeType:C,doctype:null,documentElement:null,_inc:1,insertBefore:function(B,N){if(B.nodeType==D){for(var G=B.firstChild;G;){var ce=G.nextSibling;this.insertBefore(G,N),G=ce}return B}return Pe(this,B,N),B.ownerDocument=this,this.documentElement===null&&B.nodeType===d&&(this.documentElement=B),B},removeChild:function(B){return this.documentElement==B&&(this.documentElement=null),ue(this,B)},replaceChild:function(B,N){Pe(this,B,N,Oe),B.ownerDocument=this,N&&this.removeChild(N),V(B)&&(this.documentElement=B)},importNode:function(B,N){return Ru(this,B,N)},getElementById:function(B){var N=null;return fe(this.documentElement,function(G){if(G.nodeType==d&&G.getAttribute("id")==B)return N=G,!0}),N},getElementsByClassName:function(B){var N=a(B);return new X(this,function(G){var ce=[];return N.length>0&&fe(G.documentElement,function(Me){if(Me!==G&&Me.nodeType===d){var Xe=Me.getAttribute("class");if(Xe){var _t=B===Xe;if(!_t){var Ti=a(Xe);_t=N.every(o(Ti))}_t&&ce.push(Me)}}}),ce})},createElement:function(B){var N=new ye;N.ownerDocument=this,N.nodeName=B,N.tagName=B,N.localName=B,N.childNodes=new F;var G=N.attributes=new K;return G._ownerElement=N,N},createDocumentFragment:function(){var B=new ei;return B.ownerDocument=this,B.childNodes=new F,B},createTextNode:function(B){var N=new ze;return N.ownerDocument=this,N.appendData(B),N},createComment:function(B){var N=new qe;return N.ownerDocument=this,N.appendData(B),N},createCDATASection:function(B){var N=new tt;return N.ownerDocument=this,N.appendData(B),N},createProcessingInstruction:function(B,N){var G=new st;return G.ownerDocument=this,G.tagName=G.nodeName=G.target=B,G.nodeValue=G.data=N,G},createAttribute:function(B){var N=new $e;return N.ownerDocument=this,N.name=B,N.nodeName=B,N.localName=B,N.specified=!0,N},createEntityReference:function(B){var N=new jt;return N.ownerDocument=this,N.nodeName=B,N},createElementNS:function(B,N){var G=new ye,ce=N.split(":"),Me=G.attributes=new K;return G.childNodes=new F,G.ownerDocument=this,G.nodeName=N,G.tagName=N,G.namespaceURI=B,ce.length==2?(G.prefix=ce[0],G.localName=ce[1]):G.localName=N,Me._ownerElement=G,G},createAttributeNS:function(B,N){var G=new $e,ce=N.split(":");return G.ownerDocument=this,G.nodeName=N,G.name=N,G.namespaceURI=B,G.specified=!0,ce.length==2?(G.prefix=ce[0],G.localName=ce[1]):G.localName=N,G}},u(ke,te);function ye(){this._nsMap={}}ye.prototype={nodeType:d,hasAttribute:function(B){return this.getAttributeNode(B)!=null},getAttribute:function(B){var N=this.getAttributeNode(B);return N&&N.value||""},getAttributeNode:function(B){return this.attributes.getNamedItem(B)},setAttribute:function(B,N){var G=this.ownerDocument.createAttribute(B);G.value=G.nodeValue=""+N,this.setAttributeNode(G)},removeAttribute:function(B){var N=this.getAttributeNode(B);N&&this.removeAttributeNode(N)},appendChild:function(B){return B.nodeType===D?this.insertBefore(B,null):xe(this,B)},setAttributeNode:function(B){return this.attributes.setNamedItem(B)},setAttributeNodeNS:function(B){return this.attributes.setNamedItemNS(B)},removeAttributeNode:function(B){return this.attributes.removeNamedItem(B.nodeName)},removeAttributeNS:function(B,N){var G=this.getAttributeNodeNS(B,N);G&&this.removeAttributeNode(G)},hasAttributeNS:function(B,N){return this.getAttributeNodeNS(B,N)!=null},getAttributeNS:function(B,N){var G=this.getAttributeNodeNS(B,N);return G&&G.value||""},setAttributeNS:function(B,N,G){var ce=this.ownerDocument.createAttributeNS(B,N);ce.value=ce.nodeValue=""+G,this.setAttributeNode(ce)},getAttributeNodeNS:function(B,N){return this.attributes.getNamedItemNS(B,N)},getElementsByTagName:function(B){return new X(this,function(N){var G=[];return fe(N,function(ce){ce!==N&&ce.nodeType==d&&(B==="*"||ce.tagName==B)&&G.push(ce)}),G})},getElementsByTagNameNS:function(B,N){return new X(this,function(G){var ce=[];return fe(G,function(Me){Me!==G&&Me.nodeType===d&&(B==="*"||Me.namespaceURI===B)&&(N==="*"||Me.localName==N)&&ce.push(Me)}),ce})}},ke.prototype.getElementsByTagName=ye.prototype.getElementsByTagName,ke.prototype.getElementsByTagNameNS=ye.prototype.getElementsByTagNameNS,u(ye,te);function $e(){}$e.prototype.nodeType=f,u($e,te);function Be(){}Be.prototype={data:"",substringData:function(B,N){return this.data.substring(B,B+N)},appendData:function(B){B=this.data+B,this.nodeValue=this.data=B,this.length=B.length},insertData:function(B,N){this.replaceData(B,0,N)},appendChild:function(B){throw new Error(P[E])},deleteData:function(B,N){this.replaceData(B,N,"")},replaceData:function(B,N,G){var ce=this.data.substring(0,B),Me=this.data.substring(B+N);G=ce+G+Me,this.nodeValue=this.data=G,this.length=G.length}},u(Be,te);function ze(){}ze.prototype={nodeName:"#text",nodeType:p,splitText:function(B){var N=this.data,G=N.substring(B);N=N.substring(0,B),this.data=this.nodeValue=N,this.length=N.length;var ce=this.ownerDocument.createTextNode(G);return this.parentNode&&this.parentNode.insertBefore(ce,this.nextSibling),ce}},u(ze,Be);function qe(){}qe.prototype={nodeName:"#comment",nodeType:x},u(qe,Be);function tt(){}tt.prototype={nodeName:"#cdata-section",nodeType:b},u(tt,Be);function lt(){}lt.prototype.nodeType=k,u(lt,te);function ut(){}ut.prototype.nodeType=R,u(ut,te);function Qt(){}Qt.prototype.nodeType=_,u(Qt,te);function jt(){}jt.prototype.nodeType=g,u(jt,te);function ei(){}ei.prototype.nodeName="#document-fragment",ei.prototype.nodeType=D,u(ei,te);function st(){}st.prototype.nodeType=w,u(st,te);function ss(){}ss.prototype.serializeToString=function(B,N,G){return rs.call(B,N,G)},te.prototype.toString=rs;function rs(B,N){var G=[],ce=this.nodeType==9&&this.documentElement||this,Me=ce.prefix,Xe=ce.namespaceURI;if(Xe&&Me==null){var Me=ce.lookupPrefix(Xe);if(Me==null)var _t=[{namespace:Xe,prefix:null}]}return Cn(this,G,B,N,_t),G.join("")}function ti(B,N,G){var ce=B.prefix||"",Me=B.namespaceURI;if(!Me||ce==="xml"&&Me===i.XML||Me===i.XMLNS)return!1;for(var Xe=G.length;Xe--;){var _t=G[Xe];if(_t.prefix===ce)return _t.namespace!==Me}return!0}function _i(B,N,G){B.push(" ",N,'="',G.replace(/[<>&"\t\n\r]/g,ie),'"')}function Cn(B,N,G,ce,Me){if(Me||(Me=[]),ce)if(B=ce(B),B){if(typeof B=="string"){N.push(B);return}}else return;switch(B.nodeType){case d:var Xe=B.attributes,_t=Xe.length,Wt=B.firstChild,Ti=B.tagName;G=i.isHTML(B.namespaceURI)||G;var En=Ti;if(!G&&!B.prefix&&B.namespaceURI){for(var as,Dn=0;Dn<Xe.length;Dn++)if(Xe.item(Dn).name==="xmlns"){as=Xe.item(Dn).value;break}if(!as)for(var os=Me.length-1;os>=0;os--){var kn=Me[os];if(kn.prefix===""&&kn.namespace===B.namespaceURI){as=kn.namespace;break}}if(as!==B.namespaceURI)for(var os=Me.length-1;os>=0;os--){var kn=Me[os];if(kn.namespace===B.namespaceURI){kn.prefix&&(En=kn.prefix+":"+Ti);break}}}N.push("<",En);for(var ln=0;ln<_t;ln++){var Ct=Xe.item(ln);Ct.prefix=="xmlns"?Me.push({prefix:Ct.localName,namespace:Ct.value}):Ct.nodeName=="xmlns"&&Me.push({prefix:"",namespace:Ct.value})}for(var ln=0;ln<_t;ln++){var Ct=Xe.item(ln);if(ti(Ct,G,Me)){var Is=Ct.prefix||"",Vr=Ct.namespaceURI;_i(N,Is?"xmlns:"+Is:"xmlns",Vr),Me.push({prefix:Is,namespace:Vr})}Cn(Ct,N,G,ce,Me)}if(Ti===En&&ti(B,G,Me)){var Is=B.prefix||"",Vr=B.namespaceURI;_i(N,Is?"xmlns:"+Is:"xmlns",Vr),Me.push({prefix:Is,namespace:Vr})}if(Wt||G&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ti)){if(N.push(">"),G&&/^script$/i.test(Ti))for(;Wt;)Wt.data?N.push(Wt.data):Cn(Wt,N,G,ce,Me.slice()),Wt=Wt.nextSibling;else for(;Wt;)Cn(Wt,N,G,ce,Me.slice()),Wt=Wt.nextSibling;N.push("</",En,">")}else N.push("/>");return;case C:case D:for(var Wt=B.firstChild;Wt;)Cn(Wt,N,G,ce,Me.slice()),Wt=Wt.nextSibling;return;case f:return _i(N,B.name,B.value);case p:return N.push(B.data.replace(/[<&>]/g,ie));case b:return N.push("<![CDATA[",B.data,"]]>");case x:return N.push("<!--",B.data,"-->");case k:var un=B.publicId,An=B.systemId;if(N.push("<!DOCTYPE ",B.name),un)N.push(" PUBLIC ",un),An&&An!="."&&N.push(" ",An),N.push(">");else if(An&&An!=".")N.push(" SYSTEM ",An,">");else{var pt=B.internalSubset;pt&&N.push(" [",pt,"]"),N.push(">")}return;case w:return N.push("<?",B.target," ",B.data,"?>");case g:return N.push("&",B.nodeName,";");default:N.push("??",B.nodeName)}}function Ru(B,N,G){var ce;switch(N.nodeType){case d:ce=N.cloneNode(!1),ce.ownerDocument=B;case D:break;case f:G=!0;break}if(ce||(ce=N.cloneNode(!1)),ce.ownerDocument=B,ce.parentNode=null,G)for(var Me=N.firstChild;Me;)ce.appendChild(Ru(B,Me,G)),Me=Me.nextSibling;return ce}function Go(B,N,G){var ce=new N.constructor;for(var Me in N)if(Object.prototype.hasOwnProperty.call(N,Me)){var Xe=N[Me];typeof Xe!="object"&&Xe!=ce[Me]&&(ce[Me]=Xe)}switch(N.childNodes&&(ce.childNodes=new F),ce.ownerDocument=B,ce.nodeType){case d:var _t=N.attributes,Ti=ce.attributes=new K,En=_t.length;Ti._ownerElement=ce;for(var as=0;as<En;as++)ce.setAttributeNode(Go(B,_t.item(as),!0));break;case f:G=!0}if(G)for(var Dn=N.firstChild;Dn;)ce.appendChild(Go(B,Dn,G)),Dn=Dn.nextSibling;return ce}function Mu(B,N,G){B[N]=G}try{if(Object.defineProperty){let B=function(N){switch(N.nodeType){case d:case D:var G=[];for(N=N.firstChild;N;)N.nodeType!==7&&N.nodeType!==8&&G.push(B(N)),N=N.nextSibling;return G.join("");default:return N.nodeValue}};Object.defineProperty(X.prototype,"length",{get:function(){return ee(this),this.$$length}}),Object.defineProperty(te.prototype,"textContent",{get:function(){return B(this)},set:function(N){switch(this.nodeType){case d:case D:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),Mu=function(N,G,ce){N["$$"+G]=ce}}}catch{}return $s.DocumentType=lt,$s.DOMException=L,$s.DOMImplementation=he,$s.Element=ye,$s.Node=te,$s.NodeList=F,$s.XMLSerializer=ss,$s}var xl={},sp={},Xb;function P7(){return Xb||(Xb=1,function(t){var e=dh().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES}(sp)),sp}var Ic={},Kb;function O7(){if(Kb)return Ic;Kb=1;var t=dh().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+i.source+"*(?::"+e.source+i.source+"*)?$"),s=0,r=1,a=2,o=3,l=4,u=5,c=6,d=7;function f(E,I){this.message=E,this.locator=I,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function p(){}p.prototype={parse:function(E,I,O){var L=this.domBuilder;L.startDocument(),k(I,I={}),b(E,I,O,L,this.errorHandler),L.endDocument()}};function b(E,I,O,L,F){function X(ye){if(ye>65535){ye-=65536;var $e=55296+(ye>>10),Be=56320+(ye&1023);return String.fromCharCode($e,Be)}else return String.fromCharCode(ye)}function ee(ye){var $e=ye.slice(1,-1);return Object.hasOwnProperty.call(O,$e)?O[$e]:$e.charAt(0)==="#"?X(parseInt($e.substr(1).replace("x","0x"))):(F.error("entity not found:"+ye),ye)}function K(ye){if(ye>ke){var $e=E.substring(ke,ye).replace(/&#?\w+;/g,ee);te&&Y(ke),L.characters($e,0,ye-ke),ke=ye}}function Y(ye,$e){for(;ye>=le&&($e=he.exec(E));)Z=$e.index,le=Z+$e[0].length,te.lineNumber++;te.columnNumber=ye-Z+1}for(var Z=0,le=0,he=/.*(?:\r\n?|\n)|.*$/g,te=L.locator,ie=[{currentNSMap:I}],fe={},ke=0;;){try{var ae=E.indexOf("<",ke);if(ae<0){if(!E.substr(ke).match(/^\s*$/)){var Ie=L.doc,z=Ie.createTextNode(E.substr(ke));Ie.appendChild(z),L.currentElement=z}return}switch(ae>ke&&K(ae),E.charAt(ae+1)){case"/":var ge=E.indexOf(">",ae+3),ue=E.substring(ae+2,ge).replace(/[ \t\n\r]+$/g,""),se=ie.pop();ge<0?(ue=E.substring(ae+2).replace(/[\s<].*/,""),F.error("end tag name: "+ue+" is not complete:"+se.tagName),ge=ae+1+ue.length):ue.match(/\s</)&&(ue=ue.replace(/[\s<].*/,""),F.error("end tag name: "+ue+" maybe not complete"),ge=ae+1+ue.length);var Se=se.localNSMap,Fe=se.tagName==ue,V=Fe||se.tagName&&se.tagName.toLowerCase()==ue.toLowerCase();if(V){if(L.endElement(se.uri,se.localName,ue),Se)for(var W in Se)Object.prototype.hasOwnProperty.call(Se,W)&&L.endPrefixMapping(W);Fe||F.fatalError("end tag name: "+ue+" is not match the current start tagName:"+se.tagName)}else ie.push(se);ge++;break;case"?":te&&Y(ae),ge=R(E,ae,L);break;case"!":te&&Y(ae),ge=D(E,ae,L,F);break;default:te&&Y(ae);var Q=new M,pe=ie[ie.length-1].currentNSMap,ge=_(E,ae,Q,pe,ee,F),_e=Q.length;if(!Q.closed&&C(E,ge,Q.tagName,fe)&&(Q.closed=!0,O.nbsp||F.warning("unclosed xml attribute")),te&&_e){for(var Oe=g(te,{}),Pe=0;Pe<_e;Pe++){var xe=Q[Pe];Y(xe.offset),xe.locator=g(te,{})}L.locator=Oe,w(Q,L,pe)&&ie.push(Q),L.locator=te}else w(Q,L,pe)&&ie.push(Q);t.isHTML(Q.uri)&&!Q.closed?ge=x(E,ge,Q.tagName,ee,L):ge++}}catch(ye){if(ye instanceof f)throw ye;F.error("element parse error: "+ye),ge=-1}ge>ke?ke=ge:K(Math.max(ae,ke)+1)}}function g(E,I){return I.lineNumber=E.lineNumber,I.columnNumber=E.columnNumber,I}function _(E,I,O,L,F,X){function ee(te,ie,fe){O.attributeNames.hasOwnProperty(te)&&X.fatalError("Attribute "+te+" redefined"),O.addValue(te,ie.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,F),fe)}for(var K,Y,Z=++I,le=s;;){var he=E.charAt(Z);switch(he){case"=":if(le===r)K=E.slice(I,Z),le=o;else if(le===a)le=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(le===o||le===r)if(le===r&&(X.warning('attribute value must after "="'),K=E.slice(I,Z)),I=Z+1,Z=E.indexOf(he,I),Z>0)Y=E.slice(I,Z),ee(K,Y,I-1),le=u;else throw new Error("attribute value no end '"+he+"' match");else if(le==l)Y=E.slice(I,Z),ee(K,Y,I),X.warning('attribute "'+K+'" missed start quot('+he+")!!"),I=Z+1,le=u;else throw new Error('attribute value must after "="');break;case"/":switch(le){case s:O.setTagName(E.slice(I,Z));case u:case c:case d:le=d,O.closed=!0;case l:case r:break;case a:O.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return X.error("unexpected end of input"),le==s&&O.setTagName(E.slice(I,Z)),Z;case">":switch(le){case s:O.setTagName(E.slice(I,Z));case u:case c:case d:break;case l:case r:Y=E.slice(I,Z),Y.slice(-1)==="/"&&(O.closed=!0,Y=Y.slice(0,-1));case a:le===a&&(Y=K),le==l?(X.warning('attribute "'+Y+'" missed quot(")!'),ee(K,Y,I)):((!t.isHTML(L[""])||!Y.match(/^(?:disabled|checked|selected)$/i))&&X.warning('attribute "'+Y+'" missed value!! "'+Y+'" instead!!'),ee(Y,Y,I));break;case o:throw new Error("attribute value missed!!")}return Z;case"":he=" ";default:if(he<=" ")switch(le){case s:O.setTagName(E.slice(I,Z)),le=c;break;case r:K=E.slice(I,Z),le=a;break;case l:var Y=E.slice(I,Z);X.warning('attribute "'+Y+'" missed quot(")!!'),ee(K,Y,I);case u:le=c;break}else switch(le){case a:O.tagName,(!t.isHTML(L[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&X.warning('attribute "'+K+'" missed value!! "'+K+'" instead2!!'),ee(K,K,I),I=Z,le=r;break;case u:X.warning('attribute space is required"'+K+'"!!');case c:le=r,I=Z;break;case o:le=l,I=Z;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}Z++}}function w(E,I,O){for(var L=E.tagName,F=null,he=E.length;he--;){var X=E[he],ee=X.qName,K=X.value,te=ee.indexOf(":");if(te>0)var Y=X.prefix=ee.slice(0,te),Z=ee.slice(te+1),le=Y==="xmlns"&&Z;else Z=ee,Y=null,le=ee==="xmlns"&&"";X.localName=Z,le!==!1&&(F==null&&(F={},k(O,O={})),O[le]=F[le]=K,X.uri=t.XMLNS,I.startPrefixMapping(le,K))}for(var he=E.length;he--;){X=E[he];var Y=X.prefix;Y&&(Y==="xml"&&(X.uri=t.XML),Y!=="xmlns"&&(X.uri=O[Y||""]))}var te=L.indexOf(":");te>0?(Y=E.prefix=L.slice(0,te),Z=E.localName=L.slice(te+1)):(Y=null,Z=E.localName=L);var ie=E.uri=O[Y||""];if(I.startElement(ie,Z,L,E),E.closed){if(I.endElement(ie,Z,L),F)for(Y in F)Object.prototype.hasOwnProperty.call(F,Y)&&I.endPrefixMapping(Y)}else return E.currentNSMap=O,E.localNSMap=F,!0}function x(E,I,O,L,F){if(/^(?:script|textarea)$/i.test(O)){var X=E.indexOf("</"+O+">",I),ee=E.substring(I+1,X);if(/[&<]/.test(ee))return/^script$/i.test(O)?(F.characters(ee,0,ee.length),X):(ee=ee.replace(/&#?\w+;/g,L),F.characters(ee,0,ee.length),X)}return I+1}function C(E,I,O,L){var F=L[O];return F==null&&(F=E.lastIndexOf("</"+O+">"),F<I&&(F=E.lastIndexOf("</"+O)),L[O]=F),F<I}function k(E,I){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(I[O]=E[O])}function D(E,I,O,L){var F=E.charAt(I+2);switch(F){case"-":if(E.charAt(I+3)==="-"){var X=E.indexOf("-->",I+4);return X>I?(O.comment(E,I+4,X-I-4),X+3):(L.error("Unclosed comment"),-1)}else return-1;default:if(E.substr(I+3,6)=="CDATA["){var X=E.indexOf("]]>",I+9);return O.startCDATA(),O.characters(E,I+9,X-I-9),O.endCDATA(),X+3}var ee=P(E,I),K=ee.length;if(K>1&&/!doctype/i.test(ee[0][0])){var Y=ee[1][0],Z=!1,le=!1;K>3&&(/^public$/i.test(ee[2][0])?(Z=ee[3][0],le=K>4&&ee[4][0]):/^system$/i.test(ee[2][0])&&(le=ee[3][0]));var he=ee[K-1];return O.startDTD(Y,Z,le),O.endDTD(),he.index+he[0].length}}return-1}function R(E,I,O){var L=E.indexOf("?>",I);if(L){var F=E.substring(I,L).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return F?(F[0].length,O.processingInstruction(F[1],F[2]),L+2):-1}return-1}function M(){this.attributeNames={}}M.prototype={setTagName:function(E){if(!n.test(E))throw new Error("invalid tagName:"+E);this.tagName=E},addValue:function(E,I,O){if(!n.test(E))throw new Error("invalid attribute:"+E);this.attributeNames[E]=this.length,this[this.length++]={qName:E,value:I,offset:O}},length:0,getLocalName:function(E){return this[E].localName},getLocator:function(E){return this[E].locator},getQName:function(E){return this[E].qName},getURI:function(E){return this[E].uri},getValue:function(E){return this[E].value}};function P(E,I){var O,L=[],F=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(F.lastIndex=I,F.exec(E);O=F.exec(E);)if(L.push(O),O[1])return L}return Ic.XMLReader=p,Ic.ParseError=f,Ic}var Yb;function R7(){if(Yb)return xl;Yb=1;var t=dh(),e=QS(),i=P7(),n=O7(),s=e.DOMImplementation,r=t.NAMESPACE,a=n.ParseError,o=n.XMLReader;function l(_){return _.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(_){this.options=_||{locator:{}}}u.prototype.parseFromString=function(_,w){var x=this.options,C=new o,k=x.domBuilder||new d,D=x.errorHandler,R=x.locator,M=x.xmlns||{},P=/\/x?html?$/.test(w),E=P?i.HTML_ENTITIES:i.XML_ENTITIES;R&&k.setDocumentLocator(R),C.errorHandler=c(D,k,R),C.domBuilder=x.domBuilder||k,P&&(M[""]=r.HTML),M.xml=M.xml||r.XML;var I=x.normalizeLineEndings||l;return _&&typeof _=="string"?C.parse(I(_),M,E):C.errorHandler.error("invalid doc source"),k.doc};function c(_,w,x){if(!_){if(w instanceof d)return w;_=w}var C={},k=_ instanceof Function;x=x||{};function D(R){var M=_[R];!M&&k&&(M=_.length==2?function(P){_(R,P)}:_),C[R]=M&&function(P){M("[xmldom "+R+"]	"+P+p(x))}||function(){}}return D("warning"),D("error"),D("fatalError"),C}function d(){this.cdata=!1}function f(_,w){w.lineNumber=_.lineNumber,w.columnNumber=_.columnNumber}d.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(_,w,x,C){var k=this.doc,D=k.createElementNS(_,x||w),R=C.length;g(this,D),this.currentElement=D,this.locator&&f(this.locator,D);for(var M=0;M<R;M++){var _=C.getURI(M),P=C.getValue(M),x=C.getQName(M),E=k.createAttributeNS(_,x);this.locator&&f(C.getLocator(M),E),E.value=E.nodeValue=P,D.setAttributeNode(E)}},endElement:function(_,w,x){var C=this.currentElement;C.tagName,this.currentElement=C.parentNode},startPrefixMapping:function(_,w){},endPrefixMapping:function(_){},processingInstruction:function(_,w){var x=this.doc.createProcessingInstruction(_,w);this.locator&&f(this.locator,x),g(this,x)},ignorableWhitespace:function(_,w,x){},characters:function(_,w,x){if(_=b.apply(this,arguments),_){if(this.cdata)var C=this.doc.createCDATASection(_);else var C=this.doc.createTextNode(_);this.currentElement?this.currentElement.appendChild(C):/^\s*$/.test(_)&&this.doc.appendChild(C),this.locator&&f(this.locator,C)}},skippedEntity:function(_){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(_){(this.locator=_)&&(_.lineNumber=0)},comment:function(_,w,x){_=b.apply(this,arguments);var C=this.doc.createComment(_);this.locator&&f(this.locator,C),g(this,C)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(_,w,x){var C=this.doc.implementation;if(C&&C.createDocumentType){var k=C.createDocumentType(_,w,x);this.locator&&f(this.locator,k),g(this,k),this.doc.doctype=k}},warning:function(_){console.warn("[xmldom warning]	"+_,p(this.locator))},error:function(_){console.error("[xmldom error]	"+_,p(this.locator))},fatalError:function(_){throw new a(_,this.locator)}};function p(_){if(_)return`
@`+(_.systemId||"")+"#[line:"+_.lineNumber+",col:"+_.columnNumber+"]"}function b(_,w,x){return typeof _=="string"?_.substr(w,x):_.length>=w+x||w?new java.lang.String(_,w,x)+"":_}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(_){d.prototype[_]=function(){return null}});function g(_,w){_.currentElement?_.currentElement.appendChild(w):_.doc.appendChild(w)}return xl.__DOMHandler=d,xl.normalizeLineEndings=l,xl.DOMParser=u,xl}var Qb;function M7(){if(Qb)return Tl;Qb=1;var t=QS();return Tl.DOMImplementation=t.DOMImplementation,Tl.XMLSerializer=t.XMLSerializer,Tl.DOMParser=R7().DOMParser,Tl}var L7=M7();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const Zb=t=>!!t&&typeof t=="object",ri=(...t)=>t.reduce((e,i)=>(typeof i!="object"||Object.keys(i).forEach(n=>{Array.isArray(e[n])&&Array.isArray(i[n])?e[n]=e[n].concat(i[n]):Zb(e[n])&&Zb(i[n])?e[n]=ri(e[n],i[n]):e[n]=i[n]}),e),{}),ZS=t=>Object.keys(t).map(e=>t[e]),B7=(t,e)=>{const i=[];for(let n=t;n<e;n++)i.push(n);return i},wo=t=>t.reduce((e,i)=>e.concat(i),[]),JS=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e},N7=(t,e)=>t.reduce((i,n,s)=>(n[e]&&i.push(s),i),[]),F7=(t,e)=>ZS(t.reduce((i,n)=>(n.forEach(s=>{i[e(s)]=s}),i),{}));var Co={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const mu=({baseUrl:t="",source:e="",range:i="",indexRange:n=""})=>{const s={uri:e,resolvedUri:ch(t||"",e)};if(i||n){const a=(i||n).split("-");let o=q.BigInt?q.BigInt(a[0]):parseInt(a[0],10),l=q.BigInt?q.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=q.BigInt(l)-q.BigInt(o)+q.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),s.byterange={length:u,offset:o}}return s},$7=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=q.BigInt(t.offset)+q.BigInt(t.length)-q.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},Jb=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),U7={static(t){const{duration:e,timescale:i=1,sourceDuration:n,periodDuration:s}=t,r=Jb(t.endNumber),a=e/i;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/a}:{start:0,end:n/a}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:n,timescale:s=1,duration:r,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=t,u=Jb(t.endNumber),c=(e+i)/1e3,d=n+a,p=c+o-d,b=Math.ceil(p*s/r),g=Math.floor((c-d-l)*s/r),_=Math.floor((c-d)*s/r);return{start:Math.max(0,g),end:typeof u=="number"?u:Math.min(b,_)}}},z7=t=>e=>{const{duration:i,timescale:n=1,periodStart:s,startNumber:r=1}=t;return{number:r+e,duration:i/n,timeline:s,time:e*i}},Pg=t=>{const{type:e,duration:i,timescale:n=1,periodDuration:s,sourceDuration:r}=t,{start:a,end:o}=U7[e](t),l=B7(a,o).map(z7(t));if(e==="static"){const u=l.length-1,c=typeof s=="number"?s:r;l[u].duration=c-i/n*u}return l},e2=t=>{const{baseUrl:e,initialization:i={},sourceDuration:n,indexRange:s="",periodStart:r,presentationTime:a,number:o=0,duration:l}=t;if(!e)throw new Error(Co.NO_BASE_URL);const u=mu({baseUrl:e,source:i.sourceURL,range:i.range}),c=mu({baseUrl:e,source:e,indexRange:s});if(c.map=u,l){const d=Pg(t);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else n&&(c.duration=n,c.timeline=r);return c.presentationTime=a||r,c.number=o,[c]},Og=(t,e,i)=>{const n=t.sidx.map?t.sidx.map:null,s=t.sidx.duration,r=t.timeline||0,a=t.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(_=>_.referenceType!==1),c=[],d=t.endList?"static":"dynamic",f=t.sidx.timeline;let p=f,b=t.mediaSequence||0,g;typeof e.firstOffset=="bigint"?g=q.BigInt(o)+e.firstOffset:g=o+e.firstOffset;for(let _=0;_<u.length;_++){const w=e.references[_],x=w.referencedSize,C=w.subsegmentDuration;let k;typeof g=="bigint"?k=g+q.BigInt(x)-q.BigInt(1):k=g+x-1;const D=`${g}-${k}`,M=e2({baseUrl:i,timescale:l,timeline:r,periodStart:f,presentationTime:p,number:b,duration:C,sourceDuration:s,indexRange:D,type:d})[0];n&&(M.map=n),c.push(M),typeof g=="bigint"?g+=q.BigInt(x):g+=x,p+=C/l,b++}return t.segments=c,t},V7=["AUDIO","SUBTITLES"],H7=1/60,t2=t=>F7(t,({timeline:e})=>e).sort((e,i)=>e.timeline>i.timeline?1:-1),q7=(t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null},e_=t=>{let e=[];return I7(t,V7,(i,n,s,r)=>{e=e.concat(i.playlists||[])}),e},t_=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((i,n)=>{i.number=t.mediaSequence+n})},j7=({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach(n=>{n.discontinuitySequence=i.findIndex(function({timeline:l}){return l===n.timeline});const s=q7(t,n.attributes.NAME);if(!s||n.sidx)return;const r=n.segments[0],a=s.segments.findIndex(function(l){return Math.abs(l.presentationTime-r.presentationTime)<H7});if(a===-1){t_({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}s.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),t_({playlist:n,mediaSequence:s.segments[a].number})})},W7=({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(e_(t)),n=e.playlists.concat(e_(e));return e.timelineStarts=t2([t.timelineStarts,e.timelineStarts]),j7({oldPlaylists:i,newPlaylists:n,timelineStarts:e.timelineStarts}),e},hh=t=>t&&t.uri+"-"+$7(t.byterange),rp=t=>{const e=t.reduce(function(n,s){return n[s.attributes.baseUrl]||(n[s.attributes.baseUrl]=[]),n[s.attributes.baseUrl].push(s),n},{});let i=[];return Object.values(e).forEach(n=>{const s=ZS(n.reduce((r,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return r[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[o].segments.push(...a.segments)),a.attributes.contentProtection&&(r[o].attributes.contentProtection=a.attributes.contentProtection)):(r[o]=a,r[o].attributes.timelineStarts=[]),r[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));i=i.concat(s)}),i.map(n=>(n.discontinuityStarts=N7(n.segments||[],"discontinuity"),n))},Rg=(t,e)=>{const i=hh(t.sidx),n=i&&e[i]&&e[i].sidx;return n&&Og(t,n,t.sidx.resolvedUri),t},G7=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=Rg(t[i],e);return t},X7=({attributes:t,segments:e,sidx:i,mediaSequence:n,discontinuitySequence:s,discontinuityStarts:r},a)=>{const o={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:t.timelineStarts,mediaSequence:n,segments:e};return t.contentProtection&&(o.contentProtection=t.contentProtection),t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),i&&(o.sidx=i),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},K7=({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:n,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const r={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(r.CODECS=t.codecs);const a={attributes:r,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:n,discontinuitySequence:s,mediaSequence:i,segments:e};return t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),a},Y7=(t,e={},i=!1)=>{let n;const s=t.reduce((r,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const d=o?` (${o})`:"";u=`${a.attributes.lang}${d}`}r[u]||(r[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=Rg(X7(a,i),e);return r[u].playlists.push(c),typeof n>"u"&&o==="main"&&(n=a,n.default=!0),r},{});if(!n){const r=Object.keys(s)[0];s[r].default=!0}return s},Q7=(t,e={})=>t.reduce((i,n)=>{const s=n.attributes.label||n.attributes.lang||"text",r=n.attributes.lang||"und";return i[s]||(i[s]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),i[s].playlists.push(Rg(K7(n),e)),i},{}),Z7=t=>t.reduce((e,i)=>(i&&i.forEach(n=>{const{channel:s,language:r}=n;e[r]={autoselect:!1,default:!1,instreamId:s,language:r},n.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[r].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[r]["3D"]=n["3D"])}),e),{}),J7=({attributes:t,segments:e,sidx:i,discontinuityStarts:n})=>{const s={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:n,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(s.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(s.contentProtection=t.contentProtection),t.serviceLocation&&(s.attributes.serviceLocation=t.serviceLocation),i&&(s.sidx=i),s},e9=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",t9=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",i9=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",n9=(t,e)=>{t.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=e.findIndex(function({timeline:n}){return n===i.timeline}),i.segments&&i.segments.forEach((n,s)=>{n.number=s})})},i_=t=>t?Object.keys(t).reduce((e,i)=>{const n=t[i];return e.concat(n.playlists)},[]):[],s9=({dashPlaylists:t,locations:e,contentSteering:i,sidxMapping:n={},previousManifest:s,eventStream:r})=>{if(!t.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=t[0].attributes,c=rp(t.filter(e9)).map(J7),d=rp(t.filter(t9)),f=rp(t.filter(i9)),p=t.map(k=>k.attributes.captionServices).filter(Boolean),b={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:G7(c,n)};u>=0&&(b.minimumUpdatePeriod=u*1e3),e&&(b.locations=e),i&&(b.contentSteering=i),o==="dynamic"&&(b.suggestedPresentationDelay=l),r&&r.length>0&&(b.eventStream=r);const g=b.playlists.length===0,_=d.length?Y7(d,n,g):null,w=f.length?Q7(f,n):null,x=c.concat(i_(_),i_(w)),C=x.map(({timelineStarts:k})=>k);return b.timelineStarts=t2(C),n9(x,b.timelineStarts),_&&(b.mediaGroups.AUDIO.audio=_),w&&(b.mediaGroups.SUBTITLES.subs=w),p.length&&(b.mediaGroups["CLOSED-CAPTIONS"].cc=Z7(p)),s?W7({oldManifest:s,newManifest:b}):b},r9=(t,e,i)=>{const{NOW:n,clientOffset:s,availabilityStartTime:r,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=t,u=(n+s)/1e3,c=r+o,f=u+l-c;return Math.ceil((f*a-e)/i)},i2=(t,e)=>{const{type:i,minimumUpdatePeriod:n=0,media:s="",sourceDuration:r,timescale:a=1,startNumber:o=1,periodStart:l}=t,u=[];let c=-1;for(let d=0;d<e.length;d++){const f=e[d],p=f.d,b=f.r||0,g=f.t||0;c<0&&(c=g),g&&g>c&&(c=g);let _;if(b<0){const C=d+1;C===e.length?i==="dynamic"&&n>0&&s.indexOf("$Number$")>0?_=r9(t,c,p):_=(r*a-c)/p:_=(e[C].t-c)/p}else _=b+1;const w=o+u.length+_;let x=o+u.length;for(;x<w;)u.push({number:x,duration:p/a,time:c,timeline:l}),c+=p,x++}return u},a9=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,o9=t=>(e,i,n,s)=>{if(e==="$$")return"$";if(typeof t[i]>"u")return e;const r=""+t[i];return i==="RepresentationID"||(n?s=parseInt(s,10):s=1,r.length>=s)?r:`${new Array(s-r.length+1).join("0")}${r}`},n_=(t,e)=>t.replace(a9,o9(e)),l9=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Pg(t):i2(t,e),u9=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=t,s=mu({baseUrl:t.baseUrl,source:n_(n.sourceURL,i),range:n.range});return l9(t,e).map(a=>{i.Number=a.number,i.Time=a.time;const o=n_(t.media||"",i),l=t.timescale||1,u=t.presentationTimeOffset||0,c=t.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:ch(t.baseUrl||"",o),map:s,number:a.number,presentationTime:c}})},c9=(t,e)=>{const{baseUrl:i,initialization:n={}}=t,s=mu({baseUrl:i,source:n.sourceURL,range:n.range}),r=mu({baseUrl:i,source:e.media,range:e.mediaRange});return r.map=s,r},d9=(t,e)=>{const{duration:i,segmentUrls:n=[],periodStart:s}=t;if(!i&&!e||i&&e)throw new Error(Co.SEGMENT_TIME_UNSPECIFIED);const r=n.map(l=>c9(t,l));let a;return i&&(a=Pg(t)),e&&(a=i2(t,e)),a.map((l,u)=>{if(r[u]){const c=r[u],d=t.timescale||1,f=t.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=s+(l.time-f)/d,c}}).filter(l=>l)},h9=({attributes:t,segmentInfo:e})=>{let i,n;e.template?(n=u9,i=ri(t,e.template)):e.base?(n=e2,i=ri(t,e.base)):e.list&&(n=d9,i=ri(t,e.list));const s={attributes:t};if(!n)return s;const r=n(i,e.segmentTimeline);if(i.duration){const{duration:a,timescale:o=1}=i;i.duration=a/o}else r.length?i.duration=r.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):i.duration=0;return s.attributes=i,s.segments=r,e.base&&i.indexRange&&(s.sidx=r[0],s.segments=[]),s},f9=t=>t.map(h9),Ot=(t,e)=>JS(t.childNodes).filter(({tagName:i})=>i===e),Du=t=>t.textContent.trim(),p9=t=>parseFloat(t.split("/").reduce((e,i)=>e/i)),Va=t=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!o)return 0;const[l,u,c,d,f,p]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(d||0)*3600+parseFloat(f||0)*60+parseFloat(p||0)},m9=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),s_={mediaPresentationDuration(t){return Va(t)},availabilityStartTime(t){return m9(t)/1e3},minimumUpdatePeriod(t){return Va(t)},suggestedPresentationDelay(t){return Va(t)},type(t){return t},timeShiftBufferDepth(t){return Va(t)},start(t){return Va(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return p9(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Va(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Yt=t=>t&&t.attributes?JS(t.attributes).reduce((e,i)=>{const n=s_[i.name]||s_.DEFAULT;return e[i.name]=n(i.value),e},{}):{},g9={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},fh=(t,e)=>e.length?wo(t.map(function(i){return e.map(function(n){const s=Du(n),r=ch(i.baseUrl,s),a=ri(Yt(n),{baseUrl:r});return r!==s&&!a.serviceLocation&&i.serviceLocation&&(a.serviceLocation=i.serviceLocation),a})})):t,Mg=t=>{const e=Ot(t,"SegmentTemplate")[0],i=Ot(t,"SegmentList")[0],n=i&&Ot(i,"SegmentURL").map(d=>ri({tag:"SegmentURL"},Yt(d))),s=Ot(t,"SegmentBase")[0],r=i||e,a=r&&Ot(r,"SegmentTimeline")[0],o=i||s||e,l=o&&Ot(o,"Initialization")[0],u=e&&Yt(e);u&&l?u.initialization=l&&Yt(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&Ot(a,"S").map(d=>Yt(d)),list:i&&ri(Yt(i),{segmentUrls:n,initialization:Yt(l)}),base:s&&ri(Yt(s),{initialization:Yt(l)})};return Object.keys(c).forEach(d=>{c[d]||delete c[d]}),c},y9=(t,e,i)=>n=>{const s=Ot(n,"BaseURL"),r=fh(e,s),a=ri(t,Yt(n)),o=Mg(n);return r.map(l=>({segmentInfo:ri(i,o),attributes:ri(a,l)}))},v9=t=>t.reduce((e,i)=>{const n=Yt(i);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const s=g9[n.schemeIdUri];if(s){e[s]={attributes:n};const r=Ot(i,"cenc:pssh")[0];if(r){const a=Du(r);e[s].pssh=a&&jS(a)}}return e},{}),b9=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{let n,s;return s=i,/^CC\d=/.test(i)?[n,s]=i.split("="):/^CC\d$/.test(i)&&(n=i),{channel:n,language:s}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[s,r=""]=i.split("=");n.channel=s,n.language=i,r.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?n.language=l:o==="er"?n.easyReader=Number(l):o==="war"?n.aspectRatio=Number(l):o==="3D"&&(n["3D"]=Number(l))})}else n.language=i;return n.channel&&(n.channel="SERVICE"+n.channel),n})},_9=t=>wo(Ot(t.node,"EventStream").map(e=>{const i=Yt(e),n=i.schemeIdUri;return Ot(e,"Event").map(s=>{const r=Yt(s),a=r.presentationTime||0,o=i.timescale||1,l=r.duration||0,u=a/o+t.attributes.start;return{schemeIdUri:n,value:i.value,id:r.id,start:u,end:u+l/o,messageData:Du(s)||r.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),T9=(t,e,i)=>n=>{const s=Yt(n),r=fh(e,Ot(n,"BaseURL")),a=Ot(n,"Role")[0],o={role:Yt(a)};let l=ri(t,s,o);const u=Ot(n,"Accessibility")[0],c=b9(Yt(u));c&&(l=ri(l,{captionServices:c}));const d=Ot(n,"Label")[0];if(d&&d.childNodes.length){const _=d.childNodes[0].nodeValue.trim();l=ri(l,{label:_})}const f=v9(Ot(n,"ContentProtection"));Object.keys(f).length&&(l=ri(l,{contentProtection:f}));const p=Mg(n),b=Ot(n,"Representation"),g=ri(i,p);return wo(b.map(y9(l,r,g)))},x9=(t,e)=>(i,n)=>{const s=fh(e,Ot(i.node,"BaseURL")),r=ri(t,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(r.periodDuration=i.attributes.duration);const a=Ot(i.node,"AdaptationSet"),o=Mg(i.node);return wo(a.map(T9(r,s,o)))},S9=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const i=ri({serverURL:Du(t[0])},Yt(t[0]));return i.queryBeforeStart=i.queryBeforeStart==="true",i},w9=({attributes:t,priorPeriodAttributes:e,mpdType:i})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&i==="static"?0:null,C9=(t,e={})=>{const{manifestUri:i="",NOW:n=Date.now(),clientOffset:s=0,eventHandler:r=function(){}}=e,a=Ot(t,"Period");if(!a.length)throw new Error(Co.INVALID_NUMBER_OF_PERIOD);const o=Ot(t,"Location"),l=Yt(t),u=fh([{baseUrl:i}],Ot(t,"BaseURL")),c=Ot(t,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=n,l.clientOffset=s,o.length&&(l.locations=o.map(Du));const d=[];return a.forEach((f,p)=>{const b=Yt(f),g=d[p-1];b.start=w9({attributes:b,priorPeriodAttributes:g?g.attributes:null,mpdType:l.type}),d.push({node:f,attributes:b})}),{locations:l.locations,contentSteeringInfo:S9(c,r),representationInfo:wo(d.map(x9(l,u))),eventStream:wo(d.map(_9))}},n2=t=>{if(t==="")throw new Error(Co.DASH_EMPTY_MANIFEST);const e=new L7.DOMParser;let i,n;try{i=e.parseFromString(t,"application/xml"),n=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Co.DASH_INVALID_XML);return n},E9=t=>{const e=Ot(t,"UTCTiming")[0];if(!e)return null;const i=Yt(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Co.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},D9=(t,e={})=>{const i=C9(n2(t),e),n=f9(i.representationInfo);return s9({dashPlaylists:n,locations:i.locations,contentSteering:i.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:i.eventStream})},k9=t=>E9(n2(t));var ap,r_;function A9(){if(r_)return ap;r_=1;var t=Math.pow(2,32),e=function(i){var n=new DataView(i.buffer,i.byteOffset,i.byteLength),s;return n.getBigUint64?(s=n.getBigUint64(0),s<Number.MAX_SAFE_INTEGER?Number(s):s):n.getUint32(0)*t+n.getUint32(4)};return ap={getUint64:e,MAX_UINT32:t},ap}var op,a_;function I9(){if(a_)return op;a_=1;var t=A9().getUint64,e=function(i){var n=new DataView(i.buffer,i.byteOffset,i.byteLength),s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},r=12;s.version===0?(s.earliestPresentationTime=n.getUint32(r),s.firstOffset=n.getUint32(r+4),r+=8):(s.earliestPresentationTime=t(i.subarray(r)),s.firstOffset=t(i.subarray(r+8)),r+=16),r+=2;var a=n.getUint16(r);for(r+=2;a>0;r+=12,a--)s.references.push({referenceType:(i[r]&128)>>>7,referencedSize:n.getUint32(r)&2147483647,subsegmentDuration:n.getUint32(r+4),startsWithSap:!!(i[r+8]&128),sapType:(i[r+8]&112)>>>4,sapDeltaTime:n.getUint32(r+8)&268435455});return s};return op=e,op}var P9=I9();const O9=Eu(P9);var R9=je([73,68,51]),M9=function(e,i){i===void 0&&(i=0),e=je(e);var n=e[i+5],s=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],r=(n&16)>>4;return r?s+20:s+10},Dl=function t(e,i){return i===void 0&&(i=0),e=je(e),e.length-i<10||!Pt(e,R9,{offset:i})?i:(i+=M9(e,i),t(e,i))},o_=function(e){return typeof e=="string"?YS(e):e},L9=function(e){return Array.isArray(e)?e.map(function(i){return o_(i)}):[o_(e)]},B9=function t(e,i,n){n===void 0&&(n=!1),i=L9(i),e=je(e);var s=[];if(!i.length)return s;for(var r=0;r<e.length;){var a=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,o=e.subarray(r+4,r+8);if(a===0)break;var l=r+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(r+8,l);Pt(o,i[0])&&(i.length===1?s.push(u):s.push.apply(s,t(u,i.slice(1),n))),r=l}return s},Pc={EBML:je([26,69,223,163]),DocType:je([66,130]),Segment:je([24,83,128,103]),SegmentInfo:je([21,73,169,102]),Tracks:je([22,84,174,107]),Track:je([174]),TrackNumber:je([215]),DefaultDuration:je([35,227,131]),TrackEntry:je([174]),TrackType:je([131]),FlagDefault:je([136]),CodecID:je([134]),CodecPrivate:je([99,162]),VideoTrack:je([224]),AudioTrack:je([225]),Cluster:je([31,67,182,117]),Timestamp:je([231]),TimestampScale:je([42,215,177]),BlockGroup:je([160]),BlockDuration:je([155]),Block:je([161]),SimpleBlock:je([163])},om=[128,64,32,16,8,4,2,1],N9=function(e){for(var i=1,n=0;n<om.length&&!(e&om[n]);n++)i++;return i},hd=function(e,i,n,s){n===void 0&&(n=!0),s===void 0&&(s=!1);var r=N9(e[i]),a=e.subarray(i,i+r);return n&&(a=Array.prototype.slice.call(e,i,i+r),a[0]^=om[r-1]),{length:r,value:D7(a,{signed:s}),bytes:a}},l_=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return t(i)}):typeof e=="number"?k7(e):e},F9=function(e){return Array.isArray(e)?e.map(function(i){return l_(i)}):[l_(e)]},$9=function t(e,i,n){if(n>=i.length)return i.length;var s=hd(i,n,!1);if(Pt(e.bytes,s.bytes))return n;var r=hd(i,n+s.length);return t(e,i,n+r.length+r.value+s.length)},u_=function t(e,i){i=F9(i),e=je(e);var n=[];if(!i.length)return n;for(var s=0;s<e.length;){var r=hd(e,s,!1),a=hd(e,s+r.length),o=s+r.length+a.length;a.value===127&&(a.value=$9(r,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Pt(i[0],r.bytes)&&(i.length===1?n.push(u):n=n.concat(t(u,i.slice(1))));var c=r.length+a.length+u.length;s+=c}return n},U9=je([0,0,0,1]),z9=je([0,0,1]),V9=je([0,0,3]),H9=function(e){for(var i=[],n=1;n<e.length-2;)Pt(e.subarray(n,n+3),V9)&&(i.push(n+2),n++),n++;if(i.length===0)return e;var s=e.length-i.length,r=new Uint8Array(s),a=0;for(n=0;n<s;a++,n++)a===i[0]&&(a++,i.shift()),r[n]=e[a];return r},s2=function(e,i,n,s){e=je(e),n=[].concat(n);for(var r=0,a,o=0;r<e.length&&(o<s||a);){var l=void 0;if(Pt(e.subarray(r),U9)?l=4:Pt(e.subarray(r),z9)&&(l=3),!l){r++;continue}if(o++,a)return H9(e.subarray(a,r));var u=void 0;i==="h264"?u=e[r+l]&31:i==="h265"&&(u=e[r+l]>>1&63),n.indexOf(u)!==-1&&(a=r+l),r+=l+(i==="h264"?1:2)}return e.subarray(0,0)},q9=function(e,i,n){return s2(e,"h264",i,n)},j9=function(e,i,n){return s2(e,"h265",i,n)},Bi={webm:je([119,101,98,109]),matroska:je([109,97,116,114,111,115,107,97]),flac:je([102,76,97,67]),ogg:je([79,103,103,83]),ac3:je([11,119]),riff:je([82,73,70,70]),avi:je([65,86,73]),wav:je([87,65,86,69]),"3gp":je([102,116,121,112,51,103]),mp4:je([102,116,121,112]),fmp4:je([115,116,121,112]),mov:je([102,116,121,112,113,116]),moov:je([109,111,111,118]),moof:je([109,111,111,102])},Eo={aac:function(e){var i=Dl(e);return Pt(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=Dl(e);return Pt(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=u_(e,[Pc.EBML,Pc.DocType])[0];return Pt(i,Bi.webm)},mkv:function(e){var i=u_(e,[Pc.EBML,Pc.DocType])[0];return Pt(i,Bi.matroska)},mp4:function(e){if(Eo["3gp"](e)||Eo.mov(e))return!1;if(Pt(e,Bi.mp4,{offset:4})||Pt(e,Bi.fmp4,{offset:4})||Pt(e,Bi.moof,{offset:4})||Pt(e,Bi.moov,{offset:4}))return!0},mov:function(e){return Pt(e,Bi.mov,{offset:4})},"3gp":function(e){return Pt(e,Bi["3gp"],{offset:4})},ac3:function(e){var i=Dl(e);return Pt(e,Bi.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=Dl(e);return Pt(e,Bi.flac,{offset:i})},ogg:function(e){return Pt(e,Bi.ogg)},avi:function(e){return Pt(e,Bi.riff)&&Pt(e,Bi.avi,{offset:8})},wav:function(e){return Pt(e,Bi.riff)&&Pt(e,Bi.wav,{offset:8})},h264:function(e){return q9(e,7,3).length},h265:function(e){return j9(e,[32,33],3).length}},lm=Object.keys(Eo).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);lm.forEach(function(t){var e=Eo[t];Eo[t]=function(i){return e(je(i))}});var W9=Eo,Lg=function(e){e=je(e);for(var i=0;i<lm.length;i++){var n=lm[i];if(W9[n](e))return n}return""},G9=function(e){return B9(e,["moof"]).length>0},lp,c_;function X9(){if(c_)return lp;c_=1;var t=9e4,e,i,n,s,r,a,o;return e=function(l){return l*t},i=function(l,u){return l*u},n=function(l){return l/t},s=function(l,u){return l/u},r=function(l,u){return e(s(l,u))},a=function(l,u){return i(n(l),u)},o=function(l,u,c){return n(c?l:l-u)},lp={ONE_SECOND_IN_TS:t,secondsToVideoTs:e,secondsToAudioTs:i,videoTsToSeconds:n,audioTsToSeconds:s,audioTsToVideoTs:r,videoTsToAudioTs:a,metadataTsToSeconds:o},lp}var ra=X9();/**
 * @license
 * Video.js 8.22.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var um="8.22.0";const qs={},Or=function(t,e){return qs[t]=qs[t]||[],e&&(qs[t]=qs[t].concat(e)),qs[t]},K9=function(t,e){Or(t,e)},r2=function(t,e){const i=Or(t).indexOf(e);return i<=-1?!1:(qs[t]=qs[t].slice(),qs[t].splice(i,1),!0)},Y9=function(t,e){Or(t,[].concat(e).map(i=>{const n=(...s)=>(r2(t,n),i(...s));return n}))},fd={prefixed:!0},qc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],d_=qc[0];let kl;for(let t=0;t<qc.length;t++)if(qc[t][1]in Ae){kl=qc[t];break}if(kl){for(let t=0;t<kl.length;t++)fd[d_[t]]=kl[t];fd.prefixed=kl[0]!==d_[0]}let qi=[];const Q9=(t,e,i)=>(n,s,r)=>{const a=e.levels[s],o=new RegExp(`^(${a})$`);let l=t;if(n!=="log"&&r.unshift(n.toUpperCase()+":"),i&&(l=`%c${t}`,r.unshift(i)),r.unshift(l+":"),qi){qi.push([].concat(r));const c=qi.length-1e3;qi.splice(0,c>0?c:0)}if(!q.console)return;let u=q.console[n];!u&&n==="debug"&&(u=q.console.info||q.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(r)?"apply":"call"](q.console,r)};function cm(t,e=":",i=""){let n="info",s;function r(...a){s("log",n,a)}return s=Q9(t,r,i),r.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:i,d=`${t} ${u} ${a}`;return cm(d,u,c)},r.createNewLogger=(a,o,l)=>cm(a,o,l),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=a=>{if(typeof a=="string"){if(!r.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);n=a}return n},r.history=()=>qi?[].concat(qi):[],r.history.filter=a=>(qi||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),r.history.clear=()=>{qi&&(qi.length=0)},r.history.disable=()=>{qi!==null&&(qi.length=0,qi=null)},r.history.enable=()=>{qi===null&&(qi=[])},r.error=(...a)=>s("error",n,a),r.warn=(...a)=>s("warn",n,a),r.debug=(...a)=>s("debug",n,a),r}const at=cm("VIDEOJS"),a2=at.createLogger,Z9=Object.prototype.toString,o2=function(t){return ws(t)?Object.keys(t):[]};function ro(t,e){o2(t).forEach(i=>e(t[i],i))}function l2(t,e,i=0){return o2(t).reduce((n,s)=>e(n,t[s],s),i)}function ws(t){return!!t&&typeof t=="object"}function Do(t){return ws(t)&&Z9.call(t)==="[object Object]"&&t.constructor===Object}function bt(...t){const e={};return t.forEach(i=>{i&&ro(i,(n,s)=>{if(!Do(n)){e[s]=n;return}Do(e[s])||(e[s]={}),e[s]=bt(e[s],n)})}),e}function u2(t={}){const e=[];for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];e.push(n)}return e}function ph(t,e,i,n=!0){const s=a=>Object.defineProperty(t,e,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const a=i();return s(a),a}};return n&&(r.set=s),Object.defineProperty(t,e,r)}var J9=Object.freeze({__proto__:null,each:ro,reduce:l2,isObject:ws,isPlain:Do,merge:bt,values:u2,defineLazyProperty:ph});let Bg=!1,c2=null,Yn=!1,d2,h2=!1,ao=!1,oo=!1,Cs=!1,Ng=null,mh=null;const ez=!!(q.cast&&q.cast.framework&&q.cast.framework.CastReceiverContext);let f2=null,pd=!1,gh=!1,md=!1,yh=!1,gd=!1,yd=!1,vd=!1;const gu=!!($o()&&("ontouchstart"in q||q.navigator.maxTouchPoints||q.DocumentTouch&&q.document instanceof q.DocumentTouch)),yr=q.navigator&&q.navigator.userAgentData;yr&&yr.platform&&yr.brands&&(Yn=yr.platform==="Android",ao=!!yr.brands.find(t=>t.brand==="Microsoft Edge"),oo=!!yr.brands.find(t=>t.brand==="Chromium"),Cs=!ao&&oo,Ng=mh=(yr.brands.find(t=>t.brand==="Chromium")||{}).version||null,gh=yr.platform==="Windows");if(!oo){const t=q.navigator&&q.navigator.userAgent||"";Bg=/iPod/i.test(t),c2=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Yn=/Android/i.test(t),d2=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return i&&n?parseFloat(e[1]+"."+e[2]):i||null}(),h2=/Firefox/i.test(t),ao=/Edg/i.test(t),oo=/Chrome/i.test(t)||/CriOS/i.test(t),Cs=!ao&&oo,Ng=mh=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),f2=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i}(),gd=/Tizen/i.test(t),yd=/Web0S/i.test(t),vd=gd||yd,pd=/Safari/i.test(t)&&!Cs&&!Yn&&!ao&&!vd,gh=/Windows/i.test(t),md=/iPad/i.test(t)||pd&&gu&&!/iPhone/i.test(t),yh=/iPhone/i.test(t)&&!md}const Ei=yh||md||Bg,vh=(pd||Ei)&&!Cs;var p2=Object.freeze({__proto__:null,get IS_IPOD(){return Bg},get IOS_VERSION(){return c2},get IS_ANDROID(){return Yn},get ANDROID_VERSION(){return d2},get IS_FIREFOX(){return h2},get IS_EDGE(){return ao},get IS_CHROMIUM(){return oo},get IS_CHROME(){return Cs},get CHROMIUM_VERSION(){return Ng},get CHROME_VERSION(){return mh},IS_CHROMECAST_RECEIVER:ez,get IE_VERSION(){return f2},get IS_SAFARI(){return pd},get IS_WINDOWS(){return gh},get IS_IPAD(){return md},get IS_IPHONE(){return yh},get IS_TIZEN(){return gd},get IS_WEBOS(){return yd},get IS_SMART_TV(){return vd},TOUCH_ENABLED:gu,IS_IOS:Ei,IS_ANY_SAFARI:vh});function h_(t){return typeof t=="string"&&!!t.trim()}function tz(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function $o(){return Ae===q.document}function Uo(t){return ws(t)&&t.nodeType===1}function m2(){try{return q.parent!==q.self}catch{return!0}}function g2(t){return function(e,i){if(!h_(e))return Ae[t](null);h_(i)&&(i=Ae.querySelector(i));const n=Uo(i)?i:Ae;return n[t]&&n[t](e)}}function Ge(t="div",e={},i={},n){const s=Ae.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(r){const a=e[r];r==="textContent"?zr(s,a):(s[r]!==a||r==="tabIndex")&&(s[r]=a)}),Object.getOwnPropertyNames(i).forEach(function(r){s.setAttribute(r,i[r])}),n&&Fg(s,n),s}function zr(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function dm(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Gl(t,e){return tz(e),t.classList.contains(e)}function da(t,...e){return t.classList.add(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t}function bh(t,...e){return t?(t.classList.remove(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t):(at.warn("removeClass was called with an element that doesn't exist"),null)}function y2(t,e,i){return typeof i=="function"&&(i=i(t,e)),typeof i!="boolean"&&(i=void 0),e.split(/\s+/).forEach(n=>t.classList.toggle(n,i)),t}function v2(t,e){Object.getOwnPropertyNames(e).forEach(function(i){const n=e[i];n===null||typeof n>"u"||n===!1?t.removeAttribute(i):t.setAttribute(i,n===!0?"":n)})}function wr(t){const e={},i=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const n=t.attributes;for(let s=n.length-1;s>=0;s--){const r=n[s].name;let a=n[s].value;i.includes(r)&&(a=a!==null),e[r]=a}}return e}function b2(t,e){return t.getAttribute(e)}function ko(t,e,i){t.setAttribute(e,i)}function _h(t,e){t.removeAttribute(e)}function _2(){Ae.body.focus(),Ae.onselectstart=function(){return!1}}function T2(){Ae.onselectstart=function(){return!0}}function Ao(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(i[n]=e[n])}),i.height||(i.height=parseFloat(Io(t,"height"))),i.width||(i.width=parseFloat(Io(t,"width"))),i}}function yu(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let n=0,s=0;for(;t.offsetParent&&t!==Ae[fd.fullscreenElement];)n+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;return{left:n,top:s,width:e,height:i}}function Th(t,e){const i={x:0,y:0};if(Ei){let c=t;for(;c&&c.nodeName.toLowerCase()!=="html";){const d=Io(c,"transform");if(/^matrix/.test(d)){const f=d.slice(7,-1).split(/,\s/).map(Number);i.x+=f[4],i.y+=f[5]}else if(/^matrix3d/.test(d)){const f=d.slice(9,-1).split(/,\s/).map(Number);i.x+=f[12],i.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&q.WebKitCSSMatrix){const f=q.getComputedStyle(c.assignedSlot.parentElement).transform,p=new q.WebKitCSSMatrix(f);i.x+=p.m41,i.y+=p.m42}c=c.parentNode||c.host}}const n={},s=yu(e.target),r=yu(t),a=r.width,o=r.height;let l=e.offsetY-(r.top-s.top),u=e.offsetX-(r.left-s.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-r.left,l=e.changedTouches[0].pageY+r.top,Ei&&(u-=i.x,l-=i.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,u/a)),n}function x2(t){return ws(t)&&t.nodeType===3}function xh(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function S2(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),Uo(e)||x2(e))return e;if(typeof e=="string"&&/\S/.test(e))return Ae.createTextNode(e)}).filter(e=>e)}function Fg(t,e){return S2(e).forEach(i=>t.appendChild(i)),t}function w2(t,e){return Fg(xh(t),e)}function vu(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const Rr=g2("querySelector"),C2=g2("querySelectorAll");function Io(t,e){if(!t||!e)return"";if(typeof q.getComputedStyle=="function"){let i;try{i=q.getComputedStyle(t)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}function E2(t){[...Ae.styleSheets].forEach(e=>{try{const i=[...e.cssRules].map(s=>s.cssText).join(""),n=Ae.createElement("style");n.textContent=i,t.document.head.appendChild(n)}catch{const n=Ae.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,t.document.head.appendChild(n)}})}var D2=Object.freeze({__proto__:null,isReal:$o,isEl:Uo,isInFrame:m2,createEl:Ge,textContent:zr,prependTo:dm,hasClass:Gl,addClass:da,removeClass:bh,toggleClass:y2,setAttributes:v2,getAttributes:wr,getAttribute:b2,setAttribute:ko,removeAttribute:_h,blockTextSelection:_2,unblockTextSelection:T2,getBoundingClientRect:Ao,findPosition:yu,getPointerPosition:Th,isTextNode:x2,emptyEl:xh,normalizeContent:S2,appendContent:Fg,insertContent:w2,isSingleLeftClick:vu,$:Rr,$$:C2,computedStyle:Io,copyStyleSheetsToWindow:E2});let k2=!1,hm;const iz=function(){if(hm.options.autoSetup===!1)return;const t=Array.prototype.slice.call(Ae.getElementsByTagName("video")),e=Array.prototype.slice.call(Ae.getElementsByTagName("audio")),i=Array.prototype.slice.call(Ae.getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&n.length>0)for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&hm(a);else{fm(1);break}}else k2||fm(1)};function fm(t,e){$o()&&(e&&(hm=e),q.setTimeout(iz,t))}function pm(){k2=!0,q.removeEventListener("load",pm)}$o()&&(Ae.readyState==="complete"?pm():q.addEventListener("load",pm));const A2=function(t){const e=Ae.createElement("style");return e.className=t,e},I2=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Vi=new WeakMap;const nz=3;let sz=nz;function Tn(){return sz++}function f_(t,e){if(!Vi.has(t))return;const i=Vi.get(t);i.handlers[e].length===0&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&Vi.delete(t)}function $g(t,e,i,n){i.forEach(function(s){t(e,s,n)})}function Sh(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const n=t||q.event;t={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in n)s.includes(r)||r==="returnValue"&&n.preventDefault||(t[r]=n[r]);if(t.target||(t.target=t.srcElement||Ae),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,t.clientX!==null&&t.clientX!==void 0){const r=Ae.documentElement,a=Ae.body;t.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let Oc;const rz=function(){if(typeof Oc!="boolean"){Oc=!1;try{const t=Object.defineProperty({},"passive",{get(){Oc=!0}});q.addEventListener("test",null,t),q.removeEventListener("test",null,t)}catch{}}return Oc},az=["touchstart","touchmove"];function an(t,e,i){if(Array.isArray(e))return $g(an,t,e,i);Vi.has(t)||Vi.set(t,{});const n=Vi.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=Tn()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,r){if(n.disabled)return;s=Sh(s);const a=n.handlers[s.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!s.isImmediatePropagationStopped();l++)try{o[l].call(t,s,r)}catch(c){at.error(c)}}}),n.handlers[e].length===1)if(t.addEventListener){let s=!1;rz()&&az.indexOf(e)>-1&&(s={passive:!0}),t.addEventListener(e,n.dispatcher,s)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function Di(t,e,i){if(!Vi.has(t))return;const n=Vi.get(t);if(!n.handlers)return;if(Array.isArray(e))return $g(Di,t,e,i);const s=function(a,o){n.handlers[o]=[],f_(a,o)};if(e===void 0){for(const a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&s(t,a);return}const r=n.handlers[e];if(r){if(!i){s(t,e);return}if(i.guid)for(let a=0;a<r.length;a++)r[a].guid===i.guid&&r.splice(a--,1);f_(t,e)}}function zo(t,e,i){const n=Vi.has(t)?Vi.get(t):{},s=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Sh(e),n.dispatcher&&n.dispatcher.call(t,e,i),s&&!e.isPropagationStopped()&&e.bubbles===!0)zo.call(null,s,e,i);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){Vi.has(e.target)||Vi.set(e.target,{});const r=Vi.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function wh(t,e,i){if(Array.isArray(e))return $g(wh,t,e,i);const n=function(){Di(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Tn(),an(t,e,n)}function Ug(t,e,i){const n=function(){Di(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Tn(),an(t,e,n)}var oz=Object.freeze({__proto__:null,fixEvent:Sh,on:an,off:Di,trigger:zo,one:wh,any:Ug});const xn=30,St=function(t,e,i){e.guid||(e.guid=Tn());const n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n},Es=function(t,e){let i=q.performance.now();return function(...s){const r=q.performance.now();r-i>=e&&(t(...s),i=r)}},P2=function(t,e,i,n=q){let s;const r=()=>{n.clearTimeout(s),s=null},a=function(){const o=this,l=arguments;let u=function(){s=null,u=null,i||t.apply(o,l)};!s&&i&&t.apply(o,l),n.clearTimeout(s),s=n.setTimeout(u,e)};return a.cancel=r,a};var lz=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:xn,bind_:St,throttle:Es,debounce:P2});let Sl;class on{on(e,i){const n=this.addEventListener;this.addEventListener=()=>{},an(this,e,i),this.addEventListener=n}off(e,i){Di(this,e,i)}one(e,i){const n=this.addEventListener;this.addEventListener=()=>{},wh(this,e,i),this.addEventListener=n}any(e,i){const n=this.addEventListener;this.addEventListener=()=>{},Ug(this,e,i),this.addEventListener=n}trigger(e){const i=e.type||e;typeof e=="string"&&(e={type:i}),e=Sh(e),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](e),zo(this,e)}queueTrigger(e){Sl||(Sl=new Map);const i=e.type||e;let n=Sl.get(this);n||(n=new Map,Sl.set(this,n));const s=n.get(i);n.delete(i),q.clearTimeout(s);const r=q.setTimeout(()=>{n.delete(i),n.size===0&&(n=null,Sl.delete(this)),this.trigger(e)},0);n.set(i,r)}}on.prototype.allowedEvents_={};on.prototype.addEventListener=on.prototype.on;on.prototype.removeEventListener=on.prototype.off;on.prototype.dispatchEvent=on.prototype.trigger;const Ch=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Ys=t=>t instanceof on||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),uz=(t,e)=>{Ys(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},mm=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,bd=(t,e,i)=>{if(!t||!t.nodeName&&!Ys(t))throw new Error(`Invalid target for ${Ch(e)}#${i}; must be a DOM node or evented object.`)},O2=(t,e,i)=>{if(!mm(t))throw new Error(`Invalid event type for ${Ch(e)}#${i}; must be a non-empty string or array.`)},R2=(t,e,i)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${Ch(e)}#${i}; must be a function.`)},up=(t,e,i)=>{const n=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let s,r,a;return n?(s=t.eventBusEl_,e.length>=3&&e.shift(),[r,a]=e):(s=e[0],r=e[1],a=e[2]),bd(s,t,i),O2(r,t,i),R2(a,t,i),a=St(t,a),{isTargetingSelf:n,target:s,type:r,listener:a}},Jr=(t,e,i,n)=>{bd(t,t,e),t.nodeName?oz[e](t,i,n):t[e](i,n)},cz={on(...t){const{isTargetingSelf:e,target:i,type:n,listener:s}=up(this,t,"on");if(Jr(i,"on",n,s),!e){const r=()=>this.off(i,n,s);r.guid=s.guid;const a=()=>this.off("dispose",r);a.guid=s.guid,Jr(this,"on","dispose",r),Jr(i,"on","dispose",a)}},one(...t){const{isTargetingSelf:e,target:i,type:n,listener:s}=up(this,t,"one");if(e)Jr(i,"one",n,s);else{const r=(...a)=>{this.off(i,n,r),s.apply(null,a)};r.guid=s.guid,Jr(i,"one",n,r)}},any(...t){const{isTargetingSelf:e,target:i,type:n,listener:s}=up(this,t,"any");if(e)Jr(i,"any",n,s);else{const r=(...a)=>{this.off(i,n,r),s.apply(null,a)};r.guid=s.guid,Jr(i,"any",n,r)}},off(t,e,i){if(!t||mm(t))Di(this.eventBusEl_,t,e);else{const n=t,s=e;bd(n,this,"off"),O2(s,this,"off"),R2(i,this,"off"),i=St(this,i),this.off("dispose",i),n.nodeName?(Di(n,s,i),Di(n,"dispose",i)):Ys(n)&&(n.off(s,i),n.off("dispose",i))}},trigger(t,e){bd(this.eventBusEl_,this,"trigger");const i=t&&typeof t!="string"?t.type:t;if(!mm(i))throw new Error(`Invalid event type for ${Ch(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return zo(this.eventBusEl_,t,e)}};function zg(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=Ge("span",{className:"vjs-event-bus"});return Object.assign(t,cz),t.eventedCallbacks&&t.eventedCallbacks.forEach(n=>{n()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(n){n&&Vi.has(n)&&Vi.delete(n)}),q.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const dz={state:{},setState(t){typeof t=="function"&&(t=t());let e;return ro(t,(i,n)=>{this.state[n]!==i&&(e=e||{},e[n]={from:this.state[n],to:i}),this.state[n]=i}),e&&Ys(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function M2(t,e){return Object.assign(t,dz),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&Ys(t)&&t.on("statechanged",t.handleStateChanged),t}const Xl=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},Ut=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},L2=function(t,e){return Ut(t)===Ut(e)};var hz=Object.freeze({__proto__:null,toLowerCase:Xl,toTitleCase:Ut,titleCaseEquals:L2});class me{constructor(e,i,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=bt({},this.options_),i=this.options_=bt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${Tn()}`}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),i.evented!==!1&&(zg(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),M2(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(n),i.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=bt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,i,n){return Ge(e,i,n)}localize(e,i,n=e){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[s],o=s&&s.split("-")[0],l=r&&r[o];let u=n;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),i&&(u=u.replace(/\{(\d+)\}/g,function(c,d){const f=i[d-1];let p=f;return typeof f>"u"&&(p=c),p})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,s)=>n.concat(s),[]);let i=this;for(let n=0;n<e.length;n++)if(i=i.getChild(e[n]),!i||!i.getChild)return;return i}setIcon(e,i=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",s=Ge("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=Ae.createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const a=Ae.createElementNS(n,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(r),this.iconIsSet_?i.replaceChild(s,i.querySelector(".vjs-icon-placeholder")):i.appendChild(s),this.iconIsSet_=!0,s}addChild(e,i={},n=this.children_.length){let s,r;if(typeof e=="string"){r=Ut(e);const a=i.componentClass||r;i.name=r;const o=me.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;s=new o(this.player_||this,i)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&Ut(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[Xl(r)]=s),typeof s.el=="function"&&s.el()){let a=null;this.children_[n+1]&&(this.children_[n+1].el_?a=this.children_[n+1].el_:Uo(this.children_[n+1])&&(a=this.children_[n+1])),this.contentEl().insertBefore(s.el(),a)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let i=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){i=!0,this.children_.splice(s,1);break}if(!i)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ut(e.name())]=null,this.childNameIndex_[Xl(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const i=this.options_,n=a=>{const o=a.name;let l=a.opts;if(i[o]!==void 0&&(l=i[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let s;const r=me.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(a){return!s.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=me.getComponent(a.opts.componentClass||Ut(a.name));return o&&!r.isTech(o)}).forEach(n)}}buildCSSClass(){return""}ready(e,i=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}i?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(e,i){return Rr(e,i||this.contentEl())}$$(e,i){return C2(e,i||this.contentEl())}hasClass(e){return Gl(this.el_,e)}addClass(...e){da(this.el_,...e)}removeClass(...e){bh(this.el_,...e)}toggleClass(e,i){y2(this.el_,e,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return b2(this.el_,e)}setAttribute(e,i){ko(this.el_,e,i)}removeAttribute(e){_h(this.el_,e)}width(e,i){return this.dimension("width",e,i)}height(e,i){return this.dimension("height",e,i)}dimensions(e,i){this.width(e,!0),this.height(i)}dimension(e,i,n){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[e]=i:i==="auto"?this.el_.style[e]="":this.el_.style[e]=i+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+Ut(e)],10)}currentDimension(e){let i=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(i=Io(this.el_,e),i=parseFloat(i),i===0||isNaN(i)){const n=`offset${Ut(e)}`;i=this.el_[n]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),i={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:i,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,i=null;const n=10,s=200;let r;this.on("touchstart",function(o){o.touches.length===1&&(i={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=q.performance.now(),r=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)r=!1;else if(i){const l=o.touches[0].pageX-i.pageX,u=o.touches[0].pageY-i.pageY;Math.sqrt(l*l+u*u)>n&&(r=!1)}});const a=function(){r=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){i=null,r===!0&&q.performance.now()-e<s&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=St(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});const n=function(s){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,i){var n;return e=St(this,e),this.clearTimersOnDispose_(),n=q.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},i),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),q.clearTimeout(e)),e}setInterval(e,i){e=St(this,e),this.clearTimersOnDispose_();const n=q.setInterval(e,i);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),q.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var i;return e=St(this,e),i=q.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),e()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(e,i){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),i=St(this,i);const n=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),q.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,i])=>{this[e].forEach((n,s)=>this[i](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function i(r){const a=q.getComputedStyle(r,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function n(r){return!(!i(r.parentElement)||!i(r)||r.style.opacity==="0"||q.getComputedStyle(r).height==="0px"||q.getComputedStyle(r).width==="0px")}function s(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;const a={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(a.x<0||a.x>(Ae.documentElement.clientWidth||q.innerWidth)||a.y<0||a.y>(Ae.documentElement.clientHeight||q.innerHeight))return!1;let o=Ae.elementFromPoint(a.x,a.y);for(;o;){if(o===r)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(s(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,i){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=me.getComponent("Tech"),s=n&&n.isTech(i),r=me===i||me.prototype.isPrototypeOf(i.prototype);if(s||!r){let o;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Ut(e),me.components_||(me.components_={});const a=me.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return me.components_[e]=i,me.components_[Xl(e)]=i,i}static getComponent(e){if(!(!e||!me.components_))return me.components_[e]}}me.registerComponent("Component",me);function fz(t,e,i){if(typeof e!="number"||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}function p_(t,e,i,n){return fz(t,n,i.length-1),i[n][e]}function cp(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:p_.bind(null,"start",0,t),end:p_.bind(null,"end",1,t)},q.Symbol&&q.Symbol.iterator&&(e[q.Symbol.iterator]=()=>(t||[]).values()),e}function qn(t,e){return Array.isArray(t)?cp(t):t===void 0||e===void 0?cp():cp([[t,e]])}const B2=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),n=Math.floor(t/60%60),s=Math.floor(t/3600);const r=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(s=n=i="-"),s=s>0||a>0?s+":":"",n=((s||r>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,s+n+i};let Vg=B2;function N2(t){Vg=t}function F2(){Vg=B2}function _a(t,e=t){return Vg(t,e)}var pz=Object.freeze({__proto__:null,createTimeRanges:qn,createTimeRange:qn,setFormatTime:N2,resetFormatTime:F2,formatTime:_a});function $2(t,e){let i=0,n,s;if(!e)return 0;(!t||!t.length)&&(t=qn(0,0));for(let r=0;r<t.length;r++)n=t.start(r),s=t.end(r),s>e&&(s=e),i+=s-n;return i/e}function Ft(t){if(t instanceof Ft)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:ws(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=Ft.defaultMessages[this.code]||"")}Ft.prototype.code=0;Ft.prototype.message="";Ft.prototype.status=null;Ft.prototype.metadata=null;Ft.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ft.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Ft.MEDIA_ERR_CUSTOM=0;Ft.prototype.MEDIA_ERR_CUSTOM=0;Ft.MEDIA_ERR_ABORTED=1;Ft.prototype.MEDIA_ERR_ABORTED=1;Ft.MEDIA_ERR_NETWORK=2;Ft.prototype.MEDIA_ERR_NETWORK=2;Ft.MEDIA_ERR_DECODE=3;Ft.prototype.MEDIA_ERR_DECODE=3;Ft.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ft.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ft.MEDIA_ERR_ENCRYPTED=5;Ft.prototype.MEDIA_ERR_ENCRYPTED=5;function Kl(t){return t!=null&&typeof t.then=="function"}function ys(t){Kl(t)&&t.then(null,e=>{})}const gm=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,n,s)=>(t[n]&&(i[n]=t[n]),i),{cues:t.cues&&Array.prototype.map.call(t.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},mz=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=gm(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(t.textTracks(),function(s){return i.indexOf(s)===-1}).map(gm))},gz=function(t,e){return t.forEach(function(i){const n=e.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(s=>n.addCue(s))}),e.textTracks()};var m_={textTracksToJson:mz,jsonToTextTracks:gz,trackToJson_:gm};const dp="vjs-modal-dialog";class Vo extends me{constructor(e,i){super(e,i),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ge("div",{className:`${dp}-content`},{role:"document"}),this.descEl_=Ge("p",{className:`${dp}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),zr(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${dp} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const i=this.closeable_=!!e;let n=this.getChild("closeButton");if(i&&!n){const s=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(n,"close",this.close_)}!i&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const i=this.contentEl(),n=i.parentNode,s=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(i),this.empty(),w2(i,e),this.trigger("modalfill"),s?n.insertBefore(i,s):n.appendChild(i);const r=this.getChild("closeButton");r&&n.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),xh(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Ae.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const i=this.focusableEls_(),n=this.el_.querySelector(":focus");let s;for(let r=0;r<i.length;r++)if(n===i[r]){s=r;break}Ae.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===i.length-1&&(i[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,i=>(i instanceof q.HTMLAnchorElement||i instanceof q.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof q.HTMLInputElement||i instanceof q.HTMLSelectElement||i instanceof q.HTMLTextAreaElement||i instanceof q.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof q.HTMLIFrameElement||i instanceof q.HTMLObjectElement||i instanceof q.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}Vo.prototype.options_={pauseOnOpen:!0,temporary:!0};me.registerComponent("ModalDialog",Vo);class Po extends on{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<e.length;i++)this.addTrack(e[i])}addTrack(e){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Ys(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let i;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){i=this[n],i.off&&i.off(),this.tracks_.splice(n,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(e){let i=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){i=r;break}}return i}}Po.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Po.prototype.allowedEvents_)Po.prototype["on"+t]=null;const hp=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].enabled=!1)};class yz extends Po{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].enabled){hp(e,e[i]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&hp(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,hp(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const fp=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].selected=!1)};class vz extends Po{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].selected){fp(e,e[i]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(e){e.selected&&fp(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,fp(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class U2 extends Po{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class bz{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,n=e.length;i<n;i++)this.addTrackElement_(e[i])}addTrackElement_(e){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let i;for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n].track){i=this.trackElements_[n];break}return i}removeTrackElement_(e){for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}}class _d{constructor(e){_d.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const i=this.length||0;let n=0;const s=e.length;this.cues_=e,this.length_=e.length;const r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(i<s)for(n=i;n<s;n++)r.call(this,n)}getCueById(e){let i=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){i=r;break}}return i}}const _z={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Tz={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},xz={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},g_={disabled:"disabled",hidden:"hidden",showing:"showing"};class Hg extends on{constructor(e={}){super();const i={id:e.id||"vjs_track_"+Tn(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const s in i)Object.defineProperty(this,s,{get(){return i[s]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(s){s!==n&&(n=s,this.trigger("labelchange"))}})}}const qg=function(t){return new URL(t,Ae.baseURI)},z2=function(t){return new URL(t,Ae.baseURI).href},jg=function(t){if(typeof t=="string"){const i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(i)return i.pop().toLowerCase()}return""},Eh=function(t,e=q.location){return qg(t).origin!==e.origin};var Sz=Object.freeze({__proto__:null,parseUrl:qg,getAbsoluteURL:z2,getFileExtension:jg,isCrossOrigin:Eh});const y_=function(t,e){const i=new q.WebVTT.Parser(q,q.vttjs,q.WebVTT.StringDecoder()),n=[];i.oncue=function(s){e.addCue(s)},i.onparsingerror=function(s){n.push(s)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),n.length>0&&(q.console&&q.console.groupCollapsed&&q.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(s=>at.error(s)),q.console&&q.console.groupEnd&&q.console.groupEnd()),i.flush()},v_=function(t,e){const i={uri:t},n=Eh(t);n&&(i.cors=n);const s=e.tech_.crossOrigin()==="use-credentials";s&&(i.withCredentials=s),qS(i,St(this,function(r,a,o){if(r)return at.error(r,a);e.loaded_=!0,typeof q.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){at.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return y_(o,e)}):y_(o,e)}))};class ku extends Hg{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const i=bt(e,{kind:xz[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=g_[i.mode]||"disabled";const s=i.default;(i.kind==="metadata"||i.kind==="chapters")&&(n="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new _d(this.cues_),a=new _d(this.activeCues_);let o=!1;this.timeupdateHandler=St(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return n},set(u){g_[u]&&n!==u&&(n=u,!this.preload_&&n!=="disabled"&&this.cues.length===0&&v_(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let d=0,f=this.cues.length;d<f;d++){const p=this.cues[d];p.startTime<=u&&p.endTime>=u&&c.push(p)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let d=0;d<c.length;d++)this.activeCues_.indexOf(c[d])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||i.kind!=="subtitles"&&i.kind!=="captions")&&v_(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let i=e;if(!("getCueAsHTML"in i)){i=new q.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in i||(i[s]=e[s]);i.id=e.id,i.originalCue_=e}const n=this.tech_.textTracks();for(let s=0;s<n.length;s++)n[s]!==this&&n[s].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}removeCue(e){let i=this.cues_.length;for(;i--;){const n=this.cues_[i];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}ku.prototype.allowedEvents_={cuechange:"cuechange"};class V2 extends Hg{constructor(e={}){const i=bt(e,{kind:Tz[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class H2 extends Hg{constructor(e={}){const i=bt(e,{kind:_z[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class er extends on{constructor(e={}){super();let i;const n=new ku(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return n}}}),i=er.NONE,n.addEventListener("loadeddata",()=>{i=er.LOADED,this.trigger({type:"load",target:this})})}}er.prototype.allowedEvents_={load:"load"};er.NONE=0;er.LOADING=1;er.LOADED=2;er.ERROR=3;const yn={audio:{ListClass:yz,TrackClass:V2,capitalName:"Audio"},video:{ListClass:vz,TrackClass:H2,capitalName:"Video"},text:{ListClass:U2,TrackClass:ku,capitalName:"Text"}};Object.keys(yn).forEach(function(t){yn[t].getterName=`${t}Tracks`,yn[t].privateName=`${t}Tracks_`});const Oo={remoteText:{ListClass:U2,TrackClass:ku,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:bz,TrackClass:er,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},zi=Object.assign({},yn,Oo);Oo.names=Object.keys(Oo);yn.names=Object.keys(yn);zi.names=[].concat(Oo.names).concat(yn.names);function wz(t,e,i,n,s={}){const r=t.textTracks();s.kind=e,i&&(s.label=i),n&&(s.language=n),s.tech=t;const a=new zi.text.TrackClass(s);return r.addTrack(a),a}class Ze extends me{constructor(e={},i=function(){}){e.reportTouchActivity=!1,super(null,e,i),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),zi.names.forEach(n=>{const s=zi[n];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new zi.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(St(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return qn(0,0)}bufferedPercent(){return $2(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(yn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(i=>{const n=this[`${i}Tracks`]()||[];let s=n.length;for(;s--;){const r=n[s];i==="text"&&this.removeRemoteTextTrack(r),n.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let i=e.length;for(;i--;){const n=e[i];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Ft(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?qn(0,0):qn()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){yn.names.forEach(e=>{const i=yn[e],n=()=>{this.trigger(`${e}trackchange`)},s=this[i.getterName]();s.addEventListener("removetrack",n),s.addEventListener("addtrack",n),this.on("dispose",()=>{s.removeEventListener("removetrack",n),s.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!q.WebVTT)if(Ae.body.contains(this.el())){if(!this.options_["vtt.js"]&&Do(zb)&&Object.keys(zb).length>0){this.trigger("vttjsloaded");return}const e=Ae.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),q.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),i=this.remoteTextTracks(),n=o=>e.addTrack(o.track),s=o=>e.removeTrack(o.track);i.on("addtrack",n),i.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",r),l.mode==="showing"&&l.addEventListener("cuechange",r)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",s),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",r)})}addTextTrack(e,i,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return wz(this,e,i,n)}createRemoteTextTrack(e){const i=bt(e,{tech:this});return new Oo.remoteTextEl.TrackClass(i)}addRemoteTextTrack(e={},i){const n=this.createRemoteTextTrack(e);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const i=Tn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,i){return Ze.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ze||e instanceof Ze||e===Ze}static registerTech(e,i){if(Ze.techs_||(Ze.techs_={}),!Ze.isTech(i))throw new Error(`Tech ${e} must be a Tech`);if(!Ze.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ze.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ut(e),Ze.techs_[e]=i,Ze.techs_[Xl(e)]=i,e!=="Tech"&&Ze.defaultTechOrder_.push(e),i}static getTech(e){if(e){if(Ze.techs_&&Ze.techs_[e])return Ze.techs_[e];if(e=Ut(e),q&&q.videojs&&q.videojs[e])return at.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),q.videojs[e]}}}zi.names.forEach(function(t){const e=zi[t];Ze.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ze.prototype.featuresVolumeControl=!0;Ze.prototype.featuresMuteControl=!0;Ze.prototype.featuresFullscreenResize=!1;Ze.prototype.featuresPlaybackRate=!1;Ze.prototype.featuresProgressEvents=!1;Ze.prototype.featuresSourceset=!1;Ze.prototype.featuresTimeupdateEvents=!1;Ze.prototype.featuresNativeTextTracks=!1;Ze.prototype.featuresVideoFrameCallback=!1;Ze.withSourceHandlers=function(t){t.registerSourceHandler=function(i,n){let s=t.sourceHandlers;s||(s=t.sourceHandlers=[]),n===void 0&&(n=s.length),s.splice(n,0,i)},t.canPlayType=function(i){const n=t.sourceHandlers||[];let s;for(let r=0;r<n.length;r++)if(s=n[r].canPlayType(i),s)return s;return""},t.selectSourceHandler=function(i,n){const s=t.sourceHandlers||[];let r;for(let a=0;a<s.length;a++)if(r=s[a].canHandleSource(i,n),r)return s[a];return null},t.canPlaySource=function(i,n){const s=t.selectSourceHandler(i,n);return s?s.canHandleSource(i,n):""},["seekable","seeking","duration"].forEach(function(i){const n=this[i];typeof n=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){let n=t.selectSourceHandler(i,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:at.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=n.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};me.registerComponent("Tech",Ze);Ze.registerTech("Tech",Ze);Ze.defaultTechOrder_=[];const ha={},Td={},xd={};function Cz(t,e){ha[t]=ha[t]||[],ha[t].push(e)}function Ez(t,e,i){t.setTimeout(()=>ta(e,ha[e.type],i,t),1)}function Dz(t,e){t.forEach(i=>i.setTech&&i.setTech(e))}function kz(t,e,i){return t.reduceRight(Wg(i),e[i]())}function Az(t,e,i,n){return e[i](t.reduce(Wg(i),n))}function b_(t,e,i,n=null){const s="call"+Ut(i),r=t.reduce(Wg(s),n),a=r===xd,o=a?null:e[i](r);return Oz(t,i,o,a),o}const Iz={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Pz={setCurrentTime:1,setMuted:1,setVolume:1},__={play:1,pause:1};function Wg(t){return(e,i)=>e===xd?xd:i[t]?i[t](e):e}function Oz(t,e,i,n){for(let s=t.length-1;s>=0;s--){const r=t[s];r[e]&&r[e](n,i)}}function Rz(t){Td.hasOwnProperty(t.id())&&delete Td[t.id()]}function Mz(t,e){const i=Td[t.id()];let n=null;if(i==null)return n=e(t),Td[t.id()]=[[e,n]],n;for(let s=0;s<i.length;s++){const[r,a]=i[s];r===e&&(n=a)}return n===null&&(n=e(t),i.push([e,n])),n}function ta(t={},e=[],i,n,s=[],r=!1){const[a,...o]=e;if(typeof a=="string")ta(t,ha[a],i,n,s,r);else if(a){const l=Mz(n,a);if(!l.setSource)return s.push(l),ta(t,o,i,n,s,r);l.setSource(Object.assign({},t),function(u,c){if(u)return ta(t,o,i,n,s,r);s.push(l),ta(c,t.type===c.type?o:ha[c.type],i,n,s,r)})}else o.length?ta(t,o,i,n,s,r):r?i(t,s):ta(t,ha["*"],i,n,s,!0)}const Lz={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Sd=function(t=""){const e=jg(t);return Lz[e.toLowerCase()]||""},Bz=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter(s=>s.src===e);if(i.length)return i[0].type;const n=t.$$("source");for(let s=0;s<n.length;s++){const r=n[s];if(r.type&&r.src&&r.src===e)return r.type}return Sd(e)},q2=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(i){i=q2(i),Array.isArray(i)?e=e.concat(i):ws(i)&&e.push(i)}),t=e}else typeof t=="string"&&t.trim()?t=[T_({src:t})]:ws(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[T_(t)]:t=[];return t};function T_(t){if(!t.type){const e=Sd(t.src);e&&(t.type=e)}return t}var Nz=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const x_=gd?10009:yd?461:8,Ha={codes:{play:415,pause:19,ff:417,rw:412,back:x_},names:{415:"play",19:"pause",417:"ff",412:"rw",[x_]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},S_=5;class Fz extends on{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const i=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i.key)){if(this.isPaused_)return;i.preventDefault();const n=i.key.substring(5).toLowerCase();this.move(n)}else if(Ha.isEventKey(i,"play")||Ha.isEventKey(i,"pause")||Ha.isEventKey(i,"ff")||Ha.isEventKey(i,"rw")){i.preventDefault();const n=Ha.getEventName(i);this.performMediaAction_(n)}else Ha.isEventKey(i,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(i.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+S_);break;case"rw":this.userSeek_(this.player_.currentTime()-S_);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const i=e.relatedTarget;let n=null;const s=this.getCurrentComponent(e.target);i&&(n=!!i.closest(".video-js"),i.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!i)&&(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,i=[];function n(s){for(const r of s)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&i.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&n(r.children_)}return e.children_.forEach(s=>{if(s.hasOwnProperty("el_"))if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())){i.push(s);return}else s.hasOwnProperty("children_")&&s.children_.length>0?n(s.children_):s.hasOwnProperty("items")&&s.items.length>0?n(s.items):this.findSuitableDOMChild(s)&&i.push(s);if(s.name_==="ErrorDisplay"&&s.opened_){const r=s.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((o,l)=>{i.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=i,this.focusableComponents}findSuitableDOMChild(e){function i(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let s=0;s<n.children.length;s++){const r=n.children[s],a=i(r);if(a)return a}return null}return e.el()?i(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const i=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===i)return n}}add(e){const i=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&i.push(e),this.focusableComponents=i,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let i=0;i<this.focusableComponents.length;i++)if(this.focusableComponents[i].name()===e.name()){this.focusableComponents.splice(i,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const i=this.getCurrentComponent();if(!i)return;const n=i.getPositions(),s=this.focusableComponents.filter(a=>a!==i&&this.isInDirection_(n.boundingClientRect,a.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(n.center,s,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:i})}findBestCandidate_(e,i,n){let s=1/0,r=null;for(const a of i){const o=a.getPositions().center,l=this.calculateDistance_(e,o,n);l<s&&(s=l,r=a)}return r}isInDirection_(e,i,n){switch(n){case"right":return i.left>=e.right;case"left":return i.right<=e.left;case"down":return i.top>=e.bottom;case"up":return i.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,i,n){const s=Math.abs(e.x-i.x),r=Math.abs(e.y-i.y);let a;switch(n){case"right":case"left":a=s+r*100;break;case"up":a=r*2+s*.5;break;case"down":a=r*5+s;break;default:a=s+r}return a}searchForTrackSelect_(){const e=this;for(const i of e.updateFocusableComponents())if(i.constructor.name==="TextTrackSelect"){e.focus(i);break}}}class $z extends me{constructor(e,i,n){const s=bt({createEl:!1},i);if(super(e,s,n),!i.playerOptions.sources||i.playerOptions.sources.length===0)for(let r=0,a=i.playerOptions.techOrder;r<a.length;r++){const o=Ut(a[r]);let l=Ze.getTech(o);if(o||(l=me.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(i.playerOptions.sources)}}me.registerComponent("MediaLoader",$z);class Dh extends me{constructor(e,i){super(e,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",i={},n={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&at.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=i.tabIndex;const s=Ge(e,i,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Ge("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ge("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,i=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,zr(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}me.registerComponent("ClickableComponent",Dh);class ym extends Dh{constructor(e,i){super(e,i),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ge("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ge("picture",{className:"vjs-poster",tabIndex:-1},{},Ge("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?ys(this.player_.play()):this.player_.pause())}}ym.prototype.crossorigin=ym.prototype.crossOrigin;me.registerComponent("PosterImage",ym);const pn="#222",w_="#ccc",Uz={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function pp(t,e){let i;if(t.length===4)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)i=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function hs(t,e,i){try{t.style[e]=i}catch{return}}function C_(t){return t?`${t}px`:""}class zz extends me{constructor(e,i,n){super(e,i,n);const s=a=>this.updateDisplay(a),r=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",s),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(St(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const a=q.screen.orientation||q,o=q.screen.orientation?"change":"orientationchange";a.addEventListener(o,r),e.on("dispose",()=>a.removeEventListener(o,r));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},i=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let s,r,a;for(let o=0;o<i.length;o++){const l=i[o];n&&n.enabled&&n.language&&n.language===l.language&&l.kind in e?l.kind===n.kind?a=l:a||(a=l):n&&!n.enabled?(a=null,s=null,r=null):l.default&&(l.kind==="descriptions"&&!s?s=l:l.kind in e&&!r&&(r=l))}a?a.mode="showing":r?r.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof q.WebVTT=="function"&&q.WebVTT.processCues(q,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let n=null,s=null,r=e.length;for(;r--;){const a=e[r];a.mode==="showing"&&(a.kind==="descriptions"?n=a:s=a)}if(s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!q.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",hs(a,"position","relative"),hs(a,"height",u-l+"px"),hs(a,"top","unset"),vd?hs(a,"bottom",u+"px"):hs(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const d=c.style.inset.split(" ");d.length===3&&Object.assign(c.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!q.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),i=this.player_.currentHeight(),n=e/i,s=this.player_.videoWidth()/this.player_.videoHeight();let r=0,a=0;Math.abs(n-s)>.1&&(n>s?r=Math.round((e-i*s)/2):a=Math.round((i-e/s)/2)),hs(this.el_,"insetInline",C_(r)),hs(this.el_,"insetBlock",C_(a))}updateDisplayState(e){const i=this.player_.textTrackSettings.getValues(),n=e.activeCues;let s=n.length;for(;s--;){const r=n[s];if(!r)continue;const a=r.displayState;if(i.color&&(a.firstChild.style.color=i.color),i.textOpacity&&hs(a.firstChild,"color",pp(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(a.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&hs(a.firstChild,"backgroundColor",pp(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?hs(a,"backgroundColor",pp(i.windowColor,i.windowOpacity)):a.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${pn}, 2px 2px 4px ${pn}, 2px 2px 5px ${pn}`:i.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${pn}, 2px 2px ${pn}, 3px 3px ${pn}`:i.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${w_}, 0 1px ${w_}, -1px -1px ${pn}, 0 -1px ${pn}`:i.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${pn}, 0 0 4px ${pn}, 0 0 4px ${pn}, 0 0 4px ${pn}`)),i.fontPercent&&i.fontPercent!==1){const o=q.parseFloat(a.style.fontSize);a.style.fontSize=o*i.fontPercent+"px",a.style.height="auto",a.style.top="auto"}i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Uz[i.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof q.WebVTT!="function"||e.every(n=>!n.activeCues))return;const i=[];for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r)i.push(s.activeCues[r])}q.WebVTT.processCues(q,i,this.el_);for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r){const a=s.activeCues[r].displayState;da(a,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:n)),s.language&&ko(a,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}me.registerComponent("TextTrackDisplay",zz);class Vz extends me{createEl(){const e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),n=Ge("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(n),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}me.registerComponent("LoadingSpinner",Vz);class ki extends Dh{createEl(e,i={},n={}){e="button",i=Object.assign({className:this.buildCSSClass()},i),n=Object.assign({type:"button"},n);const s=Ge(e,i,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Ge("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,i={}){const n=this.constructor.name;return at.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),me.prototype.addChild.call(this,e,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}me.registerComponent("Button",ki);class j2 extends ki{constructor(e,i){super(e,i),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const i=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){ys(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),s=n&&n.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const r=()=>s.focus();Kl(i)?i.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}j2.prototype.controlText_="Play Video";me.registerComponent("BigPlayButton",j2);class Hz extends ki{constructor(e,i){super(e,i),this.setIcon("cancel"),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}me.registerComponent("CloseButton",Hz);class W2 extends ki{constructor(e,i={}){super(e,i),i.replay=i.replay===void 0||i.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),i.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?ys(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}W2.prototype.controlText_="Play";me.registerComponent("PlayToggle",W2);class Ho extends me{constructor(e,i){super(e,i),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),i=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Ge("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return i.appendChild(n),this.contentEl_=Ge("span",{className:`${e}-display`},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=_a(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,at.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Ae.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Ho.prototype.labelText_="Time";Ho.prototype.controlText_="Time";me.registerComponent("TimeDisplay",Ho);class Gg extends Ho{buildCSSClass(){return"vjs-current-time"}updateContent(e){let i;this.player_.ended()?i=this.player_.duration():i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}Gg.prototype.labelText_="Current Time";Gg.prototype.controlText_="Current Time";me.registerComponent("CurrentTimeDisplay",Gg);class Xg extends Ho{constructor(e,i){super(e,i);const n=s=>this.updateContent(s);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const i=this.player_.duration();this.updateTextNode_(i)}}Xg.prototype.labelText_="Duration";Xg.prototype.controlText_="Duration";me.registerComponent("DurationDisplay",Xg);class qz extends me{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return i.appendChild(n),e.appendChild(i),e}}me.registerComponent("TimeDivider",qz);class Kg extends Ho{constructor(e,i){super(e,i),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ge("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let i;this.player_.ended()?i=0:this.player_.remainingTimeDisplay?i=this.player_.remainingTimeDisplay():i=this.player_.remainingTime(),this.updateTextNode_(i)}}Kg.prototype.labelText_="Remaining Time";Kg.prototype.controlText_="Remaining Time";me.registerComponent("RemainingTimeDisplay",Kg);class jz extends me{constructor(e,i){super(e,i),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ge("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ge("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Ae.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}me.registerComponent("LiveDisplay",jz);class G2 extends ki{constructor(e,i){super(e,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ge("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}G2.prototype.controlText_="Seek to live, currently playing live";me.registerComponent("SeekToLive",G2);function Au(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var Wz=Object.freeze({__proto__:null,clamp:Au});class Yg extends me{constructor(e,i){super(e,i),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,i={},n={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,i,n)}handleMouseDown(e){const i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Cs&&e.preventDefault(),_2(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const i=this.bar.el_.ownerDocument;T2(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Au(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const i=Th(this.el_,e);return this.vertical()?i.y:i.x}handleKeyDown(e){const i=this.options_.playerOptions.spatialNavigation,n=i&&i.enabled,s=i&&i.horizontalSeek;n?s&&e.key==="ArrowLeft"||!s&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):s&&e.key==="ArrowRight"||!s&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}me.registerComponent("Slider",Yg);const mp=(t,e)=>Au(t/e*100,0,100).toFixed(2)+"%";class Gz extends me{constructor(e,i){super(e,i),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),i=Ge("span",{className:"vjs-control-text"}),n=Ge("span",{textContent:this.localize("Loaded")}),s=Ae.createTextNode(": ");return this.percentageEl_=Ge("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(n),i.appendChild(s),i.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,n=this.player_.buffered(),s=i&&i.isLive()?i.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,o=mp(r,s);this.percent_!==o&&(this.el_.style.width=o,zr(this.percentageEl_,o),this.percent_=o);for(let l=0;l<n.length;l++){const u=n.start(l),c=n.end(l);let d=a[l];d||(d=this.el_.appendChild(Ge()),a[l]=d),!(d.dataset.start===u&&d.dataset.end===c)&&(d.dataset.start=u,d.dataset.end=c,d.style.left=mp(u,r),d.style.width=mp(c-u,r))}for(let l=a.length;l>n.length;l--)this.el_.removeChild(a[l-1]);a.length=n.length})}}me.registerComponent("LoadProgressBar",Gz);class Xz extends me{constructor(e,i){super(e,i),this.update=Es(St(this,this.update),xn)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,i,n){const s=yu(this.el_),r=Ao(this.player_.el()),a=e.width*i;if(!r||!s)return;let o=e.left-r.left+a,l=e.width-a+(r.right-e.right);l||(l=e.width-a,o=a);let u=s.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>s.width&&(u=s.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){zr(this.el_,e)}updateTime(e,i,n,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-i*o;r=(l<1?"":"-")+_a(l,o)}else r=_a(n,a);this.update(e,i,r),s&&s()})}}me.registerComponent("TimeTooltip",Xz);class Qg extends me{constructor(e,i){super(e,i),this.setIcon("circle"),this.update=Es(St(this,this.update),xn)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,i){const n=this.getChild("timeTooltip");if(!n)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,i,s)}}Qg.prototype.options_={children:[]};!Ei&&!Yn&&Qg.prototype.options_.children.push("timeTooltip");me.registerComponent("PlayProgressBar",Qg);class X2 extends me{constructor(e,i){super(e,i),this.update=Es(St(this,this.update),xn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i){const n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,n,()=>{this.el_.style.left=`${e.width*i}px`})}}X2.prototype.options_={children:["timeTooltip"]};me.registerComponent("MouseTimeDisplay",X2);class kh extends Yg{constructor(e,i){i=bt(kh.prototype.options_,i),i.children=[...i.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(Ei||Yn);(!Ei&&!Yn||n)&&i.children.splice(1,0,"mouseTimeDisplay"),super(e,i),this.shouldDisableSeekWhileScrubbingOnMobile_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=St(this,this.update),this.update=Es(this.update_,xn),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae&&"visibilityState"in Ae&&this.on(Ae,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Ae.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,xn))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Ae.visibilityState==="hidden")return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.percent_=i),(this.currentTime_!==n||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[_a(n,r),_a(r,r)],"{1} of {2}")),this.currentTime_=n,this.duration_=r),this.bar&&this.bar.update(Ao(this.el()),this.getProgress())}),i}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let i;const n=this.player_.liveTracker;return n&&n.isLive()?(i=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i}handleMouseDown(e){vu(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,i=!1){if(!vu(e)||isNaN(this.player_.duration()))return;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const s=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())n=s*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(s>=.99){r.seekToLiveEdge();return}const a=r.seekableStart(),o=r.liveCurrentTime();if(n=a+s*r.liveWindow(),n>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=n:this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ys(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const i=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae&&"visibilityState"in Ae&&this.off(Ae,"visibilitychange",this.toggleVisibility_),super.dispose()}}kh.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};me.registerComponent("SeekBar",kh);class K2 extends me{constructor(e,i){super(e,i),this.handleMouseMove=Es(St(this,this.handleMouseMove),xn),this.throttledHandleMouseSeek=Es(St(this,this.handleMouseSeek),xn),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const i=this.getChild("seekBar");if(!i)return;const n=i.getChild("playProgressBar"),s=i.getChild("mouseTimeDisplay");if(!n&&!s)return;const r=i.el(),a=yu(r);let o=Th(r,e).x;o=Au(o,0,1),s&&s.update(a,o),n&&n.update(a,i.getProgress())}handleMouseSeek(e){const i=this.getChild("seekBar");i&&i.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&ys(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}K2.prototype.options_={children:["seekBar"]};me.registerComponent("ProgressControl",K2);class Y2 extends ki{constructor(e,i){super(e,i),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Ae.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in q?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Ae.exitPictureInPicture=="function"&&super.show()}}Y2.prototype.controlText_="Picture-in-Picture";me.registerComponent("PictureInPictureToggle",Y2);class Q2 extends ki{constructor(e,i){super(e,i),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Ae[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Q2.prototype.controlText_="Fullscreen";me.registerComponent("FullscreenToggle",Q2);const Kz=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class Yz extends me{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}me.registerComponent("VolumeLevel",Yz);class Qz extends me{constructor(e,i){super(e,i),this.update=Es(St(this,this.update),xn)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,i,n,s){if(!n){const r=Ao(this.el_),a=Ao(this.player_.el()),o=e.width*i;if(!a||!r)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=r.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right=`-${c}px`}this.write(`${s}%`)}write(e){zr(this.el_,e)}updateVolume(e,i,n,s,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,i,n,s.toFixed(0)),r&&r()})}}me.registerComponent("VolumeLevelTooltip",Qz);class Z2 extends me{constructor(e,i){super(e,i),this.update=Es(St(this,this.update),xn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i,n){const s=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,n,s,()=>{n?this.el_.style.bottom=`${e.height*i}px`:this.el_.style.left=`${e.width*i}px`})}}Z2.prototype.options_={children:["volumeLevelTooltip"]};me.registerComponent("MouseVolumeLevelDisplay",Z2);class Ah extends Yg{constructor(e,i){super(e,i),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){vu(e)&&super.handleMouseDown(e)}handleMouseMove(e){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const n=this.el(),s=Ao(n),r=this.vertical();let a=Th(n,e);a=r?a.y:a.x,a=Au(a,0,1),i.update(s,a,r)}vu(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Ah.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Ei&&!Yn&&Ah.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ah.prototype.playerEvent="volumechange";me.registerComponent("VolumeBar",Ah);class J2 extends me{constructor(e,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Do(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(e,i),Kz(this,e),this.throttledHandleMouseMove=Es(St(this,this.handleMouseMove),xn),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}J2.prototype.options_={children:["volumeBar"]};me.registerComponent("VolumeControl",J2);const Zz=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class ew extends ki{constructor(e,i){super(e,i),Zz(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.volume(),n=this.player_.lastVolume_();if(i===0){const s=n<.1?.1:n;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let i=3;this.setIcon("volume-high"),Ei&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),i=0):e<.33?(this.setIcon("volume-low"),i=1):e<.67&&(this.setIcon("volume-medium"),i=2),bh(this.el_,[0,1,2,3].reduce((n,s)=>n+`${s?" ":""}vjs-vol-${s}`,"")),da(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}ew.prototype.controlText_="Mute";me.registerComponent("MuteToggle",ew);class tw extends me{constructor(e,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||Do(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(e,i),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),an(Ae,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Di(Ae,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}tw.prototype.options_={children:["muteToggle","volumeControl"]};me.registerComponent("VolumePanel",tw);class iw extends ki{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const i=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;i+this.skipTime<=s?r=i+this.skipTime:r=s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}iw.prototype.controlText_="Skip Forward";me.registerComponent("SkipForward",iw);class nw extends ki{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()&&n.seekableStart();let r;s&&i-this.skipTime<=s?r=s:i>=this.skipTime?r=i-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}nw.prototype.controlText_="Skip Backward";me.registerComponent("SkipBackward",nw);class sw extends me{constructor(e,i){super(e,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof me&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof me&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const i=this.addChild(e);i&&this.addEventListenerForItem(i)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ge(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),an(i,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const i=e.relatedTarget||Ae.activeElement;if(!this.children().some(n=>n.el()===i)){const n=this.menuButton_;n&&n.buttonPressed_&&i!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const n=i.filter(s=>s.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())}}me.registerComponent("Menu",sw);class Zg extends me{constructor(e,i={}){super(e,i),this.menuButton_=new ki(e,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=ki.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),an(Ae,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new sw(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=Ge("li",{className:"vjs-menu-title",textContent:Ut(this.options_.title),tabIndex:-1}),n=new me(this.player_,{el:i});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const i=ki.prototype.buildCSSClass();return`vjs-menu-button ${e} ${i} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,i=this.menuButton_.el()){return this.menuButton_.controlText(e,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Di(Ae,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ei&&m2())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}me.registerComponent("MenuButton",Zg);class Jg extends Zg{constructor(e,i){const n=i.tracks;if(super(e,i),this.items.length<=1&&this.hide(),!n)return;const s=St(this,this.update);n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)})}}me.registerComponent("TrackButton",Jg);class Iu extends Dh{constructor(e,i){super(e,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,i,n){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),n),r=Ge("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}me.registerComponent("MenuItem",Iu);class Pu extends Iu{constructor(e,i){const n=i.track,s=e.textTracks();i.label=n.label||n.language||"Unknown",i.selected=n.mode==="showing",super(e,i),this.track=n,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const r=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",a)}),s.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof q.Event!="object")try{o=new q.Event("change")}catch{}o||(o=Ae.createEvent("Event"),o.initEvent("change",!0,!0)),s.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const i=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let s=0;s<n.length;s++){const r=n[s];this.kinds.indexOf(r.kind)!==-1&&(r===i?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}me.registerComponent("TextTrackMenuItem",Pu);class rw extends Pu{constructor(e,i){i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(e,i)}handleTracksChange(e){const i=this.player().textTracks();let n=!0;for(let s=0,r=i.length;s<r;s++){const a=i[s];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const i=this.player().textTracks();let n=!0;for(let s=0,r=i.length;s<r;s++){const a=i[s];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}me.registerComponent("OffTextTrackMenuItem",rw);class qo extends Jg{constructor(e,i={}){i.tracks=e.textTracks(),super(e,i)}createItems(e=[],i=Pu){let n;this.label_&&(n=`${this.label_} off`),e.push(new rw(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const a=s[r];if(this.kinds_.indexOf(a.kind)>-1){const o=new i(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}me.registerComponent("TextTrackButton",qo);class aw extends Iu{constructor(e,i){const n=i.track,s=i.cue,r=e.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=s.text,i.selected=s.startTime<=r&&r<s.endTime,super(e,i),this.track=n,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}me.registerComponent("ChaptersTrackMenuItem",aw);class e0 extends qo{constructor(e,i,n){super(e,i,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ut(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const i=this.track_.cues;if(!i)return e;for(let n=0,s=i.length;n<s;n++){const r=i[n],a=new aw(this.player_,{track:this.track_,cue:r});e.push(a)}return e}}e0.prototype.kind_="chapters";e0.prototype.controlText_="Chapters";me.registerComponent("ChaptersButton",e0);class t0 extends qo{constructor(e,i,n){super(e,i,n),this.setIcon("audio-description");const s=e.textTracks(),r=St(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(e){const i=this.player().textTracks();let n=!1;for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a.kind!==this.kind_&&a.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}t0.prototype.kind_="descriptions";t0.prototype.controlText_="Descriptions";me.registerComponent("DescriptionsButton",t0);class i0 extends qo{constructor(e,i,n){super(e,i,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}i0.prototype.kind_="subtitles";i0.prototype.controlText_="Subtitles";me.registerComponent("SubtitlesButton",i0);class n0 extends Pu{constructor(e,i){i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(e,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}me.registerComponent("CaptionSettingsMenuItem",n0);class s0 extends qo{constructor(e,i,n){super(e,i,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new n0(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}s0.prototype.kind_="captions";s0.prototype.controlText_="Captions";me.registerComponent("CaptionsButton",s0);class ow extends Pu{createEl(e,i,n){const s=super.createEl(e,i,n),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(Ge("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ge("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}me.registerComponent("SubsCapsMenuItem",ow);class r0 extends qo{constructor(e,i={}){super(e,i),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Ut(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new n0(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,ow),e}}r0.prototype.kinds_=["captions","subtitles"];r0.prototype.controlText_="Subtitles";me.registerComponent("SubsCapsButton",r0);class lw extends Iu{constructor(e,i){const n=i.track,s=e.audioTracks();i.label=n.label||n.language||"Unknown",i.selected=n.enabled,super(e,i),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...a)=>{this.handleTracksChange.apply(this,a)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(e,i,n){const s=super.createEl(e,i,n),r=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Ge("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ge("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const s=i[n];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}me.registerComponent("AudioTrackMenuItem",lw);class uw extends Jg{constructor(e,i={}){i.tracks=e.audioTracks(),super(e,i),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const s=i[n];e.push(new lw(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}uw.prototype.controlText_="Audio Track";me.registerComponent("AudioTrackButton",uw);class a0 extends Iu{constructor(e,i){const n=i.rate,s=parseFloat(n,10);i.label=n,i.selected=s===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(e,i),this.label=n,this.rate=s,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}a0.prototype.contentElType="button";me.registerComponent("PlaybackRateMenuItem",a0);class cw extends Zg{constructor(e,i){super(e,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ge("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),i=[];for(let n=e.length-1;n>=0;n--)i.push(new a0(this.player(),{rate:e[n]+"x"}));return i}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}cw.prototype.controlText_="Playback Rate";me.registerComponent("PlaybackRateMenuButton",cw);class dw extends me{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",i={},n={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(e,i,n)}}me.registerComponent("Spacer",dw);class Jz extends dw{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}me.registerComponent("CustomControlSpacer",Jz);class hw extends me{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}hw.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};me.registerComponent("ControlBar",hw);class fw extends Vo{constructor(e,i){super(e,i),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}fw.prototype.options_=Object.assign({},Vo.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});me.registerComponent("ErrorDisplay",fw);class pw extends me{constructor(e,i={}){super(e,i),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ge("select",{id:this.options_.id},{},this.options_.SelectOptions.map(i=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Tn()}`)+"-"+i[1].replace(/\W+/g,""),s=Ge("option",{id:n,value:this.localize(i[0]),textContent:this.localize(i[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),s}))}}me.registerComponent("TextTrackSelect",pw);class fa extends me{constructor(e,i={}){super(e,i);const n=Ge("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const s=this.options_.selects;for(const r of s){const a=this.options_.selectConfigs[r],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${Tn()}`;if(this.options_.type==="colors"){u=Ge("span",{className:o});const f=Ge("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});f.setAttribute("for",c),u.appendChild(f)}const d=new pw(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return Ge("fieldset",{className:this.options_.className})}}me.registerComponent("TextTrackFieldset",fa);class mw extends me{constructor(e,i={}){super(e,i);const n=this.options_.textTrackComponentid,s=new fa(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const r=new fa(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const a=new fa(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Ge("div",{className:"vjs-track-settings-colors"})}}me.registerComponent("TextTrackSettingsColors",mw);class gw extends me{constructor(e,i={}){super(e,i);const n=this.options_.textTrackComponentid,s=new fa(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const r=new fa(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const a=new fa(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Ge("div",{className:"vjs-track-settings-font"})}}me.registerComponent("TextTrackSettingsFont",gw);class yw extends me{constructor(e,i={}){super(e,i);const n=this.localize("restore all settings to the default values"),s=new ki(e,{controlText:n,className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const r=new ki(e,{controlText:n,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return Ge("div",{className:"vjs-track-settings-controls"})}}me.registerComponent("TrackSettingsControls",yw);const gp="vjs-text-track-settings",E_=["#000","Black"],D_=["#00F","Blue"],k_=["#0FF","Cyan"],A_=["#0F0","Green"],I_=["#F0F","Magenta"],P_=["#F00","Red"],O_=["#FFF","White"],R_=["#FF0","Yellow"],yp=["1","Opaque"],vp=["0.5","Semi-Transparent"],M_=["0","Transparent"],Cr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[E_,O_,P_,A_,D_,R_,I_,k_],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[yp,vp,M_],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[O_,E_,P_,A_,D_,R_,I_,k_],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[yp,vp],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[M_,vp,yp],className:"vjs-window-opacity vjs-opacity"}};Cr.windowColor.options=Cr.backgroundColor.options;function vw(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function eV(t,e){const i=t.options[t.options.selectedIndex].value;return vw(i,e)}function tV(t,e,i){if(e){for(let n=0;n<t.options.length;n++)if(vw(t.options[n].value,i)===e){t.selectedIndex=n;break}}}class iV extends Vo{constructor(e,i){i.temporary=!1,super(e,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ge("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const i=new mw(e,{textTrackComponentid:this.id_,selectConfigs:Cr,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(i);const n=new gw(e,{textTrackComponentid:this.id_,selectConfigs:Cr,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const s=new yw(e);this.addChild(s)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),ro(Cr,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return l2(Cr,(e,i,n)=>{const s=eV(this.$(i.selector),i.parser);return s!==void 0&&(e[n]=s),e},{})}setValues(e){ro(Cr,(i,n)=>{tV(this.$(i.selector),e[n],i.parser)})}setDefaults(){ro(Cr,e=>{const i=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=i})}restoreSettings(){let e;try{e=JSON.parse(q.localStorage.getItem(gp))}catch(i){at.warn(i)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?q.localStorage.setItem(gp,JSON.stringify(e)):q.localStorage.removeItem(gp)}catch(i){at.warn(i)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}me.registerComponent("TextTrackSettings",iV);class nV extends me{constructor(e,i){let n=i.ResizeObserver||q.ResizeObserver;i.ResizeObserver===null&&(n=!1);const s=bt({createEl:!n,reportTouchActivity:!1},i);super(e,s),this.ResizeObserver=i.ResizeObserver||q.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=P2(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let a=this.unloadListener_=function(){Di(this,"resize",r),Di(this,"unload",a),a=null};an(this.el_.contentWindow,"unload",a),an(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}me.registerComponent("ResizeManager",nV);const sV={trackingThreshold:20,liveTolerance:15};class rV extends me{constructor(e,i){const n=bt(sV,i,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const i=Number(q.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+n;const s=this.liveCurrentTime(),r=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,xn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.end(n));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.start(n));return i.length?i.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}me.registerComponent("LiveTracker",rV);class aV extends me{constructor(e,i){super(e,i),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ge("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Tn()}`}),description:Ge("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Tn()}`})},Ge("div",{className:"vjs-title-bar"},{},u2(this.els))}updateDom_(){const e=this.player_.tech_,i=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const r=this.state[s],a=this.els[s],o=n[s];xh(a),r&&zr(a,r),i&&(i.removeAttribute(o),r&&i.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,i=e&&e.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}me.registerComponent("TitleBar",aV);const oV={initialDisplay:4e3,position:[],takeFocus:!1};class lV extends ki{constructor(e,i){i=bt(oV,i),super(e,i),this.controlText(i.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ge("button",{},{type:"button",class:this.buildCSSClass()},Ge("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}me.registerComponent("TransientButton",lV);const vm=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),n=[];let s="";if(!i.length)return!1;for(let r=0;r<i.length;r++){const a=i[r].src;a&&n.indexOf(a)===-1&&n.push(a)}return n.length?(n.length===1&&(s=n[0]),t.triggerSourceset(s),!0):!1},uV=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=Ae.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=Ae.createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",q.Element.prototype.appendChild.call(this,i),this.innerHTML}}),bw=(t,e)=>{let i={};for(let n=0;n<t.length&&(i=Object.getOwnPropertyDescriptor(t[n],e),!(i&&i.set&&i.get));n++);return i.enumerable=!0,i.configurable=!0,i},cV=t=>bw([t.el(),q.HTMLMediaElement.prototype,q.Element.prototype,uV],"innerHTML"),L_=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},n=cV(t),s=r=>(...a)=>{const o=r.apply(e,a);return vm(t),o};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(i[r]=e[r],e[r]=s(i[r]))}),Object.defineProperty(e,"innerHTML",bt(n,{set:s(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach(r=>{e[r]=i[r]}),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)},dV=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?z2(q.Element.prototype.getAttribute.call(this,"src")):""},set(t){return q.Element.prototype.setAttribute.call(this,"src",t),t}}),hV=t=>bw([t.el(),q.HTMLMediaElement.prototype,dV],"src"),fV=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=hV(t),n=e.setAttribute,s=e.load;Object.defineProperty(e,"src",bt(i,{set:r=>{const a=i.set.call(e,r);return t.triggerSourceset(e.src),a}})),e.setAttribute=(r,a)=>{const o=n.call(e,r,a);return/src/i.test(r)&&t.triggerSourceset(e.src),o},e.load=()=>{const r=s.call(e);return vm(t)||(t.triggerSourceset(""),L_(t)),r},e.currentSrc?t.triggerSourceset(e.currentSrc):vm(t)||L_(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Ue extends Ze{constructor(e,i){super(e,i);const n=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let a=r.length;const o=[];for(;a--;){const l=r[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!s&&!this.el_.hasAttribute("crossorigin")&&Eh(l.src)&&(s=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&at.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(gu||yh)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ue.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){fV(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let i;const n=()=>{i=[];for(let r=0;r<e.length;r++){const a=e[r];a.kind==="metadata"&&i.push({track:a,storedMode:a.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const s=()=>{for(let r=0;r<i.length;r++){const a=i[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",s)})}overrideNative_(e,i){if(i!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(s=>{this.el()[`${n}Tracks`].removeEventListener(s,this[`${n}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!i,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const i=yn[e],n=this.el()[i.getterName],s=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:o=>{const l={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(l),e==="text"&&this[Oo.remoteText.getterName]().trigger(l)},addtrack(o){s.addTrack(o.track)},removetrack(o){s.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<s.length;l++){let u=!1;for(let c=0;c<n.length;c++)if(n[c]===s[l]){u=!0;break}u||o.push(s[l])}for(;o.length;)s.removeTrack(o.shift())};this[i.getterName+"Listeners_"]=r,Object.keys(r).forEach(o=>{const l=r[o];n.addEventListener(o,l),this.on("dispose",u=>n.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){yn.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),Ue.disposeMediaElement(e),e=n}else{e=Ae.createElement("video");const n=this.options_.tag&&wr(this.options_.tag),s=bt({},n);(!gu||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,v2(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&ko(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let n=0;n<i.length;n++){const s=i[n],r=this.options_[s];typeof r<"u"&&(r?ko(e,s,s):_h(e,s),e[s]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const s=function(){n=!0};this.on("loadstart",s);const r=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),n||this.trigger("loadstart")});return}const i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&vh?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){at(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Yn&&Cs&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ys(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,i){if(!e)return at.error("Invalid source URL."),!1;const n={src:e};i&&(n.type=i);const s=Ge("source",{},n);return this.el_.appendChild(s),!0}removeSourceElement(e){if(!e)return at.error("Source URL is required to remove the source element."),!1;const i=this.el_.querySelectorAll("source");for(const n of i)if(n.src===e)return this.el_.removeChild(n),!0;return at.warn(`No matching source element found with src: ${e}`),!1}reset(){Ue.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,n):super.addTextTrack(e,i,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const i=Ae.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i}addRemoteTextTrack(e,i){const n=super.addRemoteTextTrack(e,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const i=this.$$("track");let n=i.length;for(;n--;)(e===i[n]||e===i[n].track)&&this.el().removeChild(i[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),q.performance&&(e.creationTime=q.performance.now()),e}}ph(Ue,"TEST_VID",function(){if(!$o())return;const t=Ae.createElement("video"),e=Ae.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});Ue.isSupported=function(){try{Ue.TEST_VID.volume=.5}catch{return!1}return!!(Ue.TEST_VID&&Ue.TEST_VID.canPlayType)};Ue.canPlayType=function(t){return Ue.TEST_VID.canPlayType(t)};Ue.canPlaySource=function(t,e){return Ue.canPlayType(t.type)};Ue.canControlVolume=function(){try{const t=Ue.TEST_VID.volume;Ue.TEST_VID.volume=t/2+.1;const e=t!==Ue.TEST_VID.volume;return e&&Ei?(q.setTimeout(()=>{Ue&&Ue.prototype&&(Ue.prototype.featuresVolumeControl=t!==Ue.TEST_VID.volume)}),!1):e}catch{return!1}};Ue.canMuteVolume=function(){try{const t=Ue.TEST_VID.muted;return Ue.TEST_VID.muted=!t,Ue.TEST_VID.muted?ko(Ue.TEST_VID,"muted","muted"):_h(Ue.TEST_VID,"muted","muted"),t!==Ue.TEST_VID.muted}catch{return!1}};Ue.canControlPlaybackRate=function(){if(Yn&&Cs&&mh<58)return!1;try{const t=Ue.TEST_VID.playbackRate;return Ue.TEST_VID.playbackRate=t/2+.1,t!==Ue.TEST_VID.playbackRate}catch{return!1}};Ue.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(Ae.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(Ae.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(Ae.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(Ae.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};Ue.supportsNativeTextTracks=function(){return vh||Ei&&Cs};Ue.supportsNativeVideoTracks=function(){return!!(Ue.TEST_VID&&Ue.TEST_VID.videoTracks)};Ue.supportsNativeAudioTracks=function(){return!!(Ue.TEST_VID&&Ue.TEST_VID.audioTracks)};Ue.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){ph(Ue.prototype,t,()=>Ue[e](),!0)});Ue.prototype.featuresVolumeControl=Ue.canControlVolume();Ue.prototype.movingMediaElementInDOM=!Ei;Ue.prototype.featuresFullscreenResize=!0;Ue.prototype.featuresProgressEvents=!0;Ue.prototype.featuresTimeupdateEvents=!0;Ue.prototype.featuresVideoFrameCallback=!!(Ue.TEST_VID&&Ue.TEST_VID.requestVideoFrameCallback);Ue.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};Ue.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ue.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ue.prototype["set"+Ut(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Ue.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ue.prototype["set"+Ut(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){Ue.prototype[t]=function(){return this.el_[t]()}});Ze.withSourceHandlers(Ue);Ue.nativeSourceHandler={};Ue.nativeSourceHandler.canPlayType=function(t){try{return Ue.TEST_VID.canPlayType(t)}catch{return""}};Ue.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ue.nativeSourceHandler.canPlayType(t.type);if(t.src){const i=jg(t.src);return Ue.nativeSourceHandler.canPlayType(`video/${i}`)}return""};Ue.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)};Ue.nativeSourceHandler.dispose=function(){};Ue.registerSourceHandler(Ue.nativeSourceHandler);Ze.registerTech("Html5",Ue);const _w=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],bp={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},bm=["tiny","xsmall","small","medium","large","xlarge","huge"],jc={};bm.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;jc[t]=`vjs-layout-${e}`});const pV={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Dt extends me{constructor(e,i,n){if(e.id=e.id||i.id||`vjs_video_${Tn()}`,i=Object.assign(Dt.getTagSettings(e),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const a=e.closest("[lang]");a&&(i.language=a.getAttribute("lang"))}if(super(null,i,n),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=a2(this.id_),this.fsApi_=fd,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&wr(e),this.language(this.options_.language),i.languages){const a={};Object.getOwnPropertyNames(i.languages).forEach(function(o){a[o.toLowerCase()]=i.languages[o]}),this.languages_=a}else this.languages_=Dt.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),zg(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(an(Ae,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=bt(this.options_);if(i.plugins&&Object.keys(i.plugins).forEach(a=>{this[a](i.plugins[a])}),i.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(i.playbackRates),i.experimentalSvgIcons){const o=new q.DOMParser().parseFromString(Nz,"image/svg+xml");if(o.querySelector("parsererror"))at.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),i.spatialNavigation&&i.spatialNavigation.enabled&&(this.spatialNavigation=new Fz(this),this.addClass("vjs-spatial-navigation-enabled")),gu&&this.addClass("vjs-touch-enabled"),Ei||this.addClass("vjs-workinghover"),Dt.players[this.id_]=this;const r=um.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Di(Ae,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Di(Ae,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Dt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Rz(this),zi.names.forEach(e=>{const i=zi[e],n=this[i.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,i,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";n?i=this.el_=e.parentNode:s||(i=this.el_=super.createEl("div"));const r=wr(e);if(s){for(i=this.el_=e,e=this.tag=Ae.createElement("video");i.children.length;)e.appendChild(i.firstChild);Gl(i,"video-js")||da(i,"video-js"),i.appendChild(e),n=this.playerElIngest_=i,Object.keys(i).forEach(l=>{try{e[l]=i[l]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",Cs&&gh&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(l){s&&l==="class"||i.setAttribute(l,r[l]),s&&e.setAttribute(l,r[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>p2[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),q.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=A2("vjs-styles-dimensions");const l=Rr(".vjs-styles-defaults"),u=Rr("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);da(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(i,e),dm(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){at.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,i){const n=e+"_";if(i===void 0)return this[n]||0;if(i===""||i==="auto"){this[n]=void 0,this.updateStyleEl_();return}const s=parseFloat(i);if(isNaN(s)){at.error(`Improper value "${i}" supplied for for ${e}`);return}this[n]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Ys(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),uz(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(q.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,i,n,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const r=n.split(":"),a=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?i=this.height_:i=e*a,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),I2(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${i}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,i){this.tech_&&this.unloadTech_();const n=Ut(e),s=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(Ze.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const a={source:i,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};zi.names.forEach(l=>{const u=zi[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[s]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Ze.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(St(this,this.handleTechReady_),!0),m_.jsonToTextTracks(this.textTracksJson_||[],this.tech_),_w.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Ut(l)}_`](u))}),Object.keys(bp).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${bp[l]}_`].bind(this),event:u});return}this[`handleTech${bp[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&dm(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){zi.names.forEach(e=>{const i=zi[e];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=m_.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&at.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":um}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const i=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const a=this.play();if(Kl(a))return a.catch(o=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),Kl(n)&&(n=n.catch(i))):e==="muted"&&!this.muted()?n=i():n=this.play(),!!Kl(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let i=e,n="";typeof i!="string"&&(i=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!n&&(n=Bz(this,i)),this.cache_.source=bt({},e,{src:i,type:n});const s=this.cache_.sources.filter(l=>l.src&&l.src===i),r=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=wr(a[l]);r.push(u),u.src&&u.src===i&&o.push(u.src)}o.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(e){if(!this.changingSrc_){let i=r=>this.updateSourceCaches_(r);const n=this.currentSource().src,s=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==n)&&(i=()=>{}),i(s),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),i=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?ys(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Ae.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const i=e.target.player;if(i&&i!==this)return;const n=this.el();let s=Ae[this.fsApi_.fullscreenElement]===n;!s&&n.matches&&(s=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(e,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,i){this.ready(function(){if(e in Pz)return Az(this.middleware_,this.tech_,e,i);if(e in __)return b_(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(n){throw at(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in Iz)return kz(this.middleware_,this.tech_,e);if(e in __)return b_(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(at(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,i),i):i.name==="TypeError"?(at(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):(at(i),i)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=ys){this.playCallbacks_.push(e);const i=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(vh||Ei);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!i&&n&&this.load();return}const s=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})}runPlayCallbacks_(e){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||qn(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=qn(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=qn(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return $2(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),i=this.duration();let n=e.end(e.length-1);return n>i&&(n=i),n}volume(e){let i;if(e!==void 0){i=Math.max(0,Math.min(1,e)),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const i=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((n,s)=>{function r(){i.off("fullscreenerror",o),i.off("fullscreenchange",a)}function a(){r(),n()}function o(u,c){r(),s(c)}i.one("fullscreenchange",a),i.one("fullscreenerror",o);const l=i.requestFullscreenHelper_(e);l&&(l.then(r,r),l.then(n,s))})}requestFullscreenHelper_(e){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(i=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](i);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((i,n)=>{function s(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){s(),i()}function a(l,u){s(),n(u)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(s,s),o.then(i,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Ae[this.fsApi_.exitFullscreen]();return e&&ys(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ae.documentElement.style.overflow,an(Ae,"keydown",this.boundFullWindowOnEscKey_),Ae.documentElement.style.overflow="hidden",da(Ae.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Di(Ae,"keydown",this.boundFullWindowOnEscKey_),Ae.documentElement.style.overflow=this.docOrigOverflow,bh(Ae.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&q.documentPictureInPicture){const e=Ae.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ge("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),q.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(i=>(E2(i),this.el_.parentNode.insertBefore(e,this.el_),i.document.body.appendChild(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:i}),i.addEventListener("pagehide",n=>{const s=n.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in Ae&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(q.documentPictureInPicture&&q.documentPictureInPicture.window)return q.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Ae)return Ae.exitPictureInPicture()}handleKeyDown(e){const{userActions:i}=this.options_;!i||!i.hotkeys||(s=>{const r=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?a.indexOf(s.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof i.hotkeys=="function"?i.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=a=>e.key.toLowerCase()==="f",muteKey:s=a=>e.key.toLowerCase()==="m",playPauseKey:r=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=i;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const a=me.getComponent("FullscreenToggle");Ae[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),me.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),me.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let i;for(let n=0,s=this.options_.techOrder;n<s.length;n++){const r=s[n];let a=Ze.getTech(r);if(a||(a=me.getComponent(r)),!a){at.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(i=a.canPlayType(e),i))return i}return""}selectSource(e){const i=this.options_.techOrder.map(o=>[o,Ze.getTech(o)]).filter(([o,l])=>l?l.isSupported():(at.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(o,l,u){let c;return o.some(d=>l.some(f=>{if(c=u(d,f),c)return!0})),c};let s;const r=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?s=n(e,i,r(a)):s=n(i,e,a),s||!1}handleSrc_(e,i){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=q2(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,i||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Ez(this,n[0],(s,r)=>{if(this.middleware_=r,i||(this.cache_.sources=n),this.updateSourceCaches_(s),this.src_(s)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}Dz(r,this.tech_)}),n.length>1){const s=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const i=this.selectSource([e]);return i?L2(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,i){return this.tech_?this.tech_.addSourceElement(e,i):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();ys(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Ys(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:i,progressControl:n,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),i&&i.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let i;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Or("beforeerror").forEach(i=>{const n=i(this,e);if(!(ws(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const i=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ft(e),this.addClass("vjs-error"),at.error(`(CODE:${this.error_.code} ${Ft.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Or("error").forEach(i=>i(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,i,n;const s=St(this,this.reportUserActivity),r=function(d){(d.screenX!==i||d.screenY!==n)&&(i=d.screenX,n=d.screenY,s())},a=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},o=function(d){s(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!Ei&&!Yn&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),i=this.getChild("ControlBar"),n=i&&i.currentHeight();e.forEach(s=>{s!==i&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,i,n){if(this.tech_)return this.tech_.addTextTrack(e,i,n)}addRemoteTextTrack(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)}removeRemoteTextTrack(e={}){let{track:i}=e;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ys(this)&&this.trigger("languagechange"))}languages(){return bt(Dt.prototype.options_.languages,this.languages_)}toJSON(){const e=bt(this.options_),i=e.tracks;e.tracks=[];for(let n=0;n<i.length;n++){let s=i[n];s=bt(s),s.player=void 0,e.tracks[n]=s}return e}createModal(e,i){i=i||{},i.content=e||"";const n=new Vo(this,i);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),i=this.currentWidth();for(let n=0;n<bm.length;n++){const s=bm[n],r=this.breakpoints_[s];if(i<=r){if(e===s)return;e&&this.removeClass(jc[e]),this.addClass(jc[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},pV,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const i=this.responsive_;if(e!==i)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return jc[this.breakpoint_]||""}loadMedia(e,i){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=bt(e);const{artist:s,artwork:r,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Sd(o)}]),n&&this.crossOrigin(n),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||s||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const e=this.poster(),i=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),s={src:i,textTracks:n};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:Sd(s.poster)}]),s}return bt(this.cache_.media)}static getTagSettings(e){const i={sources:[],tracks:[]},n=wr(e),s=n["data-setup"];if(Gl(e,"vjs-fill")&&(n.fill=!0),Gl(e,"vjs-fluid")&&(n.fluid=!0),s!==null)try{Object.assign(n,JSON.parse(s||"{}"))}catch(r){at.error("data-setup",r)}if(Object.assign(i,n),e.hasChildNodes()){const r=e.childNodes;for(let a=0,o=r.length;a<o;a++){const l=r[a],u=l.nodeName.toLowerCase();u==="source"?i.sources.push(wr(l)):u==="track"&&i.tracks.push(wr(l))}}return i}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(i=>typeof i=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}zi.names.forEach(function(t){const e=zi[t];Dt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Dt.prototype.crossorigin=Dt.prototype.crossOrigin;Dt.players={};const wl=q.navigator;Dt.prototype.options_={techOrder:Ze.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:wl&&(wl.languages&&wl.languages[0]||wl.userLanguage||wl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};_w.forEach(function(t){Dt.prototype[`handleTech${Ut(t)}_`]=function(){return this.trigger(t)}});me.registerComponent("Player",Dt);const wd="plugin",lo="activePlugins_",Ka={},Cd=t=>Ka.hasOwnProperty(t),Wc=t=>Cd(t)?Ka[t]:void 0,Tw=(t,e)=>{t[lo]=t[lo]||{},t[lo][e]=!0},Ed=(t,e,i)=>{const n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)},mV=function(t,e){const i=function(){Ed(this,{name:t,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return Tw(this,t),Ed(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){i[n]=e[n]}),i},B_=(t,e)=>(e.prototype.name=t,function(...i){Ed(this,{name:t,plugin:e,instance:null},!0);const n=new e(this,...i);return this[t]=()=>n,Ed(this,n.getEventHash()),n});class Yi{constructor(e){if(this.constructor===Yi)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),zg(this),delete this.trigger,M2(this,this.constructor.defaultState),Tw(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,i={}){return zo(this.eventBusEl_,e,this.getEventHash(i))}handleStateChanged(e){}dispose(){const{name:e,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[lo][e]=!1,this.player=this.state=null,i[e]=B_(e,Ka[e])}static isBasic(e){const i=typeof e=="string"?Wc(e):e;return typeof i=="function"&&!Yi.prototype.isPrototypeOf(i.prototype)}static registerPlugin(e,i){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Cd(e))at.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Dt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof i}.`);return Ka[e]=i,e!==wd&&(Yi.isBasic(i)?Dt.prototype[e]=mV(e,i):Dt.prototype[e]=B_(e,i)),i}static deregisterPlugin(e){if(e===wd)throw new Error("Cannot de-register base plugin.");Cd(e)&&(delete Ka[e],delete Dt.prototype[e])}static getPlugins(e=Object.keys(Ka)){let i;return e.forEach(n=>{const s=Wc(n);s&&(i=i||{},i[n]=s)}),i}static getPluginVersion(e){const i=Wc(e);return i&&i.VERSION||""}}Yi.getPlugin=Wc;Yi.BASE_PLUGIN_NAME=wd;Yi.registerPlugin(wd,Yi);Dt.prototype.usingPlugin=function(t){return!!this[lo]&&this[lo][t]===!0};Dt.prototype.hasPlugin=function(t){return!!Cd(t)};function gV(t,e){let i=!1;return function(...n){return i||at.warn(t),i=!0,e.apply(this,n)}}function ns(t,e,i,n){return gV(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,n)}var yV={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const xw=t=>t.indexOf("#")===0?t.slice(1):t;function ne(t,e,i){let n=ne.getPlayer(t);if(n)return e&&at.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&n.ready(i),n;const s=typeof t=="string"?Rr("#"+xw(t)):t;if(!Uo(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in s?s.getRootNode()instanceof q.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!a.contains(s))&&at.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),Or("beforesetup").forEach(l=>{const u=l(s,bt(e));if(!ws(u)||Array.isArray(u)){at.error("please return an object in beforesetup hooks");return}e=bt(e,u)});const o=me.getComponent("Player");return n=new o(s,e,i),Or("setup").forEach(l=>l(n)),n}ne.hooks_=qs;ne.hooks=Or;ne.hook=K9;ne.hookOnce=Y9;ne.removeHook=r2;if(q.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&$o()){let t=Rr(".vjs-styles-defaults");if(!t){t=A2("vjs-styles-defaults");const e=Rr("head");e&&e.insertBefore(t,e.firstChild),I2(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}fm(1,ne);ne.VERSION=um;ne.options=Dt.prototype.options_;ne.getPlayers=()=>Dt.players;ne.getPlayer=t=>{const e=Dt.players;let i;if(typeof t=="string"){const n=xw(t),s=e[n];if(s)return s;i=Rr("#"+n)}else i=t;if(Uo(i)){const{player:n,playerId:s}=i;if(n||e[s])return n||e[s]}};ne.getAllPlayers=()=>Object.keys(Dt.players).map(t=>Dt.players[t]).filter(Boolean);ne.players=Dt.players;ne.getComponent=me.getComponent;ne.registerComponent=(t,e)=>(Ze.isTech(e)&&at.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),me.registerComponent.call(me,t,e));ne.getTech=Ze.getTech;ne.registerTech=Ze.registerTech;ne.use=Cz;Object.defineProperty(ne,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ne.middleware,"TERMINATOR",{value:xd,writeable:!1,enumerable:!0});ne.browser=p2;ne.obj=J9;ne.mergeOptions=ns(9,"videojs.mergeOptions","videojs.obj.merge",bt);ne.defineLazyProperty=ns(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",ph);ne.bind=ns(9,"videojs.bind","native Function.prototype.bind",St);ne.registerPlugin=Yi.registerPlugin;ne.deregisterPlugin=Yi.deregisterPlugin;ne.plugin=(t,e)=>(at.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Yi.registerPlugin(t,e));ne.getPlugins=Yi.getPlugins;ne.getPlugin=Yi.getPlugin;ne.getPluginVersion=Yi.getPluginVersion;ne.addLanguage=function(t,e){return t=(""+t).toLowerCase(),ne.options.languages=bt(ne.options.languages,{[t]:e}),ne.options.languages[t]};ne.log=at;ne.createLogger=a2;ne.time=pz;ne.createTimeRange=ns(9,"videojs.createTimeRange","videojs.time.createTimeRanges",qn);ne.createTimeRanges=ns(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",qn);ne.formatTime=ns(9,"videojs.formatTime","videojs.time.formatTime",_a);ne.setFormatTime=ns(9,"videojs.setFormatTime","videojs.time.setFormatTime",N2);ne.resetFormatTime=ns(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",F2);ne.parseUrl=ns(9,"videojs.parseUrl","videojs.url.parseUrl",qg);ne.isCrossOrigin=ns(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Eh);ne.EventTarget=on;ne.any=Ug;ne.on=an;ne.one=wh;ne.off=Di;ne.trigger=zo;ne.xhr=qS;ne.TextTrack=ku;ne.AudioTrack=V2;ne.VideoTrack=H2;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{ne[t]=function(){return at.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),D2[t].apply(null,arguments)}});ne.computedStyle=ns(9,"videojs.computedStyle","videojs.dom.computedStyle",Io);ne.dom=D2;ne.fn=lz;ne.num=Wz;ne.str=hz;ne.url=Sz;ne.Error=yV;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class vV{constructor(e){let i=this;return i.id=e.id,i.label=i.id,i.width=e.width,i.height=e.height,i.bitrate=e.bandwidth,i.frameRate=e.frameRate,i.enabled_=e.enabled,Object.defineProperty(i,"enabled",{get(){return i.enabled_()},set(n){i.enabled_(n)}}),i}}class Dd extends ne.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let i=this.getQualityLevelById(e.id);if(i)return i;const n=this.levels_.length;return i=new vV(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(e){let i=null;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){i=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i}getQualityLevelById(e){for(let i=0,n=this.length;i<n;i++){const s=this[i];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Dd.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in Dd.prototype.allowedEvents_)Dd.prototype["on"+t]=null;var Sw="4.1.0";const bV=function(t,e){const i=t.qualityLevels,n=new Dd,s=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",s)};return t.on("dispose",s),t.qualityLevels=()=>n,t.qualityLevels.VERSION=Sw,n},ww=function(t){return bV(this,ne.obj.merge({},t))};ne.registerPlugin("qualityLevels",ww);ww.VERSION=Sw;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const Wi=ch,kd=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,wn=t=>ne.log.debug?ne.log.debug.bind(ne,"VHS:",`${t} >`):function(){};function yt(...t){const e=ne.obj||ne;return(e.merge||e.mergeOptions).apply(e,t)}function li(...t){const e=ne.time||ne;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function _V(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let i=0;i<t.length;i++){const n=t.start(i),s=t.end(i);e+=`${n} --> ${s}. Duration (${s-n})
`}return e}const vs=1/30,bs=vs*3,Cw=function(t,e){const i=[];let n;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return li(i)},Ya=function(t,e){return Cw(t,function(i,n){return i-bs<=e&&n+bs>=e})},Rc=function(t,e){return Cw(t,function(i){return i-vs>=e})},TV=function(t){if(t.length<2)return li();const e=[];for(let i=1;i<t.length;i++){const n=t.end(i-1),s=t.start(i);e.push([n,s])}return li(e)},xV=function(t,e){let i=null,n=null,s=0;const r=[],a=[];if(!t||!t.length||!e||!e.length)return li();let o=t.length;for(;o--;)r.push({time:t.start(o),type:"start"}),r.push({time:t.end(o),type:"end"});for(o=e.length;o--;)r.push({time:e.start(o),type:"start"}),r.push({time:e.end(o),type:"end"});for(r.sort(function(l,u){return l.time-u.time}),o=0;o<r.length;o++)r[o].type==="start"?(s++,s===2&&(i=r[o].time)):r[o].type==="end"&&(s--,s===1&&(n=r[o].time)),i!==null&&n!==null&&(a.push([i,n]),i=null,n=null);return li(a)},Ew=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},SV=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i},aa=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},wV=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1},_p=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},o0=function(t,e){let i=0;if(!t||!t.length)return i;for(let n=0;n<t.length;n++){const s=t.start(n),r=t.end(n);if(!(e>r)){if(e>s&&e<=r){i+=r-e;continue}i+=r-s}}return i},l0=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach(function(n){i+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(i+=t.partTargetDuration)}),i},_m=t=>(t.segments||[]).reduce((e,i,n)=>(i.parts?i.parts.forEach(function(s,r){e.push({duration:s.duration,segmentIndex:n,partIndex:r,part:s,segment:i})}):e.push({duration:i.duration,segmentIndex:n,partIndex:null,segment:i,part:null}),e),[]),Dw=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},kw=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let n=(i||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},Aw=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=Dw(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},CV=function(t,e){let i=0,n=e-t.mediaSequence,s=t.segments[n];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;n--;){if(s=t.segments[n],typeof s.end<"u")return{result:i+s.end,precise:!0};if(i+=l0(t,s),typeof s.start<"u")return{result:i+s.start,precise:!0}}return{result:i,precise:!1}},EV=function(t,e){let i=0,n,s=e-t.mediaSequence;for(;s<t.segments.length;s++){if(n=t.segments[s],typeof n.start<"u")return{result:n.start-i,precise:!0};if(i+=l0(t,n),typeof n.end<"u")return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},Iw=function(t,e,i){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const n=CV(t,e);if(n.precise)return n.result;const s=EV(t,e);return s.precise?s.result:n.result+i},Pw=function(t,e,i){if(!t)return 0;if(typeof i!="number"&&(i=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return q.Infinity}return Iw(t,e,i)},Yl=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:n}){let s=0;if(i>n&&([i,n]=[n,i]),i<0){for(let r=i;r<Math.min(0,n);r++)s+=t;i=0}for(let r=i;r<n;r++)s+=e[r].duration;return s},Ow=function(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return Pw(t);if(e===null)return null;e=e||0;let s=Iw(t,t.mediaSequence+t.segments.length,e);return i&&(n=typeof n=="number"?n:Aw(null,t),s-=n),Math.max(0,s)},DV=function(t,e,i){const s=e||0;let r=Ow(t,e,!0,i);return r===null?li():(r<s&&(r=s),li(s,r))},kV=function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:n,startTime:s,exactManifestTimings:r}){let a=e-s;const o=_m(t);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(i===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,r){if(a<0)continue}else if(a+vs<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s-Yl({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=t.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const d=c.duration>vs,f=a===0,p=d&&a+vs>=0;if(!((f||p)&&u!==o.length-1)){if(r){if(a>0)continue}else if(a-vs>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s+Yl({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},Rw=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},u0=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Ih=function(t){const e=Rw(t);return!t.disabled&&!e},AV=function(t){return t.disabled},IV=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},Mw=function(t,e){return e.attributes&&e.attributes[t]},PV=function(t,e,i,n=0){return Mw("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-n*8)/e:NaN},Tm=(t,e)=>{if(t.playlists.length===1)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(n=>Ih(n)?(n.attributes.BANDWIDTH||0)<i:!1).length===0},c0=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),N_=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let n=!1;for(const s in i){for(const r in i[s])if(n=e(i[s][r]),n)break;if(n)break}return!!n},Ou=t=>{if(!t||!t.playlists||!t.playlists.length)return N_(t,i=>i.playlists&&i.playlists.length||i.uri);for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;if(!(n&&n.split(",").every(r=>GS(r))||N_(t,r=>c0(i,r))))return!1}return!0};var Gi={liveEdgeDelay:Aw,duration:Pw,seekable:DV,getMediaInfoForTime:kV,isEnabled:Ih,isDisabled:AV,isExcluded:Rw,isIncompatible:u0,playlistEnd:Ow,isAes:IV,hasAttribute:Mw,estimateSegmentRequestTime:PV,isLowestEnabledRendition:Tm,isAudioOnly:Ou,playlistMatch:c0,segmentDurationWithParts:l0};const{log:Lw}=ne,uo=(t,e)=>`${t}-${e}`,Bw=(t,e,i)=>`placeholder-uri-${t}-${e}-${i}`,OV=({onwarn:t,oninfo:e,manifestString:i,customTagParsers:n=[],customTagMappers:s=[],llhls:r})=>{const a=new y7;t&&a.on("warn",t),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),s.forEach(u=>a.addTagMapper(u)),a.push(i),a.end();const o=a.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,d)=>Math.max(c,d.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=Dw(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,d)=>Math.max(c,d.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),Lw.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},jo=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(t.mediaGroups[i])for(const n in t.mediaGroups[i])for(const s in t.mediaGroups[i][n]){const r=t.mediaGroups[i][n][s];e(r,i,n,s)}})},Nw=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},RV=t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];Nw({playlist:i,id:uo(e,i.uri)}),i.resolvedUri=Wi(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||Lw.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},MV=t=>{jo(t,e=>{e.uri&&(e.resolvedUri=Wi(t.uri,e.uri))})},LV=(t,e)=>{const i=uo(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.location.href,resolvedUri:q.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n},Fw=(t,e,i=Bw)=>{t.uri=e;for(let s=0;s<t.playlists.length;s++)if(!t.playlists[s].uri){const r=`placeholder-uri-${s}`;t.playlists[s].uri=r}const n=Ou(t);jo(t,(s,r,a,o)=>{if(!s.playlists||!s.playlists.length){if(n&&r==="AUDIO"&&!s.uri)for(let l=0;l<t.playlists.length;l++){const u=t.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}s.playlists=[Xt({},s)]}s.playlists.forEach(function(l,u){const c=i(r,a,o,l),d=uo(u,c);l.uri?l.resolvedUri=l.resolvedUri||Wi(t.uri,l.uri):(l.uri=u===0?c:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},t.playlists[l.id]=l,t.playlists[l.uri]=l})}),RV(t),MV(t)};class F_{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[i]=e;i.programDateTime!==void 0&&(this.offset_=i.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[i]=e,n=i.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},i=[];this.pendingDateRanges_.forEach((n,s)=>{if(!this.processedDateRanges_.has(s)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),i.push(n),!!n.class))if(e[n.class]){const r=e[n.class].push(n);n.classListIndex=r-1}else e[n.class]=[n],n.classListIndex=0});for(const n of i){const s=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&s[n.classListIndex+1]?n.endTime=s[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return i}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,s)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const $w=22,pa=({requestType:t,request:e,error:i,parseFailure:n})=>{const s=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:t},o=s&&!r||n;if(i&&r)a.error=Xt({},i),a.errorType=ne.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=ne.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=ne.Error.NetworkRequestTimeout;else if(o){const l=n?ne.Error.NetworkBodyParserFailed:ne.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},BV=wn("CodecUtils"),Uw=function(t){const e=t.attributes||{};if(e.CODECS)return ps(e.CODECS)},zw=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},NV=(t,e)=>{if(!zw(t,e))return!0;const i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(const s in n)if(!n[s].uri&&!n[s].playlists)return!0;return!1},bu=function(t){const e={};return t.forEach(({mediaType:i,type:n,details:s})=>{e[i]=e[i]||[],e[i].push(WS(`${n}${s}`))}),Object.keys(e).forEach(function(i){if(e[i].length>1){BV(`multiple ${i} codecs found as attributes: ${e[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[i]=null;return}e[i]=e[i][0]}),e},$_=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},Ql=function(t,e){const i=e.attributes||{},n=bu(Uw(e)||[]);if(zw(t,e)&&!n.audio&&!NV(t,e)){const s=bu(b7(t,i.AUDIO)||[]);s.audio&&(n.audio=s.audio)}return n},{EventTarget:FV}=ne,$V=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let s=e.mediaSequence+e.segments.length;if(n){const r=n.parts||[],a=kw(e)-1;a>-1&&a!==r.length-1&&(i._HLS_part=a),(a>-1||r.length)&&s--}i._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const n=new q.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){i.hasOwnProperty(s)&&n.searchParams.set(s,i[s])}),t=n.toString()}return t},UV=(t,e)=>{if(!t)return e;const i=yt(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=yt(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},zV=(t,e,i)=>{const n=t.slice(),s=e.slice();i=i||0;const r=[];let a;for(let o=0;o<s.length;o++){const l=n[o+i],u=s[o];l?(a=l.map||a,r.push(UV(l,u))):(a&&!u.map&&(u.map=a),r.push(u))}return r},Vw=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Wi(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Wi(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Wi(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Wi(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=Wi(e,i.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=Wi(e,i.uri))})},Hw=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let n=0;n<i.preloadHints.length;n++)if(i.preloadHints[n].type==="MAP")return e}i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},qw=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,xm=(t,e,i=qw)=>{const n=yt(t,{}),s=n.playlists[e.id];if(!s||i(s,e))return null;e.segments=Hw(e);const r=yt(s,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}r.segments=zV(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}r.segments.forEach(a=>{Vw(a,r.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=r);return n.playlists[e.id]=r,n.playlists[e.uri]=r,jo(t,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=r)}),n},Sm=(t,e)=>{const i=t.segments||[],n=i[i.length-1],s=n&&n.parts&&n.parts[n.parts.length-1],r=s&&s.duration||n&&n.duration;return e&&r?r*1e3:(t.partTargetDuration||t.targetDuration||10)*500},U_=(t,e,i)=>{if(!t)return;const n=[];return t.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:r,RESOLUTION:a,CODECS:o}=s.attributes;n.push({id:s.id,bandwidth:r,resolution:a,codecs:o})}),{type:e,isLive:i,renditions:n}};class Qa extends FV{constructor(e,i,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=wn("PlaylistLoader");const{withCredentials:s=!1}=n;this.src=e,this.vhs_=i,this.withCredentials=s,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const r=i.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new F_,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const i=this.dateRangesStorage_.getDateRangesToProcess();!i.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(i)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let i=Wi(this.main.uri,e.uri);this.llhls&&(i=$V(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,i,n){const{uri:s,id:r}=i;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:pa({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:i}){try{const n=OV({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!n.playlists||!n.playlists.length||this.excludeAudioOnlyVariants(n.playlists),n}catch(n){this.error=n,this.error.metadata={errorType:ne.Error.StreamingHlsPlaylistParserError,error:n}}}excludeAudioOnlyVariants(e){const i=n=>{const s=n.attributes||{},{width:r,height:a}=s.RESOLUTION||{};if(r&&a)return!0;const o=Uw(n)||[];return!!bu(o).video};e.some(i)&&e.forEach(n=>{i(n)||(n.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:i,url:n,id:s}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:r});const a=i||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),Nw({playlist:a,uri:n,id:s});const o=xm(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Sm(this.media(),!!o)),r.parsedPlaylist=U_(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),q.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new F_,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,i){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(q.clearTimeout(this.finalRenditionTimeout),i){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=q.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,s=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Sm(e,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=kd(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(e){const n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=q.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,n)=>{if(!this.request)return;if(this.request=null,i)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:pa({requestType:n.requestType,request:n,error:i})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=kd(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const s=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=U_(s.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,Fw(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=Hw(n),n.segments.forEach(s=>{Vw(s,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const i=this.srcUri()||q.location.href;this.main=LV(e,i),this.haveMetadata({playlistObject:e,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,i){const n=this.main,s=e.ID;let r=n.playlists.length;for(;r--;){const a=n.playlists[r];if(a.attributes["PATHWAY-ID"]===s){const o=a.resolvedUri,l=a.id;if(i){const u=this.createCloneURI_(a.resolvedUri,e),c=uo(s,u),d=this.createCloneAttributes_(s,a.attributes),f=this.createClonePlaylist_(a,c,e,d);n.playlists[r]=f,n.playlists[c]=f,n.playlists[u]=f}else n.playlists.splice(r,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,i)}updateOrDeleteCloneMedia(e,i){const n=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!n.mediaGroups[r]||!n.mediaGroups[r][s])){for(const a in n.mediaGroups[r])if(a===s){for(const o in n.mediaGroups[r][a])n.mediaGroups[r][a][o].playlists.forEach((u,c)=>{const d=n.playlists[u.id],f=d.id,p=d.resolvedUri;delete n.playlists[f],delete n.playlists[p]});delete n.mediaGroups[r][a]}}}),i&&this.createClonedMediaGroups_(e)}addClonePathway(e,i={}){const n=this.main,s=n.playlists.length,r=this.createCloneURI_(i.resolvedUri,e),a=uo(e.ID,r),o=this.createCloneAttributes_(e.ID,i.attributes),l=this.createClonePlaylist_(i,a,e,o);n.playlists[s]=l,n.playlists[a]=l,n.playlists[r]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const i=e.ID,n=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||s.mediaGroups[r][i]))for(const a in s.mediaGroups[r]){if(a===n)s.mediaGroups[r][i]={};else continue;for(const o in s.mediaGroups[r][a]){const l=s.mediaGroups[r][a][o];s.mediaGroups[r][i][o]=Xt({},l);const u=s.mediaGroups[r][i][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((d,f)=>{const p=s.playlists[d.id],b=Bw(r,i,o),g=uo(i,b);if(p&&!s.playlists[g]){const _=this.createClonePlaylist_(p,g,e),w=_.resolvedUri;s.playlists[g]=_,s.playlists[w]=_}u.playlists[f]=this.createClonePlaylist_(d,g,e)})}}})}createClonePlaylist_(e,i,n,s){const r=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:r,uri:r,id:i};return e.segments&&(a.segments=[]),s&&(a.attributes=s),yt(e,a)}createCloneURI_(e,i){const n=new URL(e);n.hostname=i["URI-REPLACEMENT"].HOST;const s=i["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))n.searchParams.set(r,s[r]);return n.href}createCloneAttributes_(e,i){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{i[s]&&(n[s]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const i=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes.keyId;s&&i.add(s.toLowerCase())}return i}}}const wm=function(t,e,i,n){const s=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&s&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=s.byteLength||s.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(s||t.responseText)))),n(e,t)},VV=(t,e)=>{if(!t||!t.size)return;let i=e;return t.forEach(n=>{i=n(i)}),i},HV=(t,e,i,n)=>{!t||!t.size||t.forEach(s=>{s(e,i,n)})},jw=function(){const t=function e(i,n){i=yt({timeout:45e3},i);const s=e.beforeRequest||ne.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||ne.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||ne.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(ne.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const o=ne.Vhs.xhr.original===!0?ne.xhr:ne.Vhs.xhr,l=VV(r,i);r.delete(s);const u=o(l||i,function(d,f){return HV(a,u,d,f),wm(u,d,f,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=i.uri,u.requestType=i.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},qV=function(t){let e;const i=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=q.BigInt(t.offset)+q.BigInt(t.length)-q.BigInt(1):e=t.offset+t.length-1,"bytes="+i+"-"+e},Cm=function(t){const e={};return t.byterange&&(e.Range=qV(t.byterange)),e},jV=function(t,e){return t.start(e)+"-"+t.end(e)},WV=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},GV=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},Ww=function(t){const e={};return Object.keys(t).forEach(i=>{const n=t[i];KS(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n}),e},Ad=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},Gw=function(t){return t.resolvedUri},Xw=t=>{const e=Array.prototype.slice.call(t),i=16;let n="",s,r;for(let a=0;a<e.length/i;a++)s=e.slice(a*i,a*i+i).map(WV).join(""),r=e.slice(a*i,a*i+i).map(GV).join(""),n+=s+" "+r+`
`;return n},XV=({bytes:t})=>Xw(t),KV=t=>{let e="",i;for(i=0;i<t.length;i++)e+=jV(t,i)+" ";return e};var YV=Object.freeze({__proto__:null,createTransferableMessage:Ww,initSegmentId:Ad,segmentKeyId:Gw,hexDump:Xw,tagDump:XV,textRanges:KV});const Kw=.25,QV=(t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+i,r=t-s;return new Date(e.dateTimeObject.getTime()+r*1e3)},ZV=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,JV=(t,e)=>{let i;try{i=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(i<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(i<u)break}const s=e.segments[e.segments.length-1],r=s.dateTimeObject,a=s.videoTimingInfo?ZV(s.videoTimingInfo):s.duration+s.duration*Kw,o=new Date(r.getTime()+a*1e3);return i>o?null:(i>new Date(r)&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Gi.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},eH=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let i=0,n;for(let r=0;r<e.segments.length&&(n=e.segments[r],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,!(t<=i));r++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+s.duration*Kw)return null;n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},tH=(t,e)=>{let i,n;try{i=new Date(t),n=new Date(e)}catch{}const s=i.getTime();return(n.getTime()-s)/1e3},iH=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},nH=({playlist:t,time:e=void 0,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return i({message:"getProgramTime: playlist and time must be provided"});const n=eH(e,t);if(!n)return i({message:"valid programTime was not found"});if(n.type==="estimate")return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const s={mediaSeconds:e},r=QV(e,n.segment);return r&&(s.programDateTime=r.toISOString()),i(null,s)},Yw=({programTime:t,playlist:e,retryCount:i=2,seekTo:n,pauseAfterSeek:s=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!iH(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=JV(t,e);if(!o)return a({message:`${t} was not found in the stream`});const l=o.segment,u=tH(l.dateTimeObject,t);if(o.type==="estimate"){if(i===0)return a({message:`${t} is not buffered yet. Try again`});n(o.estimatedStart+u),r.one("seeked",()=>{Yw({programTime:t,playlist:e,retryCount:i-1,seekTo:n,pauseAfterSeek:s,tech:r,callback:a})});return}const c=l.start+u,d=()=>a(null,r.currentTime());r.one("seeked",d),s&&r.pause(),n(c)},Tp=(t,e)=>{if(t.readyState===4)return e()},sH=(t,e,i,n)=>{let s=[],r,a=!1;const o=function(d,f,p,b){return f.abort(),a=!0,i(d,f,p,b)},l=function(d,f){if(a)return;if(d)return d.metadata=pa({requestType:n,request:f,error:d}),o(d,f,"",s);const p=f.responseText.substring(s&&s.byteLength||0,f.responseText.length);if(s=A7(s,YS(p,!0)),r=r||Dl(s),s.length<10||r&&s.length<r+2)return Tp(f,()=>o(d,f,"",s));const b=Lg(s);return b==="ts"&&s.length<188?Tp(f,()=>o(d,f,"",s)):!b&&s.length<376?Tp(f,()=>o(d,f,"",s)):o(null,f,b,s)},c=e({uri:t,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:f,loaded:p}){return wm(d,null,{statusCode:d.status},l)})}},function(d,f){return wm(c,d,f,l)});return c},{EventTarget:rH}=ne,z_=function(t,e){if(!qw(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const n=t.segments[i],s=e.segments[i];if(n.uri!==s.uri)return!1;if(!n.byterange&&!s.byterange)continue;const r=n.byterange,a=s.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},aH=(t,e,i,n)=>{const s=n.attributes.NAME||i;return`placeholder-uri-${t}-${e}-${s}`},oH=({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:n,previousManifest:s})=>{const r=D9(t,{manifestUri:e,clientOffset:i,sidxMapping:n,previousManifest:s});return Fw(r,e,aH),r},lH=(t,e)=>{jo(t,(i,n,s,r)=>{(!e.mediaGroups[n][s]||!(r in e.mediaGroups[n][s]))&&delete t.mediaGroups[n][s][r]})},uH=(t,e,i)=>{let n=!0,s=yt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const a=e.playlists[r];if(a.sidx){const l=hh(a.sidx);i&&i[l]&&i[l].sidx&&Og(a,i[l].sidx,a.sidx.resolvedUri)}const o=xm(s,a,z_);o&&(s=o,n=!1)}return jo(e,(r,a,o,l)=>{if(r.playlists&&r.playlists.length){const u=r.playlists[0].id,c=xm(s,r.playlists[0],z_);c&&(s=c,l in s.mediaGroups[a][o]||(s.mediaGroups[a][o][l]=r),s.mediaGroups[a][o][l].playlists[0]=s.playlists[u],n=!1)}}),lH(s,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:s},cH=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,V_=(t,e)=>{const i={};for(const n in t){const r=t[n].sidx;if(r){const a=hh(r);if(!e[a])break;const o=e[a].sidxInfo;cH(o,r)&&(i[a]=e[a])}}return i},dH=(t,e)=>{let n=V_(t.playlists,e);return jo(t,(s,r,a,o)=>{if(s.playlists&&s.playlists.length){const l=s.playlists;n=yt(n,V_(l,e))}}),n};class Em extends rH{constructor(e,i,n={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=i,this.withCredentials=r,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=wn("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,i,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,i,n){const s=e.sidx&&hh(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>n(!1),0);return}const r=kd(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,i))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let f;try{f=O9(je(u.response).subarray(8))}catch(p){p.metadata=pa({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(p,u,i);return}return c[s]={sidxInfo:e.sidx,sidx:f},Og(e,f,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=sH(r,this.vhs_.xhr,(l,u,c,d)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const b=c||"unknown";return a({status:u.status,message:`Unsupported ${b} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:p}=e.sidx.byterange;if(d.length>=p+f)return a(l,{response:d.subarray(f,f+p),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:Cm({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},q.clearTimeout(this.minimumUpdatePeriodTimeout_),q.clearTimeout(this.mediaRequest_),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,s=>{this.haveMetadata({startingState:i,playlist:e})}))}haveMetadata({startingState:e,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(i.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(q.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(e){const n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:i}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,s)=>{if(n){const{requestType:a}=s;n.metadata=pa({requestType:a,request:s,error:n})}if(this.requestErrored_(n,s)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:i});const r=s.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=kd(this.mainPlaylistLoader_.srcUrl,s),r){this.handleMain_(),this.syncClientServerClock_(()=>e(s,r));return}return e(s,r)})}syncClientServerClock_(e){const i=k9(this.mainPlaylistLoader_.mainXml_);if(i===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(i.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Wi(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,s)=>{if(!this.request)return;if(n){const{requestType:a}=s;return this.error.metadata=pa({requestType:a,request:s,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;i.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(s.responseHeaders.date):r=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:i});let n;try{n=oH({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:ne.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(n=uH(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:r,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:r,isLive:!a,renditions:o};i.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:i})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(q.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let i=e.main&&e.main.minimumUpdatePeriod;if(i===0&&(e.media()?i=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof i!="number"||i<=0){i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`);return}this.createMUPTimeout_(i)}createMUPTimeout_(e){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=q.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=dH(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==i[e];if(n?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=q.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},Sm(this.media(),!!n)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const i=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",i,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const i=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes["cenc:default_KID"];s&&i.add(s.replace(/-/g,"").toLowerCase())}return i}}}var ni={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const hH=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer},Qw=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},fH=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},Zw=function(t){return function(){const e=fH(t),i=Qw(new Worker(e));i.objURL=e;const n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},i}},Jw=function(t){return`var browserWorkerPolyFill = ${Qw.toString()};
browserWorkerPolyFill(self);
`+t},eC=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},pH=Jw(eC(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var h={};this.on=function(m,v){h[m]||(h[m]=[]),h[m]=h[m].concat(v)},this.off=function(m,v){var y;return h[m]?(y=h[m].indexOf(v),h[m]=h[m].slice(),h[m].splice(y,1),y>-1):!1},this.trigger=function(m){var v,y,S,A;if(v=h[m],!!v)if(arguments.length===2)for(S=v.length,y=0;y<S;++y)v[y].call(this,arguments[1]);else{for(A=[],y=arguments.length,y=1;y<arguments.length;++y)A.push(arguments[y]);for(S=v.length,y=0;y<S;++y)v[y].apply(this,A)}},this.dispose=function(){h={}}}};e.prototype.pipe=function(h){return this.on("data",function(m){h.push(m)}),this.on("done",function(m){h.flush(m)}),this.on("partialdone",function(m){h.partialFlush(m)}),this.on("endedtimeline",function(m){h.endTimeline(m)}),this.on("reset",function(m){h.reset(m)}),h},e.prototype.push=function(h){this.trigger("data",h)},e.prototype.flush=function(h){this.trigger("done",h)},e.prototype.partialFlush=function(h){this.trigger("partialdone",h)},e.prototype.endTimeline=function(h){this.trigger("endedtimeline",h)},e.prototype.reset=function(h){this.trigger("reset",h)};var i=e,n=Math.pow(2,32),s=function(h){var m=new DataView(h.buffer,h.byteOffset,h.byteLength),v;return m.getBigUint64?(v=m.getBigUint64(0),v<Number.MAX_SAFE_INTEGER?Number(v):v):m.getUint32(0)*n+m.getUint32(4)},r={getUint64:s,MAX_UINT32:n},a=r.MAX_UINT32,o,l,u,c,d,f,p,b,g,_,w,x,C,k,D,R,M,P,E,I,O,L,F,X,ee,K,Y,Z,le,he,te,ie,fe,ke,ae,Ie;(function(){var h;if(F={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(h in F)F.hasOwnProperty(h)&&(F[h]=[h.charCodeAt(0),h.charCodeAt(1),h.charCodeAt(2),h.charCodeAt(3)]);X=new Uint8Array([105,115,111,109]),K=new Uint8Array([97,118,99,49]),ee=new Uint8Array([0,0,0,1]),Y=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),le={video:Y,audio:Z},ie=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0]),fe=new Uint8Array([0,0,0,0,0,0,0,0]),ke=fe,ae=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ie=fe,he=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(h){var m=[],v=0,y,S,A;for(y=1;y<arguments.length;y++)m.push(arguments[y]);for(y=m.length;y--;)v+=m[y].byteLength;for(S=new Uint8Array(v+8),A=new DataView(S.buffer,S.byteOffset,S.byteLength),A.setUint32(0,S.byteLength),S.set(h,4),y=0,v=8;y<m.length;y++)S.set(m[y],v),v+=m[y].byteLength;return S},l=function(){return o(F.dinf,o(F.dref,ie))},u=function(h){return o(F.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,h.audioobjecttype<<3|h.samplingfrequencyindex>>>1,h.samplingfrequencyindex<<7|h.channelcount<<3,6,1,2]))},c=function(){return o(F.ftyp,X,ee,X,K)},R=function(h){return o(F.hdlr,le[h])},d=function(h){return o(F.mdat,h)},D=function(h){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,h.duration>>>24&255,h.duration>>>16&255,h.duration>>>8&255,h.duration&255,85,196,0,0]);return h.samplerate&&(m[12]=h.samplerate>>>24&255,m[13]=h.samplerate>>>16&255,m[14]=h.samplerate>>>8&255,m[15]=h.samplerate&255),o(F.mdhd,m)},k=function(h){return o(F.mdia,D(h),R(h.type),p(h))},f=function(h){return o(F.mfhd,new Uint8Array([0,0,0,0,(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255]))},p=function(h){return o(F.minf,h.type==="video"?o(F.vmhd,he):o(F.smhd,te),l(),P(h))},b=function(h,m){for(var v=[],y=m.length;y--;)v[y]=I(m[y]);return o.apply(null,[F.moof,f(h)].concat(v))},g=function(h){for(var m=h.length,v=[];m--;)v[m]=x(h[m]);return o.apply(null,[F.moov,w(4294967295)].concat(v).concat(_(h)))},_=function(h){for(var m=h.length,v=[];m--;)v[m]=O(h[m]);return o.apply(null,[F.mvex].concat(v))},w=function(h){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(F.mvhd,m)},M=function(h){var m=h.samples||[],v=new Uint8Array(4+m.length),y,S;for(S=0;S<m.length;S++)y=m[S].flags,v[S+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return o(F.sdtp,v)},P=function(h){return o(F.stbl,E(h),o(F.stts,Ie),o(F.stsc,ke),o(F.stsz,ae),o(F.stco,fe))},function(){var h,m;E=function(v){return o(F.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),v.type==="video"?h(v):m(v))},h=function(v){var y=v.sps||[],S=v.pps||[],A=[],$=[],U,H;for(U=0;U<y.length;U++)A.push((y[U].byteLength&65280)>>>8),A.push(y[U].byteLength&255),A=A.concat(Array.prototype.slice.call(y[U]));for(U=0;U<S.length;U++)$.push((S[U].byteLength&65280)>>>8),$.push(S[U].byteLength&255),$=$.concat(Array.prototype.slice.call(S[U]));if(H=[F.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(v.width&65280)>>8,v.width&255,(v.height&65280)>>8,v.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(F.avcC,new Uint8Array([1,v.profileIdc,v.profileCompatibility,v.levelIdc,255].concat([y.length],A,[S.length],$))),o(F.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],v.sarRatio){var j=v.sarRatio[0],J=v.sarRatio[1];H.push(o(F.pasp,new Uint8Array([(j&4278190080)>>24,(j&16711680)>>16,(j&65280)>>8,j&255,(J&4278190080)>>24,(J&16711680)>>16,(J&65280)>>8,J&255])))}return o.apply(null,H)},m=function(v){return o(F.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(v.channelcount&65280)>>8,v.channelcount&255,(v.samplesize&65280)>>8,v.samplesize&255,0,0,0,0,(v.samplerate&65280)>>8,v.samplerate&255,0,0]),u(v))}}(),C=function(h){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,0,(h.duration&4278190080)>>24,(h.duration&16711680)>>16,(h.duration&65280)>>8,h.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(h.width&65280)>>8,h.width&255,0,0,(h.height&65280)>>8,h.height&255,0,0]);return o(F.tkhd,m)},I=function(h){var m,v,y,S,A,$,U;return m=o(F.tfhd,new Uint8Array([0,0,0,58,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),$=Math.floor(h.baseMediaDecodeTime/a),U=Math.floor(h.baseMediaDecodeTime%a),v=o(F.tfdt,new Uint8Array([1,0,0,0,$>>>24&255,$>>>16&255,$>>>8&255,$&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255])),A=92,h.type==="audio"?(y=L(h,A),o(F.traf,m,v,y)):(S=M(h),y=L(h,S.length+A),o(F.traf,m,v,y,S))},x=function(h){return h.duration=h.duration||4294967295,o(F.trak,C(h),k(h))},O=function(h){var m=new Uint8Array([0,0,0,0,(h.id&4278190080)>>24,(h.id&16711680)>>16,(h.id&65280)>>8,h.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return h.type!=="video"&&(m[m.length-1]=0),o(F.trex,m)},function(){var h,m,v;v=function(y,S){var A=0,$=0,U=0,H=0;return y.length&&(y[0].duration!==void 0&&(A=1),y[0].size!==void 0&&($=2),y[0].flags!==void 0&&(U=4),y[0].compositionTimeOffset!==void 0&&(H=8)),[0,0,A|$|U|H,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(S&4278190080)>>>24,(S&16711680)>>>16,(S&65280)>>>8,S&255]},m=function(y,S){var A,$,U,H,j,J;for(H=y.samples||[],S+=20+16*H.length,U=v(H,S),$=new Uint8Array(U.length+H.length*16),$.set(U),A=U.length,J=0;J<H.length;J++)j=H[J],$[A++]=(j.duration&4278190080)>>>24,$[A++]=(j.duration&16711680)>>>16,$[A++]=(j.duration&65280)>>>8,$[A++]=j.duration&255,$[A++]=(j.size&4278190080)>>>24,$[A++]=(j.size&16711680)>>>16,$[A++]=(j.size&65280)>>>8,$[A++]=j.size&255,$[A++]=j.flags.isLeading<<2|j.flags.dependsOn,$[A++]=j.flags.isDependedOn<<6|j.flags.hasRedundancy<<4|j.flags.paddingValue<<1|j.flags.isNonSyncSample,$[A++]=j.flags.degradationPriority&61440,$[A++]=j.flags.degradationPriority&15,$[A++]=(j.compositionTimeOffset&4278190080)>>>24,$[A++]=(j.compositionTimeOffset&16711680)>>>16,$[A++]=(j.compositionTimeOffset&65280)>>>8,$[A++]=j.compositionTimeOffset&255;return o(F.trun,$)},h=function(y,S){var A,$,U,H,j,J;for(H=y.samples||[],S+=20+8*H.length,U=v(H,S),A=new Uint8Array(U.length+H.length*8),A.set(U),$=U.length,J=0;J<H.length;J++)j=H[J],A[$++]=(j.duration&4278190080)>>>24,A[$++]=(j.duration&16711680)>>>16,A[$++]=(j.duration&65280)>>>8,A[$++]=j.duration&255,A[$++]=(j.size&4278190080)>>>24,A[$++]=(j.size&16711680)>>>16,A[$++]=(j.size&65280)>>>8,A[$++]=j.size&255;return o(F.trun,A)},L=function(y,S){return y.type==="audio"?h(y,S):m(y,S)}}();var z={ftyp:c,mdat:d,moof:b,moov:g,initSegment:function(h){var m=c(),v=g(h),y;return y=new Uint8Array(m.byteLength+v.byteLength),y.set(m),y.set(v,m.byteLength),y}},ue=function(h){var m,v,y=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,y.byteLength=0,m=0;m<h.length;m++)v=h[m],v.nalUnitType==="access_unit_delimiter_rbsp"?(y.length&&(y.duration=v.dts-y.dts,S.byteLength+=y.byteLength,S.nalCount+=y.length,S.duration+=y.duration,S.push(y)),y=[v],y.byteLength=v.data.byteLength,y.pts=v.pts,y.dts=v.dts):(v.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(y.keyFrame=!0),y.duration=v.dts-y.dts,y.byteLength+=v.data.byteLength,y.push(v));return S.length&&(!y.duration||y.duration<=0)&&(y.duration=S[S.length-1].duration),S.byteLength+=y.byteLength,S.nalCount+=y.length,S.duration+=y.duration,S.push(y),S},se=function(h){var m,v,y=[],S=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=h[0].pts,y.dts=h[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=h[0].pts,S.dts=h[0].dts,m=0;m<h.length;m++)v=h[m],v.keyFrame?(y.length&&(S.push(y),S.byteLength+=y.byteLength,S.nalCount+=y.nalCount,S.duration+=y.duration),y=[v],y.nalCount=v.length,y.byteLength=v.byteLength,y.pts=v.pts,y.dts=v.dts,y.duration=v.duration):(y.duration+=v.duration,y.nalCount+=v.length,y.byteLength+=v.byteLength,y.push(v));return S.length&&y.duration<=0&&(y.duration=S[S.length-1].duration),S.byteLength+=y.byteLength,S.nalCount+=y.nalCount,S.duration+=y.duration,S.push(y),S},Se=function(h){var m;return!h[0][0].keyFrame&&h.length>1&&(m=h.shift(),h.byteLength-=m.byteLength,h.nalCount-=m.nalCount,h[0][0].dts=m.dts,h[0][0].pts=m.pts,h[0][0].duration+=m.duration),h},Fe=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},V=function(h,m){var v=Fe();return v.dataOffset=m,v.compositionTimeOffset=h.pts-h.dts,v.duration=h.duration,v.size=4*h.length,v.size+=h.byteLength,h.keyFrame&&(v.flags.dependsOn=2,v.flags.isNonSyncSample=0),v},W=function(h,m){var v,y,S,A,$,U=m||0,H=[];for(v=0;v<h.length;v++)for(A=h[v],y=0;y<A.length;y++)$=A[y],S=V($,U),U+=S.size,H.push(S);return H},Q=function(h){var m,v,y,S,A,$,U=0,H=h.byteLength,j=h.nalCount,J=H+4*j,de=new Uint8Array(J),Le=new DataView(de.buffer);for(m=0;m<h.length;m++)for(S=h[m],v=0;v<S.length;v++)for(A=S[v],y=0;y<A.length;y++)$=A[y],Le.setUint32(U,$.data.byteLength),U+=4,de.set($.data,U),U+=$.data.byteLength;return de},pe=function(h,m){var v,y=m||0,S=[];return v=V(h,y),S.push(v),S},ge=function(h){var m,v,y=0,S=h.byteLength,A=h.length,$=S+4*A,U=new Uint8Array($),H=new DataView(U.buffer);for(m=0;m<h.length;m++)v=h[m],H.setUint32(y,v.data.byteLength),y+=4,U.set(v.data,y),y+=v.data.byteLength;return U},_e={groupNalsIntoFrames:ue,groupFramesIntoGops:se,extendFirstKeyFrame:Se,generateSampleTable:W,concatenateNalData:Q,generateSampleTableForFrame:pe,concatenateNalDataForFrame:ge},Oe=[33,16,5,32,164,27],Pe=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],xe=function(h){for(var m=[];h--;)m.push(0);return m},ye=function(h){return Object.keys(h).reduce(function(m,v){return m[v]=new Uint8Array(h[v].reduce(function(y,S){return y.concat(S)},[])),m},{})},$e,Be=function(){if(!$e){var h={96e3:[Oe,[227,64],xe(154),[56]],88200:[Oe,[231],xe(170),[56]],64e3:[Oe,[248,192],xe(240),[56]],48e3:[Oe,[255,192],xe(268),[55,148,128],xe(54),[112]],44100:[Oe,[255,192],xe(268),[55,163,128],xe(84),[112]],32e3:[Oe,[255,192],xe(268),[55,234],xe(226),[112]],24e3:[Oe,[255,192],xe(268),[55,255,128],xe(268),[111,112],xe(126),[224]],16e3:[Oe,[255,192],xe(268),[55,255,128],xe(268),[111,255],xe(269),[223,108],xe(195),[1,192]],12e3:[Pe,xe(268),[3,127,248],xe(268),[6,255,240],xe(268),[13,255,224],xe(268),[27,253,128],xe(259),[56]],11025:[Pe,xe(268),[3,127,248],xe(268),[6,255,240],xe(268),[13,255,224],xe(268),[27,255,192],xe(268),[55,175,128],xe(108),[112]],8e3:[Pe,xe(268),[3,121,16],xe(47),[7]]};$e=ye(h)}return $e},ze=9e4,qe,tt,lt,ut,Qt,jt,ei;qe=function(h){return h*ze},tt=function(h,m){return h*m},lt=function(h){return h/ze},ut=function(h,m){return h/m},Qt=function(h,m){return qe(ut(h,m))},jt=function(h,m){return tt(lt(h),m)},ei=function(h,m,v){return lt(v?h:h-m)};var st={ONE_SECOND_IN_TS:ze,secondsToVideoTs:qe,secondsToAudioTs:tt,videoTsToSeconds:lt,audioTsToSeconds:ut,audioTsToVideoTs:Qt,videoTsToAudioTs:jt,metadataTsToSeconds:ei},ss=Be,rs=st,ti=function(h){var m,v,y=0;for(m=0;m<h.length;m++)v=h[m],y+=v.data.byteLength;return y},_i=function(h,m,v,y){var S,A=0,$=0,U=0,H=0,j,J,de;if(m.length&&(S=rs.audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate),A=Math.ceil(rs.ONE_SECOND_IN_TS/(h.samplerate/1024)),v&&y&&($=S-Math.max(v,y),U=Math.floor($/A),H=U*A),!(U<1||H>rs.ONE_SECOND_IN_TS/2))){for(j=ss()[h.samplerate],j||(j=m[0].data),J=0;J<U;J++)de=m[0],m.splice(0,0,{data:j,dts:de.dts-A,pts:de.pts-A});return h.baseMediaDecodeTime-=Math.floor(rs.videoTsToAudioTs(H,h.samplerate)),H}},Cn=function(h,m,v){return m.minSegmentDts>=v?h:(m.minSegmentDts=1/0,h.filter(function(y){return y.dts>=v?(m.minSegmentDts=Math.min(m.minSegmentDts,y.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},Ru=function(h){var m,v,y=[];for(m=0;m<h.length;m++)v=h[m],y.push({size:v.data.byteLength,duration:1024});return y},Go=function(h){var m,v,y=0,S=new Uint8Array(ti(h));for(m=0;m<h.length;m++)v=h[m],S.set(v.data,y),y+=v.data.byteLength;return S},Mu={prefixWithSilence:_i,trimAdtsFramesByEarliestDts:Cn,generateSampleTable:Ru,concatenateFrameData:Go},B=st.ONE_SECOND_IN_TS,N=function(h,m){typeof m.pts=="number"&&(h.timelineStartInfo.pts===void 0&&(h.timelineStartInfo.pts=m.pts),h.minSegmentPts===void 0?h.minSegmentPts=m.pts:h.minSegmentPts=Math.min(h.minSegmentPts,m.pts),h.maxSegmentPts===void 0?h.maxSegmentPts=m.pts:h.maxSegmentPts=Math.max(h.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(h.timelineStartInfo.dts===void 0&&(h.timelineStartInfo.dts=m.dts),h.minSegmentDts===void 0?h.minSegmentDts=m.dts:h.minSegmentDts=Math.min(h.minSegmentDts,m.dts),h.maxSegmentDts===void 0?h.maxSegmentDts=m.dts:h.maxSegmentDts=Math.max(h.maxSegmentDts,m.dts))},G=function(h){delete h.minSegmentDts,delete h.maxSegmentDts,delete h.minSegmentPts,delete h.maxSegmentPts},ce=function(h,m){var v,y,S=h.minSegmentDts;return m||(S-=h.timelineStartInfo.dts),v=h.timelineStartInfo.baseMediaDecodeTime,v+=S,v=Math.max(0,v),h.type==="audio"&&(y=h.samplerate/B,v*=y,v=Math.floor(v)),v},Me={clearDtsInfo:G,calculateTrackBaseMediaDecodeTime:ce,collectDtsInfo:N},Xe=4,_t=128,Ti=function(h){for(var m=0,v={payloadType:-1,payloadSize:0},y=0,S=0;m<h.byteLength&&h[m]!==_t;){for(;h[m]===255;)y+=255,m++;for(y+=h[m++];h[m]===255;)S+=255,m++;if(S+=h[m++],!v.payload&&y===Xe){var A=String.fromCharCode(h[m+3],h[m+4],h[m+5],h[m+6]);if(A==="GA94"){v.payloadType=y,v.payloadSize=S,v.payload=h.subarray(m,m+S);break}else v.payload=void 0}m+=S,y=0,S=0}return v},En=function(h){return h.payload[0]!==181||(h.payload[1]<<8|h.payload[2])!==49||String.fromCharCode(h.payload[3],h.payload[4],h.payload[5],h.payload[6])!=="GA94"||h.payload[7]!==3?null:h.payload.subarray(8,h.payload.length-1)},as=function(h,m){var v=[],y,S,A,$;if(!(m[0]&64))return v;for(S=m[0]&31,y=0;y<S;y++)A=y*3,$={type:m[A+2]&3,pts:h},m[A+2]&4&&($.ccData=m[A+3]<<8|m[A+4],v.push($));return v},Dn=function(h){for(var m=h.byteLength,v=[],y=1,S,A;y<m-2;)h[y]===0&&h[y+1]===0&&h[y+2]===3?(v.push(y+2),y+=2):y++;if(v.length===0)return h;S=m-v.length,A=new Uint8Array(S);var $=0;for(y=0;y<S;$++,y++)$===v[0]&&($++,v.shift()),A[y]=h[$];return A},os={parseSei:Ti,parseUserData:En,parseCaptionPackets:as,discardEmulationPreventionBytes:Dn,USER_DATA_REGISTERED_ITU_T_T35:Xe},kn=i,ln=os,Ct=function(h){h=h||{},Ct.prototype.init.call(this),this.parse708captions_=typeof h.parse708captions=="boolean"?h.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new It(0,0),new It(0,1),new It(1,0),new It(1,1)],this.parse708captions_&&(this.cc708Stream_=new pt({captionServices:h.captionServices})),this.reset(),this.ccStreams_.forEach(function(m){m.on("data",this.trigger.bind(this,"data")),m.on("partialdone",this.trigger.bind(this,"partialdone")),m.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ct.prototype=new kn,Ct.prototype.push=function(h){var m,v,y;if(h.nalUnitType==="sei_rbsp"&&(m=ln.parseSei(h.escapedRBSP),!!m.payload&&m.payloadType===ln.USER_DATA_REGISTERED_ITU_T_T35&&(v=ln.parseUserData(m),!!v))){if(h.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(h.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}y=ln.parseCaptionPackets(h.pts,v),this.captionPackets_=this.captionPackets_.concat(y),this.latestDts_!==h.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=h.dts}},Ct.prototype.flushCCStreams=function(h){this.ccStreams_.forEach(function(m){return h==="flush"?m.flush():m.partialFlush()},this)},Ct.prototype.flushStream=function(h){if(!this.captionPackets_.length){this.flushCCStreams(h);return}this.captionPackets_.forEach(function(m,v){m.presortIndex=v}),this.captionPackets_.sort(function(m,v){return m.pts===v.pts?m.presortIndex-v.presortIndex:m.pts-v.pts}),this.captionPackets_.forEach(function(m){m.type<2?this.dispatchCea608Packet(m):this.dispatchCea708Packet(m)},this),this.captionPackets_.length=0,this.flushCCStreams(h)},Ct.prototype.flush=function(){return this.flushStream("flush")},Ct.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ct.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(h){h.reset()})},Ct.prototype.dispatchCea608Packet=function(h){this.setsTextOrXDSActive(h)?this.activeCea608Channel_[h.type]=null:this.setsChannel1Active(h)?this.activeCea608Channel_[h.type]=0:this.setsChannel2Active(h)&&(this.activeCea608Channel_[h.type]=1),this.activeCea608Channel_[h.type]!==null&&this.ccStreams_[(h.type<<1)+this.activeCea608Channel_[h.type]].push(h)},Ct.prototype.setsChannel1Active=function(h){return(h.ccData&30720)===4096},Ct.prototype.setsChannel2Active=function(h){return(h.ccData&30720)===6144},Ct.prototype.setsTextOrXDSActive=function(h){return(h.ccData&28928)===256||(h.ccData&30974)===4138||(h.ccData&30974)===6186},Ct.prototype.dispatchCea708Packet=function(h){this.parse708captions_&&this.cc708Stream_.push(h)};var Is={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Vr=function(h){var m=Is[h]||h;return h&4096&&h===m?"":String.fromCharCode(m)},Wt=function(h){return 32<=h&&h<=127||160<=h&&h<=255},un=function(h){this.windowNum=h,this.reset()};un.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},un.prototype.getText=function(){return this.rows.join(`
`)},un.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},un.prototype.newLine=function(h){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(h),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},un.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},un.prototype.addText=function(h){this.rows[this.rowIdx]+=h},un.prototype.backspace=function(){if(!this.isEmpty()){var h=this.rows[this.rowIdx];this.rows[this.rowIdx]=h.substr(0,h.length-1)}};var An=function(h,m,v){this.serviceNum=h,this.text="",this.currentWindow=new un(-1),this.windows=[],this.stream=v,typeof m=="string"&&this.createTextDecoder(m)};An.prototype.init=function(h,m){this.startPts=h;for(var v=0;v<8;v++)this.windows[v]=new un(v),typeof m=="function"&&(this.windows[v].beforeRowOverflow=m)},An.prototype.setCurrentWindow=function(h){this.currentWindow=this.windows[h]},An.prototype.createTextDecoder=function(h){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(h)}catch(m){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+h+" encoding. "+m})}};var pt=function(h){h=h||{},pt.prototype.init.call(this);var m=this,v=h.captionServices||{},y={},S;Object.keys(v).forEach(A=>{S=v[A],/^SERVICE/.test(A)&&(y[A]=S.encoding)}),this.serviceEncodings=y,this.current708Packet=null,this.services={},this.push=function(A){A.type===3?(m.new708Packet(),m.add708Bytes(A)):(m.current708Packet===null&&m.new708Packet(),m.add708Bytes(A))}};pt.prototype=new kn,pt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},pt.prototype.add708Bytes=function(h){var m=h.ccData,v=m>>>8,y=m&255;this.current708Packet.ptsVals.push(h.pts),this.current708Packet.data.push(v),this.current708Packet.data.push(y)},pt.prototype.push708Packet=function(){var h=this.current708Packet,m=h.data,v=null,y=null,S=0,A=m[S++];for(h.seq=A>>6,h.sizeCode=A&63;S<m.length;S++)A=m[S++],v=A>>5,y=A&31,v===7&&y>0&&(A=m[S++],v=A),this.pushServiceBlock(v,S,y),y>0&&(S+=y-1)},pt.prototype.pushServiceBlock=function(h,m,v){var y,S=m,A=this.current708Packet.data,$=this.services[h];for($||($=this.initService(h,S));S<m+v&&S<A.length;S++)y=A[S],Wt(y)?S=this.handleText(S,$):y===24?S=this.multiByteCharacter(S,$):y===16?S=this.extendedCommands(S,$):128<=y&&y<=135?S=this.setCurrentWindow(S,$):152<=y&&y<=159?S=this.defineWindow(S,$):y===136?S=this.clearWindows(S,$):y===140?S=this.deleteWindows(S,$):y===137?S=this.displayWindows(S,$):y===138?S=this.hideWindows(S,$):y===139?S=this.toggleWindows(S,$):y===151?S=this.setWindowAttributes(S,$):y===144?S=this.setPenAttributes(S,$):y===145?S=this.setPenColor(S,$):y===146?S=this.setPenLocation(S,$):y===143?$=this.reset(S,$):y===8?$.currentWindow.backspace():y===12?$.currentWindow.clearText():y===13?$.currentWindow.pendingNewLine=!0:y===14?$.currentWindow.clearText():y===141&&S++},pt.prototype.extendedCommands=function(h,m){var v=this.current708Packet.data,y=v[++h];return Wt(y)&&(h=this.handleText(h,m,{isExtended:!0})),h},pt.prototype.getPts=function(h){return this.current708Packet.ptsVals[Math.floor(h/2)]},pt.prototype.initService=function(h,m){var y="SERVICE"+h,v=this,y,S;return y in this.serviceEncodings&&(S=this.serviceEncodings[y]),this.services[h]=new An(h,S,v),this.services[h].init(this.getPts(m),function(A){v.flushDisplayed(A,v.services[h])}),this.services[h]},pt.prototype.handleText=function(h,m,v){var y=v&&v.isExtended,S=v&&v.isMultiByte,A=this.current708Packet.data,$=y?4096:0,U=A[h],H=A[h+1],j=m.currentWindow,J,de;function Le(ve){return ve.map(Ve=>("0"+(Ve&255).toString(16)).slice(-2)).join("")}if(S?(de=[U,H],h++):de=[U],m.textDecoder_&&!y)J=m.textDecoder_.decode(new Uint8Array(de));else if(S){const ve=Le(de);J=String.fromCharCode(parseInt(ve,16))}else J=Vr($|U);return j.pendingNewLine&&!j.isEmpty()&&j.newLine(this.getPts(h)),j.pendingNewLine=!1,j.addText(J),h},pt.prototype.multiByteCharacter=function(h,m){var v=this.current708Packet.data,y=v[h+1],S=v[h+2];return Wt(y)&&Wt(S)&&(h=this.handleText(++h,m,{isMultiByte:!0})),h},pt.prototype.setCurrentWindow=function(h,m){var v=this.current708Packet.data,y=v[h],S=y&7;return m.setCurrentWindow(S),h},pt.prototype.defineWindow=function(h,m){var v=this.current708Packet.data,y=v[h],S=y&7;m.setCurrentWindow(S);var A=m.currentWindow;return y=v[++h],A.visible=(y&32)>>5,A.rowLock=(y&16)>>4,A.columnLock=(y&8)>>3,A.priority=y&7,y=v[++h],A.relativePositioning=(y&128)>>7,A.anchorVertical=y&127,y=v[++h],A.anchorHorizontal=y,y=v[++h],A.anchorPoint=(y&240)>>4,A.rowCount=y&15,y=v[++h],A.columnCount=y&63,y=v[++h],A.windowStyle=(y&56)>>3,A.penStyle=y&7,A.virtualRowCount=A.rowCount+1,h},pt.prototype.setWindowAttributes=function(h,m){var v=this.current708Packet.data,y=v[h],S=m.currentWindow.winAttr;return y=v[++h],S.fillOpacity=(y&192)>>6,S.fillRed=(y&48)>>4,S.fillGreen=(y&12)>>2,S.fillBlue=y&3,y=v[++h],S.borderType=(y&192)>>6,S.borderRed=(y&48)>>4,S.borderGreen=(y&12)>>2,S.borderBlue=y&3,y=v[++h],S.borderType+=(y&128)>>5,S.wordWrap=(y&64)>>6,S.printDirection=(y&48)>>4,S.scrollDirection=(y&12)>>2,S.justify=y&3,y=v[++h],S.effectSpeed=(y&240)>>4,S.effectDirection=(y&12)>>2,S.displayEffect=y&3,h},pt.prototype.flushDisplayed=function(h,m){for(var v=[],y=0;y<8;y++)m.windows[y].visible&&!m.windows[y].isEmpty()&&v.push(m.windows[y].getText());m.endPts=h,m.text=v.join(`

`),this.pushCaption(m),m.startPts=h},pt.prototype.pushCaption=function(h){h.text!==""&&(this.trigger("data",{startPts:h.startPts,endPts:h.endPts,text:h.text,stream:"cc708_"+h.serviceNum}),h.text="",h.startPts=h.endPts)},pt.prototype.displayWindows=function(h,m){var v=this.current708Packet.data,y=v[++h],S=this.getPts(h);this.flushDisplayed(S,m);for(var A=0;A<8;A++)y&1<<A&&(m.windows[A].visible=1);return h},pt.prototype.hideWindows=function(h,m){var v=this.current708Packet.data,y=v[++h],S=this.getPts(h);this.flushDisplayed(S,m);for(var A=0;A<8;A++)y&1<<A&&(m.windows[A].visible=0);return h},pt.prototype.toggleWindows=function(h,m){var v=this.current708Packet.data,y=v[++h],S=this.getPts(h);this.flushDisplayed(S,m);for(var A=0;A<8;A++)y&1<<A&&(m.windows[A].visible^=1);return h},pt.prototype.clearWindows=function(h,m){var v=this.current708Packet.data,y=v[++h],S=this.getPts(h);this.flushDisplayed(S,m);for(var A=0;A<8;A++)y&1<<A&&m.windows[A].clearText();return h},pt.prototype.deleteWindows=function(h,m){var v=this.current708Packet.data,y=v[++h],S=this.getPts(h);this.flushDisplayed(S,m);for(var A=0;A<8;A++)y&1<<A&&m.windows[A].reset();return h},pt.prototype.setPenAttributes=function(h,m){var v=this.current708Packet.data,y=v[h],S=m.currentWindow.penAttr;return y=v[++h],S.textTag=(y&240)>>4,S.offset=(y&12)>>2,S.penSize=y&3,y=v[++h],S.italics=(y&128)>>7,S.underline=(y&64)>>6,S.edgeType=(y&56)>>3,S.fontStyle=y&7,h},pt.prototype.setPenColor=function(h,m){var v=this.current708Packet.data,y=v[h],S=m.currentWindow.penColor;return y=v[++h],S.fgOpacity=(y&192)>>6,S.fgRed=(y&48)>>4,S.fgGreen=(y&12)>>2,S.fgBlue=y&3,y=v[++h],S.bgOpacity=(y&192)>>6,S.bgRed=(y&48)>>4,S.bgGreen=(y&12)>>2,S.bgBlue=y&3,y=v[++h],S.edgeRed=(y&48)>>4,S.edgeGreen=(y&12)>>2,S.edgeBlue=y&3,h},pt.prototype.setPenLocation=function(h,m){var v=this.current708Packet.data,y=v[h],S=m.currentWindow.penLoc;return m.currentWindow.pendingNewLine=!0,y=v[++h],S.row=y&15,y=v[++h],S.column=y&63,h},pt.prototype.reset=function(h,m){var v=this.getPts(h);return this.flushDisplayed(v,m),this.initService(m.serviceNum,h)};var DC={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Lu=function(h){return h===null?"":(h=DC[h]||h,String.fromCharCode(h))},Bu=14,kC=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Hr=function(){for(var h=[],m=Bu+1;m--;)h.push({text:"",indent:0,offset:0});return h},It=function(h,m){It.prototype.init.call(this),this.field_=h||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(v){var y,S,A,$,U;if(y=v.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),A=y>>>8,$=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(v.pts),this.flushDisplayed(v.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=v.pts;else if(y===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(v.pts);else if(y===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(v.pts);else if(y===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(v.pts);else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(v.pts),this.flushDisplayed(v.pts),this.shiftRowsUp_(),this.startPts_=v.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(v.pts),this.displayed_=Hr();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Hr();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(v.pts),this.displayed_=Hr()),this.mode_="paintOn",this.startPts_=v.pts;else if(this.isSpecialCharacter(A,$))A=(A&3)<<8,U=Lu(A|$),this[this.mode_](v.pts,U),this.column_++;else if(this.isExtCharacter(A,$))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),A=(A&3)<<8,U=Lu(A|$),this[this.mode_](v.pts,U),this.column_++;else if(this.isMidRowCode(A,$))this.clearFormatting(v.pts),this[this.mode_](v.pts," "),this.column_++,($&14)===14&&this.addFormatting(v.pts,["i"]),($&1)===1&&this.addFormatting(v.pts,["u"]);else if(this.isOffsetControlCode(A,$)){const j=$&3;this.nonDisplayed_[this.row_].offset=j,this.column_+=j}else if(this.isPAC(A,$)){var H=kC.indexOf(y&7968);if(this.mode_==="rollUp"&&(H-this.rollUpRows_+1<0&&(H=this.rollUpRows_-1),this.setRollUp(v.pts,H)),H!==this.row_&&H>=0&&H<=14&&(this.clearFormatting(v.pts),this.row_=H),$&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(v.pts,["u"]),(y&16)===16){const j=(y&14)>>1;this.column_=j*4,this.nonDisplayed_[this.row_].indent+=j}this.isColorPAC($)&&($&14)===14&&this.addFormatting(v.pts,["i"])}else this.isNormalChar(A)&&($===0&&($=null),U=Lu(A),U+=Lu($),this[this.mode_](v.pts,U),this.column_+=U.length)}};It.prototype=new kn,It.prototype.flushDisplayed=function(h){const m=y=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+y+"."})},v=[];this.displayed_.forEach((y,S)=>{if(y&&y.text&&y.text.length){try{y.text=y.text.trim()}catch{m(S)}y.text.length&&v.push({text:y.text,line:S+1,position:10+Math.min(70,y.indent*10)+y.offset*2.5})}else y==null&&m(S)}),v.length&&this.trigger("data",{startPts:this.startPts_,endPts:h,content:v,stream:this.name_})},It.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Hr(),this.nonDisplayed_=Hr(),this.lastControlCode_=null,this.column_=0,this.row_=Bu,this.rollUpRows_=2,this.formatting_=[]},It.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},It.prototype.isSpecialCharacter=function(h,m){return h===this.EXT_&&m>=48&&m<=63},It.prototype.isExtCharacter=function(h,m){return(h===this.EXT_+1||h===this.EXT_+2)&&m>=32&&m<=63},It.prototype.isMidRowCode=function(h,m){return h===this.EXT_&&m>=32&&m<=47},It.prototype.isOffsetControlCode=function(h,m){return h===this.OFFSET_&&m>=33&&m<=35},It.prototype.isPAC=function(h,m){return h>=this.BASE_&&h<this.BASE_+8&&m>=64&&m<=127},It.prototype.isColorPAC=function(h){return h>=64&&h<=79||h>=96&&h<=127},It.prototype.isNormalChar=function(h){return h>=32&&h<=127},It.prototype.setRollUp=function(h,m){if(this.mode_!=="rollUp"&&(this.row_=Bu,this.mode_="rollUp",this.flushDisplayed(h),this.nonDisplayed_=Hr(),this.displayed_=Hr()),m!==void 0&&m!==this.row_)for(var v=0;v<this.rollUpRows_;v++)this.displayed_[m-v]=this.displayed_[this.row_-v],this.displayed_[this.row_-v]={text:"",indent:0,offset:0};m===void 0&&(m=this.row_),this.topRow_=m-this.rollUpRows_+1},It.prototype.addFormatting=function(h,m){this.formatting_=this.formatting_.concat(m);var v=m.reduce(function(y,S){return y+"<"+S+">"},"");this[this.mode_](h,v)},It.prototype.clearFormatting=function(h){if(this.formatting_.length){var m=this.formatting_.reverse().reduce(function(v,y){return v+"</"+y+">"},"");this.formatting_=[],this[this.mode_](h,m)}},It.prototype.popOn=function(h,m){var v=this.nonDisplayed_[this.row_].text;v+=m,this.nonDisplayed_[this.row_].text=v},It.prototype.rollUp=function(h,m){var v=this.displayed_[this.row_].text;v+=m,this.displayed_[this.row_].text=v},It.prototype.shiftRowsUp_=function(){var h;for(h=0;h<this.topRow_;h++)this.displayed_[h]={text:"",indent:0,offset:0};for(h=this.row_+1;h<Bu+1;h++)this.displayed_[h]={text:"",indent:0,offset:0};for(h=this.topRow_;h<this.row_;h++)this.displayed_[h]=this.displayed_[h+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},It.prototype.paintOn=function(h,m){var v=this.displayed_[this.row_].text;v+=m,this.displayed_[this.row_].text=v};var f0={CaptionStream:Ct,Cea608Stream:It,Cea708Stream:pt},Nu={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},AC=i,IC=8589934592,PC=4294967296,p0="shared",Ph=function(h,m){var v=1;for(h>m&&(v=-1);Math.abs(m-h)>PC;)h+=v*IC;return h},Oh=function(h){var m,v;Oh.prototype.init.call(this),this.type_=h||p0,this.push=function(y){if(y.type==="metadata"){this.trigger("data",y);return}this.type_!==p0&&y.type!==this.type_||(v===void 0&&(v=y.dts),y.dts=Ph(y.dts,v),y.pts=Ph(y.pts,v),m=y.dts,this.trigger("data",y))},this.flush=function(){v=m,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){v=void 0,m=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Oh.prototype=new AC;var m0={TimestampRolloverStream:Oh,handleRollover:Ph},OC=(h,m,v)=>{if(!h)return-1;for(var y=v;y<h.length;y++)if(h[y]===m)return y;return-1},RC={typedArrayIndexOf:OC},Fu=RC.typedArrayIndexOf,$u={Utf8:3},g0=function(h,m,v){var y,S="";for(y=m;y<v;y++)S+="%"+("00"+h[y].toString(16)).slice(-2);return S},Xo=function(h,m,v){return decodeURIComponent(g0(h,m,v))},Ko=function(h,m,v){return unescape(g0(h,m,v))},Yo=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},Qo={APIC:function(h){var m=1,v,y,S="-->";h.data[0]===$u.Utf8&&(v=Fu(h.data,0,m),!(v<0)&&(h.mimeType=Ko(h.data,m,v),m=v+1,h.pictureType=h.data[m],m++,y=Fu(h.data,0,m),!(y<0)&&(h.description=Xo(h.data,m,y),m=y+1,h.mimeType===S?h.url=Ko(h.data,m,h.data.length):h.pictureData=h.data.subarray(m,h.data.length))))},"T*":function(h){h.data[0]===$u.Utf8&&(h.value=Xo(h.data,1,h.data.length).replace(/\0*$/,""),h.values=h.value.split("\0"))},TXXX:function(h){var m;h.data[0]===$u.Utf8&&(m=Fu(h.data,0,1),m!==-1&&(h.description=Xo(h.data,1,m),h.value=Xo(h.data,m+1,h.data.length).replace(/\0*$/,""),h.data=h.value))},"W*":function(h){h.url=Ko(h.data,0,h.data.length).replace(/\0.*$/,"")},WXXX:function(h){var m;h.data[0]===$u.Utf8&&(m=Fu(h.data,0,1),m!==-1&&(h.description=Xo(h.data,1,m),h.url=Ko(h.data,m+1,h.data.length).replace(/\0.*$/,"")))},PRIV:function(h){var m;for(m=0;m<h.data.length;m++)if(h.data[m]===0){h.owner=Ko(h.data,0,m);break}h.privateData=h.data.subarray(m+1),h.data=h.privateData}},MC=function(h){var m,v,y=10,S=0,A=[];if(!(h.length<10||h[0]!==73||h[1]!==68||h[2]!==51)){S=Yo(h.subarray(6,10)),S+=10;var $=h[5]&64;$&&(y+=4,y+=Yo(h.subarray(10,14)),S-=Yo(h.subarray(16,20)));do{if(m=Yo(h.subarray(y+4,y+8)),m<1)break;v=String.fromCharCode(h[y],h[y+1],h[y+2],h[y+3]);var U={id:v,data:h.subarray(y+10,y+m+10)};U.key=U.id,Qo[U.id]?Qo[U.id](U):U.id[0]==="T"?Qo["T*"](U):U.id[0]==="W"&&Qo["W*"](U),A.push(U),y+=10,y+=m}while(y<S);return A}},y0={parseId3Frames:MC,parseSyncSafeInteger:Yo,frameParsers:Qo},LC=i,BC=Nu,ar=y0,Uu;Uu=function(h){var m={descriptor:h&&h.descriptor},v=0,y=[],S=0,A;if(Uu.prototype.init.call(this),this.dispatchType=BC.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(A=0;A<m.descriptor.length;A++)this.dispatchType+=("00"+m.descriptor[A].toString(16)).slice(-2);this.push=function($){var U,H,j,J,de,Le;if($.type==="timed-metadata"){if($.dataAlignmentIndicator&&(S=0,y.length=0),y.length===0&&($.data.length<10||$.data[0]!==73||$.data[1]!==68||$.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(y.push($),S+=$.data.byteLength,y.length===1&&(v=ar.parseSyncSafeInteger($.data.subarray(6,10)),v+=10),!(S<v)){for(U={data:new Uint8Array(v),frames:[],pts:y[0].pts,dts:y[0].dts},de=0;de<v;)U.data.set(y[0].data.subarray(0,v-de),de),de+=y[0].data.byteLength,S-=y[0].data.byteLength,y.shift();H=10,U.data[5]&64&&(H+=4,H+=ar.parseSyncSafeInteger(U.data.subarray(10,14)),v-=ar.parseSyncSafeInteger(U.data.subarray(16,20)));do{if(j=ar.parseSyncSafeInteger(U.data.subarray(H+4,H+8)),j<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Le=String.fromCharCode(U.data[H],U.data[H+1],U.data[H+2],U.data[H+3]),J={id:Le,data:U.data.subarray(H+10,H+j+10)},J.key=J.id,ar.frameParsers[J.id]?ar.frameParsers[J.id](J):J.id[0]==="T"?ar.frameParsers["T*"](J):J.id[0]==="W"&&ar.frameParsers["W*"](J),J.owner==="com.apple.streaming.transportStreamTimestamp"){var ve=J.data,Ve=(ve[3]&1)<<30|ve[4]<<22|ve[5]<<14|ve[6]<<6|ve[7]>>>2;Ve*=4,Ve+=ve[7]&3,J.timeStamp=Ve,U.pts===void 0&&U.dts===void 0&&(U.pts=J.timeStamp,U.dts=J.timeStamp),this.trigger("timestamp",J)}U.frames.push(J),H+=10,H+=j}while(H<v);this.trigger("data",U)}}}},Uu.prototype=new LC;var NC=Uu,Rh=i,Mh=f0,In=Nu,FC=m0.TimestampRolloverStream,zu,Zo,Vu,Ca=188,Lh=71;zu=function(){var h=new Uint8Array(Ca),m=0;zu.prototype.init.call(this),this.push=function(v){var y=0,S=Ca,A;for(m?(A=new Uint8Array(v.byteLength+m),A.set(h.subarray(0,m)),A.set(v,m),m=0):A=v;S<A.byteLength;){if(A[y]===Lh&&A[S]===Lh){this.trigger("data",A.subarray(y,S)),y+=Ca,S+=Ca;continue}y++,S++}y<A.byteLength&&(h.set(A.subarray(y),0),m=A.byteLength-y)},this.flush=function(){m===Ca&&h[0]===Lh&&(this.trigger("data",h),m=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){m=0,this.trigger("reset")}},zu.prototype=new Rh,Zo=function(){var h,m,v,y;Zo.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,h=function(S,A){var $=0;A.payloadUnitStartIndicator&&($+=S[$]+1),A.type==="pat"?m(S.subarray($),A):v(S.subarray($),A)},m=function(S,A){A.section_number=S[7],A.last_section_number=S[8],y.pmtPid=(S[10]&31)<<8|S[11],A.pmtPid=y.pmtPid},v=function(S,A){var $,U,H,j;if(S[5]&1){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},$=(S[1]&15)<<8|S[2],U=3+$-4,H=(S[10]&15)<<8|S[11],j=12+H;j<U;){var J=S[j],de=(S[j+1]&31)<<8|S[j+2];J===In.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=de:J===In.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=de:J===In.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][de]=J),j+=((S[j+3]&15)<<8|S[j+4])+5}A.programMapTable=y.programMapTable}},this.push=function(S){var A={},$=4;if(A.payloadUnitStartIndicator=!!(S[1]&64),A.pid=S[1]&31,A.pid<<=8,A.pid|=S[2],(S[3]&48)>>>4>1&&($+=S[$]+1),A.pid===0)A.type="pat",h(S.subarray($),A),this.trigger("data",A);else if(A.pid===this.pmtPid)for(A.type="pmt",h(S.subarray($),A),this.trigger("data",A);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([S,$,A]):this.processPes_(S,$,A)},this.processPes_=function(S,A,$){$.pid===this.programMapTable.video?$.streamType=In.H264_STREAM_TYPE:$.pid===this.programMapTable.audio?$.streamType=In.ADTS_STREAM_TYPE:$.streamType=this.programMapTable["timed-metadata"][$.pid],$.type="pes",$.data=S.subarray(A),this.trigger("data",$)}},Zo.prototype=new Rh,Zo.STREAM_TYPES={h264:27,adts:15},Vu=function(){var h=this,m=!1,v={data:[],size:0},y={data:[],size:0},S={data:[],size:0},A,$=function(H,j){var J;const de=H[0]<<16|H[1]<<8|H[2];j.data=new Uint8Array,de===1&&(j.packetLength=6+(H[4]<<8|H[5]),j.dataAlignmentIndicator=(H[6]&4)!==0,J=H[7],J&192&&(j.pts=(H[9]&14)<<27|(H[10]&255)<<20|(H[11]&254)<<12|(H[12]&255)<<5|(H[13]&254)>>>3,j.pts*=4,j.pts+=(H[13]&6)>>>1,j.dts=j.pts,J&64&&(j.dts=(H[14]&14)<<27|(H[15]&255)<<20|(H[16]&254)<<12|(H[17]&255)<<5|(H[18]&254)>>>3,j.dts*=4,j.dts+=(H[18]&6)>>>1)),j.data=H.subarray(9+H[8]))},U=function(H,j,J){var de=new Uint8Array(H.size),Le={type:j},ve=0,Ve=0,it=!1,ii;if(!(!H.data.length||H.size<9)){for(Le.trackId=H.data[0].pid,ve=0;ve<H.data.length;ve++)ii=H.data[ve],de.set(ii.data,Ve),Ve+=ii.data.byteLength;$(de,Le),it=j==="video"||Le.packetLength<=H.size,(J||it)&&(H.size=0,H.data.length=0),it&&h.trigger("data",Le)}};Vu.prototype.init.call(this),this.push=function(H){({pat:function(){},pes:function(){var j,J;switch(H.streamType){case In.H264_STREAM_TYPE:j=v,J="video";break;case In.ADTS_STREAM_TYPE:j=y,J="audio";break;case In.METADATA_STREAM_TYPE:j=S,J="timed-metadata";break;default:return}H.payloadUnitStartIndicator&&U(j,J,!0),j.data.push(H),j.size+=H.data.byteLength},pmt:function(){var j={type:"metadata",tracks:[]};A=H.programMapTable,A.video!==null&&j.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&j.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),m=!0,h.trigger("data",j)}})[H.type]()},this.reset=function(){v.size=0,v.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){U(v,"video"),U(y,"audio"),U(S,"timed-metadata")},this.flush=function(){if(!m&&A){var H={type:"metadata",tracks:[]};A.video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),h.trigger("data",H)}m=!1,this.flushStreams_(),this.trigger("done")}},Vu.prototype=new Rh;var v0={PAT_PID:0,MP2T_PACKET_LENGTH:Ca,TransportPacketStream:zu,TransportParseStream:Zo,ElementaryStream:Vu,TimestampRolloverStream:FC,CaptionStream:Mh.CaptionStream,Cea608Stream:Mh.Cea608Stream,Cea708Stream:Mh.Cea708Stream,MetadataStream:NC};for(var Bh in In)In.hasOwnProperty(Bh)&&(v0[Bh]=In[Bh]);var $C=v0,UC=i,zC=st.ONE_SECOND_IN_TS,Hu,b0=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Hu=function(h){var m,v=0;Hu.prototype.init.call(this),this.skipWarn_=function(y,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${y} to ${S} in frame ${v} outside syncword`})},this.push=function(y){var S=0,A,$,U,H,j;if(h||(v=0),y.type==="audio"){m&&m.length?(U=m,m=new Uint8Array(U.byteLength+y.data.byteLength),m.set(U),m.set(y.data,U.byteLength)):m=y.data;for(var J;S+7<m.length;){if(m[S]!==255||(m[S+1]&246)!==240){typeof J!="number"&&(J=S),S++;continue}if(typeof J=="number"&&(this.skipWarn_(J,S),J=null),$=(~m[S+1]&1)*2,A=(m[S+3]&3)<<11|m[S+4]<<3|(m[S+5]&224)>>5,H=((m[S+6]&3)+1)*1024,j=H*zC/b0[(m[S+2]&60)>>>2],m.byteLength-S<A)break;this.trigger("data",{pts:y.pts+v*j,dts:y.dts+v*j,sampleCount:H,audioobjecttype:(m[S+2]>>>6&3)+1,channelcount:(m[S+2]&1)<<2|(m[S+3]&192)>>>6,samplerate:b0[(m[S+2]&60)>>>2],samplingfrequencyindex:(m[S+2]&60)>>>2,samplesize:16,data:m.subarray(S+7+$,S+A)}),v++,S+=A}typeof J=="number"&&(this.skipWarn_(J,S),J=null),m=m.subarray(S)}},this.flush=function(){v=0,this.trigger("done")},this.reset=function(){m=void 0,this.trigger("reset")},this.endTimeline=function(){m=void 0,this.trigger("endedtimeline")}},Hu.prototype=new UC;var VC=Hu,_0;_0=function(h){var m=h.byteLength,v=0,y=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+y},this.loadWord=function(){var S=h.byteLength-m,A=new Uint8Array(4),$=Math.min(4,m);if($===0)throw new Error("no bytes available");A.set(h.subarray(S,S+$)),v=new DataView(A.buffer).getUint32(0),y=$*8,m-=$},this.skipBits=function(S){var A;y>S?(v<<=S,y-=S):(S-=y,A=Math.floor(S/8),S-=A*8,m-=A,this.loadWord(),v<<=S,y-=S)},this.readBits=function(S){var A=Math.min(y,S),$=v>>>32-A;return y-=A,y>0?v<<=A:m>0&&this.loadWord(),A=S-A,A>0?$<<A|this.readBits(A):$},this.skipLeadingZeros=function(){var S;for(S=0;S<y;++S)if((v&2147483648>>>S)!==0)return v<<=S,y-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var HC=_0,T0=i,qC=HC,qu,ju,x0;ju=function(){var h=0,m,v;ju.prototype.init.call(this),this.push=function(y){var S;v?(S=new Uint8Array(v.byteLength+y.data.byteLength),S.set(v),S.set(y.data,v.byteLength),v=S):v=y.data;for(var A=v.byteLength;h<A-3;h++)if(v[h+2]===1){m=h+5;break}for(;m<A;)switch(v[m]){case 0:if(v[m-1]!==0){m+=2;break}else if(v[m-2]!==0){m++;break}h+3!==m-2&&this.trigger("data",v.subarray(h+3,m-2));do m++;while(v[m]!==1&&m<A);h=m-2,m+=3;break;case 1:if(v[m-1]!==0||v[m-2]!==0){m+=3;break}this.trigger("data",v.subarray(h+3,m-2)),h=m-2,m+=3;break;default:m+=3;break}v=v.subarray(h),m-=h,h=0},this.reset=function(){v=null,h=0,this.trigger("reset")},this.flush=function(){v&&v.byteLength>3&&this.trigger("data",v.subarray(h+3)),v=null,h=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ju.prototype=new T0,x0={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},qu=function(){var h=new ju,m,v,y,S,A,$,U;qu.prototype.init.call(this),m=this,this.push=function(H){H.type==="video"&&(v=H.trackId,y=H.pts,S=H.dts,h.push(H))},h.on("data",function(H){var j={trackId:v,pts:y,dts:S,data:H,nalUnitTypeCode:H[0]&31};switch(j.nalUnitTypeCode){case 5:j.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:j.nalUnitType="sei_rbsp",j.escapedRBSP=A(H.subarray(1));break;case 7:j.nalUnitType="seq_parameter_set_rbsp",j.escapedRBSP=A(H.subarray(1)),j.config=$(j.escapedRBSP);break;case 8:j.nalUnitType="pic_parameter_set_rbsp";break;case 9:j.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",j)}),h.on("done",function(){m.trigger("done")}),h.on("partialdone",function(){m.trigger("partialdone")}),h.on("reset",function(){m.trigger("reset")}),h.on("endedtimeline",function(){m.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},U=function(H,j){var J=8,de=8,Le,ve;for(Le=0;Le<H;Le++)de!==0&&(ve=j.readExpGolomb(),de=(J+ve+256)%256),J=de===0?J:de},A=function(H){for(var j=H.byteLength,J=[],de=1,Le,ve;de<j-2;)H[de]===0&&H[de+1]===0&&H[de+2]===3?(J.push(de+2),de+=2):de++;if(J.length===0)return H;Le=j-J.length,ve=new Uint8Array(Le);var Ve=0;for(de=0;de<Le;Ve++,de++)Ve===J[0]&&(Ve++,J.shift()),ve[de]=H[Ve];return ve},$=function(H){var j=0,J=0,de=0,Le=0,ve,Ve,it,ii,Qi,lr,rl,al,ol,ll,nc,Et=[1,1],ul,On;if(ve=new qC(H),Ve=ve.readUnsignedByte(),ii=ve.readUnsignedByte(),it=ve.readUnsignedByte(),ve.skipUnsignedExpGolomb(),x0[Ve]&&(Qi=ve.readUnsignedExpGolomb(),Qi===3&&ve.skipBits(1),ve.skipUnsignedExpGolomb(),ve.skipUnsignedExpGolomb(),ve.skipBits(1),ve.readBoolean()))for(nc=Qi!==3?8:12,On=0;On<nc;On++)ve.readBoolean()&&(On<6?U(16,ve):U(64,ve));if(ve.skipUnsignedExpGolomb(),lr=ve.readUnsignedExpGolomb(),lr===0)ve.readUnsignedExpGolomb();else if(lr===1)for(ve.skipBits(1),ve.skipExpGolomb(),ve.skipExpGolomb(),rl=ve.readUnsignedExpGolomb(),On=0;On<rl;On++)ve.skipExpGolomb();if(ve.skipUnsignedExpGolomb(),ve.skipBits(1),al=ve.readUnsignedExpGolomb(),ol=ve.readUnsignedExpGolomb(),ll=ve.readBits(1),ll===0&&ve.skipBits(1),ve.skipBits(1),ve.readBoolean()&&(j=ve.readUnsignedExpGolomb(),J=ve.readUnsignedExpGolomb(),de=ve.readUnsignedExpGolomb(),Le=ve.readUnsignedExpGolomb()),ve.readBoolean()&&ve.readBoolean()){switch(ul=ve.readUnsignedByte(),ul){case 1:Et=[1,1];break;case 2:Et=[12,11];break;case 3:Et=[10,11];break;case 4:Et=[16,11];break;case 5:Et=[40,33];break;case 6:Et=[24,11];break;case 7:Et=[20,11];break;case 8:Et=[32,11];break;case 9:Et=[80,33];break;case 10:Et=[18,11];break;case 11:Et=[15,11];break;case 12:Et=[64,33];break;case 13:Et=[160,99];break;case 14:Et=[4,3];break;case 15:Et=[3,2];break;case 16:Et=[2,1];break;case 255:{Et=[ve.readUnsignedByte()<<8|ve.readUnsignedByte(),ve.readUnsignedByte()<<8|ve.readUnsignedByte()];break}}Et&&Et[0]/Et[1]}return{profileIdc:Ve,levelIdc:it,profileCompatibility:ii,width:(al+1)*16-j*2-J*2,height:(2-ll)*(ol+1)*16-de*2-Le*2,sarRatio:Et}}},qu.prototype=new T0;var jC={H264Stream:qu},WC=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],S0=function(h,m){var v=h[m+6]<<21|h[m+7]<<14|h[m+8]<<7|h[m+9],y=h[m+5],S=(y&16)>>4;return v=v>=0?v:0,S?v+20:v+10},w0=function(h,m){return h.length-m<10||h[m]!==73||h[m+1]!==68||h[m+2]!==51?m:(m+=S0(h,m),w0(h,m))},GC=function(h){var m=w0(h,0);return h.length>=m+2&&(h[m]&255)===255&&(h[m+1]&240)===240&&(h[m+1]&22)===16},C0=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},XC=function(h,m,v){var y,S="";for(y=m;y<v;y++)S+="%"+("00"+h[y].toString(16)).slice(-2);return S},KC=function(h,m,v){return unescape(XC(h,m,v))},YC=function(h,m){var v=(h[m+5]&224)>>5,y=h[m+4]<<3,S=h[m+3]&6144;return S|y|v},QC=function(h,m){return h[m]===73&&h[m+1]===68&&h[m+2]===51?"timed-metadata":h[m]&!0&&(h[m+1]&240)===240?"audio":null},ZC=function(h){for(var m=0;m+5<h.length;){if(h[m]!==255||(h[m+1]&246)!==240){m++;continue}return WC[(h[m+2]&60)>>>2]}return null},JC=function(h){var m,v,y,S;m=10,h[5]&64&&(m+=4,m+=C0(h.subarray(10,14)));do{if(v=C0(h.subarray(m+4,m+8)),v<1)return null;if(S=String.fromCharCode(h[m],h[m+1],h[m+2],h[m+3]),S==="PRIV"){y=h.subarray(m+10,m+v+10);for(var A=0;A<y.byteLength;A++)if(y[A]===0){var $=KC(y,0,A);if($==="com.apple.streaming.transportStreamTimestamp"){var U=y.subarray(A+1),H=(U[3]&1)<<30|U[4]<<22|U[5]<<14|U[6]<<6|U[7]>>>2;return H*=4,H+=U[7]&3,H}break}}m+=10,m+=v}while(m<h.byteLength);return null},Nh={isLikelyAacData:GC,parseId3TagSize:S0,parseAdtsSize:YC,parseType:QC,parseSampleRate:ZC,parseAacTimestamp:JC},eE=i,E0=Nh,Wu;Wu=function(){var h=new Uint8Array,m=0;Wu.prototype.init.call(this),this.setTimestamp=function(v){m=v},this.push=function(v){var y=0,S=0,A,$,U,H;for(h.length?(H=h.length,h=new Uint8Array(v.byteLength+H),h.set(h.subarray(0,H)),h.set(v,H)):h=v;h.length-S>=3;){if(h[S]===73&&h[S+1]===68&&h[S+2]===51){if(h.length-S<10||(y=E0.parseId3TagSize(h,S),S+y>h.length))break;$={type:"timed-metadata",data:h.subarray(S,S+y)},this.trigger("data",$),S+=y;continue}else if((h[S]&255)===255&&(h[S+1]&240)===240){if(h.length-S<7||(y=E0.parseAdtsSize(h,S),S+y>h.length))break;U={type:"audio",data:h.subarray(S,S+y),pts:m,dts:m},this.trigger("data",U),S+=y;continue}S++}A=h.length-S,A>0?h=h.subarray(S):h=new Uint8Array},this.reset=function(){h=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){h=new Uint8Array,this.trigger("endedtimeline")}},Wu.prototype=new eE;var tE=Wu,iE=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],nE=iE,sE=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],rE=sE,Gu=i,Jo=z,el=_e,Xu=Mu,Pn=Me,Ps=$C,Ku=st,D0=VC,aE=jC.H264Stream,oE=tE,lE=Nh.isLikelyAacData,uE=st.ONE_SECOND_IN_TS,k0=nE,A0=rE,Yu,tl,Qu,qr,cE=function(h,m){m.stream=h,this.trigger("log",m)},I0=function(h,m){for(var v=Object.keys(m),y=0;y<v.length;y++){var S=v[y];S==="headOfPipeline"||!m[S].on||m[S].on("log",cE.bind(h,S))}},P0=function(h,m){var v;if(h.length!==m.length)return!1;for(v=0;v<h.length;v++)if(h[v]!==m[v])return!1;return!0},O0=function(h,m,v,y,S,A){var $=v-m,U=y-m,H=S-v;return{start:{dts:h,pts:h+$},end:{dts:h+U,pts:h+H},prependedContentDuration:A,baseMediaDecodeTime:h}};tl=function(h,m){var v=[],y,S=0,A=0,$=1/0;m=m||{},y=m.firstSequenceNumber||0,tl.prototype.init.call(this),this.push=function(U){Pn.collectDtsInfo(h,U),h&&k0.forEach(function(H){h[H]=U[H]}),v.push(U)},this.setEarliestDts=function(U){S=U},this.setVideoBaseMediaDecodeTime=function(U){$=U},this.setAudioAppendStart=function(U){A=U},this.flush=function(){var U,H,j,J,de,Le,ve;if(v.length===0){this.trigger("done","AudioSegmentStream");return}U=Xu.trimAdtsFramesByEarliestDts(v,h,S),h.baseMediaDecodeTime=Pn.calculateTrackBaseMediaDecodeTime(h,m.keepOriginalTimestamps),ve=Xu.prefixWithSilence(h,U,A,$),h.samples=Xu.generateSampleTable(U),j=Jo.mdat(Xu.concatenateFrameData(U)),v=[],H=Jo.moof(y,[h]),J=new Uint8Array(H.byteLength+j.byteLength),y++,J.set(H),J.set(j,H.byteLength),Pn.clearDtsInfo(h),de=Math.ceil(uE*1024/h.samplerate),U.length&&(Le=U.length*de,this.trigger("segmentTimingInfo",O0(Ku.audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate),U[0].dts,U[0].pts,U[0].dts+Le,U[0].pts+Le,ve||0)),this.trigger("timingInfo",{start:U[0].pts,end:U[0].pts+Le})),this.trigger("data",{track:h,boxes:J}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Pn.clearDtsInfo(h),v=[],this.trigger("reset")}},tl.prototype=new Gu,Yu=function(h,m){var v,y=[],S=[],A,$;m=m||{},v=m.firstSequenceNumber||0,Yu.prototype.init.call(this),delete h.minPTS,this.gopCache_=[],this.push=function(U){Pn.collectDtsInfo(h,U),U.nalUnitType==="seq_parameter_set_rbsp"&&!A&&(A=U.config,h.sps=[U.data],A0.forEach(function(H){h[H]=A[H]},this)),U.nalUnitType==="pic_parameter_set_rbsp"&&!$&&($=U.data,h.pps=[U.data]),y.push(U)},this.flush=function(){for(var U,H,j,J,de,Le,ve=0,Ve,it;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(U=el.groupNalsIntoFrames(y),j=el.groupFramesIntoGops(U),j[0][0].keyFrame||(H=this.getGopForFusion_(y[0],h),H?(ve=H.duration,j.unshift(H),j.byteLength+=H.byteLength,j.nalCount+=H.nalCount,j.pts=H.pts,j.dts=H.dts,j.duration+=H.duration):j=el.extendFirstKeyFrame(j)),S.length){var ii;if(m.alignGopsAtEnd?ii=this.alignGopsAtEnd_(j):ii=this.alignGopsAtStart_(j),!ii){this.gopCache_.unshift({gop:j.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Pn.clearDtsInfo(h),j=ii}Pn.collectDtsInfo(h,j),h.samples=el.generateSampleTable(j),de=Jo.mdat(el.concatenateNalData(j)),h.baseMediaDecodeTime=Pn.calculateTrackBaseMediaDecodeTime(h,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",j.map(function(Qi){return{pts:Qi.pts,dts:Qi.dts,byteLength:Qi.byteLength}})),Ve=j[0],it=j[j.length-1],this.trigger("segmentTimingInfo",O0(h.baseMediaDecodeTime,Ve.dts,Ve.pts,it.dts+it.duration,it.pts+it.duration,ve)),this.trigger("timingInfo",{start:j[0].pts,end:j[j.length-1].pts+j[j.length-1].duration}),this.gopCache_.unshift({gop:j.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",h.baseMediaDecodeTime),this.trigger("timelineStartInfo",h.timelineStartInfo),J=Jo.moof(v,[h]),Le=new Uint8Array(J.byteLength+de.byteLength),v++,Le.set(J),Le.set(de,J.byteLength),this.trigger("data",{track:h,boxes:Le}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),y=[],this.gopCache_.length=0,S.length=0,this.trigger("reset")},this.resetStream_=function(){Pn.clearDtsInfo(h),A=void 0,$=void 0},this.getGopForFusion_=function(U){var H=45e3,j=1/0,J,de,Le,ve,Ve;for(Ve=0;Ve<this.gopCache_.length;Ve++)ve=this.gopCache_[Ve],Le=ve.gop,!(!(h.pps&&P0(h.pps[0],ve.pps[0]))||!(h.sps&&P0(h.sps[0],ve.sps[0])))&&(Le.dts<h.timelineStartInfo.dts||(J=U.dts-Le.dts-Le.duration,J>=-1e4&&J<=H&&(!de||j>J)&&(de=ve,j=J)));return de?de.gop:null},this.alignGopsAtStart_=function(U){var H,j,J,de,Le,ve,Ve,it;for(Le=U.byteLength,ve=U.nalCount,Ve=U.duration,H=j=0;H<S.length&&j<U.length&&(J=S[H],de=U[j],J.pts!==de.pts);){if(de.pts>J.pts){H++;continue}j++,Le-=de.byteLength,ve-=de.nalCount,Ve-=de.duration}return j===0?U:j===U.length?null:(it=U.slice(j),it.byteLength=Le,it.duration=Ve,it.nalCount=ve,it.pts=it[0].pts,it.dts=it[0].dts,it)},this.alignGopsAtEnd_=function(U){var H,j,J,de,Le,ve;for(H=S.length-1,j=U.length-1,Le=null,ve=!1;H>=0&&j>=0;){if(J=S[H],de=U[j],J.pts===de.pts){ve=!0;break}if(J.pts>de.pts){H--;continue}H===S.length-1&&(Le=j),j--}if(!ve&&Le===null)return null;var Ve;if(ve?Ve=j:Ve=Le,Ve===0)return U;var it=U.slice(Ve),ii=it.reduce(function(Qi,lr){return Qi.byteLength+=lr.byteLength,Qi.duration+=lr.duration,Qi.nalCount+=lr.nalCount,Qi},{byteLength:0,duration:0,nalCount:0});return it.byteLength=ii.byteLength,it.duration=ii.duration,it.nalCount=ii.nalCount,it.pts=it[0].pts,it.dts=it[0].dts,it},this.alignGopsWith=function(U){S=U}},Yu.prototype=new Gu,qr=function(h,m){this.numberOfTracks=0,this.metadataStream=m,h=h||{},typeof h.remux<"u"?this.remuxTracks=!!h.remux:this.remuxTracks=!0,typeof h.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=h.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,qr.prototype.init.call(this),this.push=function(v){if(v.content||v.text)return this.pendingCaptions.push(v);if(v.frames)return this.pendingMetadata.push(v);this.pendingTracks.push(v.track),this.pendingBytes+=v.boxes.byteLength,v.track.type==="video"&&(this.videoTrack=v.track,this.pendingBoxes.push(v.boxes)),v.track.type==="audio"&&(this.audioTrack=v.track,this.pendingBoxes.unshift(v.boxes))}},qr.prototype=new Gu,qr.prototype.flush=function(h){var m=0,v={captions:[],captionStreams:{},metadata:[],info:{}},y,S,A,$=0,U;if(this.pendingTracks.length<this.numberOfTracks){if(h!=="VideoSegmentStream"&&h!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?($=this.videoTrack.timelineStartInfo.pts,A0.forEach(function(H){v.info[H]=this.videoTrack[H]},this)):this.audioTrack&&($=this.audioTrack.timelineStartInfo.pts,k0.forEach(function(H){v.info[H]=this.audioTrack[H]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?v.type=this.pendingTracks[0].type:v.type="combined",this.emittedTracks+=this.pendingTracks.length,A=Jo.initSegment(this.pendingTracks),v.initSegment=new Uint8Array(A.byteLength),v.initSegment.set(A),v.data=new Uint8Array(this.pendingBytes),U=0;U<this.pendingBoxes.length;U++)v.data.set(this.pendingBoxes[U],m),m+=this.pendingBoxes[U].byteLength;for(U=0;U<this.pendingCaptions.length;U++)y=this.pendingCaptions[U],y.startTime=Ku.metadataTsToSeconds(y.startPts,$,this.keepOriginalTimestamps),y.endTime=Ku.metadataTsToSeconds(y.endPts,$,this.keepOriginalTimestamps),v.captionStreams[y.stream]=!0,v.captions.push(y);for(U=0;U<this.pendingMetadata.length;U++)S=this.pendingMetadata[U],S.cueTime=Ku.metadataTsToSeconds(S.pts,$,this.keepOriginalTimestamps),v.metadata.push(S);for(v.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",v),U=0;U<v.captions.length;U++)y=v.captions[U],this.trigger("caption",y);for(U=0;U<v.metadata.length;U++)S=v.metadata[U],this.trigger("id3Frame",S)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},qr.prototype.setRemux=function(h){this.remuxTracks=h},Qu=function(h){var m=this,v=!0,y,S;Qu.prototype.init.call(this),h=h||{},this.baseMediaDecodeTime=h.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="aac",A.metadataStream=new Ps.MetadataStream,A.aacStream=new oE,A.audioTimestampRolloverStream=new Ps.TimestampRolloverStream("audio"),A.timedMetadataTimestampRolloverStream=new Ps.TimestampRolloverStream("timed-metadata"),A.adtsStream=new D0,A.coalesceStream=new qr(h,A.metadataStream),A.headOfPipeline=A.aacStream,A.aacStream.pipe(A.audioTimestampRolloverStream).pipe(A.adtsStream),A.aacStream.pipe(A.timedMetadataTimestampRolloverStream).pipe(A.metadataStream).pipe(A.coalesceStream),A.metadataStream.on("timestamp",function($){A.aacStream.setTimestamp($.timeStamp)}),A.aacStream.on("data",function($){$.type!=="timed-metadata"&&$.type!=="audio"||A.audioSegmentStream||(S=S||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new tl(S,h),A.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream),m.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!y}))}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),I0(this,A)},this.setupTsPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="ts",A.metadataStream=new Ps.MetadataStream,A.packetStream=new Ps.TransportPacketStream,A.parseStream=new Ps.TransportParseStream,A.elementaryStream=new Ps.ElementaryStream,A.timestampRolloverStream=new Ps.TimestampRolloverStream,A.adtsStream=new D0,A.h264Stream=new aE,A.captionStream=new Ps.CaptionStream(h),A.coalesceStream=new qr(h,A.metadataStream),A.headOfPipeline=A.packetStream,A.packetStream.pipe(A.parseStream).pipe(A.elementaryStream).pipe(A.timestampRolloverStream),A.timestampRolloverStream.pipe(A.h264Stream),A.timestampRolloverStream.pipe(A.adtsStream),A.timestampRolloverStream.pipe(A.metadataStream).pipe(A.coalesceStream),A.h264Stream.pipe(A.captionStream).pipe(A.coalesceStream),A.elementaryStream.on("data",function($){var U;if($.type==="metadata"){for(U=$.tracks.length;U--;)!y&&$.tracks[U].type==="video"?(y=$.tracks[U],y.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!S&&$.tracks[U].type==="audio"&&(S=$.tracks[U],S.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);y&&!A.videoSegmentStream&&(A.coalesceStream.numberOfTracks++,A.videoSegmentStream=new Yu(y,h),A.videoSegmentStream.on("log",m.getLogTrigger_("videoSegmentStream")),A.videoSegmentStream.on("timelineStartInfo",function(H){S&&!h.keepOriginalTimestamps&&(S.timelineStartInfo=H,A.audioSegmentStream.setEarliestDts(H.dts-m.baseMediaDecodeTime))}),A.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),A.videoSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"videoSegmentTimingInfo")),A.videoSegmentStream.on("baseMediaDecodeTime",function(H){S&&A.audioSegmentStream.setVideoBaseMediaDecodeTime(H)}),A.videoSegmentStream.on("timingInfo",m.trigger.bind(m,"videoTimingInfo")),A.h264Stream.pipe(A.videoSegmentStream).pipe(A.coalesceStream)),S&&!A.audioSegmentStream&&(A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new tl(S,h),A.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),A.audioSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"audioSegmentTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream)),m.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!y})}}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("id3Frame",function($){$.dispatchType=A.metadataStream.dispatchType,m.trigger("id3Frame",$)}),A.coalesceStream.on("caption",this.trigger.bind(this,"caption")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),I0(this,A)},this.setBaseMediaDecodeTime=function(A){var $=this.transmuxPipeline_;h.keepOriginalTimestamps||(this.baseMediaDecodeTime=A),S&&(S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,Pn.clearDtsInfo(S),$.audioTimestampRolloverStream&&$.audioTimestampRolloverStream.discontinuity()),y&&($.videoSegmentStream&&($.videoSegmentStream.gopCache_=[]),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,Pn.clearDtsInfo(y),$.captionStream.reset()),$.timestampRolloverStream&&$.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(A){S&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(A)},this.setRemux=function(A){var $=this.transmuxPipeline_;h.remux=A,$&&$.coalesceStream&&$.coalesceStream.setRemux(A)},this.alignGopsWith=function(A){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(A)},this.getLogTrigger_=function(A){var $=this;return function(U){U.stream=A,$.trigger("log",U)}},this.push=function(A){if(v){var $=lE(A);$&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!$&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),v=!1}this.transmuxPipeline_.headOfPipeline.push(A)},this.flush=function(){v=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Qu.prototype=new Gu;var dE={Transmuxer:Qu},hE=function(h){return h>>>0},fE=function(h){return("00"+h.toString(16)).slice(-2)},Zu={toUnsigned:hE,toHexString:fE},pE=function(h){var m="";return m+=String.fromCharCode(h[0]),m+=String.fromCharCode(h[1]),m+=String.fromCharCode(h[2]),m+=String.fromCharCode(h[3]),m},R0=pE,mE=Zu.toUnsigned,gE=R0,M0=function(h,m){var v=[],y,S,A,$,U;if(!m.length)return null;for(y=0;y<h.byteLength;)S=mE(h[y]<<24|h[y+1]<<16|h[y+2]<<8|h[y+3]),A=gE(h.subarray(y+4,y+8)),$=S>1?y+S:h.byteLength,A===m[0]&&(m.length===1?v.push(h.subarray(y+8,$)):(U=M0(h.subarray(y+8,$),m.slice(1)),U.length&&(v=v.concat(U)))),y=$;return v},Fh=M0,yE=Zu.toUnsigned,vE=r.getUint64,bE=function(h){var m={version:h[0],flags:new Uint8Array(h.subarray(1,4))};return m.version===1?m.baseMediaDecodeTime=vE(h.subarray(4)):m.baseMediaDecodeTime=yE(h[4]<<24|h[5]<<16|h[6]<<8|h[7]),m},$h=bE,_E=function(h){var m=new DataView(h.buffer,h.byteOffset,h.byteLength),v={version:h[0],flags:new Uint8Array(h.subarray(1,4)),trackId:m.getUint32(4)},y=v.flags[2]&1,S=v.flags[2]&2,A=v.flags[2]&8,$=v.flags[2]&16,U=v.flags[2]&32,H=v.flags[0]&65536,j=v.flags[0]&131072,J;return J=8,y&&(J+=4,v.baseDataOffset=m.getUint32(12),J+=4),S&&(v.sampleDescriptionIndex=m.getUint32(J),J+=4),A&&(v.defaultSampleDuration=m.getUint32(J),J+=4),$&&(v.defaultSampleSize=m.getUint32(J),J+=4),U&&(v.defaultSampleFlags=m.getUint32(J)),H&&(v.durationIsEmpty=!0),!y&&j&&(v.baseDataOffsetIsMoof=!0),v},L0=_E,TE=function(h){return{isLeading:(h[0]&12)>>>2,dependsOn:h[0]&3,isDependedOn:(h[1]&192)>>>6,hasRedundancy:(h[1]&48)>>>4,paddingValue:(h[1]&14)>>>1,isNonSyncSample:h[1]&1,degradationPriority:h[2]<<8|h[3]}},xE=TE,B0=xE,SE=function(h){var m={version:h[0],flags:new Uint8Array(h.subarray(1,4)),samples:[]},v=new DataView(h.buffer,h.byteOffset,h.byteLength),y=m.flags[2]&1,S=m.flags[2]&4,A=m.flags[1]&1,$=m.flags[1]&2,U=m.flags[1]&4,H=m.flags[1]&8,j=v.getUint32(4),J=8,de;for(y&&(m.dataOffset=v.getInt32(J),J+=4),S&&j&&(de={flags:B0(h.subarray(J,J+4))},J+=4,A&&(de.duration=v.getUint32(J),J+=4),$&&(de.size=v.getUint32(J),J+=4),H&&(m.version===1?de.compositionTimeOffset=v.getInt32(J):de.compositionTimeOffset=v.getUint32(J),J+=4),m.samples.push(de),j--);j--;)de={},A&&(de.duration=v.getUint32(J),J+=4),$&&(de.size=v.getUint32(J),J+=4),U&&(de.flags=B0(h.subarray(J,J+4)),J+=4),H&&(m.version===1?de.compositionTimeOffset=v.getInt32(J):de.compositionTimeOffset=v.getUint32(J),J+=4),m.samples.push(de);return m},N0=SE,F0={tfdt:$h,trun:N0},$0={parseTfdt:F0.tfdt,parseTrun:F0.trun},wE=function(h){for(var m=0,v=String.fromCharCode(h[m]),y="";v!=="\0";)y+=v,m++,v=String.fromCharCode(h[m]);return y+=v,y},CE={uint8ToCString:wE},Ju=CE.uint8ToCString,EE=r.getUint64,DE=function(h){var m=4,v=h[0],y,S,A,$,U,H,j,J;if(v===0){y=Ju(h.subarray(m)),m+=y.length,S=Ju(h.subarray(m)),m+=S.length;var de=new DataView(h.buffer);A=de.getUint32(m),m+=4,U=de.getUint32(m),m+=4,H=de.getUint32(m),m+=4,j=de.getUint32(m),m+=4}else if(v===1){var de=new DataView(h.buffer);A=de.getUint32(m),m+=4,$=EE(h.subarray(m)),m+=8,H=de.getUint32(m),m+=4,j=de.getUint32(m),m+=4,y=Ju(h.subarray(m)),m+=y.length,S=Ju(h.subarray(m)),m+=S.length}J=new Uint8Array(h.subarray(m,h.byteLength));var Le={scheme_id_uri:y,value:S,timescale:A||1,presentation_time:$,presentation_time_delta:U,event_duration:H,id:j,message_data:J};return AE(v,Le)?Le:void 0},kE=function(h,m,v,y){return h||h===0?h/m:y+v/m},AE=function(h,m){var v=m.scheme_id_uri!=="\0",y=h===0&&U0(m.presentation_time_delta)&&v,S=h===1&&U0(m.presentation_time)&&v;return!(h>1)&&y||S},U0=function(h){return h!==void 0||h!==null},IE={parseEmsgBox:DE,scaleTime:kE},il;typeof window<"u"?il=window:typeof t<"u"?il=t:typeof self<"u"?il=self:il={};var z0=il,ec=Zu.toUnsigned,nl=Zu.toHexString,Gt=Fh,Ea=R0,Uh=IE,PE=L0,OE=N0,RE=$h,ME=r.getUint64,V0,H0,q0,j0,W0,zh,G0,Vh=z0,LE=y0.parseId3Frames;V0=function(h){var m={},v=Gt(h,["moov","trak"]);return v.reduce(function(y,S){var A,$,U,H,j;return A=Gt(S,["tkhd"])[0],!A||($=A[0],U=$===0?12:20,H=ec(A[U]<<24|A[U+1]<<16|A[U+2]<<8|A[U+3]),j=Gt(S,["mdia","mdhd"])[0],!j)?null:($=j[0],U=$===0?12:20,y[H]=ec(j[U]<<24|j[U+1]<<16|j[U+2]<<8|j[U+3]),y)},m)},H0=function(h,m){var v;v=Gt(m,["moof","traf"]);var y=v.reduce(function(S,A){var $=Gt(A,["tfhd"])[0],U=ec($[4]<<24|$[5]<<16|$[6]<<8|$[7]),H=h[U]||9e4,j=Gt(A,["tfdt"])[0],J=new DataView(j.buffer,j.byteOffset,j.byteLength),de;j[0]===1?de=ME(j.subarray(4,12)):de=J.getUint32(4);let Le;return typeof de=="bigint"?Le=de/Vh.BigInt(H):typeof de=="number"&&!isNaN(de)&&(Le=de/H),Le<Number.MAX_SAFE_INTEGER&&(Le=Number(Le)),Le<S&&(S=Le),S},1/0);return typeof y=="bigint"||isFinite(y)?y:0},q0=function(h,m){var v=Gt(m,["moof","traf"]),y=0,S=0,A;if(v&&v.length){var $=Gt(v[0],["tfhd"])[0],U=Gt(v[0],["trun"])[0],H=Gt(v[0],["tfdt"])[0];if($){var j=PE($);A=j.trackId}if(H){var J=RE(H);y=J.baseMediaDecodeTime}if(U){var de=OE(U);de.samples&&de.samples.length&&(S=de.samples[0].compositionTimeOffset||0)}}var Le=h[A]||9e4;typeof y=="bigint"&&(S=Vh.BigInt(S),Le=Vh.BigInt(Le));var ve=(y+S)/Le;return typeof ve=="bigint"&&ve<Number.MAX_SAFE_INTEGER&&(ve=Number(ve)),ve},j0=function(h){var m=Gt(h,["moov","trak"]),v=[];return m.forEach(function(y){var S=Gt(y,["mdia","hdlr"]),A=Gt(y,["tkhd"]);S.forEach(function($,U){var H=Ea($.subarray(8,12)),j=A[U],J,de,Le;H==="vide"&&(J=new DataView(j.buffer,j.byteOffset,j.byteLength),de=J.getUint8(0),Le=de===0?J.getUint32(12):J.getUint32(20),v.push(Le))})}),v},zh=function(h){var m=h[0],v=m===0?12:20;return ec(h[v]<<24|h[v+1]<<16|h[v+2]<<8|h[v+3])},W0=function(h){var m=Gt(h,["moov","trak"]),v=[];return m.forEach(function(y){var S={},A=Gt(y,["tkhd"])[0],$,U;A&&($=new DataView(A.buffer,A.byteOffset,A.byteLength),U=$.getUint8(0),S.id=U===0?$.getUint32(12):$.getUint32(20));var H=Gt(y,["mdia","hdlr"])[0];if(H){var j=Ea(H.subarray(8,12));j==="vide"?S.type="video":j==="soun"?S.type="audio":S.type=j}var J=Gt(y,["mdia","minf","stbl","stsd"])[0];if(J){var de=J.subarray(8);S.codec=Ea(de.subarray(4,8));var Le=Gt(de,[S.codec])[0],ve,Ve;Le&&(/^[asm]vc[1-9]$/i.test(S.codec)?(ve=Le.subarray(78),Ve=Ea(ve.subarray(4,8)),Ve==="avcC"&&ve.length>11?(S.codec+=".",S.codec+=nl(ve[9]),S.codec+=nl(ve[10]),S.codec+=nl(ve[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(ve=Le.subarray(28),Ve=Ea(ve.subarray(4,8)),Ve==="esds"&&ve.length>20&&ve[19]!==0?(S.codec+="."+nl(ve[19]),S.codec+="."+nl(ve[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var it=Gt(y,["mdia","mdhd"])[0];it&&(S.timescale=zh(it)),v.push(S)}),v},G0=function(h,m=0){var v=Gt(h,["emsg"]);return v.map(y=>{var S=Uh.parseEmsgBox(new Uint8Array(y)),A=LE(S.message_data);return{cueTime:Uh.scaleTime(S.presentation_time,S.timescale,S.presentation_time_delta,m),duration:Uh.scaleTime(S.event_duration,S.timescale),frames:A}})};var sl={findBox:Gt,parseType:Ea,timescale:V0,startTime:H0,compositionStartTime:q0,videoTrackIds:j0,tracks:W0,getTimescaleFromMediaHeader:zh,getEmsgID3:G0};const{parseTrun:BE}=$0,{findBox:X0}=sl;var K0=z0,NE=function(h){var m=X0(h,["moof","traf"]),v=X0(h,["mdat"]),y=[];return v.forEach(function(S,A){var $=m[A];y.push({mdat:S,traf:$})}),y},FE=function(h,m,v){var y=m,S=v.defaultSampleDuration||0,A=v.defaultSampleSize||0,$=v.trackId,U=[];return h.forEach(function(H){var j=BE(H),J=j.samples;J.forEach(function(de){de.duration===void 0&&(de.duration=S),de.size===void 0&&(de.size=A),de.trackId=$,de.dts=y,de.compositionTimeOffset===void 0&&(de.compositionTimeOffset=0),typeof y=="bigint"?(de.pts=y+K0.BigInt(de.compositionTimeOffset),y+=K0.BigInt(de.duration)):(de.pts=y+de.compositionTimeOffset,y+=de.duration)}),U=U.concat(J)}),U},Y0={getMdatTrafPairs:NE,parseSamples:FE},$E=os.discardEmulationPreventionBytes,UE=f0.CaptionStream,Hh=Fh,zE=$h,VE=L0,{getMdatTrafPairs:HE,parseSamples:qE}=Y0,jE=function(h,m){for(var v=h,y=0;y<m.length;y++){var S=m[y];if(v<S.size)return S;v-=S.size}return null},WE=function(h,m,v){var y=new DataView(h.buffer,h.byteOffset,h.byteLength),S={logs:[],seiNals:[]},A,$,U,H;for($=0;$+4<h.length;$+=U)if(U=y.getUint32($),$+=4,!(U<=0))switch(h[$]&31){case 6:var j=h.subarray($+1,$+1+U),J=jE($,m);if(A={nalUnitType:"sei_rbsp",size:U,data:j,escapedRBSP:$E(j),trackId:v},J)A.pts=J.pts,A.dts=J.dts,H=J;else if(H)A.pts=H.pts,A.dts=H.dts;else{S.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+$+" for trackId "+v+". See mux.js#223."});break}S.seiNals.push(A);break}return S},GE=function(h,m){var v={},y=HE(h);return y.forEach(function(S){var A=S.mdat,$=S.traf,U=Hh($,["tfhd"]),H=VE(U[0]),j=H.trackId,J=Hh($,["tfdt"]),de=J.length>0?zE(J[0]).baseMediaDecodeTime:0,Le=Hh($,["trun"]),ve,Ve;m===j&&Le.length>0&&(ve=qE(Le,de,H),Ve=WE(A,ve,j),v[j]||(v[j]={seiNals:[],logs:[]}),v[j].seiNals=v[j].seiNals.concat(Ve.seiNals),v[j].logs=v[j].logs.concat(Ve.logs))}),v},XE=function(h,m,v){var y;if(m===null)return null;y=GE(h,m);var S=y[m]||{};return{seiNals:S.seiNals,logs:S.logs,timescale:v}},KE=function(){var h=!1,m,v,y,S,A,$;this.isInitialized=function(){return h},this.init=function(U){m=new UE,h=!0,$=U?U.isPartial:!1,m.on("data",function(H){H.startTime=H.startPts/S,H.endTime=H.endPts/S,A.captions.push(H),A.captionStreams[H.stream]=!0}),m.on("log",function(H){A.logs.push(H)})},this.isNewInit=function(U,H){return U&&U.length===0||H&&typeof H=="object"&&Object.keys(H).length===0?!1:y!==U[0]||S!==H[y]},this.parse=function(U,H,j){var J;if(this.isInitialized()){if(!H||!j)return null;if(this.isNewInit(H,j))y=H[0],S=j[y];else if(y===null||!S)return v.push(U),null}else return null;for(;v.length>0;){var de=v.shift();this.parse(de,H,j)}return J=XE(U,y,S),J&&J.logs&&(A.logs=A.logs.concat(J.logs)),J===null||!J.seiNals?A.logs.length?{logs:A.logs,captions:[],captionStreams:[]}:null:(this.pushNals(J.seiNals),this.flushStream(),A)},this.pushNals=function(U){if(!this.isInitialized()||!U||U.length===0)return null;U.forEach(function(H){m.push(H)})},this.flushStream=function(){if(!this.isInitialized())return null;$?m.partialFlush():m.flush()},this.clearParsedCaptions=function(){A.captions=[],A.captionStreams={},A.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;m.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){v=[],y=null,S=null,A?this.clearParsedCaptions():A={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},YE=KE;const{parseTfdt:QE}=$0,or=Fh,{getTimescaleFromMediaHeader:ZE}=sl,{parseSamples:JE,getMdatTrafPairs:eD}=Y0;var Q0=function(){let h=9e4;this.init=function(m){const v=or(m,["moov","trak","mdia","mdhd"])[0];v&&(h=ZE(v))},this.parseSegment=function(m){const v=[],y=eD(m);let S=0;return y.forEach(function(A){const $=A.mdat,U=A.traf,H=or(U,["tfdt"])[0],j=or(U,["tfhd"])[0],J=or(U,["trun"]);if(H&&(S=QE(H).baseMediaDecodeTime),J.length&&j){const de=JE(J,S,j);let Le=0;de.forEach(function(ve){const Ve="utf-8",it=new TextDecoder(Ve),ii=$.slice(Le,Le+ve.size);if(or(ii,["vtte"])[0]){Le+=ve.size;return}or(ii,["vttc"]).forEach(function(rl){const al=or(rl,["payl"])[0],ol=or(rl,["sttg"])[0],ll=ve.pts/h,nc=(ve.pts+ve.duration)/h;let Et,ul;if(al)try{Et=it.decode(al)}catch(On){console.error(On)}if(ol)try{ul=it.decode(ol)}catch(On){console.error(On)}ve.duration&&Et&&v.push({cueText:Et,start:ll,end:nc,settings:ul})}),Le+=ve.size})}}),v}},qh=Nu,Z0=function(h){var m=h[1]&31;return m<<=8,m|=h[2],m},tc=function(h){return!!(h[1]&64)},ic=function(h){var m=0;return(h[3]&48)>>>4>1&&(m+=h[4]+1),m},tD=function(h,m){var v=Z0(h);return v===0?"pat":v===m?"pmt":m?"pes":null},iD=function(h){var m=tc(h),v=4+ic(h);return m&&(v+=h[v]+1),(h[v+10]&31)<<8|h[v+11]},nD=function(h){var m={},v=tc(h),y=4+ic(h);if(v&&(y+=h[y]+1),!!(h[y+5]&1)){var S,A,$;S=(h[y+1]&15)<<8|h[y+2],A=3+S-4,$=(h[y+10]&15)<<8|h[y+11];for(var U=12+$;U<A;){var H=y+U;m[(h[H+1]&31)<<8|h[H+2]]=h[H],U+=((h[H+3]&15)<<8|h[H+4])+5}return m}},sD=function(h,m){var v=Z0(h),y=m[v];switch(y){case qh.H264_STREAM_TYPE:return"video";case qh.ADTS_STREAM_TYPE:return"audio";case qh.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},rD=function(h){var m=tc(h);if(!m)return null;var v=4+ic(h);if(v>=h.byteLength)return null;var y=null,S;return S=h[v+7],S&192&&(y={},y.pts=(h[v+9]&14)<<27|(h[v+10]&255)<<20|(h[v+11]&254)<<12|(h[v+12]&255)<<5|(h[v+13]&254)>>>3,y.pts*=4,y.pts+=(h[v+13]&6)>>>1,y.dts=y.pts,S&64&&(y.dts=(h[v+14]&14)<<27|(h[v+15]&255)<<20|(h[v+16]&254)<<12|(h[v+17]&255)<<5|(h[v+18]&254)>>>3,y.dts*=4,y.dts+=(h[v+18]&6)>>>1)),y},jh=function(h){switch(h){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},aD=function(h){for(var m=4+ic(h),v=h.subarray(m),y=0,S=0,A=!1,$;S<v.byteLength-3;S++)if(v[S+2]===1){y=S+5;break}for(;y<v.byteLength;)switch(v[y]){case 0:if(v[y-1]!==0){y+=2;break}else if(v[y-2]!==0){y++;break}S+3!==y-2&&($=jh(v[S+3]&31),$==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0));do y++;while(v[y]!==1&&y<v.length);S=y-2,y+=3;break;case 1:if(v[y-1]!==0||v[y-2]!==0){y+=3;break}$=jh(v[S+3]&31),$==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0),S=y-2,y+=3;break;default:y+=3;break}return v=v.subarray(S),y-=S,S=0,v&&v.byteLength>3&&($=jh(v[S+3]&31),$==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0)),A},oD={parseType:tD,parsePat:iD,parsePmt:nD,parsePayloadUnitStartIndicator:tc,parsePesType:sD,parsePesTime:rD,videoPacketContainsKeyFrame:aD},J0=Nu,Da=m0.handleRollover,vt={};vt.ts=oD,vt.aac=Nh;var jr=st.ONE_SECOND_IN_TS,Oi=188,ls=71,lD=function(h,m){for(var v=0,y=Oi,S,A;y<h.byteLength;){if(h[v]===ls&&h[y]===ls){switch(S=h.subarray(v,y),A=vt.ts.parseType(S,m.pid),A){case"pat":m.pid=vt.ts.parsePat(S);break;case"pmt":var $=vt.ts.parsePmt(S);m.table=m.table||{},Object.keys($).forEach(function(U){m.table[U]=$[U]});break}v+=Oi,y+=Oi;continue}v++,y++}},ey=function(h,m,v){for(var y=0,S=Oi,A,$,U,H,j,J=!1;S<=h.byteLength;){if(h[y]===ls&&(h[S]===ls||S===h.byteLength)){switch(A=h.subarray(y,S),$=vt.ts.parseType(A,m.pid),$){case"pes":U=vt.ts.parsePesType(A,m.table),H=vt.ts.parsePayloadUnitStartIndicator(A),U==="audio"&&H&&(j=vt.ts.parsePesTime(A),j&&(j.type="audio",v.audio.push(j),J=!0));break}if(J)break;y+=Oi,S+=Oi;continue}y++,S++}for(S=h.byteLength,y=S-Oi,J=!1;y>=0;){if(h[y]===ls&&(h[S]===ls||S===h.byteLength)){switch(A=h.subarray(y,S),$=vt.ts.parseType(A,m.pid),$){case"pes":U=vt.ts.parsePesType(A,m.table),H=vt.ts.parsePayloadUnitStartIndicator(A),U==="audio"&&H&&(j=vt.ts.parsePesTime(A),j&&(j.type="audio",v.audio.push(j),J=!0));break}if(J)break;y-=Oi,S-=Oi;continue}y--,S--}},uD=function(h,m,v){for(var y=0,S=Oi,A,$,U,H,j,J,de,Le,ve=!1,Ve={data:[],size:0};S<h.byteLength;){if(h[y]===ls&&h[S]===ls){switch(A=h.subarray(y,S),$=vt.ts.parseType(A,m.pid),$){case"pes":if(U=vt.ts.parsePesType(A,m.table),H=vt.ts.parsePayloadUnitStartIndicator(A),U==="video"&&(H&&!ve&&(j=vt.ts.parsePesTime(A),j&&(j.type="video",v.video.push(j),ve=!0)),!v.firstKeyFrame)){if(H&&Ve.size!==0){for(J=new Uint8Array(Ve.size),de=0;Ve.data.length;)Le=Ve.data.shift(),J.set(Le,de),de+=Le.byteLength;if(vt.ts.videoPacketContainsKeyFrame(J)){var it=vt.ts.parsePesTime(J);it?(v.firstKeyFrame=it,v.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ve.size=0}Ve.data.push(A),Ve.size+=A.byteLength}break}if(ve&&v.firstKeyFrame)break;y+=Oi,S+=Oi;continue}y++,S++}for(S=h.byteLength,y=S-Oi,ve=!1;y>=0;){if(h[y]===ls&&h[S]===ls){switch(A=h.subarray(y,S),$=vt.ts.parseType(A,m.pid),$){case"pes":U=vt.ts.parsePesType(A,m.table),H=vt.ts.parsePayloadUnitStartIndicator(A),U==="video"&&H&&(j=vt.ts.parsePesTime(A),j&&(j.type="video",v.video.push(j),ve=!0));break}if(ve)break;y-=Oi,S-=Oi;continue}y--,S--}},cD=function(h,m){if(h.audio&&h.audio.length){var v=m;(typeof v>"u"||isNaN(v))&&(v=h.audio[0].dts),h.audio.forEach(function(A){A.dts=Da(A.dts,v),A.pts=Da(A.pts,v),A.dtsTime=A.dts/jr,A.ptsTime=A.pts/jr})}if(h.video&&h.video.length){var y=m;if((typeof y>"u"||isNaN(y))&&(y=h.video[0].dts),h.video.forEach(function(A){A.dts=Da(A.dts,y),A.pts=Da(A.pts,y),A.dtsTime=A.dts/jr,A.ptsTime=A.pts/jr}),h.firstKeyFrame){var S=h.firstKeyFrame;S.dts=Da(S.dts,y),S.pts=Da(S.pts,y),S.dtsTime=S.dts/jr,S.ptsTime=S.pts/jr}}},dD=function(h){for(var m=!1,v=0,y=null,S=null,A=0,$=0,U;h.length-$>=3;){var H=vt.aac.parseType(h,$);switch(H){case"timed-metadata":if(h.length-$<10){m=!0;break}if(A=vt.aac.parseId3TagSize(h,$),A>h.length){m=!0;break}S===null&&(U=h.subarray($,$+A),S=vt.aac.parseAacTimestamp(U)),$+=A;break;case"audio":if(h.length-$<7){m=!0;break}if(A=vt.aac.parseAdtsSize(h,$),A>h.length){m=!0;break}y===null&&(U=h.subarray($,$+A),y=vt.aac.parseSampleRate(U)),v++,$+=A;break;default:$++;break}if(m)return null}if(y===null||S===null)return null;var j=jr/y,J={audio:[{type:"audio",dts:S,pts:S},{type:"audio",dts:S+v*1024*j,pts:S+v*1024*j}]};return J},hD=function(h){var m={pid:null,table:null},v={};lD(h,m);for(var y in m.table)if(m.table.hasOwnProperty(y)){var S=m.table[y];switch(S){case J0.H264_STREAM_TYPE:v.video=[],uD(h,m,v),v.video.length===0&&delete v.video;break;case J0.ADTS_STREAM_TYPE:v.audio=[],ey(h,m,v),v.audio.length===0&&delete v.audio;break}}return v},fD=function(h,m){var v=vt.aac.isLikelyAacData(h),y;return v?y=dD(h):y=hD(h),!y||!y.audio&&!y.video?null:(cD(y,m),y)},pD={inspect:fD,parseAudioPes_:ey};const mD=function(h,m){m.on("data",function(v){const y=v.initSegment;v.initSegment={data:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength};const S=v.data;v.data=S.buffer,h.postMessage({action:"data",segment:v,byteOffset:S.byteOffset,byteLength:S.byteLength},[v.data])}),m.on("done",function(v){h.postMessage({action:"done"})}),m.on("gopInfo",function(v){h.postMessage({action:"gopInfo",gopInfo:v})}),m.on("videoSegmentTimingInfo",function(v){const y={start:{decode:st.videoTsToSeconds(v.start.dts),presentation:st.videoTsToSeconds(v.start.pts)},end:{decode:st.videoTsToSeconds(v.end.dts),presentation:st.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:st.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(y.prependedContentDuration=st.videoTsToSeconds(v.prependedContentDuration)),h.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:y})}),m.on("audioSegmentTimingInfo",function(v){const y={start:{decode:st.videoTsToSeconds(v.start.dts),presentation:st.videoTsToSeconds(v.start.pts)},end:{decode:st.videoTsToSeconds(v.end.dts),presentation:st.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:st.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(y.prependedContentDuration=st.videoTsToSeconds(v.prependedContentDuration)),h.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:y})}),m.on("id3Frame",function(v){h.postMessage({action:"id3Frame",id3Frame:v})}),m.on("caption",function(v){h.postMessage({action:"caption",caption:v})}),m.on("trackinfo",function(v){h.postMessage({action:"trackinfo",trackInfo:v})}),m.on("audioTimingInfo",function(v){h.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:st.videoTsToSeconds(v.start),end:st.videoTsToSeconds(v.end)}})}),m.on("videoTimingInfo",function(v){h.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:st.videoTsToSeconds(v.start),end:st.videoTsToSeconds(v.end)}})}),m.on("log",function(v){h.postMessage({action:"log",log:v})})};class ty{constructor(m,v){this.options=v||{},this.self=m,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new dE.Transmuxer(this.options),mD(this.self,this.transmuxer)}pushMp4Captions(m){this.captionParser||(this.captionParser=new YE,this.captionParser.init());const v=new Uint8Array(m.data,m.byteOffset,m.byteLength),y=this.captionParser.parse(v,m.trackIds,m.timescales);this.self.postMessage({action:"mp4Captions",captions:y&&y.captions||[],logs:y&&y.logs||[],data:v.buffer},[v.buffer])}initMp4WebVttParser(m){this.webVttParser||(this.webVttParser=new Q0);const v=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.webVttParser.init(v)}getMp4WebVttText(m){this.webVttParser||(this.webVttParser=new Q0);const v=new Uint8Array(m.data,m.byteOffset,m.byteLength),y=this.webVttParser.parseSegment(v);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:y||[],data:v.buffer},[v.buffer])}probeMp4StartTime({timescales:m,data:v}){const y=sl.startTime(m,v);this.self.postMessage({action:"probeMp4StartTime",startTime:y,data:v},[v.buffer])}probeMp4Tracks({data:m}){const v=sl.tracks(m);this.self.postMessage({action:"probeMp4Tracks",tracks:v,data:m},[m.buffer])}probeEmsgID3({data:m,offset:v}){const y=sl.getEmsgID3(m,v);this.self.postMessage({action:"probeEmsgID3",id3Frames:y,emsgData:m},[m.buffer])}probeTs({data:m,baseStartTime:v}){const y=typeof v=="number"&&!isNaN(v)?v*st.ONE_SECOND_IN_TS:void 0,S=pD.inspect(m,y);let A=null;S&&(A={hasVideo:S.video&&S.video.length===2||!1,hasAudio:S.audio&&S.audio.length===2||!1},A.hasVideo&&(A.videoStart=S.video[0].ptsTime),A.hasAudio&&(A.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:A,data:m},[m.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(m){const v=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.transmuxer.push(v)}reset(){this.transmuxer.reset()}setTimestampOffset(m){const v=m.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(st.secondsToVideoTs(v)))}setAudioAppendStart(m){this.transmuxer.setAudioAppendStart(Math.ceil(st.secondsToVideoTs(m.appendStart)))}setRemux(m){this.transmuxer.setRemux(m.remux)}flush(m){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(m){this.transmuxer.alignGopsWith(m.gopsToAlignWith.slice())}}self.onmessage=function(h){if(h.data.action==="init"&&h.data.options){this.messageHandlers=new ty(self,h.data.options);return}this.messageHandlers||(this.messageHandlers=new ty(self)),h.data&&h.data.action&&h.data.action!=="init"&&this.messageHandlers[h.data.action]&&this.messageHandlers[h.data.action](h.data)}}));var mH=Zw(pH);const gH=(t,e,i)=>{const{type:n,initSegment:s,captions:r,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:r,captionStreams:a,metadata:o});const c=t.data.segment.boxes||{data:t.data.segment.data},d={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),i(d)},yH=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},vH=(t,e)=>{e.gopInfo=t.data.gopInfo},tC=t=>{const{transmuxer:e,bytes:i,audioAppendStart:n,gopsToAlignWith:s,remux:r,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:f,onCaptions:p,onDone:b,onEndedTimeline:g,onTransmuxerLog:_,isEndOfTimeline:w,segment:x,triggerSegmentEventFn:C}=t,k={buffer:[]};let D=w;const R=P=>{e.currentTransmux===t&&(P.data.action==="data"&&gH(P,k,a),P.data.action==="trackinfo"&&o(P.data.trackInfo),P.data.action==="gopInfo"&&vH(P,k),P.data.action==="audioTimingInfo"&&l(P.data.audioTimingInfo),P.data.action==="videoTimingInfo"&&u(P.data.videoTimingInfo),P.data.action==="videoSegmentTimingInfo"&&c(P.data.videoSegmentTimingInfo),P.data.action==="audioSegmentTimingInfo"&&d(P.data.audioSegmentTimingInfo),P.data.action==="id3Frame"&&f([P.data.id3Frame],P.data.id3Frame.dispatchType),P.data.action==="caption"&&p(P.data.caption),P.data.action==="endedtimeline"&&(D=!1,g()),P.data.action==="log"&&_(P.data.log),P.data.type==="transmuxed"&&(D||(e.onmessage=null,yH({transmuxedData:k,callback:b}),iC(e))))},M=()=>{const P={message:"Received an error message from the transmuxer worker",metadata:{errorType:ne.Error.StreamingFailedToTransmuxSegment,segmentInfo:na({segment:x})}};b(null,P)};if(e.onmessage=R,e.onerror=M,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),i.byteLength){const P=i instanceof ArrayBuffer?i:i.buffer,E=i instanceof ArrayBuffer?0:i.byteOffset;C({type:"segmenttransmuxingstart",segment:x}),e.postMessage({action:"push",data:P,byteOffset:E,byteLength:i.byteLength},[P])}w&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},iC=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():tC(t.currentTransmux))},H_=(t,e)=>{t.postMessage({action:e}),iC(t)},nC=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,H_(e,t);return}e.transmuxQueue.push(H_.bind(null,e,t))},bH=t=>{nC("reset",t)},_H=t=>{nC("endTimeline",t)},sC=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,tC(t);return}t.transmuxer.transmuxQueue.push(t)},TH=t=>{const e=new mH;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e};var xp={reset:bH,endTimeline:_H,transmux:sC,createTransmuxer:TH};const co=function(t){const e=t.transmuxer,i=t.endAction||t.action,n=t.callback,s=Xt({},t,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===i&&(e.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,t.byteOffset||0,t.byteLength||a.data.data.byteLength),t.data&&(t.data=a.data.data)),n(a.data))};if(e.addEventListener("message",r),t.data){const a=t.data instanceof ArrayBuffer;s.byteOffset=a?0:t.data.byteOffset,s.byteLength=t.data.byteLength;const o=[a?t.data:t.data.buffer];e.postMessage(s,o)}else e.postMessage(s)},_s={FAILURE:2,TIMEOUT:-101,ABORTED:-102},rC="wvtt",Dm=t=>{t.forEach(e=>{e.abort()})},xH=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),SH=t=>{const e=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},d0=(t,e)=>{const{requestType:i}=e,n=pa({requestType:i,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:_s.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:_s.ABORTED,xhr:e,metadata:n}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:_s.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:_s.FAILURE,xhr:e,metadata:n}:null},q_=(t,e,i,n)=>(s,r)=>{const a=r.response,o=d0(s,r);if(o)return i(o,t);if(a.byteLength!==16)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:_s.FAILURE,xhr:r},t);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const c={uri:r.uri};return n({type:"segmentkeyloadcomplete",segment:t,keyInfo:c}),i(null,t)},wH=(t,e)=>{e===rC&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},CH=(t,e,i)=>{e===rC&&co({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:n,mp4VttCues:s})=>{t.bytes=n,i(null,t,{mp4VttCues:s})}})},aC=(t,e)=>{const i=Lg(t.map.bytes);if(i!=="mp4"){const n=t.map.resolvedUri||t.map.uri,s=i||"unknown";return e({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${n}`,code:_s.FAILURE,metadata:{mediaType:s}})}co({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:n,data:s})=>(t.map.bytes=s,n.forEach(function(r){t.map.tracks=t.map.tracks||{},!t.map.tracks[r.type]&&(t.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[r.id]=r.timescale),r.type==="text"&&wH(t,r.codec))}),e(null))})},EH=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:i})=>(n,s)=>{const r=d0(n,s);if(r)return e(r,t);const a=new Uint8Array(s.response);if(i({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=a,e(null,t);t.map.bytes=a,aC(t,function(o){if(o)return o.xhr=s,o.status=s.status,e(o,t);e(null,t)})},DH=({segment:t,finishProcessingFn:e,responseType:i,triggerSegmentEventFn:n})=>(s,r)=>{const a=d0(s,r);if(a)return e(a,t);n({type:"segmentloaded",segment:t});const o=i==="arraybuffer"||!r.responseText?r.response:hH(r.responseText.substring(t.lastReachedChar||0));return t.stats=xH(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),e(null,t)},kH=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{const b=t.map&&t.map.tracks||{},g=!!(b.audio&&b.video);let _=n.bind(null,t,"audio","start");const w=n.bind(null,t,"audio","end");let x=n.bind(null,t,"video","start");const C=n.bind(null,t,"video","end"),k=()=>sC({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:D=>{D.type=D.type==="combined"?"video":D.type,c(t,D)},onTrackInfo:D=>{i&&(g&&(D.isMuxed=!0),i(t,D))},onAudioTimingInfo:D=>{_&&typeof D.start<"u"&&(_(D.start),_=null),w&&typeof D.end<"u"&&w(D.end)},onVideoTimingInfo:D=>{x&&typeof D.start<"u"&&(x(D.start),x=null),C&&typeof D.end<"u"&&C(D.end)},onVideoSegmentTimingInfo:D=>{const R={pts:{start:D.start.presentation,end:D.end.presentation},dts:{start:D.start.decode,end:D.end.decode}};p({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:R}),s(D)},onAudioSegmentTimingInfo:D=>{const R={pts:{start:D.start.pts,end:D.end.pts},dts:{start:D.start.dts,end:D.end.dts}};p({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:R}),r(D)},onId3:(D,R)=>{a(t,D,R)},onCaptions:D=>{o(t,[D])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(D,R)=>{d&&(D.type=D.type==="combined"?"video":D.type,p({type:"segmenttransmuxingcomplete",segment:t}),d(R,t,D))},segment:t,triggerSegmentEventFn:p});co({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:D=>{t.bytes=e=D.data;const R=D.result;R&&(i(t,{hasAudio:R.hasAudio,hasVideo:R.hasVideo,isMuxed:g}),i=null),k()}})},oC=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let b=new Uint8Array(e);if(G9(b)){t.isFmp4=!0;const{tracks:g}=t.map;if(g.text&&(!g.audio||!g.video)){c(t,{data:b,type:"text"}),CH(t,g.text.codec,d);return}const w={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&g.audio.codec!=="enca"&&(w.audioCodec=g.audio.codec),g.video&&g.video.codec&&g.video.codec!=="encv"&&(w.videoCodec=g.video.codec),g.video&&g.audio&&(w.isMuxed=!0),i(t,w);const x=(C,k)=>{c(t,{data:b,type:w.hasAudio&&!w.isMuxed?"audio":"video"}),k&&k.length&&a(t,k),C&&C.length&&o(t,C),d(null,t,{})};co({action:"probeMp4StartTime",timescales:t.map.timescales,data:b,transmuxer:t.transmuxer,callback:({data:C,startTime:k})=>{e=C.buffer,t.bytes=b=C,w.hasAudio&&!w.isMuxed&&n(t,"audio","start",k),w.hasVideo&&n(t,"video","start",k),co({action:"probeEmsgID3",data:b,transmuxer:t.transmuxer,offset:k,callback:({emsgData:D,id3Frames:R})=>{if(e=D.buffer,t.bytes=b=D,!g.video||!D.byteLength||!t.transmuxer){x(void 0,R);return}co({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:b,timescales:t.map.timescales,trackIds:[g.video.id],callback:M=>{e=M.data.buffer,t.bytes=b=M.data,M.logs.forEach(function(P){f(yt(P,{stream:"mp4CaptionParser"}))}),x(M.captions,R)}})}})}});return}if(!t.transmuxer){d(null,t,{});return}if(typeof t.container>"u"&&(t.container=Lg(b)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),d(null,t,{});return}kH({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})},lC=function({id:t,key:e,encryptedBytes:i,decryptionWorker:n,segment:s,doneFn:r},a){const o=u=>{if(u.data.source===t){n.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=na({segment:s}),d={message:u,metadata:{error:new Error(u),errorType:ne.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};r(d,s)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(Ww({source:t,encrypted:i,key:l,iv:e.iv}),[i.buffer,l.buffer])},AH=({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{p({type:"segmentdecryptionstart"}),lC({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:d},b=>{e.bytes=b,p({type:"segmentdecryptioncomplete",segment:e}),oC({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})})},IH=({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let b=0,g=!1;return(_,w)=>{if(!g){if(_)return g=!0,Dm(t),d(_,w);if(b+=1,b===t.length){const x=function(){if(w.encryptedBytes)return AH({decryptionWorker:e,segment:w,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p});oC({segment:w,bytes:w.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:p})};if(w.endOfAllRequests=Date.now(),w.map&&w.map.encryptedBytes&&!w.map.bytes)return p({type:"segmentdecryptionstart",segment:w}),lC({decryptionWorker:e,id:w.requestId+"-init",encryptedBytes:w.map.encryptedBytes,key:w.map.key,segment:w,doneFn:d},C=>{w.map.bytes=C,p({type:"segmentdecryptioncomplete",segment:w}),aC(w,k=>{if(k)return Dm(t),d(k,w);x()})});x()}}}},PH=({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},OH=({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>d=>{if(!d.target.aborted)return t.stats=yt(t.stats,SH(d)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(d,t)},RH=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:n,abortFn:s,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:p,dataFn:b,doneFn:g,onTransmuxerLog:_,triggerSegmentEventFn:w})=>{const x=[],C=IH({activeXhrs:x,decryptionWorker:i,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:p,dataFn:b,doneFn:g,onTransmuxerLog:_,triggerSegmentEventFn:w});if(n.key&&!n.key.bytes){const P=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&P.push(n.map.key);const E=yt(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),I=q_(n,P,C,w),O={uri:n.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:O});const L=t(E,I);x.push(L)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const L=yt(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),F=q_(n,[n.map.key],C,w),X={uri:n.map.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:X});const ee=t(L,F);x.push(ee)}const E=yt(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:Cm(n.map),requestType:"segment-media-initialization"}),I=EH({segment:n,finishProcessingFn:C,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const O=t(E,I);x.push(O)}const k=yt(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:Cm(n),requestType:"segment"}),D=DH({segment:n,finishProcessingFn:C,responseType:k.responseType,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const R=t(k,D);R.addEventListener("progress",OH({segment:n,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:p,dataFn:b})),x.push(R);const M={};return x.forEach(P=>{P.addEventListener("loadend",PH({loadendState:M,abortFn:s}))}),()=>Dm(x)},Mc=wn("PlaylistSelector"),j_=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},ho=function(t,e){if(!t)return"";const i=q.getComputedStyle(t);return i?i[e]:""},fo=function(t,e){const i=t.slice();t.sort(function(n,s){const r=e(n,s);return r===0?i.indexOf(n)-i.indexOf(s):r})},h0=function(t,e){let i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||q.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||q.Number.MAX_VALUE,i-n},MH=function(t,e){let i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||q.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||q.Number.MAX_VALUE,i===n&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n};let uC=function(t){const{main:e,bandwidth:i,playerWidth:n,playerHeight:s,playerObjectFit:r,limitRenditionByPlayerDimensions:a,playlistController:o}=t;if(!e)return;const l={bandwidth:i,width:n,height:s,limitRenditionByPlayerDimensions:a};let u=e.playlists;Gi.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(M=>{let P;const E=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,I=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;return P=M.attributes&&M.attributes.BANDWIDTH,P=P||q.Number.MAX_VALUE,{bandwidth:P,width:E,height:I,playlist:M}});fo(c,(M,P)=>M.bandwidth-P.bandwidth),c=c.filter(M=>!Gi.isIncompatible(M.playlist));let d=c.filter(M=>Gi.isEnabled(M.playlist));d.length||(d=c.filter(M=>!Gi.isDisabled(M.playlist)));const f=d.filter(M=>M.bandwidth*ni.BANDWIDTH_VARIANCE<i);let p=f[f.length-1];const b=f.filter(M=>M.bandwidth===p.bandwidth)[0];if(a===!1){const M=b||d[0]||c[0];if(M&&M.playlist){let P="sortedPlaylistReps";return b&&(P="bandwidthBestRep"),d[0]&&(P="enabledPlaylistReps"),Mc(`choosing ${j_(M)} using ${P} with options`,l),M.playlist}return Mc("could not choose a playlist with options",l),null}const g=f.filter(M=>M.width&&M.height);fo(g,(M,P)=>M.width-P.width);const _=g.filter(M=>M.width===n&&M.height===s);p=_[_.length-1];const w=_.filter(M=>M.bandwidth===p.bandwidth)[0];let x,C,k;w||(x=g.filter(M=>r==="cover"?M.width>n&&M.height>s:M.width>n||M.height>s),C=x.filter(M=>M.width===x[0].width&&M.height===x[0].height),p=C[C.length-1],k=C.filter(M=>M.bandwidth===p.bandwidth)[0]);let D;if(o.leastPixelDiffSelector){const M=g.map(P=>(P.pixelDiff=Math.abs(P.width-n)+Math.abs(P.height-s),P));fo(M,(P,E)=>P.pixelDiff===E.pixelDiff?E.bandwidth-P.bandwidth:P.pixelDiff-E.pixelDiff),D=M[0]}const R=D||k||w||b||d[0]||c[0];if(R&&R.playlist){let M="sortedPlaylistReps";return D?M="leastPixelDiffRep":k?M="resolutionPlusOneRep":w?M="resolutionBestRep":b?M="bandwidthBestRep":d[0]&&(M="enabledPlaylistReps"),Mc(`choosing ${j_(R)} using ${M} with options`,l),R.playlist}return Mc("could not choose a playlist with options",l),null};const W_=function(){let t=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),uC({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(ho(this.tech_.el(),"width"),10)*t,playerHeight:parseInt(ho(this.tech_.el(),"height"),10)*t,playerObjectFit:this.usePlayerObjectFit?ho(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},LH=function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),uC({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(ho(this.tech_.el(),"width"),10)*n,playerHeight:parseInt(ho(this.tech_.el(),"height"),10)*n,playerObjectFit:this.usePlayerObjectFit?ho(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},BH=function(t){const{main:e,currentTime:i,bandwidth:n,duration:s,segmentDuration:r,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=t,u=e.playlists.filter(b=>!Gi.isIncompatible(b));let c=u.filter(Gi.isEnabled);c.length||(c=u.filter(b=>!Gi.isDisabled(b)));const f=c.filter(Gi.hasAttribute.bind(null,"BANDWIDTH")).map(b=>{const _=l.getSyncPoint(b,s,o,i)?1:2,x=Gi.estimateSegmentRequestTime(r,n,b)*_-a;return{playlist:b,rebufferingImpact:x}}),p=f.filter(b=>b.rebufferingImpact<=0);return fo(p,(b,g)=>h0(g.playlist,b.playlist)),p.length?p[0]:(fo(f,(b,g)=>b.rebufferingImpact-g.rebufferingImpact),f[0]||null)},NH=function(){const t=this.playlists.main.playlists.filter(Gi.isEnabled);return fo(t,(i,n)=>h0(i,n)),t.filter(i=>!!Ql(this.playlists.main,i).video)[0]||null},FH=t=>{let e=0,i;return t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach(n=>{i.set(n,e),e+=n.byteLength})),i};function cC(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const $H=function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);const s=e.textTracks().getTrackById(n);if(s)t[i]=s;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=i,o=i,l=!1;const u=r[n];u&&(a=u.label,o=u.language,l=u.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},UH=function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const n=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{const r=s.stream;s.content?s.content.forEach(a=>{const o=new n(s.startTime+i,s.endTime+i,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",t[r].addCue(o)}):t[r].addCue(new n(s.startTime+i,s.endTime+i,s.text))})},zH=function(t){Object.defineProperties(t.frame,{id:{get(){return ne.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return ne.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return ne.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},VH=({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:n})=>{if(!e)return;const s=q.WebKitDataCue||q.VTTCue,r=t.metadataTrack_;if(!r||(e.forEach(c=>{const d=c.cueTime+i;typeof d!="number"||q.isNaN(d)||d<0||!(d<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const p=new s(d,d,f.value||f.url||f.data||"");p.frame=f,p.value=f,zH(p),r.addCue(p)})}),!r.cues||!r.cues.length))return;const a=r.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,d)=>{const f=c[d.startTime]||[];return f.push(d),c[d.startTime]=f,c},{}),u=Object.keys(l).sort((c,d)=>Number(c)-Number(d));u.forEach((c,d)=>{const f=l[c],p=isFinite(n)?n:c,b=Number(u[d+1])||p;f.forEach(g=>{g.endTime=b})})},HH={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},qH=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),jH=({inbandTextTracks:t,dateRanges:e})=>{const i=t.metadataTrack_;if(!i)return;const n=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{for(const r of Object.keys(s)){if(qH.has(r))continue;const a=new n(s.startTime,s.endTime,"");a.id=s.id,a.type="com.apple.quicktime.HLS",a.value={key:HH[r],data:s[r]},(r==="scte35Out"||r==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),i.addCue(a)}s.processDateRange()})},G_=(t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ne.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},Al=function(t,e,i){let n,s;if(i&&i.cues)for(n=i.cues.length;n--;)s=i.cues[n],s.startTime>=t&&s.endTime<=e&&i.removeCue(s)},WH=function(t){const e=t.cues;if(!e)return;const i={};for(let n=e.length-1;n>=0;n--){const s=e[n],r=`${s.startTime}-${s.endTime}-${s.text}`;i[r]?t.removeCue(s):i[r]=s}},GH=(t,e,i)=>{if(typeof e>"u"||e===null||!t.length)return[];const n=Math.ceil((e-i+3)*ra.ONE_SECOND_IN_TS);let s;for(s=0;s<t.length&&!(t[s].pts>n);s++);return t.slice(s)},XH=(t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const n=e[0].pts;let s=0;for(s;s<t.length&&!(t[s].pts>=n);s++);return t.slice(0,s).concat(e)},KH=(t,e,i,n)=>{const s=Math.ceil((e-n)*ra.ONE_SECOND_IN_TS),r=Math.ceil((i-n)*ra.ONE_SECOND_IN_TS),a=t.slice();let o=t.length;for(;o--&&!(t[o].pts<=r););if(o===-1)return a;let l=o+1;for(;l--&&!(t[l].pts<=s););return l=Math.max(l,0),a.splice(l,o-l+1),a},YH=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(let s=0;s<i.length;s++){const r=i[s];if(r!==n[s]||t[r]!==e[r])return!1}return!0},QH=function(t,e,i){e=e||[];const n=[];let s=0;for(let r=0;r<e.length;r++){const a=e[r];if(t===a.timeline&&(n.push(r),s+=a.duration,s>i))return r}return n.length===0?0:n[n.length-1]},Cl=1,ZH=500,X_=t=>typeof t=="number"&&isFinite(t),Lc=1/60,JH=(t,e,i)=>t!=="main"||!e||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,eq=(t,e,i)=>{let n=e-ni.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));const s=e-i;return Math.min(s,n)},qa=t=>{const{startOfSegment:e,duration:i,segment:n,part:s,playlist:{mediaSequence:r,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=t,d=o.length-1;let f="mediaIndex/partIndex increment";t.getMediaInfoForTime?f=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(f+=` with independent ${t.independent}`);const p=typeof u=="number",b=t.segment.uri?"segment":"pre-segment",g=p?kw({preloadSegment:n})-1:0;return`${b} [${r+l}/${r+d}]`+(p?` part [${u}/${g}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(p?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${i}] timeline [${c}] selected by [${f}] playlist [${a}]`},K_=t=>`${t}TimingInfo`,tq=({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:n,overrideCheck:s})=>!s&&t===e?null:t<e?i:n.length?n.end(n.length-1):i,km=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:n,audioDisabled:s})=>{if(e===i)return!1;if(n==="audio"){const r=t.lastTimelineChange({type:"main"});return!r||r.to!==i}if(n==="main"&&s){const r=t.pendingTimelineChange({type:"audio"});return!(r&&r.to===i)}return!1},iq=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),i=t.pendingTimelineChange({type:"main"}),n=e&&i,s=n&&e.to!==i.to;return!!(n&&e.from!==-1&&i.from!==-1&&s)},nq=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),i=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&i&&e.to<i.to},vr=t=>{const e=t.pendingSegment_;if(!e)return;if(km({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&iq(t.timelineChangeController_)){if(nq(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}t.timelineChangeController_.trigger("fixBadTimelineChange")}},sq=t=>{let e=0;return["video","audio"].forEach(function(i){const n=t[`${i}TimingInfo`];if(!n)return;const{start:s,end:r}=n;let a;typeof s=="bigint"||typeof r=="bigint"?a=q.BigInt(r)-q.BigInt(s):typeof s=="number"&&typeof r=="number"&&(a=r-s),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},Y_=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+vs:!1,rq=(t,e)=>{if(e!=="hls")return null;const i=sq({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const n=t.playlist.targetDuration,s=Y_({segmentDuration:i,maxDuration:n*2}),r=Y_({segmentDuration:i,maxDuration:n}),a=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:a}:null},na=({type:t,segment:e})=>{if(!e)return;const i=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),s=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:s,duration:e.duration,isEncrypted:i,isMediaInitialization:n}};class Am extends ne.EventTarget{constructor(e,i={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=wn(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():vr(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(Xt({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():vr(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(Xt({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():vr(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():vr(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return xp.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,q.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&xp.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return li();if(this.loaderType_==="main"){const{hasAudio:i,hasVideo:n,isMuxed:s}=e;if(n&&i&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,i=!1){if(!e)return null;const n=Ad(e);let s=this.initSegments_[n];return i&&!s&&e.bytes&&(this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,i=!1){if(!e)return null;const n=Gw(e);let s=this.keyCache_[n];this.cacheEncryptionKeys_&&i&&!s&&e.bytes&&(this.keyCache_[n]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(s||e).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,i={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${_p(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}s&&(s.mediaIndex-=a,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&xp.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,i,n=()=>{},s=!1){if(i===1/0&&(i=this.duration_()),i<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const a=()=>{r--,r===0&&n()};(s||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,i,a)),(s||this.loaderType_==="main")&&(this.gopBuffer_=KH(this.gopBuffer_,e,i,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,i,a));for(const o in this.inbandTextTracks_)Al(e,i,this.inbandTextTracks_[o]);Al(e,i,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),ZH)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const i={segmentInfo:na({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:i}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,i=this.playlist_,n=this.partIndex){if(!i||!this.mediaSource_)return!1;const s=typeof e=="number"&&i.segments[e],r=e+1===i.segments.length,a=!s||!s.parts||n+1===s.parts.length;return i.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){const e=this.buffered_(),i=_p(e)||0,n=o0(e,this.currentTime_()),s=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=QH(this.currentTimeline_,a,i),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:i,f.parts&&f.parts[p+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=p+1):o.mediaIndex=this.mediaIndex+1}else{let f,p,b;const g=this.fetchAtBuffer_?i:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${g}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${i}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const _=this.getSyncInfoFromMediaSequenceSync_(g);if(!_){const w="No sync info found while using media sequence sync";return this.error({message:w,metadata:{errorType:ne.Error.StreamingFailedToSelectNextSegment,error:new Error(w)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${_.start} --> ${_.end})`),f=_.segmentIndex,p=_.partIndex,b=_.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const _=Gi.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:g,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=_.segmentIndex,p=_.partIndex,b=_.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${g}`:`currentTime ${g}`,o.mediaIndex=f,o.startOfSegment=b,o.partIndex=p,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],p=f.parts&&f.parts.length&&f.parts[f.parts.length-1];p&&p.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const i=Math.max(e,this.mediaSequenceSync_.start);e!==i&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${i}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(i);if(!n)return null;if(!n.isAppended)return n;const s=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(e){const{independent:i,playlist:n,mediaIndex:s,startOfSegment:r,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[s],d=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||c.resolvedUri,mediaIndex:s,partIndex:d?o:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:d&&d.duration||c.duration,segment:c,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:i},p=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:p});const b=_p(this.sourceUpdater_.audioBuffered());return typeof b=="number"&&(f.audioAppendStart=b-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=GH(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return tq(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),n=e.bandwidth,s=this.pendingSegment_.duration,r=Gi.estimateSegmentRequestTime(s,n,this.playlist_,e.bytesReceived),a=SV(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;const o=BH({main:this.vhs_.playlists.main,currentTime:i,bandwidth:n,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=r-a-o.rebufferingImpact;let c=.5;a<=vs&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*ni.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${qa(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(e,i){const{hasAudio:n,hasVideo:s}=i,r={segmentInfo:na({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(i=i||{},YH(this.currentMediaInfo_,i)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()?this.processCallQueue_():vr(this))))}handleTimingInfo_(e,i,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,a=K_(i);r[a]=r[a]||{},r[a][n]=s,this.logger_(`timinginfo: ${i} - ${n} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():vr(this)}handleCaptions_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};i.forEach(a=>{r[a.stream]=r[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=r[a.stream];o.startTime=Math.min(o.startTime,a.startTime+s),o.endTime=Math.max(o.endTime,a.endTime+s),o.captions.push(a)}),Object.keys(r).forEach(a=>{const{startTime:o,endTime:l,captions:u}=r[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),$H(c,this.vhs_.tech_,a),Al(o,l,c[a]),UH({captionArray:u,inbandTextTracks:c,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,n));return}this.addMetadataToTextTrack(n,i,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(i=>i())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(i=>i())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!km({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!e||!i)return!1;const{hasAudio:n,hasVideo:s,isMuxed:r}=i;return!(s&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||km({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){vr(this),this.callQueue_.push(this.handleData_.bind(this,e,i));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[K_(i.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let a;r&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,i.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,i)}}updateAppendInitSegmentStatus(e,i){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:i,map:n,playlist:s}){if(n){const r=Ad(n);if(this.activeInitSegmentId_===r)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=r}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n},s){const r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+aa(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+aa(a).join(", "));const o=r.length?r.start(0):0,l=r.length?r.end(r.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Cl&&c-u<=Cl){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${aa(r).join(", ")}, video buffer: ${aa(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:i,bytes:n}));const f=this.currentTime_()-Cl;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Cl}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=q.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Cl*1e3)},!0)}handleAppendError_({segmentInfo:e,type:i,bytes:n},s){if(s){if(s.code===$w){this.handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${i} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:ne.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:n,data:s,bytes:r}){if(!r){const o=[s];let l=s.byteLength;n&&(o.unshift(n),l+=n.byteLength),r=FH({bytes:l,segments:o})}const a={segmentInfo:na({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:i,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:i,bytes:r}))}handleSegmentTimingInfo_(e,i,n){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${e}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,s[r].transmuxedPresentationStart=n.start.presentation,s[r].transmuxedDecodeStart=n.start.decode,s[r].transmuxedPresentationEnd=n.end.presentation,s[r].transmuxedDecodeEnd=n.end.decode,s[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,i){const{type:n,data:s}=i;if(!s||!s.byteLength||n==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){vr(this),this.loadQueue_.push(()=>{const i=Xt({},e,{forceTimestampOffset:!0});Xt(e,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||s&&r;this.logger_(`Requesting
${cC(e.uri)}
${qa(e)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=RH({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${qa(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:d})=>{const p={segmentInfo:na({segment:l})};u&&(p.keyInfo=u),c&&(p.trackInfo=c),d&&(p.timingInfo=d),this.trigger({type:o,metadata:p})}})}trimBackBuffer_(e){const i=eq(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(e){const i=e.segment,n=e.part,s=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:i.resolvedUri,byterange:n?n.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:s,isMediaInitialization:r},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===i.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),i.key){const l=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(i.key),a.key.iv=l}return i.map&&(a.map=this.initSegmentForMap(i.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,i){if(this.pendingSegment_.byteLength=i.bytesReceived,e<Lc){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Lc}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:i.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,i,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,n));return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===_s.ABORTED)return;if(this.pause(),e.code===_s.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,i.stats),s.endOfAllRequests=i.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=XH(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const i=this.syncController_.mappingForTimeline(e);i!==null&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:i,mediaIndex:n,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=i.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==s+r?s:o.start}waitForAppendsToComplete_(e){const i=this.getCurrentMediaInfo_(e);if(!i){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:s,isMuxed:r}=i,a=this.loaderType_==="main"&&s,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const i=JH(this.loaderType_,this.getCurrentMediaInfo_(),e);return i?(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:i,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const i=this.getMediaInfo_(),s=this.loaderType_==="main"&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:na({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=rq(e,this.sourceType_);if(i&&(i.severity==="warn"?ne.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${qa(e)}`);return}this.logger_(`Appended ${qa(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,s=e.part,r=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(r||a){this.logger_(`bad ${r?"segment":"part"} ${qa(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Lc){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Lc}`);return}const i=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(s-i)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const i=e.segment,n=i.start,s=i.end;if(!X_(n)||!X_(s))return;Al(n,s,this.segmentMetadataTrack_);const r=q.WebKitDataCue||q.VTTCue,a={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,programDateTime:i.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:s},o=JSON.stringify(a),l=new r(n,s,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function js(){}const dC=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},aq=["video","audio"],Im=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},oq=(t,e)=>{for(let i=0;i<e.length;i++){const n=e[i];if(n.type==="mediaSource")return null;if(n.type===t)return i}return null},po=(t,e)=>{if(e.queue.length===0)return;let i=0,n=e.queue[i];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),po("audio",e),po("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Im(t,e))){if(n.type!==t){if(i=oq(t,e.queue),i===null)return;n=e.queue[i]}if(e.queue.splice(i,1),e.queuePending[t]=n,n.action(t,e),!n.doneFn){e.queuePending[t]=null,po(t,e);return}}},hC=(t,e)=>{const i=e[`${t}Buffer`],n=dC(t);i&&(i.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),i.removeEventListener("error",e[`on${n}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},gs=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,Zi={appendBuffer:(t,e,i)=>(n,s)=>{const r=s[`${n}Buffer`];if(gs(s.mediaSource,r)){s.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${n}Buffer`);try{r.appendBuffer(t)}catch(a){s.logger_(`Error with code ${a.code} `+(a.code===$w?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),s.queuePending[n]=null,i(a)}}},remove:(t,e)=>(i,n)=>{const s=n[`${i}Buffer`];if(gs(n.mediaSource,s)){n.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{s.remove(t,e)}catch{n.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},timestampOffset:t=>(e,i)=>{const n=i[`${e}Buffer`];gs(i.mediaSource,n)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),n.timestampOffset=t)},callback:t=>(e,i)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(i){ne.log.warn("Failed to call media source endOfStream",i)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(i){ne.log.warn("Failed to set media source duration",i)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const i=e[`${t}Buffer`];if(gs(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(n){ne.log.warn(`Failed to abort on ${t}Buffer`,n)}}},addSourceBuffer:(t,e)=>i=>{const n=dC(t),s=So(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const r=i.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",i[`on${n}UpdateEnd_`]),r.addEventListener("error",i[`on${n}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=r},removeSourceBuffer:t=>e=>{const i=e[`${t}Buffer`];if(hC(t,e),!!gs(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(n){ne.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,n)}}},changeType:t=>(e,i)=>{const n=i[`${e}Buffer`],s=So(t);if(!gs(i.mediaSource,n))return;const r=t.substring(0,t.indexOf(".")),a=i.codecs[e];if(a.substring(0,a.indexOf("."))===r)return;const l={codecsChangeInfo:{from:a,to:t}};i.trigger({type:"codecschange",metadata:l}),i.logger_(`changing ${e}Buffer codec from ${a} to ${t}`);try{n.changeType(s),i.codecs[e]=t}catch(u){l.errorType=ne.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,i.error_=u,i.trigger("error"),ne.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Ji=({type:t,sourceUpdater:e,action:i,doneFn:n,name:s})=>{e.queue.push({type:t,action:i,doneFn:n,name:s}),po(t,e)},Q_=(t,e)=>i=>{const n=e[`${t}Buffered`](),s=_V(n);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,s),e.queuePending[t]){const r=e.queuePending[t].doneFn;e.queuePending[t]=null,r&&r(e[`${t}Error_`])}po(t,e)};class fC extends ne.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>po("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=wn("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Q_("video",this),this.onAudioUpdateEnd_=Q_("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,i){Ji({type:"mediaSource",sourceUpdater:this,action:Zi.addSourceBuffer(e,i),name:"addSourceBuffer"})}abort(e){Ji({type:e,sourceUpdater:this,action:Zi.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){ne.log.error("removeSourceBuffer is not supported!");return}Ji({type:"mediaSource",sourceUpdater:this,action:Zi.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!ne.browser.IS_FIREFOX&&q.MediaSource&&q.MediaSource.prototype&&typeof q.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return q.SourceBuffer&&q.SourceBuffer.prototype&&typeof q.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,i){if(!this.canChangeType()){ne.log.error("changeType is not supported!");return}Ji({type:e,sourceUpdater:this,action:Zi.changeType(i),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(i=>{const n=e[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,n);this.canChangeType()&&this.changeType(i,n)})}appendBuffer(e,i){const{segmentInfo:n,type:s,bytes:r}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,i]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const a=i;if(Ji({type:s,sourceUpdater:this,action:Zi.appendBuffer(r,n||{mediaIndex:-1},a),doneFn:i,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return gs(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:li()}videoBuffered(){return gs(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:li()}buffered(){const e=gs(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=gs(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():xV(this.audioBuffered(),this.videoBuffered())}setDuration(e,i=js){Ji({type:"mediaSource",sourceUpdater:this,action:Zi.duration(e),name:"duration",doneFn:i})}endOfStream(e=null,i=js){typeof e!="string"&&(e=void 0),Ji({type:"mediaSource",sourceUpdater:this,action:Zi.endOfStream(e),name:"endOfStream",doneFn:i})}removeAudio(e,i,n=js){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}Ji({type:"audio",sourceUpdater:this,action:Zi.remove(e,i),doneFn:n,name:"remove"})}removeVideo(e,i,n=js){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}Ji({type:"video",sourceUpdater:this,action:Zi.remove(e,i),doneFn:n,name:"remove"})}updating(){return!!(Im("audio",this)||Im("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Ji({type:"audio",sourceUpdater:this,action:Zi.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Ji({type:"video",sourceUpdater:this,action:Zi.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Ji({type:"audio",sourceUpdater:this,action:Zi.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Ji({type:"video",sourceUpdater:this,action:Zi.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),aq.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>hC(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Z_=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),lq=t=>{const e=new Uint8Array(t);return Array.from(e).map(i=>i.toString(16).padStart(2,"0")).join("")},J_=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class uq extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class cq extends Am{constructor(e,i={}){super(e,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return li();const e=this.subtitlesTrack_.cues,i=e[0].startTime,n=e[e.length-1].startTime;return li([[i,n]])}initSegmentForMap(e,i=!1){if(!e)return null;const n=Ad(e);let s=this.initSegments_[n];if(i&&!s&&e.bytes){const r=J_.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(J_,e.bytes.byteLength),this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,i){Al(e,i,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const i=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",i),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,i,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===_s.TIMEOUT&&this.handleTimeout_(),e.code===_s.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_,r=n.mp4VttCues&&n.mp4VttCues.length;r&&(s.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const a=s.segment;if(a.map&&(a.map.bytes=i.map.bytes),s.bytes=i.bytes,typeof q.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,i,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(s)}catch(o){this.stopForError({message:o.message,metadata:{errorType:ne.Error.StreamingVttParserError,error:o}});return}if(r||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,s.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new q.VTTCue(o.startTime,o.endTime,o.text):o)}),WH(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,i){const n=e&&e.type==="vtt",s=i&&i.type==="text";n&&s&&super.handleData_(e,i)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const s=n.start+i,r=n.end+i,a=new q.VTTCue(s,r,n.cueText);n.settings&&n.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let i,n=!1;if(typeof q.WebVTT!="function")throw new uq;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof q.TextDecoder=="function"?i=new q.TextDecoder("utf8"):(i=q.WebVTT.StringDecoder(),n=!0);const s=new q.WebVTT.Parser(q,q.vttjs,i);if(s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=a=>{e.timestampmap=a},s.onparsingerror=a=>{ne.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=Z_(a)),s.parse(a)}let r=e.bytes;n&&(r=Z_(r)),s.parse(r),s.flush()}updateTimeMapping_(e,i,n){const s=e.segment;if(!i)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:r,LOCAL:a}=e.timestampmap,l=r/ra.ONE_SECOND_IN_TS-a+i.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,i.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-s.duration)}}}handleRollover_(e,i){if(i===null)return e;let n=e*ra.ONE_SECOND_IN_TS;const s=i*ra.ONE_SECOND_IN_TS;let r;for(s<n?r=-8589934592:r=8589934592;Math.abs(n-s)>4294967296;)n+=r;return n/ra.ONE_SECOND_IN_TS}}const dq=function(t,e){const i=t.cues;for(let n=0;n<i.length;n++){const s=i[n];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},hq=function(t,e,i=0){if(!t.segments)return;let n=i,s;for(let r=0;r<t.segments.length;r++){const a=t.segments[r];if(s||(s=dq(e,n+a.duration/2)),s){if("cueIn"in a){s.endTime=n,s.adEndTime=n,n+=a.duration,s=null;continue}if(n<s.endTime){n+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&(s=new q.VTTCue(n,n+a.duration,a.cueOut),s.adStartTime=n,s.adEndTime=n+parseFloat(a.cueOut),e.addCue(s)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);s=new q.VTTCue(n,n+a.duration,""),s.adStartTime=n-o,s.adEndTime=s.adStartTime+l,e.addCue(s)}n+=a.duration}};class eT{constructor({start:e,end:i,segmentIndex:n,partIndex:s=null,appended:r=!1}){this.start_=e,this.end_=i,this.segmentIndex_=n,this.partIndex_=s,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class fq{constructor(e,i=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=i}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class pC{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,i){const{mediaSequence:n,segments:s}=e;if(this.isReliable_=this.isReliablePlaylist_(n,s),!!this.isReliable_)return this.updateStorage_(s,n,this.calculateBaseTime_(n,s,i))}getSyncInfoForTime(e){for(const{segmentSyncInfo:i,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const s of n)if(s.isInRange(e))return s}else if(i.isInRange(e))return i;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,i,n){const s=new Map;let r=`
`,a=n,o=i;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),d=a,f=d+l.duration,p=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),b=new eT({start:d,end:f,appended:p,segmentIndex:u});l.syncInfo=b;let g=a;const _=(l.parts||[]).map((w,x)=>{const C=g,k=g+w.duration,D=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[x]&&c.partsSyncInfo[x].isAppended),R=new eT({start:C,end:k,appended:D,segmentIndex:u,partIndex:x});return g=k,r+=`Media Sequence: ${o}.${x} | Range: ${C} --> ${k} | Appended: ${D}
`,w.syncInfo=R,R});s.set(o,new fq(b,_)),r+=`${cC(l.resolvedUri)} | Media Sequence: ${o} | Range: ${d} --> ${f} | Appended: ${p}
`,o++,a=f}),this.end_=a,this.storage_=s,this.diagnostics_=r}calculateBaseTime_(e,i,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(e<s){const r=s-e;let a=this.storage_.get(s).segmentSyncInfo.start;for(let o=0;o<r;o++){const l=i[o];a-=l.duration}return a}return n}isReliablePlaylist_(e,i){return e!=null&&Array.isArray(i)&&i.length}}class tT extends pC{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,i,n){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,i,n)}}const pq=86400,Sp=[{name:"VOD",run:(t,e,i,n,s)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,i,n,s,r)=>{const a=t.getMediaSequenceSync(r);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(s);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,i,n,s)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let r=null,a=null;const o=_m(e);s=s||0;for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],d=c.segment,f=t.timelineToDatetimeMappings[d.timeline];if(!f||!d.dateTimeObject)continue;let b=d.dateTimeObject.getTime()/1e3+f;if(d.parts&&typeof c.partIndex=="number")for(let _=0;_<c.partIndex;_++)b+=d.parts[_].duration;const g=Math.abs(s-b);if(a!==null&&(g===0||a<g))break;a=g,r={time:b,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return r}},{name:"Segment",run:(t,e,i,n,s)=>{let r=null,a=null;s=s||0;const o=_m(e);for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],d=c.segment,f=c.part&&c.part.start||d&&d.start;if(d.timeline===n&&typeof f<"u"){const p=Math.abs(s-f);if(a!==null&&a<p)break;(!r||a===null||a>=p)&&(a=p,r={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return r}},{name:"Discontinuity",run:(t,e,i,n,s)=>{let r=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=t.discontinuities[u];if(c){const d=Math.abs(s-c.time);if(a!==null&&a<d)break;(!r||a===null||a>=d)&&(a=d,r={time:c.time,segmentIndex:l,partIndex:null})}}}return r}},{name:"Playlist",run:(t,e,i,n,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class mq extends ne.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const i=new pC,n=new tT(i),s=new tT(i);this.mediaSequenceStorage_={main:i,audio:n,vtt:s},this.logger_=wn("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,i,n,s,r){if(i!==1/0)return Sp.find(({name:l})=>l==="VOD").run(this,e,i);const a=this.runStrategies_(e,i,n,s,r);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:d}=l;if(c<0)continue;const f=e.segments[c],p=d,b=p+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${s}. selected segment: ${c}. Time: [${p} -> ${b}]}`),s>=p&&s<b)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:s})}getExpiredTime(e,i){if(!e||!e.segments)return null;const n=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!n.length)return null;const s=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+Yl({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,i,n,s,r){const a=[];for(let o=0;o<Sp.length;o++){const l=Sp[o],u=l.run(this,e,i,n,s,r);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,i){let n=e[0].syncPoint,s=Math.abs(e[0].syncPoint[i.key]-i.value),r=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[i.key]-i.value);o<s&&(s=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,i){const n=i.mediaSequence-e.mediaSequence;if(n>pq){ne.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let s=n-1;s>=0;s--){const r=e.segments[s];if(r&&typeof r.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const i=e.segments[0],n=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:i}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),s=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&i&&r&&(this.timelineToDatetimeMappings[s.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,i,n){const s=e.segment,r=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-i.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=i.end+a.mapping;else if(a)o=i.start+a.mapping,l=i.end+a.mapping;else return!1;return r&&(r.start=o,r.end=l),(!s.start||o<s.start)&&(s.start=o),s.end=l,!0}saveDiscontinuitySyncInfo_(e){const i=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let s=0;s<i.discontinuityStarts.length;s++){const r=i.discontinuityStarts[s],a=i.discontinuitySequence+s+1,o=r-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-Yl({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:r}):u=n.end+Yl({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class gq extends ne.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:i,to:n}){return typeof i=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:i,to:n}){if(typeof i=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:i,to:n},delete this.pendingTimelineChanges_[e];const s={timelineChangeInfo:{from:i,to:n}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const yq=Jw(eC(function(){var t=function(){function g(){this.listeners={}}var _=g.prototype;return _.on=function(x,C){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(C)},_.off=function(x,C){if(!this.listeners[x])return!1;var k=this.listeners[x].indexOf(C);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(k,1),k>-1},_.trigger=function(x){var C=this.listeners[x];if(C)if(arguments.length===2)for(var k=C.length,D=0;D<k;++D)C[D].call(this,arguments[1]);else for(var R=Array.prototype.slice.call(arguments,1),M=C.length,P=0;P<M;++P)C[P].apply(this,R)},_.dispose=function(){this.listeners={}},_.pipe=function(x){this.on("data",function(C){x.push(C)})},g}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(g){return g.subarray(0,g.byteLength-g[g.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const i=function(){const g=[[[],[],[],[],[]],[[],[],[],[],[]]],_=g[0],w=g[1],x=_[4],C=w[4];let k,D,R;const M=[],P=[];let E,I,O,L,F,X;for(k=0;k<256;k++)P[(M[k]=k<<1^(k>>7)*283)^k]=k;for(D=R=0;!x[D];D^=E||1,R=P[R]||1)for(L=R^R<<1^R<<2^R<<3^R<<4,L=L>>8^L&255^99,x[D]=L,C[L]=D,O=M[I=M[E=M[D]]],X=O*16843009^I*65537^E*257^D*16843008,F=M[L]*257^L*16843008,k=0;k<4;k++)_[k][D]=F=F<<24^F>>>8,w[k][L]=X=X<<24^X>>>8;for(k=0;k<5;k++)_[k]=_[k].slice(0),w[k]=w[k].slice(0);return g};let n=null;class s{constructor(_){n||(n=i()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let w,x,C;const k=this._tables[0][4],D=this._tables[1],R=_.length;let M=1;if(R!==4&&R!==6&&R!==8)throw new Error("Invalid aes key size");const P=_.slice(0),E=[];for(this._key=[P,E],w=R;w<4*R+28;w++)C=P[w-1],(w%R===0||R===8&&w%R===4)&&(C=k[C>>>24]<<24^k[C>>16&255]<<16^k[C>>8&255]<<8^k[C&255],w%R===0&&(C=C<<8^C>>>24^M<<24,M=M<<1^(M>>7)*283)),P[w]=P[w-R]^C;for(x=0;w;x++,w--)C=P[x&3?w:w-4],w<=4||x<4?E[x]=C:E[x]=D[0][k[C>>>24]]^D[1][k[C>>16&255]]^D[2][k[C>>8&255]]^D[3][k[C&255]]}decrypt(_,w,x,C,k,D){const R=this._key[1];let M=_^R[0],P=C^R[1],E=x^R[2],I=w^R[3],O,L,F;const X=R.length/4-2;let ee,K=4;const Y=this._tables[1],Z=Y[0],le=Y[1],he=Y[2],te=Y[3],ie=Y[4];for(ee=0;ee<X;ee++)O=Z[M>>>24]^le[P>>16&255]^he[E>>8&255]^te[I&255]^R[K],L=Z[P>>>24]^le[E>>16&255]^he[I>>8&255]^te[M&255]^R[K+1],F=Z[E>>>24]^le[I>>16&255]^he[M>>8&255]^te[P&255]^R[K+2],I=Z[I>>>24]^le[M>>16&255]^he[P>>8&255]^te[E&255]^R[K+3],K+=4,M=O,P=L,E=F;for(ee=0;ee<4;ee++)k[(3&-ee)+D]=ie[M>>>24]<<24^ie[P>>16&255]<<16^ie[E>>8&255]<<8^ie[I&255]^R[K++],O=M,M=P,P=E,E=I,I=O}}class r extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(g){return g<<24|(g&65280)<<8|(g&16711680)>>8|g>>>24},o=function(g,_,w){const x=new Int32Array(g.buffer,g.byteOffset,g.byteLength>>2),C=new s(Array.prototype.slice.call(_)),k=new Uint8Array(g.byteLength),D=new Int32Array(k.buffer);let R,M,P,E,I,O,L,F,X;for(R=w[0],M=w[1],P=w[2],E=w[3],X=0;X<x.length;X+=4)I=a(x[X]),O=a(x[X+1]),L=a(x[X+2]),F=a(x[X+3]),C.decrypt(I,O,L,F,D,X),D[X]=a(D[X]^R),D[X+1]=a(D[X+1]^M),D[X+2]=a(D[X+2]^P),D[X+3]=a(D[X+3]^E),R=I,M=O,P=L,E=F;return k};class l{constructor(_,w,x,C){const k=l.STEP,D=new Int32Array(_.buffer),R=new Uint8Array(_.byteLength);let M=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(D.subarray(M,M+k),w,x,R)),M=k;M<D.length;M+=k)x=new Uint32Array([a(D[M-4]),a(D[M-3]),a(D[M-2]),a(D[M-1])]),this.asyncStream_.push(this.decryptChunk_(D.subarray(M,M+k),w,x,R));this.asyncStream_.push(function(){C(null,e(R))})}static get STEP(){return 32e3}decryptChunk_(_,w,x,C){return function(){const k=o(_,w,x);C.set(k,_.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var d=c,f=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},p=d.BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000"),function(){var g=new Uint16Array([65484]),_=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"}();const b=function(g){const _={};return Object.keys(g).forEach(w=>{const x=g[w];f(x)?_[w]={bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:_[w]=x}),_};self.onmessage=function(g){const _=g.data,w=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),x=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),C=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new l(w,x,C,function(k,D){self.postMessage(b({source:_.source,decrypted:D}),[D.buffer])})}}));var vq=Zw(yq);const bq=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},mC=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Pm=(t,e)=>{e.activePlaylistLoader=t,t.load()},_q=(t,e)=>()=>{const{segmentLoaders:{[t]:i,main:n},mediaTypes:{[t]:s}}=e,r=s.activeTrack(),a=s.getActiveGroup(),o=s.activePlaylistLoader,l=s.lastGroup_;if(!(a&&l&&a.id===l.id)&&(s.lastGroup_=a,s.lastTrack_=r,mC(i,s),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}i.resyncLoader(),Pm(a.playlistLoader,s)}},Tq=(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;n.lastGroup_=null,i.abort(),i.pause()},xq=(t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:n,main:s},mediaTypes:{[t]:r}}=e,a=r.activeTrack(),o=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if(!(u&&a&&u.id===a.id)&&(r.lastGroup_=o,r.lastTrack_=a,mC(n,r),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;r.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),i.pause(),s.resetEverything(),c.fastQualityChange_(d);return}if(t==="AUDIO"){if(!o.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(l===o.playlistLoader){Pm(o.playlistLoader,r);return}n.track&&n.track(a),n.resetEverything(),Pm(o.playlistLoader,r)}},Id={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:i},excludePlaylist:n}=e,s=i.activeTrack(),r=i.activeGroup(),a=(r.filter(l=>l.default)[0]||r[0]).id,o=i.tracks[a];if(s===o){n({error:{message:"Problem encountered loading the default audio track."}});return}ne.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in i.tracks)i.tracks[l].enabled=i.tracks[l]===o;i.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:i}}=e;ne.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=i.activeTrack();n&&(n.mode="disabled"),i.onTrackChanged()}},iT={AUDIO:(t,e,i)=>{if(!e)return;const{tech:n,requestOptions:s,segmentLoaders:{[t]:r}}=i;e.on("loadedmetadata",()=>{const a=e.media();r.playlist(a,s),(!n.paused()||a.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Id[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:n,requestOptions:s,segmentLoaders:{[t]:r},mediaTypes:{[t]:a}}=i;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,s),r.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Id[t](t,i))}},Sq={AUDIO:(t,e)=>{const{vhs:i,sourceType:n,segmentLoaders:{[t]:s},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[t]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,d=Ou(c.main);(!a[t]||Object.keys(a[t]).length===0)&&(a[t]={main:{default:{default:!0}}},d&&(a[t].main.default.playlists=c.main.playlists));for(const f in a[t]){o[f]||(o[f]=[]);for(const p in a[t][f]){let b=a[t][f][p],g;if(d?(u(`AUDIO group '${f}' label '${p}' is a main playlist`),b.isMainPlaylist=!0,g=null):n==="vhs-json"&&b.playlists?g=new Qa(b.playlists[0],i,r):b.resolvedUri?g=new Qa(b.resolvedUri,i,r):b.playlists&&n==="dash"?g=new Em(b.playlists[0],i,r,c):g=null,b=yt({id:p,playlistLoader:g},b),iT[t](t,b.playlistLoader,e),o[f].push(b),typeof l[p]>"u"){const _=new ne.AudioTrack({id:p,kind:bq(b),enabled:!1,language:b.language,default:b.default,label:p});l[p]=_}}}s.on("error",Id[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:n,sourceType:s,segmentLoaders:{[t]:r},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const d in o[t]){l[d]||(l[d]=[]);for(const f in o[t][d]){if(!n.options_.useForcedSubtitles&&o[t][d][f].forced)continue;let p=o[t][d][f],b;if(s==="hls")b=new Qa(p.resolvedUri,n,a);else if(s==="dash"){if(!p.playlists.filter(_=>_.excludeUntil!==1/0).length)return;b=new Em(p.playlists[0],n,a,c)}else s==="vhs-json"&&(b=new Qa(p.playlists?p.playlists[0]:p.resolvedUri,n,a));if(p=yt({id:f,playlistLoader:b},p),iT[t](t,p.playlistLoader,e),l[d].push(p),typeof u[f]>"u"){const g=i.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;u[f]=g}}}r.on("error",Id[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:n},mediaTypes:{[t]:{groups:s,tracks:r}}}=e;for(const a in n[t]){s[a]||(s[a]=[]);for(const o in n[t][a]){const l=n[t][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=i.options_.vhs&&i.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=yt(c,u[c.instreamId])),c.default===void 0&&delete c.default,s[a].push(yt({id:o},l)),typeof r[o]>"u"){const d=i.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;r[o]=d}}}}},gC=(t,e)=>{for(let i=0;i<t.length;i++)if(c0(e,t[i])||t[i].playlists&&gC(t[i].playlists,e))return!0;return!1},wq=(t,e)=>i=>{const{mainPlaylistLoader:n,mediaTypes:{[t]:{groups:s}}}=e,r=n.media();if(!r)return null;let a=null;r.attributes[t]&&(a=s[r.attributes[t]]);const o=Object.keys(s);if(!a)if(t==="AUDIO"&&o.length>1&&Ou(e.main))for(let l=0;l<o.length;l++){const u=s[o[l]];if(gC(u,r)){a=u;break}}else s.main?a=s.main:o.length===1&&(a=s[o[0]]);return typeof i>"u"?a:i===null||!a?null:a.filter(l=>l.id===i.id)[0]||null},Cq={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].enabled)return i[n];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].mode==="showing"||i[n].mode==="hidden")return i[n];return null}},Eq=(t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null},Dq=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{Sq[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:i,tech:n,vhs:s,segmentLoaders:{["AUDIO"]:r,main:a}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=wq(u,t),e[u].activeTrack=Cq[u](u,t),e[u].onGroupChanged=_q(u,t),e[u].onGroupChanging=Tq(u,t),e[u].onTrackChanged=xq(u,t),e[u].getActiveGroup=Eq(u,t)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),r.setAudio(!0)):a.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},kq=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:js,activeTrack:js,getActiveGroup:js,onGroupChanged:js,onTrackChanged:js,lastTrack_:null,logger_:wn(`MediaGroups[${e}]`)}}),t};class nT{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Wi(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(i=>[i.ID,i])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Aq extends ne.EventTarget{constructor(e,i){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new nT,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=wn("Content Steering"),this.xhr_=e,this.getBandwidth_=i}assignTagProperties(e,i){this.manifestType_=i.serverUri?"HLS":"DASH";const n=i.serverUri||i.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=Wi(e,n),this.defaultPathway=i.pathwayId||i.defaultServiceLocation,this.queryBeforeStart=i.queryBeforeStart,this.proxyServerUrl_=i.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const i=this.steeringManifest.reloadUri;if(!i)return;const n=e?i:this.getRequestURI(i);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const s={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(r,a)=>{if(r){if(a.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:s});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:ne.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const i=new q.URL(e),n=new q.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(i.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const i=JSON.parse(q.atob(e));this.assignSteeringProperties_(i)}setSteeringParams_(e){const i=new q.URL(e),n=this.getPathway(),s=this.getBandwidth_();if(n){const r=`_${this.manifestType_}_pathway`;i.searchParams.set(r,n)}if(s){const r=`_${this.manifestType_}_throughput`;i.searchParams.set(r,s)}return i.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(s=>{for(const r of s)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const i=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!i(s))return s}const n=this.setSteeringParams_(e);return i(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const i=e*1e3;this.ttlTimeout_=q.setTimeout(()=>{this.requestSteeringManifest()},i)}clearTTLTimeout_(){q.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new nT}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,i){return!i&&this.steeringManifest.reloadUri||i&&(Wi(e,i.serverURL)!==this.steeringManifest.reloadUri||i.defaultServiceLocation!==this.defaultPathway||i.queryBeforeStart!==this.queryBeforeStart||i.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const Iq=(t,e)=>{let i=null;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(null,n)},e)}},Pq=10;let br;const Oq=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Rq=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},Mq=function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:n,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:a,bufferBasedABR:o,log:l}){if(!n)return ne.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${n.id}`;if(!t)return l(`${u} as current playlist is not set`),!0;if(n.id===t.id)return!1;const c=!!Ya(e,i).length;if(!t.endList)return!c&&typeof t.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=o0(e,i),f=o?ni.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ni.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const p=n.attributes.BANDWIDTH,b=t.attributes.BANDWIDTH;if(p<b&&(!o||d<r)){let g=`${u} as next bandwidth < current bandwidth (${p} < ${b})`;return o&&(g+=` and forwardBuffer < bufferHighWaterLine (${d} < ${r})`),l(g),!0}if((!o||p>b)&&d>=s){let g=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${s})`;return o&&(g+=` and next bandwidth > current bandwidth (${p} > ${b})`),l(g),!0}return l(`not ${u} as no switching criteria met`),!1};class Lq extends ne.EventTarget{constructor(e){super(),this.fastQualityChange_=Iq(this.fastQualityChange_.bind(this),100);const{src:i,withCredentials:n,tech:s,bandwidth:r,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:f,leastPixelDiffSelector:p,captionServices:b,experimentalUseMMS:g}=e;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:_}=e;(_===null||typeof _>"u")&&(_=1/0),br=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!p,this.withCredentials=n,this.tech_=s,this.vhs_=s.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=_,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:_,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=kq(),g&&q.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new q.ManagedMediaSource,this.usingManagedMediaSource_=!0,ne.log("Using ManagedMediaSource")):q.MediaSource&&(this.mediaSource=new q.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=li(),this.hasPlayed_=!1,this.syncController_=new mq(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new vq,this.sourceUpdater_=new fC(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new gq,this.keyStatusMap_=new Map;const w={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:b,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Em(i,this.vhs_,yt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Qa(i,this.vhs_,yt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Am(yt(w,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Am(yt(w,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new cq(yt(w,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((k,D)=>{function R(){s.off("vttjserror",M),k()}function M(){s.off("vttjsloaded",R),D()}s.one("vttjsloaded",R),s.one("vttjserror",M),s.addWebVttScript_()})}),e);const x=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Aq(this.vhs_.xhr,x),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Oq.forEach(k=>{this[k+"_"]=Rq.bind(this,k)}),this.logger_=wn("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const C=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(C,()=>{const k=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-k,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return e===-1||i===-1?-1:e+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,e)}switchMedia_(e,i,n){const s=this.media(),r=s&&(s.id||s.uri),a=e&&(e.id||e.uri);if(r&&r!==a){this.logger_(`switch media ${r} -> ${a} from ${i}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:i};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const i=this.mediaTypes_[e],n=i?i.activeGroup():null,s=this.contentSteeringController_.getPathway();if(n&&s){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===s);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=q.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(q.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;const n=e.mediaGroups.AUDIO,s=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||s.length&&n[s[0]];for(const l in o)if(o[l].default){r={label:l};break}}if(!r)return i;const a=[];for(const o in n)if(n[o][r.label]){const l=n[o][r.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const i=this.mainPlaylistLoader_.media(),n=i.targetDuration*1.5*1e3;Tm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,i.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.mainSegmentLoader_.load()),Dq({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),i),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let i=this.mainPlaylistLoader_.media();if(!i){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;i=this.initialMedia_}this.handleUpdatedMediaPlaylist(i)}),this.mainPlaylistLoader_.on("error",()=>{const i=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const i=this.mainPlaylistLoader_.media(),n=i.targetDuration*1.5*1e3;Tm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const i=this.mainPlaylistLoader_.media();if(i.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(i)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(i=>{this.mainPlaylistLoader_.on(i,n=>{this.player_.trigger(Xt({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,i){const n=e.mediaGroups||{};let s=!0;const r=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),br.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),a=this.tech_.buffered();return Mq({buffered:a,currentTime:n,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const s=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(s)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Pq}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,s=>{this.player_.trigger(Xt({},s))}),this.audioSegmentLoader_.on(n,s=>{this.player_.trigger(Xt({},s))}),this.subtitleSegmentLoader_.on(n,s=>{this.player_.trigger(Xt({},s))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const i=this.seekable();if(!i.length)return!1;const n=i.end(0);let s=n;if(e.start){const r=e.start.timeOffset;r<0?s=Math.max(n+r,i.start(0)):s=Math.min(n,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();!i||i.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const s=br.Playlist.playlistEnd(e,n),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return s-r<=bs;const o=a.end(a.length-1);return o-r<=bs&&s-o<=bs}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||i.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(Ih),a=r.length===1&&r[0]===e;if(s.length===1&&n!==1/0)return ne.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const b=this.pathwayAttribute_(e),g=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(b),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(b)},g);return}let p=!1;s.forEach(b=>{if(b===e)return;const g=b.excludeUntil;typeof g<"u"&&g!==1/0&&(p=!0,delete b.excludeUntil)}),p&&(ne.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,i.reason&&(e.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=i.internal?this.logger_:ne.log.warn,c=i.message?" "+i.message:"";u(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,i){const n=[],s=e==="all";(s||e==="main")&&n.push(this.mainPlaylistLoader_);const r=[];(s||e==="audio")&&r.push("AUDIO"),(s||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>i.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const i=Ya(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:br.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,i){const n=e.media();if(!n)return null;const s=this.syncController_.getMediaSequenceSync(i);if(s&&s.isReliable){const o=s.start,l=s.end;if(!isFinite(o)||!isFinite(l))return null;const u=br.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n),c=Math.max(o,l-u);return li([[o,c]])}const r=this.syncController_.getExpiredTime(n,this.duration());if(r===null)return null;const a=br.Playlist.seekable(n,r,br.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return a.length?a:null}computeFinalSeekable_(e,i){if(!i)return e;const n=e.start(0),s=e.end(0),r=i.start(0),a=i.end(0);return r>s||n>a?e:li([[Math.max(n,r),Math.min(s,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let i;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!i))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,i),!this.seekable_||n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Ew(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const i=this.tech_.buffered();let n=br.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const i=this.mediaTypes_[e].groups;for(const n in i)i[n].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!i||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Ql(this.main(),i),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=n.video||e.main.videoCodec||T7),e.main.isMuxed&&(s.video+=`,${n.audio||e.main.audioCodec||jb}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(s.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||jb,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?Wl(c,this.usingManagedMediaSource_):np(c),o={};let l;if(["video","audio"].forEach(function(u){if(s.hasOwnProperty(u)&&!a(e[u].isFmp4,s[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(s[u]),u==="audio"&&(l=c)}}),r&&l&&i.attributes.AUDIO){const u=i.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==i&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${s.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,d)=>(c&&(c+=", "),c+=`${d} does not support codec(s): "${o[d].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const d=(ps(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(ps(s[c]||"")[0]||{}).type;d&&f&&d.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${s[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const e=this.main().playlists,i=[];Object.keys(e).forEach(n=>{const s=e[n];if(i.indexOf(s.id)!==-1)return;i.push(s.id);const r=Ql(this.main,s),a=[];r.audio&&!np(r.audio)&&!Wl(r.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${r.audio}`),r.video&&!np(r.video)&&!Wl(r.video,this.usingManagedMediaSource_)&&a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const i=[],n=this.main().playlists,s=bu(ps(e)),r=$_(s),a=s.video&&ps(s.video)[0]||null,o=s.audio&&ps(s.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(i.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;i.push(u.id);const c=[],d=Ql(this.mainPlaylistLoader_.main,u),f=$_(d);if(!(!d.audio&&!d.video)){if(f!==r&&c.push(`codec count "${f}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const p=d.video&&ps(d.video)[0]||null,b=d.audio&&ps(d.audio)[0]||null;p&&a&&p.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${p.type}" !== "${a.type}"`),b&&o&&b.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${b.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let i=0;const n=this.seekable();n.length&&(i=n.start(0)),hq(e,this.cueTagsTrack_,i)}goalBufferLength(){const e=this.tech_.currentTime(),i=ni.GOAL_BUFFER_LENGTH,n=ni.GOAL_BUFFER_LENGTH_RATE,s=Math.max(i,ni.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*n,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),i=ni.BUFFER_LOW_WATER_LINE,n=ni.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(i,ni.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(i,ni.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*n,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return ni.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){G_(this.inbandTextTracks_,"com.apple.streaming",this.tech_),jH({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,i,n){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();G_(this.inbandTextTracks_,e,this.tech_),VH({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:s,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const i of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(i));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(i=>{this.contentSteeringController_.on(i,n=>{this.trigger(Xt({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const i=this.main();(this.contentSteeringController_.didDASHTagChange(i.uri,i.contentSteering)||(()=>{const r=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of i.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!r.has(l)))return!0}return!!(!a.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,s=new Set;let r=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!s.has(o.id)&&u&&d&&(s.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const i=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||s&&s.size){for(const[a,o]of n.entries())s.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of s.entries()){const l=n.get(a);if(!l){i.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,i){if(e["BASE-ID"]!==i["BASE-ID"]||e.ID!==i.ID||e["URI-REPLACEMENT"].HOST!==i["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,s=i["URI-REPLACEMENT"].PARAMS;for(const r in n)if(n[r]!==s[r])return!1;for(const r in s)if(n[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const i="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=this.mainPlaylistLoader_.getKeyIdSet(n);!s||!s.size||s.forEach(r=>{const a="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,l=n.lastExcludeReason_===i&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${r} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==i&&(n.excludeUntil=1/0,n.lastExcludeReason_=i,this.logger_(`excluding playlist ${n.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,r=n.excludeUntil===1/0&&n.lastExcludeReason_===i;s&&r&&(delete n.excludeUntil,ne.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${i} key IDs`))})}addKeyStatus_(e,i){const r=(typeof e=="string"?e:lq(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${i}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,i)}updatePlaylistByKeyStatus(e,i){this.addKeyStatus_(e,i),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const Bq=(t,e,i)=>n=>{const s=t.main.playlists[e],r=u0(s),a=Ih(s);if(typeof n>"u")return a;n?delete s.disabled:s.disabled=!0;const o={renditionInfo:{id:e,bandwidth:s.attributes.BANDWIDTH,resolution:s.attributes.RESOLUTION,codecs:s.attributes.CODECS},cause:"fast-quality"};return n!==a&&!r&&(n?(i(s),t.trigger({type:"renditionenabled",metadata:o})):t.trigger({type:"renditiondisabled",metadata:o})),n};class Nq{constructor(e,i,n){const{playlistController_:s}=e,r=s.fastQualityChange_.bind(s);if(i.attributes){const a=i.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=Ql(s.main(),i),this.playlist=i,this.id=n,this.enabled=Bq(e.playlists,i.id,r)}}const Fq=function(t){t.representations=()=>{const e=t.playlistController_.main(),i=Ou(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter(n=>!u0(n)).map((n,s)=>new Nq(t,n,n.id)):[]}},sT=["seeking","seeked","pause","playing","error"];class $q extends ne.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=wn("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(d=>{a[`${d}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(sT,r),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(sT,r),this.tech_.off("canplay",n),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=q.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const i=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=i.buffered_()}checkSegmentDownloads_(e){const i=this.playlistController_,n=i[`${e}SegmentLoader_`],s=n.buffered_(),r=wV(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,r){const a={bufferedRanges:s};i.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:aa(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+bs>=i.end(i.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(li([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(i,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(s&&(r=i.end(i.length-1)),this.beforeSeekableWindow_(i,n)){const b=i.start(0);r=b+(b===i.end(0)?0:bs)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${Ew(i)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),d=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-vs)*2,f=[l,u];for(let b=0;b<f.length;b++){if(!f[b])continue;if(o0(f[b],n)<d)return!1}const p=Rc(o,n);return p.length===0?!1:(r=p.start(0)+bs,this.logger_(`Buffered region starts (${p.start(0)})  just beyond seek point (${n}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),i=this.tech_.buffered(),n=Ya(i,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,i)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=Rc(s,i);return a.length>0?(this.logger_(`Stopped at ${i} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0):!1}afterSeekableWindow_(e,i,n,s=!1){if(!e.length)return!1;let r=e.end(e.length-1)+bs;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||s)&&(r=e.end(e.length-1)+n.targetDuration*3),i>r}beforeSeekableWindow_(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:i,currentTime:n}){if(!e)return;let s;if(e.length&&i.length){const r=Ya(e,n-3),a=Ya(e,n),o=Ya(i,n);o.length&&!a.length&&r.length&&(s={start:r.end(0),end:o.end(0)})}else Rc(e,n).length||(s=this.gapFromVideoUnderflow_(e,n));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const i=this.tech_.buffered(),n=this.tech_.currentTime(),s=Rc(i,n);if(this.resetTimeUpdate_(),s.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+vs);const r={gapInfo:{from:n,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,i){const n=TV(e);for(let s=0;s<n.length;s++){const r=n.start(s),a=n.end(s);if(i-r<4&&i-r>2)return{start:r,end:a}}return null}}const Uq={errorInterval:30,getSource(t){const i=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(i)}},yC=function(t,e){let i=0,n=0;const s=yt(Uq,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){n&&t.currentTime(n)},a=function(c){c!=null&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",r),t.src(c),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},o=function(){if(Date.now()-i<s.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){ne.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),s.getSource.call(t,a)},l=function(){t.off("loadedmetadata",r),t.off("error",o),t.off("dispose",l)},u=function(c){l(),yC(t,c)};t.on("error",o),t.on("dispose",l),t.reloadSourceOnError=u},zq=function(t){yC(this,t)};var vC="3.17.0",Vq="7.1.0",Hq="1.3.1",qq="7.2.0",jq="4.0.2";const Nt={PlaylistLoader:Qa,Playlist:Gi,utils:YV,STANDARD_PLAYLIST_SELECTOR:W_,INITIAL_PLAYLIST_SELECTOR:NH,lastBandwidthSelector:W_,movingAverageBandwidthSelector:LH,comparePlaylistBandwidth:h0,comparePlaylistResolution:MH,xhr:jw()};Object.keys(ni).forEach(t=>{Object.defineProperty(Nt,t,{get(){return ne.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),ni[t]},set(e){if(ne.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){ne.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}ni[t]=e}})});const bC="videojs-vhs",_C=function(t,e){const i=e.media();let n=-1;for(let s=0;s<t.length;s++)if(t[s].id===i.id){n=s;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})},Wq=function(t,e){e.representations().forEach(i=>{t.addQualityLevel(i)}),_C(t,e.playlists)};Nt.canPlaySource=function(){return ne.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Gq=(t,e,i)=>{if(!t)return t;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=bu(ps(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);const s=So(n.video),r=So(n.audio),a={};for(const o in t)a[o]={},r&&(a[o].audioContentType=r),s&&(a[o].videoContentType=s),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof t[o]=="string"&&(a[o].url=t[o]);return yt(t,a)},Xq=(t,e)=>t.reduce((i,n)=>{if(!n.contentProtection)return i;const s=e.reduce((r,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(r[a]={pssh:o.pssh}),r},{});return Object.keys(s).length&&i.push(s),i},[]),Kq=({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:n})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const s=i?n.concat([i]):n,r=Xq(s,Object.keys(e)),a=[],o=[];return r.forEach(l=>{o.push(new Promise((u,c)=>{t.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{t.eme.initializeMediaKeys({keySystems:l},d=>{if(d){c(d);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Yq=({player:t,sourceKeySystems:e,media:i,audioMedia:n})=>{const s=Gq(e,i,n);return s?(t.currentSource().keySystems=s,s&&!t.eme?(ne.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},TC=()=>{if(!q.localStorage)return null;const t=q.localStorage.getItem(bC);if(!t)return null;try{return JSON.parse(t)}catch{return null}},Qq=t=>{if(!q.localStorage)return!1;let e=TC();e=e?yt(e,t):t;try{q.localStorage.setItem(bC,JSON.stringify(e))}catch{return!1}return e},Zq=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,xC=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},SC=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},wC=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},CC=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};Nt.supportsNativeHls=function(){if(!Ae||!Ae.createElement)return!1;const t=Ae.createElement("video");return ne.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))}):!1}();Nt.supportsNativeDash=function(){return!Ae||!Ae.createElement||!ne.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Ae.createElement("video").canPlayType("application/dash+xml"))}();Nt.supportsTypeNatively=t=>t==="hls"?Nt.supportsNativeHls:t==="dash"?Nt.supportsNativeDash:!1;Nt.isSupported=function(){return ne.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Nt.xhr.onRequest=function(t){xC(Nt.xhr,t)};Nt.xhr.onResponse=function(t){SC(Nt.xhr,t)};Nt.xhr.offRequest=function(t){wC(Nt.xhr,t)};Nt.xhr.offResponse=function(t){CC(Nt.xhr,t)};const Jq=ne.getComponent("Component");class EC extends Jq{constructor(e,i,n){if(super(i,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=wn("VhsHandler"),i.options_&&i.options_.playerId){const s=ne.getPlayer(i.options_.playerId);this.player_=s}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Ae,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=Ae.fullscreenElement||Ae.webkitFullscreenElement||Ae.mozFullScreenElement||Ae.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=yt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=TC();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=ni.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ni.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const i=this.options_.customPixelRatio;typeof i=="number"&&i>=0&&(this.customPixelRatio=i)}setOptions(e={}){this.setOptions_(e)}src(e,i){if(!e)return;this.setOptions_(),this.options_.src=Zq(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Nt,this.options_.sourceType=XS(i),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new Lq(this.options_);const n=yt({liveRangeSafeTimeDelta:bs},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new $q(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const r=ne.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),r.error(a)});const s=this.options_.bufferBasedABR?Nt.movingAverageBandwidthSelector(.55):Nt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=Nt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const a=q.navigator.connection||q.navigator.mozConnection||q.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&r>=o?r=Math.max(r,l):r=l}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(r+a))},set(){ne.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>aa(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>aa(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Qq({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Fq(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=q.URL.createObjectURL(this.playlistController_.mediaSource),(ne.browser.IS_ANY_SAFARI||ne.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Kq({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Yq({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!i){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=ne.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Wq(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{_C(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":vC,"mux.js":Vq,"mpd-parser":Hq,"m3u8-parser":qq,"aes-decrypter":jq}}version(){return this.constructor.version()}canChangeType(){return fC.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&q.URL.revokeObjectURL&&(q.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,i){return nH({playlist:this.playlistController_.media(),time:e,callback:i})}seekToProgramTime(e,i,n=!0,s=2){return Yw({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}setupXhrHooks_(){this.xhr.onRequest=e=>{xC(this.xhr,e)},this.xhr.onResponse=e=>{SC(this.xhr,e)},this.xhr.offRequest=e=>{wC(this.xhr,e)},this.xhr.offResponse=e=>{CC(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],i=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,s=>{this.player_.trigger(Xt({},s))})}),i.forEach(n=>{this.playbackWatcher_.on(n,s=>{this.player_.trigger(Xt({},s))})})}}const Pd={name:"videojs-http-streaming",VERSION:vC,canHandleSource(t,e={}){const i=yt(ne.options,e);return!i.vhs.experimentalUseMMS&&!Wl("avc1.4d400d,mp4a.40.2",!1)?!1:Pd.canPlayType(t.type,i)},handleSource(t,e,i={}){const n=yt(ne.options,i);return e.vhs=new EC(t,e,n),e.vhs.xhr=jw(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const i=XS(t);if(!i)return"";const n=Pd.getOverrideNative(e);return!Nt.supportsTypeNatively(i)||n?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,i=!(ne.browser.IS_ANY_SAFARI||ne.browser.IS_IOS),{overrideNative:n=i}=e;return n}},ej=()=>Wl("avc1.4d400d,mp4a.40.2",!0);ej()&&ne.getTech("Html5").registerSourceHandler(Pd,0);ne.VhsHandler=EC;ne.VhsSourceHandler=Pd;ne.Vhs=Nt;ne.use||ne.registerComponent("Vhs",Nt);ne.options.vhs=ne.options.vhs||{};(!ne.getPlugin||!ne.getPlugin("reloadSourceOnError"))&&ne.registerPlugin("reloadSourceOnError",zq);const tj={class:"video-wrapper"},ij=["src"],nj={__name:"VideoPlayer",props:{videoSrc:{type:String,required:!0}},setup(t){const e=t;re(()=>withBase(e.videoSrc));const i=oe(null);let n=null;return Lt(()=>{n=ne(i.value,{controls:!0,fluid:!0,playbackRates:[.5,1,1.5,2]})}),Qn(()=>{n&&n.dispose()}),(s,r)=>(Ir(),Xm("div",tj,[Zc("video",{ref_key:"videoPlayer",ref:i,class:"video-js vjs-default-skin vjs-big-play-centered",controls:"",preload:"auto",width:"100%",height:"auto"},[Zc("source",{src:t.videoSrc,type:"video/mp4"},null,8,ij)],512)]))}};let ja;const sj=Te({props:{id:{type:String,required:!0},options:{type:Object},url:{type:String},particlesLoaded:{type:Function},particlesInit:{type:Function}},mounted(){et(async()=>{if(!this.id)throw new Error("Prop 'id' is required!");Vl.init(),this.particlesInit&&await this.particlesInit(Vl),ja=await Vl.load({id:this.id,url:this.url,options:this.options}),this.particlesLoaded&&ja&&this.particlesLoaded(ja)})},unmounted(){ja&&(ja.destroy(),ja=void 0)}}),rj=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},aj=["id"];function oj(t,e,i,n,s,r){return Ir(),Xm("div",{id:t.id},null,8,aj)}const rT=rj(sj,[["render",oj]]),lj=t=>{t.component("Particles",rT),t.component("vue-particles",rT)},Wo=bx(vL),uj=jA();Wo.use(a1);Wo.use(uj);Wo.use(jU);Wo.use(lj);Wo.component("VideoPlayer",nj);Wo.mount("#app");export{vj as A,zt as F,Qe as I,xa as T,FU as U,r1 as _,Mt as a,Qn as b,re as c,Te as d,T as e,Hd as f,fj as g,Xm as h,mo as i,Ir as j,Zc as k,pj as l,uk as m,et as n,Lt as o,KI as p,Si as q,oe as r,Zp as s,Tk as t,mn as u,nu as v,Re as w,dj as x,hj as y};
